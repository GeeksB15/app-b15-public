!function(e){e.fn.numeric=function(r,i,t){return i=!1===i?"":i||",",r=!1===r?0:r||0,t="function"==typeof t?t:function(){},this.each((function(){var r=e(this).attr("decimalPlaces");if(r){var t=e(this).val();""!=t&&(e(this)[0].value=number_format(parseFloat(t),r,i,""))}})),this.data("numeric.decimal",i).data("numeric.decimalPlaces",r).data("numeric.callback",t).keypress(e.fn.numeric.keypress).blur(e.fn.numeric.blur)},e.fn.numeric.keypress=function(r){var i=e.data(this,"numeric.decimal"),t=r.charCode?r.charCode:r.keyCode?r.keyCode:0;if(13==t&&"input"==this.nodeName.toLowerCase())return!0;if(13==t)return!1;var a=!1;if(r.ctrlKey&&97==t||r.ctrlKey&&65==t)return!0;if(r.ctrlKey&&120==t||r.ctrlKey&&88==t)return!0;if(r.ctrlKey&&99==t||r.ctrlKey&&67==t)return!0;if(r.ctrlKey&&122==t||r.ctrlKey&&90==t)return!0;if(r.ctrlKey&&118==t||r.ctrlKey&&86==t||r.shiftKey&&45==t)return!0;if((t<48||t>57)&&!r.shiftKey&&45!=t&&0!=t){if(45==t&&0==this.value.length)return!0;if(i&&t==i.charCodeAt(0)&&-1!=this.value.indexOf(i)&&(a=!1),8!=t&&9!=t&&13!=t&&35!=t&&36!=t&&37!=t&&39!=t&&46!=t)a=!1;else if(void 0!==r.charCode)if(r.keyCode==r.which&&0!=r.which){if(a=!0,46==r.which){var n=this;setTimeout((function(){n.value=n.value.replace(".",",")}),0)}}else 0!=r.keyCode&&0==r.charCode&&0==r.which&&(a=!0);i&&t==i.charCodeAt(0)&&(a=-1==this.value.indexOf(i))}else a=!0;return a},e.fn.numeric.blur=function(){var r=e.data(this,"numeric.decimal"),i=e.data(this,"numeric.decimalPlaces"),t=e.data(this,"numeric.callback"),a=e(this).val();""!=a&&(new RegExp("^\\d+$|\\d*"+r+"\\d+").exec(a)||t.apply(this),e(this)[0].value=number_format(parseFloat(a),i,r,""))},e.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.callback",null).unbind("keypress",e.fn.numeric.keypress).unbind("blur",e.fn.numeric.blur)}}(jQuery);