Geeks.ERP.PromptDialog=function(sender,label){return{Render:function(fieldValue){with(Geeks.ERP.PromptTexto){var defer=$.Deferred(),ulBotoes,promptBody=$("#BodyText_"+label);if(promptBody.length<=0){promptBody=$(Geeks.ERP.UI.Template.Get("ContentBodyTemplate").format({Codigo:"#BodyText_"+label})),$(promptBody).appendTo($(sender).parents("[ref=contentBody]")[0]),$("<div></div>").appendTo(promptBody),promptBody.find(".contentTop").css("display","none");var diag=promptBody.dialog({title:label,width:"50%",height:60*$(window).height()/100,resizable:!0,modal:!0,close:function(){promptBody.remove()}});diag.dialog("open"),ulBotoes=$("<ul name='MenuBotoes'><ul>").prependTo(promptBody.find(".breadLine > .breadLinks")),ulBotoes.append(Geeks.ERP.UI.Tela.MontaBotoes([{Nome:"Selecionar",Valor:"Selecionar",CodigoBotao:"P1",Icone:"icon-checkmark"},{Nome:"Cancelar",Valor:"Cancelar",CodigoBotao:"P2",Icone:"icon-minus"}],null)),ulBotoes.find("a[name=btn_Selecionar]").click((function(){defer.resolve(promptBody.find("textarea[name=promptText_"+label+"]").val()),diag.dialog("close")})),ulBotoes.find("a[name=btn_Cancelar]").click((function(){defer.resolve(""),diag.dialog("close")})),$('<textarea name="promptText_'+label+'" id="promptText_'+label+'" rows="" style="width: 703px; height: 417px; resize: none;" ></textarea> ').appendTo(promptBody.find(".fluid")).val(fieldValue.replace(/\\n/g,"\n").replace(/\\r/g,"\r"))}else promptBody.dialog("open");var resizeFunction=function(){var e=promptBody.outerHeight();promptBody.find("textarea").parents(".wrapper").siblings(":visible").each((function(o,t){e-=$(t).outerHeight()})),e-=15,promptBody.find("textarea").height(e)};return resizeFunction(),promptBody.resize(resizeFunction),defer.promise()}},Show:function(e,o){this.Render(e).then((function(e){return o&&o(e),$.Deferred().resolve()}))}}},Geeks.ERP.PromptTexto=function(sender,campo){return{Render:function(fieldValue){with(Geeks.ERP.PromptTexto){var defer=$.Deferred(),ulBotoes,promptBody=$("#BodyText_"+campo.Id);if(promptBody.length<=0){promptBody=$(Geeks.ERP.UI.Template.Get("ContentBodyTemplate").format({Codigo:"#BodyText_"+campo.Id})),$(promptBody).appendTo($(sender).parents("[ref=contentBody]")[0]),$("<div></div>").appendTo(promptBody),promptBody.find(".contentTop").css("display","none");var diag=promptBody.dialog({title:campo.Label,width:"50%",height:60*$(window).height()/100,resizable:!0,modal:!0,close:function(){promptBody.remove()}});diag.dialog("open"),ulBotoes=$("<ul name='MenuBotoes'><ul>").prependTo(promptBody.find(".breadLine > .breadLinks")),ulBotoes.append(Geeks.ERP.UI.Tela.MontaBotoes([{Nome:"Selecionar",Valor:"Selecionar",CodigoBotao:"P1",Icone:"icon-checkmark"},{Nome:"Cancelar",Valor:"Cancelar",CodigoBotao:"P2",Icone:"icon-minus"}],null)),ulBotoes.find("a[name=btn_Selecionar]").click((function(){defer.resolve(promptBody.find("textarea[name=promptText_"+campo.Id+"]").val()),diag.dialog("close")})),ulBotoes.find("a[name=btn_Cancelar]").click((function(){defer.resolve(null),diag.dialog("close")})),$('<textarea name="promptText_'+campo.Id+'" id="promptText_'+campo.Id+'" rows="" style="width: 703px; height: 417px; resize: none;" ></textarea> ').appendTo(promptBody.find(".fluid")).val(fieldValue.replace(/\\n/g,"\n").replace(/\\r/g,"\r"))}else promptBody.dialog("open");var resizeFunction=function(){var e=promptBody.outerHeight();promptBody.find("textarea").parents(".wrapper").siblings(":visible").each((function(o,t){e-=$(t).outerHeight()})),e-=15,promptBody.find("textarea").height(e)};return resizeFunction(),promptBody.resize(resizeFunction),defer.promise()}},Show:function(e,o){this.Render(e).then((function(e){var t="";return $(sender).siblings("textarea").length>0&&(t=$(sender).siblings("textarea").attr("name")),(e||""==e)&&($(sender).length>0&&$(sender).siblings("textarea[name="+t+"]").val(e.replace(/\\n/g,"\n").replace(/\\r/g,"\r")),o&&o(e)),$.Deferred().resolve()}))}}},Geeks.ERP.PromptHtml=function(sender,campo){return{Render:function(fieldValue){with(Geeks.ERP.PromptTexto){var defer=$.Deferred(),ulBotoes,promptBody=$("#BodyText_"+campo.Id);if(promptBody.length<=0){promptBody=$(Geeks.ERP.UI.Template.Get("ContentBodyTemplate").format({Codigo:"#BodyText_"+campo.Id})),$(promptBody).appendTo($(sender).parents("[ref=contentBody]")[0]),$("<div></div>").appendTo(promptBody),promptBody.find(".contentTop").css("display","none");var diag=promptBody.dialog({title:campo.Label,width:"50%",height:60*$(window).height()/100,resizable:!0,modal:!0,close:function(){promptBody.remove()}});diag.dialog("open"),ulBotoes=$("<ul name='MenuBotoes'><ul>").prependTo(promptBody.find(".breadLine > .breadLinks")),ulBotoes.append(Geeks.ERP.UI.Tela.MontaBotoes([{Nome:"Selecionar",Valor:"Selecionar",CodigoBotao:"P1",Icone:"icon-checkmark"},{Nome:"Cancelar",Valor:"Cancelar",CodigoBotao:"P2",Icone:"icon-minus"}],null)),ulBotoes.find("a[name=btn_Selecionar]").click((function(){defer.resolve(promptBody.find("textarea[name=promptText_"+campo.Id+"]").val()),diag.dialog("close")})),ulBotoes.find("a[name=btn_Cancelar]").click((function(){defer.resolve(null),diag.dialog("close")})),$('<textarea name="promptText_'+campo.Id+'" id="promptText_'+campo.Id+'" rows="" >'+fieldValue+"</textarea> ").appendTo(promptBody.find(".fluid")),promptBody.find("textarea[name=promptText_"+campo.Id+"]").addClass("editor").cleditor();var resizeFunction=function(){var e=promptBody.outerHeight();promptBody.find(".cleditorMain").parents(".wrapper").siblings(":visible").each((function(o,t){e-=$(t).outerHeight()})),promptBody.find(".cleditorMain").height(e),e-=promptBody.find(".cleditorToolbar").outerHeight(),promptBody.find("textarea").height(e-20),promptBody.find("iframe").height(e)};resizeFunction(),promptBody.resize(resizeFunction)}else promptBody.dialog("open");return promptBody.find(".cleditorMain").css("width",""),promptBody.find(".cleditorToolbar").css("width",""),promptBody.find("iframe").css("width","100%"),promptBody.find("iframe").css("background-color","#ffffff"),defer.promise()}},Show:function(e,o){this.Render(e).then((function(e){var t="";return $(sender).siblings("input").length>0&&(t=$(sender).siblings("input").attr("name")),e&&($(sender).length>0&&$(sender).siblings("input[name="+t+"]").val(e),o&&o(e)),$.Deferred().resolve()}))}}};