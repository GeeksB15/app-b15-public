!function(t){t.ns||(t.ns={}),t.ns.cprogress=function(e,i){var o=this;o.$el=t(e),o.el=e,o.$el.data("ns.cprogress",o),o.options=t.extend({},t.ns.cprogress.defaultOptions,i),o.methods={init:function(){o.img1=new Image,o.img1.src=o.options.img1,o.img2=new Image,o.img2.src=o.options.img2,o.width=o.img1.width,o.height=o.img1.height,o.$progress=t("<div />").addClass("jCProgress"),mt=parseInt(o.$progress.css("marginTop").replace("ems","")),ml=parseInt(o.$progress.css("marginLeft").replace("ems","")),o.$progress.css("marginLeft",(o.$el.width()-o.width)/2+ml).css("marginTop",(o.$el.height()-o.height)/2+mt).css("opacity","0.0"),o.$percent=t("<div />").addClass("percent"),o.$ctx=t("<canvas />"),o.$ctx.attr("width",o.width),o.$ctx.attr("height",o.height),o.$el.prepend(o.$progress),o.$progress.append(o.$percent),o.$progress.append(o.$ctx),o.$progress.animate({opacity:1},500,(function(){})),o.ctx=o.$ctx[0].getContext("2d"),o.ctx.fillStyle="rgba(0,0,0,0.0)",o.i=0,o.j=0,o.stop=0,o.options.onInit(),o.methods.draw()},reloadImages:function(){o.img1=new Image,o.img1.src=o.options.img1,o.img2=new Image,o.img2.src=o.options.img2,o.width=o.img1.width,o.height=o.img1.height,o.$progress.css("marginLeft",(o.$el.width()-o.width)/2+ml).css("marginTop",(o.$el.height()-o.height)/2+mt),o.$ctx.attr("width",o.width),o.$ctx.attr("height",o.height),o.ctx=o.$ctx[0].getContext("2d"),o.ctx.fillStyle="rgba(0,0,0,0.0)"},coreDraw:function(){o.ctx.clearRect(0,0,o.width,o.height),o.ctx.save(),o.ctx.drawImage(o.img1,0,0),o.ctx.beginPath(),o.ctx.lineWidth=5,o.ctx.arc(o.width/2,o.height/2,o.height/2,o.i-Math.PI/2,o.j-Math.PI/2,!0),o.ctx.lineTo(o.width/2,o.height/2),o.ctx.closePath(),o.ctx.fill(),o.ctx.clip(),o.ctx.drawImage(o.img2,0,0),o.ctx.restore()},draw:function(){o&&(0!=o.width&&0!=o.height||o.methods.reloadImages(),0==o.options.showPercent?o.$percent.hide():o.$percent.show(),1!=o.stop&&o.options.percent-1<=o.options.limit&&(1==o.options.loop&&(o.options.limit=121),o.options.percent>=100&&o.options.percent<=o.options.limit&&(o.i=0,o.options.limit=o.options.limit-100),o.methods.coreDraw(),o.i=o.i+o.options.PIStep,o.options.percent=100*o.i/(2*Math.PI),o.options.percent<=o.options.limit?(setTimeout(o.methods.draw,o.options.speed),o.$percent.html(o.options.percent.toFixed(0)),o.options.onProgress(o.options.percent.toFixed(0))):(o.$percent.html(o.options.limit),o.methods.coreDraw(),o.options.onProgress(o.options.limit),o.options.onComplete(o.options.limit)),o.options.percent++))},destroy:function(){o.$progress.animate({opacity:0},500,(function(){o.$progress.remove(),o.stop=1,o=null}))}},o.public_methods={start:function(){o.stop=0,o.methods.draw()},stop:function(){o.stop=1},reset:function(){o.options.percent=0,o.i=0,o.methods.draw()},destroy:function(){o.methods.destroy()},options:function(e){return o.options=t.extend({},o.options,e),(e.img1||e.img2||e.img3)&&(o.methods.reloadImages(),o.methods.coreDraw()),o.methods.draw(),o.options}},o.methods.init()},t.ns.cprogress.defaultOptions={percent:0,img1:"v1.png",img2:"v2.png",speed:50,limit:48,loop:!1,showPercent:!0,PIStep:.05,onInit:function(){},onProgress:function(t){},onComplete:function(){}},t.fn.cprogress=function(e){return new t.ns.cprogress(this,e).public_methods}}(jQuery);