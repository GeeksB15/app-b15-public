/*! For license information please see jquery.ibutton.js.LICENSE.txt */
!function(n){n.iButton={version:"1.0.03",setDefaults:function(e){n.extend(i,e)}},n.fn.iButton=function(e){var i,a="string"==typeof arguments[0]&&arguments[0],s=a&&Array.prototype.slice.call(arguments,1)||arguments,l=0==this.length?null:n.data(this[0],"iButton");return l&&a&&this.length?"object"==a.toLowerCase()?l:l[a]?(this.each((function(e){var t=n.data(this,"iButton")[a].apply(l,s);if(0==e&&t){if(!t.jquery)return i=t,!1;i=n([]).add(t)}else t&&t.jquery&&(i=i.add(t))})),i||this):this:this.each((function(){new t(this,e)}))};var e=0;n.browser.iphone=navigator.userAgent.toLowerCase().indexOf("iphone")>-1;var t=function(t,l){var c=this,o=n(t),d=++e,r=!1,u={},f={dragging:!1,clicked:null},h={position:null,offset:null,time:null},g=(l=n.extend({},i,l,n.metadata?o.metadata():{})).labelOn==a&&l.labelOff==s,b=":checkbox, :radio";if(!o.is(b))return o.find(b).iButton(l);if(!n.data(o[0],"iButton")){n.data(o[0],"iButton",c),"auto"==l.resizeHandle&&(l.resizeHandle=!g),"auto"==l.resizeContainer&&(l.resizeContainer=!g),this.toggle=function(n){var e=arguments.length>0?n:!o[0].checked;o.attr("checked",e).trigger("change")},this.disable=function(e){var t=arguments.length>0?e:!r;r=t,o.attr("disabled",t),p[t?"addClass":"removeClass"](l.classDisabled),n.isFunction(l.disable)&&l.disable.apply(c,[r,o,l])},this.repaint=function(){y()},this.destroy=function(){n([o[0],p[0]]).unbind(".iButton"),n(document).unbind(".iButton_"+d),p.after(o).remove(),n.data(o[0],"iButton",null),n.isFunction(l.destroy)&&l.destroy.apply(c,[o,l])},o.wrap('<div class="'+n.trim(l.classContainer+" "+l.className)+'" />').after('<div class="'+l.classHandle+'"><div class="'+l.classHandleRight+'"><div class="'+l.classHandleMiddle+'" /></div></div><div class="'+l.classLabelOff+'"><span><label>'+l.labelOff+'</label></span></div><div class="'+l.classLabelOn+'"><span><label>'+l.labelOn+'</label></span></div><div class="'+l.classPaddingLeft+'"></div><div class="'+l.classPaddingRight+'"></div>');var p=o.parent(),v=o.siblings("."+l.classHandle),m=o.siblings("."+l.classLabelOff),k=m.children("span"),B=o.siblings("."+l.classLabelOn),w=B.children("span");(l.resizeHandle||l.resizeContainer)&&(u.onspan=w.outerWidth(),u.offspan=k.outerWidth()),l.resizeHandle?(u.handle=Math.min(u.onspan,u.offspan),v.css("width",u.handle)):u.handle=v.width(),l.resizeContainer?(u.container=Math.max(u.onspan,u.offspan)+u.handle+16,p.css("width",u.container),m.css("width",u.container-5)):u.container=p.width();var O=u.container-u.handle-6,y=function(n){var e=o[0].checked?O:0;arguments.length>0&&!arguments[0]||!l.enableFx?(v.css("left",e),B.css("width",e+0),w.css("marginLeft",e-O),k.css("marginRight",-e)):(v.stop().animate({left:e},l.duration,l.easing),B.stop().animate({width:e+0},l.duration,l.easing),w.stop().animate({marginLeft:e-O},l.duration,l.easing),k.stop().animate({marginRight:-e},l.duration,l.easing))};y(!1);var H=function(n){return n.pageX||(n.originalEvent.changedTouches?n.originalEvent.changedTouches[0].pageX:0)};p.bind("mousedown.iButton touchstart.iButton",(function(e){if(!(n(e.target).is(b)||r||!l.allowRadioUncheck&&o.is(":radio:checked")))return e.preventDefault(),f.clicked=v,h.position=H(e),h.offset=h.position-(parseInt(v.css("left"),10)||0),h.time=(new Date).getTime(),!1})),l.enableDrag&&n(document).bind("mousemove.iButton_"+d+" touchmove.iButton_"+d,(function(n){if(f.clicked==v){n.preventDefault();var e=H(n);e!=h.offset&&(f.dragging=!0,p.addClass(l.classHandleActive));var t=Math.min(1,Math.max(0,(e-h.offset)/O));return v.css("left",t*O),B.css("width",t*O+4),k.css("marginRight",-t*O),w.css("marginLeft",-(1-t)*O),!1}})),n(document).bind("mouseup.iButton_"+d+" touchend.iButton_"+d,(function(e){if(f.clicked!=v)return!1;e.preventDefault();var t=!0;if(!f.dragging||(new Date).getTime()-h.time<l.clickOffset){var i=o[0].checked;o.attr("checked",!i),n.isFunction(l.click)&&l.click.apply(c,[!i,o,l])}else i=(H(e)-h.offset)/O>=.5,o[0].checked==i&&(t=!1),o.attr("checked",i);return p.removeClass(l.classHandleActive),f.clicked=null,f.dragging=null,t?o.trigger("change"):y(),!1})),o.bind("change.iButton",(function(){if(y(),o.is(":radio")){var e=o[0];n(e.form?e.form[e.name]:":radio[name="+e.name+"]").filter(":not(:checked)").iButton("repaint")}n.isFunction(l.change)&&l.change.apply(c,[o,l])})).bind("focus.iButton",(function(){p.addClass(l.classFocus)})).bind("blur.iButton",(function(){p.removeClass(l.classFocus)})),n.isFunction(l.click)&&o.bind("click.iButton",(function(){l.click.apply(c,[o[0].checked,o,l])})),o.is(":disabled")&&this.disable(!0),n.browser.msie&&(p.find("*").andSelf().attr("unselectable","on"),o.bind("click.iButton",(function(){o.triggerHandler("change.iButton")}))),n.isFunction(l.init)&&l.init.apply(c,[o,l])}},i={duration:100,easing:"swing",labelOn:"ON",labelOff:"OFF",resizeHandle:"auto",resizeContainer:"auto",enableDrag:!0,enableFx:!0,allowRadioUncheck:!1,clickOffset:120,className:"",classContainer:"ibutton-container",classDisabled:"ibutton-disabled",classFocus:"ibutton-focus",classLabelOn:"ibutton-label-on",classLabelOff:"ibutton-label-off",classHandle:"ibutton-handle",classHandleMiddle:"ibutton-handle-middle",classHandleRight:"ibutton-handle-right",classHandleActive:"ibutton-active-handle",classPaddingLeft:"ibutton-padding-left",classPaddingRight:"ibutton-padding-right",init:null,change:null,click:null,disable:null,destroy:null},a=i.labelOn,s=i.labelOff}(jQuery);