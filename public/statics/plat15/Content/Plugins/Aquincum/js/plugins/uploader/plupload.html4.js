!function(e,t,i,n){function r(e){return t.getElementById(e)}i.runtimes.Html4=i.addRuntime("html4",{getFeatures:function(){return{multipart:!0,triggerDialog:i.ua.gecko&&e.FormData||i.ua.webkit}},init:function(n,o){n.bind("Init",(function(o){var s,a,d,u,l,c,f,g=t.body,m=[],p=/MSIE/.test(navigator.userAgent),v=[],b=o.settings.filters;e:for(u=0;u<b.length;u++)for(l=b[u].extensions.split(/,/),f=0;f<l.length;f++){if("*"===l[f]){v=[];break e}(c=i.mimeTypes[l[f]])&&-1===i.inArray(c,v)&&v.push(c)}v=v.join(","),o.settings.container&&(g=r(o.settings.container),"static"===i.getStyle(g,"position")&&(g.style.position="relative")),o.bind("UploadFile",(function(e,n){var o;n.status!=i.DONE&&n.status!=i.FAILED&&e.state!=i.STOPPED&&(o=r("form_"+n.id),r("input_"+n.id).setAttribute("name",e.settings.file_data_name),o.setAttribute("action",e.settings.url),i.each(i.extend({name:n.target_name||n.name},e.settings.multipart_params),(function(e,n){var r=t.createElement("input");i.extend(r,{type:"hidden",name:n,value:e}),o.insertBefore(r,o.firstChild)})),a=n,r("form_"+d).style.top="-1048575px",o.submit())})),o.bind("FileUploaded",(function(e){e.refresh()})),o.bind("StateChanged",(function(n){n.state==i.STARTED?function(){var n=t.createElement("div");n.innerHTML='<iframe id="'+o.id+'_iframe" name="'+o.id+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',s=n.firstChild,g.appendChild(s),i.addEvent(s,"load",(function(t){var n,r,s=t.target;if(a){try{n=s.contentWindow.document||s.contentDocument||e.frames[s.id].document}catch(e){return void o.trigger("Error",{code:i.SECURITY_ERROR,message:i.translate("Security error."),file:a})}(r=n.body.innerHTML)&&(a.status=i.DONE,a.loaded=1025,a.percent=100,o.trigger("UploadProgress",a),o.trigger("FileUploaded",a,{response:r}))}}),o.id)}():n.state==i.STOPPED&&e.setTimeout((function(){i.removeEvent(s,"load",n.id),s.parentNode&&s.parentNode.removeChild(s)}),0),i.each(n.files,(function(e,t){if(e.status===i.DONE||e.status===i.FAILED){var n=r("form_"+e.id);n&&n.parentNode.removeChild(n)}}))})),o.bind("Refresh",(function(e){var n,o,s,a,u,l,c,f;(n=r(e.settings.browse_button))&&(u=i.getPos(n,r(e.settings.container)),l=i.getSize(n),c=r("form_"+d),r("input_"+d),i.extend(c.style,{top:u.y+"px",left:u.x+"px",width:l.w+"px",height:l.h+"px"}),e.features.triggerDialog&&("static"===i.getStyle(n,"position")&&i.extend(n.style,{position:"relative"}),f=parseInt(n.style.zIndex,10),isNaN(f)&&(f=0),i.extend(n.style,{zIndex:f}),i.extend(c.style,{zIndex:f-1})),s=e.settings.browse_button_hover,a=e.settings.browse_button_active,o=e.features.triggerDialog?n:c,s&&(i.addEvent(o,"mouseover",(function(){i.addClass(n,s)}),e.id),i.addEvent(o,"mouseout",(function(){i.removeClass(n,s)}),e.id)),a&&(i.addEvent(o,"mousedown",(function(){i.addClass(n,a)}),e.id),i.addEvent(t.body,"mouseup",(function(){i.removeClass(n,a)}),e.id)))})),n.bind("FilesRemoved",(function(e,t){var i,n;for(i=0;i<t.length;i++)(n=r("form_"+t[i].id))&&n.parentNode.removeChild(n)})),n.bind("DisableBrowse",(function(e,i){var n=t.getElementById("input_"+d);n&&(n.disabled=i)})),n.bind("Destroy",(function(e){var n,o,s,a={inputContainer:"form_"+d,inputFile:"input_"+d,browseButton:e.settings.browse_button};for(n in a)(o=r(a[n]))&&i.removeAllEvents(o,e.id);i.removeAllEvents(t.body,e.id),i.each(m,(function(e,t){(s=r("form_"+e))&&g.removeChild(s)}))})),function e(){var s,a,u,l;d=i.guid(),m.push(d),(s=t.createElement("form")).setAttribute("id","form_"+d),s.setAttribute("method","post"),s.setAttribute("enctype","multipart/form-data"),s.setAttribute("encoding","multipart/form-data"),s.setAttribute("target",o.id+"_iframe"),s.style.position="absolute",(a=t.createElement("input")).setAttribute("id","input_"+d),a.setAttribute("type","file"),a.setAttribute("accept",v),a.setAttribute("size",1),l=r(o.settings.browse_button),o.features.triggerDialog&&l&&i.addEvent(r(o.settings.browse_button),"click",(function(e){a.disabled||a.click(),e.preventDefault()}),o.id),i.extend(a.style,{width:"100%",height:"100%",opacity:0,fontSize:"99px",cursor:"pointer"}),i.extend(s.style,{overflow:"hidden"}),(u=o.settings.shim_bgcolor)&&(s.style.background=u),p&&i.extend(a.style,{filter:"alpha(opacity=0)"}),i.addEvent(a,"change",(function(t){var u,c=t.target,f=[];c.value&&(r("form_"+d).style.top="-1048575px",u=(u=c.value.replace(/\\/g,"/")).substring(u.length,u.lastIndexOf("/")+1),f.push(new i.File(d,u)),o.features.triggerDialog?i.removeEvent(l,"click",o.id):i.removeAllEvents(s,o.id),i.removeEvent(a,"change",o.id),e(),f.length&&n.trigger("FilesAdded",f))}),o.id),s.appendChild(a),g.appendChild(s),o.refresh()}()})),o({success:!0})}})}(window,document,plupload);