import{_ as H,M as Q,p as x,o as c,i as _,w as o,f as t,K as D,A as k,B as C,E as S,e as d,C as T,D as V,L as A,G as B,x as h,d as b,ai as E,F as w,r as N,am as q,l as g,aj as L,ak as U,ah as u,t as p,y as $}from"./index.8859c8c2.js";const F={components:{Avatar:Q},computed:{dadosEncontrados(){return(this.dados.status||[]).length}},data(){return{dados:{status:[],contatos:{}},visivel:!1}},methods:{async exibirHistorico(l){var y,v,e;let n;try{n=setTimeout(()=>{$q.loading.show({message:"Carregando informa\xE7\xF5es...",boxClass:"bg-grey-2 text-grey-9",spinnerColor:"primary"})},500);const r=await $db.documentoStatus.leHistoricoOnline(l);for(const s of r){const a=[];let i,m,f;!(s.cpfUsuario||((y=s.cpfUsuario)==null?void 0:y.replace(/\D/g,"")))||this.dados.contatos[s.cpfUsuario]||this.dados.contatos[(v=s.cpfUsuario)==null?void 0:v.replace(/\D/g,"")]||(i=s.cpfUsuario,m=await $erp().contato.where({numeroDocumentoNacional:i}).toArray(),Array.prototype.push.apply(a,m),i=(e=s.cpfUsuario)==null?void 0:e.replace(/\D/g,""),i&&i!==s.cpfUsuario&&(m=await $erp().contato.where({numeroDocumentoNacional:i}).toArray(),Array.prototype.push.apply(a,m)),f=a[0],f&&(this.dados.contatos[s.cpfUsuario]={nome:f.nome,imagem:f.imagem}))}this.dados.status=r}catch(r){this.$q.notify({type:"negative",message:r.message})}finally{clearTimeout(n),$q.loading.hide()}},async mostrar(l){const{idDocumento:n}=l;if(await this.exibirHistorico(n),!(this.dados.status||[]).length){this.$q.notify({type:"warning",message:"N\xE3o h\xE1 hist\xF3rico dispon\xEDvel."});return}this.visivel=!0},onHide(){this.dados={status:[],contatos:{}}}}},I={class:"layout-padding",container:""},M={key:0},P={class:"text-subtitle2"},O={class:"text-subtitle2"},j={class:"text-body2"};function z(l,n,y,v,e,r){const s=x("avatar");return c(),_($,{modelValue:e.visivel,"onUpdate:modelValue":n[0]||(n[0]=a=>e.visivel=a),onHide:r.onHide},{default:o(()=>[t(D,{class:"bg-white",container:""},{default:o(()=>[t(k,null,{default:o(()=>[t(C,null,{default:o(()=>[t(S,null,{default:o(()=>[d(" Hist\xF3rico do Status ")]),_:1}),T(t(V,{dense:"",flat:"",icon:"close",round:""},null,512),[[A]])]),_:1})]),_:1}),t(B,null,{default:o(()=>[h("div",I,[r.dadosEncontrados?(c(),b("div",M,[t(E,{"no-border":"",dense:"",class:"q-my-md"},{default:o(()=>[(c(!0),b(w,null,N(e.dados.status,(a,i)=>(c(),b(w,{key:a.codigoDocumentoStatus},[i?(c(),_(q,{key:0})):g("",!0),t(L,{class:"item-center"},{default:o(()=>[t(U,{avatar:""},{default:o(()=>[t(s,{imagem:(e.dados.contatos[a.cpfUsuario]||{}).imagem,tamanho:"40",rotulo:(e.dados.contatos[a.cpfUsuario]||{}).nome},null,8,["imagem","rotulo"])]),_:2},1024),t(U,null,{default:o(()=>[t(u,{caption:""},{default:o(()=>[d("Para: "),h("span",P,p(a.statusFinalizado),1)]),_:2},1024),t(u,{caption:""},{default:o(()=>[d("De: "),h("span",O,p(a.statusOriginal),1)]),_:2},1024),e.dados.contatos[a.cpfUsuario]?(c(),_(u,{key:0,caption:""},{default:o(()=>[h("strong",j,p((e.dados.contatos[a.cpfUsuario]||{}).nome),1)]),_:2},1024)):g("",!0),a.observacao?(c(),_(u,{key:1,caption:""},{default:o(()=>[d(p(a.observacao),1)]),_:2},1024)):g("",!0)]),_:2},1024),t(U,{side:"",center:""},{default:o(()=>[t(u,{caption:""},{default:o(()=>[d(p(l.$filters.data(a.dataHoraEmissao)),1)]),_:2},1024),t(u,{caption:""},{default:o(()=>[d(p(l.$filters.hora(a.dataHoraEmissao)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)],64))),128))]),_:1})])):g("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])}var K=H(F,[["render",z]]);export{K as M};
