import{_ as J,p as b,o as d,i as p,w as s,f as o,s as Y,B as K,E as X,e as c,C as W,D as q,L as Z,x as r,V as $,cr as M,l as u,y as aa,M as ea,bZ as ta,d as v,j as T,aF as oa,ai as B,aj as E,ak as k,ah as R,k as j,u as S,aJ as F,F as L,r as U,ba as ia,bb as G,t as h,b9 as na}from"./index.072271ef.js";import{n as sa}from"./nfePrincipal.f2745dbd.js";import{V as la}from"./VendaCard.6373c99a.js";import{G as da}from"./GChipsV2.fb4eab05.js";import{o as ra}from"./open-url.2cc2d1c9.js";import"./compactarValidarNFe.18714b4b.js";import"./obterItens.1ec52e47.js";import"./codigosANP.a6c1a264.js";import"./BadgeCopiarUid.78bc8d02.js";import"./DocumentosFiscais.68166a9e.js";import"./Campo.3f476921.js";import"./ModalHistoricoStatus.aec2bf22.js";import"./emitirNFe.3ad8673b.js";const ma={data(){return{motivo:"",motivos:[],tipo:"devolucao",visivel:!1}},emits:["executa"],methods:{async atualizar(){this.motivo="",this.tipo="devolucao";const l=await $db.configuracoes.le({nome:"vendas.garantia.motivo"});this.motivos=l.map(t=>t.valor)},executa(){if(this.tipo==="garantia"&&!this.motivo){this.$q.notify({message:"Selecione o motivo",type:"negative"});return}this.visivel=!1,this.$emit("executa",{tipo:this.tipo,motivo:this.motivo})},async mostrar(){await this.atualizar(),this.visivel=!0}}},ua={class:"layout-padding"},ca={class:"q-mt-lg text-center"};function va(l,t,g,f,a,n){const i=b("campo");return d(),p(aa,{modelValue:a.visivel,"onUpdate:modelValue":t[5]||(t[5]=m=>a.visivel=m),"content-css":{minWidth:"30vw"}},{default:s(()=>[o(Y,{class:"q-dialog-plugin"},{default:s(()=>[o(K,{class:"bg-primary text-white"},{default:s(()=>[o(X,null,{default:s(()=>[c("Devolu\xE7\xE3o/Garantia")]),_:1}),W(o(q,{dense:"",flat:"",icon:"close",round:""},null,512),[[Z]])]),_:1}),r("div",ua,[r("form",{class:"q-pa-md",onSubmit:t[4]||(t[4]=$((...m)=>n.executa&&n.executa(...m),["prevent"]))},[o(M,{modelValue:a.tipo,"onUpdate:modelValue":[t[0]||(t[0]=m=>a.tipo=m),t[1]||(t[1]=m=>a.motivo="")],class:"q-mr-sm",label:"Devolu\xE7\xE3o",val:"devolucao"},null,8,["modelValue"]),o(M,{modelValue:a.tipo,"onUpdate:modelValue":t[2]||(t[2]=m=>a.tipo=m),label:"Garantia",val:"garantia"},null,8,["modelValue"]),a.tipo==="garantia"?(d(),p(i,{key:0,modelValue:a.motivo,"onUpdate:modelValue":t[3]||(t[3]=m=>a.motivo=m),rotulo:"Motivo",tipo:"seletor",opcoes:a.motivos},null,8,["modelValue","opcoes"])):u("",!0),r("div",ca,[o(q,{color:"primary",class:"q-ml-sm no-shadow",label:"Continua",type:"submit"})])],32)])]),_:1})]),_:1},8,["modelValue"])}var ga=J(ma,[["render",va]]);const ha={components:{Avatar:ea,NfePrincipal:sa,VendaCard:la,VendaDevolucaoGarantia:ga,VendaModal:ta,GChipsV2:da},computed:{temVendasAbertas(){return!!this.vendasAbertas.length},temVendasCanceladas(){return!!this.vendasCanceladas.length},temVendasFinalizadas(){return!!this.vendasFinalizadas.length},temRegistros(){return this.temVendasAbertas||this.temVendasCanceladas||this.temVendasFinalizadas}},data(){return{grupos:[],documentos:{},itens:{},documentosItens:[],vendasAbertas:[],vendasCanceladas:[],vendasFinalizadas:[],totalVendasAbertas:0,totalVendasCanceladas:0,totalVendasFinalizadas:0,filtro:{},tipoLista:"documentos",dataIni:null,dataFim:null,carregando:!1,colunas:[{name:"descricao",label:"Descri\xE7\xE3o",align:"left"},{name:"documento",label:"Documento",align:"left"},{name:"valorUnitario",label:"Valor Unit\xE1rio",align:"right"},{name:"quantidade",label:"Quantidade",align:"right"},{name:"valorTotal",label:"Valor Total",align:"right"},{name:"botao",label:"",align:"right"}],contato:null,tablePagination:{page:1,rowsPerPage:25},vendaCardPagination:{maxPages:7,perPage:5,vendasAbertas:{page:1,min:1,max:1},vendasFinalizadas:{page:1,min:1,max:1},vendasCanceladas:{page:1,min:1,max:1}},documentoItemDevolucaoGarantia:{},modalVenda:{visivel:!1,orcamento:{}},urlHistoricoCliente:""}},methods:{abrirHistoricoCliente(){ra(this.urlHistoricoCliente)},adicionarOrcamento(){this.$refs.modalVenda.mostrar({idContato:this.$route.params.id})},abrirModalDevolucaoGarantia(l){this.documentoItemDevolucaoGarantia=l,this.$refs.modalDevolucaoGarantia.mostrar()},alternarLista(){this.tipoLista=this.tipoLista==="documentos"?"itens":"documentos",this.atualizar()},fechouNFe(l){l&&$utils.emitter.emit("atualizarDocumentosFiscais")},async finalizaDevolucaoGarantia(l){var V,x;let t,g;if(g=this.documentoItemDevolucaoGarantia||{},g.idDocumento&&(t=await $db.hibrido.le({table:"documento",id:g.idDocumento})),!t.id){this.$q.notify("Venda original n\xE3o encontrada");return}let f={};if(this.documentoItemDevolucaoGarantia.idItem&&(f=await $erp().item.get(this.documentoItemDevolucaoGarantia.idItem)||{}),!f.id){this.$q.notify("Erro na recupera\xE7\xE3o do item");return}if(!t.idContato){this.$q.notify("Destinat\xE1rio n\xE3o encontrado");return}if(!t.idEmpresa){this.$q.notify("Emitente n\xE3o encontrado");return}const a=await $erp().documento.where({idContato:t.idContato,idEmpresa:t.idEmpresa,tipo:"Venda",status:"Or\xE7amento"}).toArray();a.sort((w,e)=>new Date(w.dataHoraEmissao)<new Date(e.dataHoraEmissao)?1:-1);const n=await $utils.selecionarCfop({ncm:f.ncm,idItem:f.id,itemTipo:f.tipo,codigoDocumentoOperacao:((V=a[0])==null?void 0:V.codigoDocumentoOperacao)||t.codigoDocumentoOperacao,idContatoDestinatario:t.idContato,idContatoEmitente:t.idEmpresa,operacaoFator:1});if(!n){this.$q.notifyError("CFOP n\xE3o encontrado");return}let i={};const m=$utils.removerAcentos((this.documentoItemDevolucaoGarantia.tipoItem||"").toLowerCase())==="servico";l.tipo==="devolucao"&&(i.operacao=m?"Devolu\xE7\xE3o de Servi\xE7o":"Devolu\xE7\xE3o de Venda"),l.tipo==="garantia"&&(i.operacao=m?"Garantia de Servi\xE7o":"Garantia de Venda",i.motivo=l.motivo),i.id=$utils.uuid(),i.dataHoraFinalizado="",i.idDocumentoItemVenda=this.documentoItemDevolucaoGarantia.id,i.idDocumentoVenda=this.documentoItemDevolucaoGarantia.idDocumento,i.idItem=this.documentoItemDevolucaoGarantia.idItem,i.idPlanoContaDestino=this.documentoItemDevolucaoGarantia.idPlanoContaDestino,i.idPlanoContaEstoque=this.documentoItemDevolucaoGarantia.idPlanoContaEstoque,i.tipoItem=this.documentoItemDevolucaoGarantia.tipoItem,i.descricaoItem=this.documentoItemDevolucaoGarantia.descricaoItem,i.status="Or\xE7amento",i.quantidade=this.documentoItemDevolucaoGarantia.quantidade||1,i.operacaoFator=n==null?void 0:n.fator,i.idCfop=n==null?void 0:n.id;const D=this.documentoItemDevolucaoGarantia.descontoItem,I=this.documentoItemDevolucaoGarantia.descontoTotalRateado/this.documentoItemDevolucaoGarantia.quantidade,P=this.documentoItemDevolucaoGarantia.descontoFaturaRateado/this.documentoItemDevolucaoGarantia.quantidade,_=$utils.arredondar(D+I+P,4);i.descontoItem=$utils.arredondar(_*-1,4),i.descontoPercentualItem=$utils.arredondar(i.descontoItem/this.documentoItemDevolucaoGarantia.valorItem*100,2),i.descontoTotalRateado=0,i.descontoFaturaRateado=0,i.descontoSubTotal=this.documentoItemDevolucaoGarantia.descontoSubTotal,i.valorCustoMedio=this.documentoItemDevolucaoGarantia.valorCustoMedio,i.valorCustoReposicao=this.documentoItemDevolucaoGarantia.valorCustoReposicao,i.valorOriginal=this.documentoItemDevolucaoGarantia.valorOriginal*-1,i.valorItem=this.documentoItemDevolucaoGarantia.valorItem*-1,i.subTotal=$utils.arredondar((this.documentoItemDevolucaoGarantia.valorItem-_)*-i.quantidade,2),i.total=i.subTotal,i.valorReal=$utils.arredondar((this.documentoItemDevolucaoGarantia.valorItem-_)*-1,4),i.valorRealTotal=i.subTotal,i.valorIpi=this.documentoItemDevolucaoGarantia.valorIpi*-1,i.valorIcms=this.documentoItemDevolucaoGarantia.valorIcms*-1,i.valorIcmsSt=this.documentoItemDevolucaoGarantia.valorIcmsSt*-1,i.valorDifal=this.documentoItemDevolucaoGarantia.valorDifal*-1,localStorage.setItem("documentoItemDevolucao",JSON.stringify(i)),a.length&&(i.idDocumento=a[0].id,i.dataHoraEmissao=$utils.dataAtual(),await $db.documentoItem.grava({atual:i}),this.$q.notify({message:"Item adicionado ao or\xE7amento.",type:"positive"})),this.$refs.modalVenda.mostrar({id:(x=a[0])==null?void 0:x.id,idContato:this.$route.params.id})},async atualizar(){this.documentos={},this.itens={},this.documentosItens=[],this.tablePagination={page:1,rowsPerPage:25};let l,t;t=JSON.parse(localStorage.getItem("clienteSistema"))||{},l="https://rel.storage.b15.com.br/Relatorios/OptiSoul/historico-cliente.html?",l+="CodigoCliente="+this.contato.codigoContato,l+="&BancoDeDados="+t.bancoDeDados,l+="&URLServidor="+t.urlServidor,this.urlHistoricoCliente=l,await $tryLoading(async()=>{await this.filtrar()},{mensagem:"Carregando vendas...",erro:"Ocorreu um erro ao consultar vendas",carregando:g=>this.carregando=g})},executar(){this.atualizar()},async filtrar(){var D,I,P,_,V,x,w,e,y;let l,t,g;l=await $db.venda.filtrar({where:{idContato:this.contato.id,periodo:{dataIni:this.dataIni,dataFim:this.dataFim},status:"aberta",grupos:this.grupos},page:this.vendaCardPagination.vendasAbertas.page,limit:5}),t=await $db.venda.filtrar({where:{idContato:this.contato.id,periodo:{dataIni:this.dataIni,dataFim:this.dataFim},status:"finalizada",grupos:this.grupos},page:this.vendaCardPagination.vendasFinalizadas.page,limit:this.tipoLista==="itens"?1e3:5}),g=await $db.venda.filtrar({where:{idContato:this.contato.id,periodo:{dataIni:this.dataIni,dataFim:this.dataFim},status:"cancelada",grupos:this.grupos},page:this.vendaCardPagination.vendasCanceladas.page,limit:5}),this.vendaCardPagination.vendasAbertas.max=(D=l.totalPages)!=null?D:0,this.vendaCardPagination.vendasFinalizadas.max=(I=t.totalPages)!=null?I:0,this.vendaCardPagination.vendasCanceladas.max=(P=g.totalPages)!=null?P:0,this.vendasAbertas=(_=l.data)!=null?_:[],this.vendasFinalizadas=(V=t.data)!=null?V:[],this.vendasCanceladas=(x=g.data)!=null?x:[],this.totalVendasAbertas=$filters.numero((w=l.somaTotalDocumento)!=null?w:0,2),this.totalVendasFinalizadas=$filters.numero((e=t.somaTotalDocumento)!=null?e:0,2),this.totalVendasCanceladas=$filters.numero((y=g.somaTotalDocumento)!=null?y:0,2);const f={},a={},n=[],i=[];for(const C of t.data){const z=await $db.hibrido.lista({table:"documentoItem",where:{idDocumento:C.id}});f[C.id]=C,n.push(...z),i.push(...z.map(A=>A.idItem))}const m=await $db.item.ler({filtros:{ids:i}});for(const C of m.data)a[C.id]=C;this.documentos=f,this.itens=a,this.documentosItens=n},async limparFiltro(){this.grupos=[],this.dataFim=new Date;const l=new Date;if(l.setFullYear(l.getFullYear()-2),this.dataIni=l,this.contato.codigoContato){const t=await $db.configuracoes.leValorNumerico("venda.codigoconsumidor");this.contato.codigoContato===t&&(this.dataIni=this.dataFim)}}},watch:{"$route.params.id"(){const l=this.$route.params.id;!l||$db.contato.le({id:l}).then(t=>{this.contato=t,this.tipoLista="documentos",this.limparFiltro().then(()=>{this.atualizar()})})}},created(){$utils.emitter.off("atualizarAtendimentoVenda"),$utils.emitter.on("atualizarAtendimentoVenda",this.atualizar)},mounted(){const l=this.$route.params.id;!l||$db.contato.le({id:l}).then(t=>{this.contato=t,this.limparFiltro().then(()=>{this.atualizar()})})}},pa={class:"AtendimentoVenda q-pb-md"},fa={class:"row q-mt-md",style:{display:"flex","align-items":"center"}},Ca={class:"col"},ba={class:"col-12 col-md-6"},Ia={class:"col"},_a=r("div",{class:"col-auto",style:{"align-items":"center",display:"flex"}},[r("label",null,"at\xE9")],-1),Va={class:"col"},xa={class:"col-auto q-ml-xs"},wa={key:0,class:"row justify-end q-mb-md"},Da={class:"row"},Pa={key:1,class:"row justify-end q-mb-md"},ya={key:0,class:"row justify-end q-mb-md"},ka={class:"row"},Fa={key:1,class:"row justify-end q-mb-md"},Ga={key:0,class:"col-12",style:{"margin-bottom":"50px"}},za={key:1,class:"col-12",style:{"margin-bottom":"50px"}},qa={class:"row items-center",style:{"min-width":"180px","max-width":"100%"}},Aa={class:"col-auto hideonmobile"},Ta={class:"col",style:{"word-break":"break-word","white-space":"initial"}},Ea=r("br",null,null,-1),Ra=r("br",null,null,-1),Sa=r("br",null,null,-1),La=r("br",null,null,-1),Ua=r("br",null,null,-1),Qa={key:0,style:{"text-decoration":"line-through"}},Oa={key:2,class:"q-pa-lg text-center"},Ha=r("p",null,[r("small",null,"Registros n\xE3o encontrados")],-1),Na=[Ha];function Ma(l,t,g,f,a,n){var w;const i=b("GChipsV2"),m=b("campo"),D=b("row"),I=b("venda-card"),P=b("avatar"),_=b("VendaModal"),V=b("VendaDevolucaoGarantia"),x=b("NfePrincipal");return d(),v("div",pa,[r("div",fa,[r("div",Ca,[o(Y,{class:"q-pa-sm q-ml-sm no-shadow"},{default:s(()=>[o(D,{class:"items-center q-col-gutter-md"},{default:s(()=>[r("div",ba,[o(i,{modelValue:a.grupos,"onUpdate:modelValue":[t[0]||(t[0]=e=>a.grupos=e),n.filtrar],placeholder:"Filtre por Produto, Marca, N\xFAmero..."},{prepend:s(()=>[o(T,{name:"mdi-filter"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),r("div",Ia,[o(m,{modelValue:a.dataIni,"onUpdate:modelValue":t[1]||(t[1]=e=>a.dataIni=e),tipo:"data",onBlur:n.atualizar,dense:"",outlined:""},null,8,["modelValue","onBlur"])]),_a,r("div",Va,[o(m,{modelValue:a.dataFim,"onUpdate:modelValue":t[2]||(t[2]=e=>a.dataFim=e),tipo:"data",onBlur:n.atualizar,dense:"",outlined:""},null,8,["modelValue","onBlur"])])]),_:1})]),_:1})]),r("div",xa,[o(q,{round:"",dense:"",flat:"",icon:"more_vert",color:"primary",size:"md"},{default:s(()=>[o(oa,null,{default:s(()=>[W((d(),p(B,{link:"","no-border":"",separator:""},{default:s(()=>[a.tipoLista==="itens"?(d(),p(E,{key:0,onClick:n.alternarLista,clickable:""},{default:s(()=>[o(k,{avatar:""},{default:s(()=>[o(T,{name:"view_stream"})]),_:1}),o(k,null,{default:s(()=>[o(R,null,{default:s(()=>[c("Vendas")]),_:1})]),_:1})]),_:1},8,["onClick"])):u("",!0),a.tipoLista==="documentos"?(d(),p(E,{key:1,onClick:n.alternarLista,clickable:""},{default:s(()=>[o(k,{avatar:""},{default:s(()=>[o(T,{name:"view_list"})]),_:1}),o(k,null,{default:s(()=>[o(R,null,{default:s(()=>[c("Produtos e Servi\xE7o")]),_:1})]),_:1})]),_:1},8,["onClick"])):u("",!0),o(E,{clickable:"",onClick:n.abrirHistoricoCliente},{default:s(()=>[o(k,{avatar:""},{default:s(()=>[o(T,{name:"mdi-account"})]),_:1}),o(k,null,{default:s(()=>[o(R,null,{default:s(()=>[c("Hist\xF3rico do Cliente")]),_:1})]),_:1})]),_:1},8,["onClick"])]),_:1})),[[Z]])]),_:1}),o(j,null,{default:s(()=>[c(" Outras op\xE7\xF5es ")]),_:1})]),_:1})])]),!a.carregando&&n.temRegistros&&a.tipoLista==="documentos"?(d(),p(B,{key:0,class:"no-border"},{default:s(()=>[n.temVendasAbertas?(d(),p(S,{key:0,"model-value":!0,label:`Abertas (Total R$ ${a.totalVendasAbertas})`,group:"vendasAbertas"},{default:s(()=>[a.vendaCardPagination.vendasAbertas.max>1?(d(),v("div",wa,[o(F,{modelValue:a.vendaCardPagination.vendasAbertas.page,"onUpdate:modelValue":t[3]||(t[3]=e=>a.vendaCardPagination.vendasAbertas.page=e),min:a.vendaCardPagination.vendasAbertas.min,unelevated:"",max:a.vendaCardPagination.vendasAbertas.max,ellipses:"","max-pages":a.vendaCardPagination.maxPages,class:"float-right",onClick:n.filtrar},null,8,["modelValue","min","max","max-pages","onClick"])])):u("",!0),r("div",Da,[(d(!0),v(L,null,U(a.vendasAbertas,e=>(d(),v("div",{class:"q-px-sm full-width",key:e.id},[o(I,{id:e.id,onExecutar:n.executar,class:"q-mb-md"},null,8,["id","onExecutar"])]))),128))]),a.vendaCardPagination.vendasAbertas.max>1?(d(),v("div",Pa,[o(F,{modelValue:a.vendaCardPagination.vendasAbertas.page,"onUpdate:modelValue":t[4]||(t[4]=e=>a.vendaCardPagination.vendasAbertas.page=e),min:a.vendaCardPagination.vendasAbertas.min,unelevated:"",max:a.vendaCardPagination.vendasAbertas.max,ellipses:"","max-pages":a.vendaCardPagination.maxPages,class:"float-right",onClick:n.filtrar},null,8,["modelValue","min","max","max-pages","onClick"])])):u("",!0)]),_:1},8,["label"])):u("",!0),n.temVendasFinalizadas?(d(),p(S,{key:1,"model-value":!0,label:`Finalizadas (Total R$ ${a.totalVendasFinalizadas})`,group:"vendasFinalizadas"},{default:s(()=>[a.vendaCardPagination.vendasFinalizadas.max>1?(d(),v("div",ya,[o(F,{modelValue:a.vendaCardPagination.vendasFinalizadas.page,"onUpdate:modelValue":t[5]||(t[5]=e=>a.vendaCardPagination.vendasFinalizadas.page=e),unelevated:"",min:a.vendaCardPagination.vendasFinalizadas.min,max:a.vendaCardPagination.vendasFinalizadas.max,ellipses:"","max-pages":a.vendaCardPagination.maxPages,class:"float-right",onClick:n.filtrar},null,8,["modelValue","min","max","max-pages","onClick"])])):u("",!0),r("div",ka,[(d(!0),v(L,null,U(a.vendasFinalizadas,e=>(d(),v("div",{class:"q-px-sm full-width",key:e.id},[o(I,{id:e.id,onExecutar:n.executar,class:"q-mb-md"},null,8,["id","onExecutar"])]))),128))]),a.vendaCardPagination.vendasFinalizadas.max>1?(d(),v("div",Fa,[o(F,{modelValue:a.vendaCardPagination.vendasFinalizadas.page,"onUpdate:modelValue":t[6]||(t[6]=e=>a.vendaCardPagination.vendasFinalizadas.page=e),min:a.vendaCardPagination.vendasFinalizadas.min,max:a.vendaCardPagination.vendasFinalizadas.max,ellipses:"",unelevated:"","max-pages":a.vendaCardPagination.maxPages,class:"float-right",onClick:n.filtrar},null,8,["modelValue","min","max","max-pages","onClick"])])):u("",!0)]),_:1},8,["label"])):u("",!0),n.temVendasCanceladas?(d(),p(S,{key:2,"model-value":!0,label:`Canceladas (Total R$ ${a.totalVendasCanceladas})`,group:"vendasCanceladas"},{default:s(()=>[a.vendaCardPagination.vendasCanceladas.max>1?(d(),v("div",Ga,[o(F,{modelValue:a.vendaCardPagination.vendasCanceladas.page,"onUpdate:modelValue":t[7]||(t[7]=e=>a.vendaCardPagination.vendasCanceladas.page=e),min:a.vendaCardPagination.vendasCanceladas.min,max:a.vendaCardPagination.vendasCanceladas.max,ellipses:"","max-pages":a.vendaCardPagination.maxPages,class:"float-right",onClick:n.filtrar},null,8,["modelValue","min","max","max-pages","onClick"])])):u("",!0),(d(!0),v(L,null,U(a.vendasCanceladas,e=>(d(),v("div",{key:e.id},[o(I,{id:e.id,onExecutar:n.executar,class:"q-mb-md"},null,8,["id","onExecutar"])]))),128)),a.vendaCardPagination.vendasCanceladas.max>1?(d(),v("div",za,[o(F,{modelValue:a.vendaCardPagination.vendasCanceladas.page,"onUpdate:modelValue":t[8]||(t[8]=e=>a.vendaCardPagination.vendasCanceladas.page=e),min:a.vendaCardPagination.vendasCanceladas.min,max:a.vendaCardPagination.vendasCanceladas.max,ellipses:"","max-pages":a.vendaCardPagination.maxPages,class:"float-right",onClick:n.filtrar},null,8,["modelValue","min","max","max-pages","onClick"])])):u("",!0)]),_:1},8,["label"])):u("",!0)]),_:1})):u("",!0),!a.carregando&&n.temRegistros&&a.tipoLista==="itens"?(d(),p(na,{key:1,rows:a.documentosItens,columns:a.colunas,pagination:a.tablePagination,"onUpdate:pagination":t[9]||(t[9]=e=>a.tablePagination=e),class:"no-shadow text-left q-mt-md my-sticky-header-column-table"},{body:s(e=>[o(ia,{props:e},{default:s(()=>[o(G,{key:"descricao",props:e},{default:s(()=>{var y,C,z,A,Q,O,H,N;return[r("div",qa,[r("div",Aa,[o(P,{imagem:(y=a.itens[e.row.idItem])==null?void 0:y.imagem,rotulo:(C=a.itens[e.row.idItem])==null?void 0:C.descricaoConcatenada,tamanho:"40",class:"q-mr-sm"},null,8,["imagem","rotulo"])]),r("div",Ta,[c(h(e.row.idItem?(z=a.itens[e.row.idItem])==null?void 0:z.descricaoConcatenada:""),1),Ea,c(" "+h(e.row.idItem&&(A=a.itens[e.row.idItem])!=null&&A.referencia?"Ref. "+((Q=a.itens[e.row.idItem])==null?void 0:Q.referencia):""),1),Ra,c(" "+h(e.row.idItem&&(O=a.itens[e.row.idItem])!=null&&O.codigoItem?"#"+((H=a.itens[e.row.idItem])==null?void 0:H.codigoItem):""),1),Sa,c(" "+h(e.row.idItem&&((N=a.itens[e.row.idItem])==null?void 0:N.marca)||""),1)])])]}),_:2},1032,["props"]),o(G,{key:"documento",props:e},{default:s(()=>[c(h(a.documentos[e.row.idDocumento].tipo)+" #"+h(parseInt(a.documentos[e.row.idDocumento].numero)||(a.documentos[e.row.idDocumento].id||"").slice(-6)),1),La,c(" "+h(a.documentos[e.row.idDocumento].status),1),Ua,c(" "+h(l.$filters.dataHora(a.documentos[e.row.idDocumento].dataHoraFinalizado||a.documentos[e.row.idDocumento].dataHoraEmissao)),1)]),_:2},1032,["props"]),o(G,{key:"valorUnitario",props:e},{default:s(()=>[e.row.valorReal!==e.row.valorItem?(d(),v("span",Qa,h(l.$filters.numero(e.row.valorItem,2)),1)):u("",!0),c(" "+h(l.$filters.numero(e.row.valorReal,2)),1)]),_:2},1032,["props"]),o(G,{key:"quantidade",props:e},{default:s(()=>[c(h(e.row.quantidade*e.row.operacaoFator*-1),1)]),_:2},1032,["props"]),o(G,{key:"valorTotal",props:e},{default:s(()=>[c(h(l.$filters.numero(e.row.valorRealTotal,2)),1)]),_:2},1032,["props"]),o(G,{key:"botao",props:e},{default:s(()=>[e.row.operacaoFator===-1?(d(),p(q,{key:0,clickable:"",class:"q-ml-sm",color:"warning",dense:"",flat:"",icon:"replay",round:"",onClick:y=>n.abrirModalDevolucaoGarantia(e.row)},{default:s(()=>[o(j,null,{default:s(()=>[c("Devolu\xE7\xE3o/Garantia")]),_:1})]),_:2},1032,["onClick"])):u("",!0)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination"])):u("",!0),!a.carregando&&!n.temRegistros?(d(),v("div",Oa,Na)):u("",!0),(w=a.contato)!=null&&w.ativo?(d(),p(q,{key:3,round:"",color:"primary",class:"fixed",icon:"add",size:"lg",style:{right:"18px",bottom:"18px"},onClick:n.adicionarOrcamento},null,8,["onClick"])):u("",!0),o(_,{ref:"modalVenda",onExecutar:n.executar},null,8,["onExecutar"]),o(V,{ref:"modalDevolucaoGarantia",onExecuta:n.finalizaDevolucaoGarantia},null,8,["onExecuta"]),o(x,{onFechar:n.fechouNFe},null,8,["onFechar"])])}var ie=J(ha,[["render",Ma]]);export{ie as default};
