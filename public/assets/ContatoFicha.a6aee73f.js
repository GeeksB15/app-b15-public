import{_ as Q,aN as mo,aO as Z,aP as K,p as V,o as h,i as b,w as n,f as t,s as I,aK as W,B as L,C as z,D as g,L as M,E as O,e as y,z as G,x as d,l as _,d as C,F as q,r as A,t as k,y as X,ai as po,aj as B,ak as F,ah as P,Q as oo,aQ as ho,j as v,aR as eo,aS as Y,M as fo,N as go,aT as bo,aU as Co,aV as vo,aW as Vo,aX as $,W as _o,k as N,U,X as H,aY as J,q as To,T as R,aG as yo,aH as D,aZ as wo,a_ as x,am as ko,V as S,h as So,I as qo}from"./index.53d95d0a.js";import{I as Uo}from"./Icone.2d76401c.js";import{S as Eo,a as Po}from"./SeletorPais.d3967f8d.js";import{o as Ao}from"./open-url.5b8490b1.js";const Do={computed:{metaDados(){return mo}},data(){return{contatoTmp:{},enderecoTmp:{},selecionarCertificado:!1,certificadoPadrao:"07660198000189 35 SP;",certificado:"",opcoesCertificados:[],cnpj:"",uf:"",erros:[],show:!1}},methods:{async consultarCadastroBrasilAPI(){const a=`https://brasilapi.com.br/api/cnpj/v1/${this.cnpj}`,e=await fetch(a),i=await e.json();if(!e.ok)throw new Error("N\xE3o foi poss\xEDvel realizar a consulta no Brasil API");let s=i.data_inicio_atividade;s&&(s=new Date(s),s=new Date(s.setDate(s.getDate()+1)),s=s.toJSON()),this.limpar(),this.contatoTmp.nome=i.razao_social,this.contatoTmp.apelido=i.nome_fantasia,this.contatoTmp.numeroDocumentoEstadual="",this.contatoTmp.regime=i.opcao_pelo_simples?"SIMPLES NACIONAL":"NORMAL",this.contatoTmp.dataAbertura=s,this.contatoTmp.situacao=i.descricao_situacao_cadastral,this.enderecoTmp.cep=i.cep||"",this.enderecoTmp.numero=i.numero||"",this.enderecoTmp.complemento=i.complemento||"",this.enderecoTmp.pais="Brasil",this.enderecoTmp.codigoPais=1058;try{const r=(await $utils.buscarEndereco(this.enderecoTmp.cep)).data;if(this.enderecoTmp.bairro=r.bairro,this.enderecoTmp.ibgeCod=r.ibge,this.enderecoTmp.logradouro=r.logradouro,this.enderecoTmp.municipio=r.localidade,this.enderecoTmp.uf=r.uf,this.enderecoTmp.ufCod=$utils.mapearEstadoCodigo[r.uf],this.enderecoTmp.complemento||(this.enderecoTmp.complemento=r.complemento),r.ibge){const u=await $db.cidade.le({cidadeCodIbge:r.ibge.toString(),ativo:!0});this.enderecoTmp.cidadeCodChave=(u.find(c=>c.cod)||{}).cod}}catch{this.enderecoTmp.uf=i.uf||"",this.enderecoTmp.municipio=i.municipio||"",this.enderecoTmp.logradouro=((i.descricao_tipo_logradouro||"")+" "+(i.logradouro||"")).trim(),this.enderecoTmp.bairro=i.bairro}this.show=!0},async consultarCadastroSefaz(){let a="";this.opcoesCertificados=[];const i=(await $erp().empresa.toArray()).filter(c=>c.idContato).map(c=>c.idContato),s=await $erp().contato.where("id").anyOf(i).toArray(),o=await $erp().contatoEndereco.where("idContato").anyOf(i).toArray();for(const c of s){const w=o.filter(E=>E.idContato===c.id);let p=w.find(E=>E.grupo==="Principal");p||(p=w[0]);const T=this.$utils.filtrarDigitos(c.numeroDocumentoNacional),j=String(this.$utils.mapearEstadoCodigo[p.uf]);if(T.length===14&&j.length===2&&p.uf.length===2){const E=T+" "+j+" "+p.uf+";";a+=E,this.opcoesCertificados.push({valor:E,rotulo:c.apelido,sublabel:c.numeroDocumentoNacional})}}this.opcoesCertificados.push({valor:this.certificadoPadrao,rotulo:""}),a+=this.certificadoPadrao;const r=Z.consultarCadastroContribuinte(this.cnpj,""),u=await K.consultarCadastroContribuinte(a,r);if(u.status==="Erro")throw this.erros=u.mensagem.split(`
`),new Error("N\xE3o foi poss\xEDvel realizar a consulta no Sefaz");await this.preencherTemplateDadosSefaz(u.xml)},async consultarCadastroSefazCertificado(){try{$q.loading.show({message:"Consultando cadastro de CNPJ"});const a=Z.consultarCadastroContribuinte(this.cnpj,this.uf),e=await K.consultarCadastroContribuinte(this.certificado,a);if(e.status==="Erro"){this.erros=e.mensagem.split(`
`);return}await this.preencherTemplateDadosSefaz(e.xml)}finally{$q.loading.hide()}},async consultar(a){try{if($q.loading.show({message:"Consultando cadastro de CNPJ"}),this.cnpj=a.replace(/[^\d]/g,""),!$utils.validarDocumentoNacional(this.cnpj)){let e=function(i,s,o,r,u,c){return c?s+"."+o+"."+r+"/"+u+"-"+c:u?s+"."+o+"."+r+"/"+u:r?s+"."+o+"."+r:o?s+"."+o:s};throw this.cnpj=this.cnpj.replace(/(\d{0,2})(\d{0,3})(\d{0,3})(\d{0,4})(\d{0,2})$/,e),new Error(`CNPJ ${this.cnpj} inv\xE1lido`)}try{console.log("consula pela SEFAZ"),await this.consultarCadastroSefaz(),$q.notifyPositive("Consulta realizada pelo cadastro na SEFAZ");return}catch(e){console.log(e.message)}try{console.log("Consulta pela APIBRASIL"),await this.consultarCadastroBrasilAPI(),$q.notifyPositive("Consulta realizada pela Brasil API");return}catch(e){console.log(e.message)}console.log("Consulta pelo certificado"),this.certificado=this.certificadoPadrao,this.uf=(this.opcoesCertificados[0].valor||"").substr(18,2),this.selecionarCertificado=!0,this.show=!0,$q.notifyPositive("Consulta realizada pelo Certificado Digital")}catch(e){throw new Error(e)}finally{$q.loading.hide()}},limpar(){this.contatoTmp={},this.enderecoTmp=[],this.selecionarCertificado=!1},async preencherTemplateDadosSefaz(a){const s=new DOMParser().parseFromString(a,"application/xml").getElementsByTagName("infCons")[0].getElementsByTagName("infCad")[0],o=s.getElementsByTagName("ender")[0],r=(u,c)=>(u.getElementsByTagName(c)[0]||{}).innerHTML||"";this.limpar(),this.contatoTmp.apelido=r(s,"xFant")||r(s,"xNome"),this.contatoTmp.nome=r(s,"xNome"),this.contatoTmp.numeroDocumentoEstadual=r(s,"IE"),this.contatoTmp.regime=r(s,"xRegApur"),this.contatoTmp.dataAbertura=r(s,"dIniAtiv"),this.contatoTmp.situacao=r(s,"cSit")>0?"ATIVA":"BAIXADA",this.enderecoTmp.bairro=r(o,"xBairro"),this.enderecoTmp.cep=r(o,"CEP").padStart(8,"0").replace(/(\d{5})(\d{3})/g,"$1-$2"),this.enderecoTmp.complemento=r(o,"xCpl"),this.enderecoTmp.ibgeCod=r(o,"cMun"),this.enderecoTmp.logradouro=r(o,"xLgr"),this.enderecoTmp.municipio=r(o,"xMun"),this.enderecoTmp.numero=r(o,"nro"),this.enderecoTmp.uf=r(s,"UF"),this.enderecoTmp.pais="Brasil",this.enderecoTmp.codigoPais=1058;try{const c=(await $utils.buscarEndereco(this.enderecoTmp.cep)).data;if(this.enderecoTmp.bairro=c.bairro,this.enderecoTmp.ibgeCod=c.ibge,this.enderecoTmp.logradouro=c.logradouro,this.enderecoTmp.municipio=c.localidade,this.enderecoTmp.uf=c.uf,this.enderecoTmp.ufCod=$utils.mapearEstadoCodigo[c.uf],this.enderecoTmp.complemento||(this.enderecoTmp.complemento=c.complemento),c.ibge){const w=await $db.cidade.le({cidadeCodIbge:c.ibge.toString(),ativo:!0});this.enderecoTmp.cidadeCodChave=(w.find(p=>p.cod)||{}).cod}}catch(u){console.error(u)}this.show=!0},salvar(){var i;this.contato.apelido=this.contatoTmp.apelido||this.contatoTmp.nome,this.contato.nome=this.contatoTmp.nome,this.contato.numeroDocumentoEstadual=this.contatoTmp.numeroDocumentoEstadual,this.contato.dataAbertura=this.contatoTmp.dataAbertura,this.contato.observacao=`${this.contatoTmp.situacao} | `+((i=this.contato.observacao)!=null?i:""),this.contato.regime=this.contatoTmp.regime.includes("SIMPLES NACIONAL")?"SimplesNacional":"Normal";const a=this.endereco.find(s=>s.bairro===this.enderecoTmp.bairro&&s.cep===this.enderecoTmp.cep&&s.complemento===this.enderecoTmp.complemento&&s.ibgeCod===this.enderecoTmp.ibgeCod&&s.logradouro===this.enderecoTmp.logradouro&&s.municipio===this.enderecoTmp.municipio&&s.numero===this.enderecoTmp.numero&&s.uf===this.enderecoTmp.uf),e=this.endereco.find(s=>s.grupo==="Principal");a||this.endereco.push({...this.enderecoTmp,grupo:e?void 0:"Principal",id:$utils.uuid(),idContato:this.contato.id}),this.show=!1}},props:{contato:Object,endereco:Array}},xo={class:"q-px-lg q-py-md"},Fo={class:"row q-col-gutter-x-sm"},No={class:"row q-col-gutter-x-sm"},Ro=d("div",{class:"row q-mt-lg q-mb-sm q-ml-sm text-subtitle1"},"Endere\xE7o",-1),Lo={class:"row q-col-gutter-x-sm q-ml-xs"},Oo={class:"row justify-end"},Io={class:"q-px-lg q-py-md"},zo={class:"row justify-end"};function jo(a,e,i,s,o,r){const u=V("campo");return h(),b(X,{modelValue:o.show,"onUpdate:modelValue":e[16]||(e[16]=c=>o.show=c),"content-css":{maxWidth:"800px"}},{default:n(()=>[t(I,null,{default:n(()=>[t(W,null,{default:n(()=>[t(L,null,{default:n(()=>[z(t(g,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[M]]),t(O,null,{default:n(()=>[y("Cadastro CNPJ")]),_:1})]),_:1}),o.selecionarCertificado?_("",!0):(h(),b(G,{key:0,onSubmit:r.salvar},{default:n(()=>[d("div",xo,[t(u,{modelValue:o.contatoTmp.nome,"onUpdate:modelValue":e[0]||(e[0]=c=>o.contatoTmp.nome=c),"somente-leitura":"",class:"row",rotulo:"Raz\xE3o social"},null,8,["modelValue"]),t(u,{modelValue:o.contatoTmp.apelido,"onUpdate:modelValue":e[1]||(e[1]=c=>o.contatoTmp.apelido=c),"somente-leitura":"",class:"row",rotulo:"Fantasia"},null,8,["modelValue"]),d("div",Fo,[t(u,{modelValue:o.contatoTmp.numeroDocumentoEstadual,"onUpdate:modelValue":e[2]||(e[2]=c=>o.contatoTmp.numeroDocumentoEstadual=c),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"IE"},null,8,["modelValue"]),t(u,{modelValue:o.contatoTmp.dataAbertura,"onUpdate:modelValue":e[3]||(e[3]=c=>o.contatoTmp.dataAbertura=c),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"Data de abertura",tipo:"data"},null,8,["modelValue"])]),d("div",No,[t(u,{modelValue:o.contatoTmp.regime,"onUpdate:modelValue":e[4]||(e[4]=c=>o.contatoTmp.regime=c),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"Regime"},null,8,["modelValue"]),t(u,{modelValue:o.contatoTmp.situacao,"onUpdate:modelValue":e[5]||(e[5]=c=>o.contatoTmp.situacao=c),"somente-leitura":"",class:"col-12 col-md-6",rotulo:"Situa\xE7\xE3o"},null,8,["modelValue"])]),Ro,d("div",Lo,[t(u,{modelValue:o.enderecoTmp.cep,"onUpdate:modelValue":e[6]||(e[6]=c=>o.enderecoTmp.cep=c),"somente-leitura":"",class:"col-6 col-sm-4",rotulo:"CEP",mask:"#####-###"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.uf,"onUpdate:modelValue":e[7]||(e[7]=c=>o.enderecoTmp.uf=c),"somente-leitura":"",class:"col-2 col-sm-2",rotulo:"UF"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.municipio,"onUpdate:modelValue":e[8]||(e[8]=c=>o.enderecoTmp.municipio=c),"somente-leitura":"",class:"col-10 col-sm-6",rotulo:"Cidade",ajuda:o.enderecoTmp.ibgeCod?"C\xF3digo IBGE: "+o.enderecoTmp.ibgeCod:""},null,8,["modelValue","ajuda"]),t(u,{modelValue:o.enderecoTmp.logradouro,"onUpdate:modelValue":e[9]||(e[9]=c=>o.enderecoTmp.logradouro=c),"somente-leitura":"",class:"col-12 col-sm-7",rotulo:"Endere\xE7o"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.numero,"onUpdate:modelValue":e[10]||(e[10]=c=>o.enderecoTmp.numero=c),"somente-leitura":"",class:"col-12 col-sm-2",rotulo:"N\xFAmero"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.complemento,"onUpdate:modelValue":e[11]||(e[11]=c=>o.enderecoTmp.complemento=c),"somente-leitura":"",class:"col-12 col-sm-3",rotulo:"Complemento"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.bairro,"onUpdate:modelValue":e[12]||(e[12]=c=>o.enderecoTmp.bairro=c),"somente-leitura":"",class:"col-12 col-sm-6",rotulo:"Bairro"},null,8,["modelValue"]),t(u,{modelValue:o.enderecoTmp.pais,"onUpdate:modelValue":e[13]||(e[13]=c=>o.enderecoTmp.pais=c),"somente-leitura":"",class:"col-12 col-sm-6",rotulo:"Pa\xEDs"},null,8,["modelValue"])])]),t(L,{color:"light"},{default:n(()=>[t(O,null,{default:n(()=>[d("div",Oo,[z(t(g,{flat:"",color:"tertiary",label:"Cancelar"},null,512),[[M]]),t(g,{unelevated:"",color:"primary",type:"submit",label:"Confirmar"})])]),_:1})]),_:1})]),_:1},8,["onSubmit"])),o.selecionarCertificado?(h(),b(G,{key:1,onSubmit:r.consultarCadastroSefazCertificado},{default:n(()=>[d("div",Io,[(h(!0),C(q,null,A(o.erros,(c,w)=>(h(),C("div",{class:"row q-py-xs text-negative",key:w},k(c),1))),128)),t(u,{modelValue:o.certificado,"onUpdate:modelValue":e[14]||(e[14]=c=>o.certificado=c),class:"row q-mt-md",rotulo:"Certificado",tipo:"seletor",opcoes:o.opcoesCertificados},null,8,["modelValue","opcoes"]),t(u,{modelValue:o.uf,"onUpdate:modelValue":e[15]||(e[15]=c=>o.uf=c),class:"row",rotulo:"UF do Sefaz para consulta",tipo:"seletor",opcoes:r.metaDados.infNFe.emit.enderEmit.UF._enumeration},null,8,["modelValue","opcoes"])]),t(L,{color:"light"},{default:n(()=>[t(O,null,{default:n(()=>[d("div",zo,[t(g,{flat:"",color:"primary",type:"submit",label:"Nova consulta"})])]),_:1})]),_:1})]),_:1},8,["onSubmit"])):_("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Bo=Q(Do,[["render",jo]]);const Mo={computed:{registrosEncontrados(){return!!this.itens.length}},data(){return{itens:[],redeSocialCampo:"",visivel:!1,idContato:""}},methods:{adicionar(){this.redeSocialErro=!1,this.redeSocialErroDescricao="";const a=this.redeSocialCampo.toLowerCase();if(!a)return!1;if(this.itens.find(e=>e.link===a))return this.redeSocialErro=!0,this.redeSocialErroDescricao="Rede social j\xE1 cadastrada.",!1;try{this.itens.push({...$utils.analisarRedeSocialLink(a),id:$utils.uuid(),idContato:this.idContato}),this.redeSocialCampo=""}catch{this.redeSocialErro=!0,this.redeSocialErroDescricao="Insira uma URL v\xE1lida."}},remover(a){this.$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},title:"Remover",message:"Ao continuar voc\xEA ir\xE1 remover esta rede social.",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{a>=0&&(this.termo=this.itens[a].link,this.itens.splice(a,1))})},onHide(){this.resolve(this.itens)},onShow(){this.$refs.redeSocialCampo.focus()},async show(a){return this.itens=a.itens,this.idContato=a.idContato,this.visivel=!0,new Promise((e,i)=>{this.resolve=e})}}};function Qo(a,e,i,s,o,r){return h(),b(X,{modelValue:o.visivel,"onUpdate:modelValue":e[1]||(e[1]=u=>o.visivel=u),onHide:e[2]||(e[2]=u=>r.onHide()),onShow:e[3]||(e[3]=u=>r.onShow()),"content-css":"{ minWidth: '80vw' }"},{default:n(()=>[t(I,null,{default:n(()=>[t(L,{class:"bg-primary text-white"},{default:n(()=>[t(O,null,{default:n(()=>[y("Redes Sociais")]),_:1}),z(t(g,{dense:"",flat:"",icon:"close",round:""},null,512),[[M]])]),_:1}),t(W,null,{default:n(()=>[t(po,{"no-border":"",separator:""},{default:n(()=>[(h(!0),C(q,null,A(o.itens,(u,c)=>(h(),b(B,{class:"animate-pop q-px-none",key:c},{default:n(()=>[t(F,null,{default:n(()=>[y(k(u.tipo),1),t(P,null,{default:n(()=>[y(k(u.link),1)]),_:2},1024)]),_:2},1024),t(P,null,{default:n(()=>[t(g,{color:"negative",size:"xs",icon:"remove",outline:"",round:"",onClick:w=>r.remover(c)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(oo,{color:"green",placeholder:"Insira a URL aqui.",type:"url",modelValue:o.redeSocialCampo,"onUpdate:modelValue":e[0]||(e[0]=u=>o.redeSocialCampo=u),ref:"redeSocialCampo",onKeyup:ho(r.adicionar,["enter"])},{append:n(()=>[t(v,{name:"done",onClick:r.adicionar,class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onKeyup"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var Ho=Q(Mo,[["render",Qo]]);const Jo={data(){return{visivel:!1}},methods:{trocarFoto(a){eo(a[0],{crop:!0,outputFormat:"jpg",targetHeight:200,targetWidth:200},(e,i)=>{this.resolve(i),this.visivel=!1})},onHide(){this.resolve()},async show(){return this.visivel=!0,new Promise((a,e)=>{this.resolve=a})}},props:{modelValue:{type:String}}};function Go(a,e,i,s,o,r){return h(),b(X,{modelValue:o.visivel,"onUpdate:modelValue":e[0]||(e[0]=u=>o.visivel=u),onHide:e[1]||(e[1]=u=>r.onHide())},{default:n(()=>[t(I,null,{default:n(()=>[t(L,null,{default:n(()=>[t(O,null,{default:n(()=>[y("Alterar foto")]),_:1}),z(t(g,{dense:"",flat:"",icon:"close",round:""},null,512),[[M]])]),_:1}),t(Y,{"auto-expand":"",color:"none",class:"mobile-only",label:"Foto","hide-upload-button":"","hide-upload-progress":"","dark-light":"",url:"",ref:"fotoCampo",factory:r.trocarFoto},null,8,["factory"]),t(Y,{"auto-expand":"",color:"none",class:"mobile-hide",extensions:".jpg,.jpeg",label:"Foto","hide-upload-button":"","hide-upload-progress":"","dark-light":"",url:"",ref:"fotoCampo",factory:r.trocarFoto},null,8,["factory"])]),_:1})]),_:1},8,["modelValue"])}var Wo=Q(Jo,[["render",Go]]);const Xo={components:{Avatar:fo,Badge:go,Icone:Uo,SeletorCampoTabela:bo,SeletorCidade:Eo,SeletorPais:Po,ConsultaCNPJ:Bo,ContatoCriar:Co,RedesSociaisModal:Ho,PromptGrupoUnico:vo,modalTrocarFoto:Wo,Arquivo:Vo},computed:{badgeCor(){return this.contato.ativo?this.contato.condutaRestricao?"negative":this.contato.condutaObservacao?"orange":"positive":"tertiary"},ehEmpresa(){const a=this.contato.numeroDocumentoNacional;return a?a.length>14:!1},idade(){let a=this.contato.dataAbertura;if(!a)return 0;a=new Date(a);const e=new Date(Date.now()-a.getTime());return Math.abs(e.getUTCFullYear()-1970)},segmentoProfissao(){const a=this.contato.numeroDocumentoNacional||"";return a.length>14?"Segmento":a.length>=11?"Profiss\xE3o":"Segmento/Profiss\xE3o"},temRedeSocial(){return this.redeSocial&&!!this.redeSocial.length}},data(){return{contato:{},contatoOriginal:{},endereco:[],enderecoEstrangeiro:{},telefone:[],redeSocial:[],consulta:[],grupo:[],filhos:[],filhosId:{},arquivo:[],tab:"profile-tab-1",consultaDescricao:"",descricaoAssistente:"",descricaoFormaPagamento:"",descricaoItemTabelaPreco:"",descricaoTransportadora:"",descricaoEmpresaCarteira:"",descricaoContatoLider:"",descricaoVendedor:"",filhoCampo:"",contatoUsuario:{},somenteCarteira:!1,podeAlterarVendedorAssistente:!1,opcoesDependentes:[],opcoesTabelaPreco:[],enderecoTipos:[{label:"Principal",value:"Principal",icon:"star",color:"orange"},{label:"Cobran\xE7a",value:"Cobran\xE7a",icon:"attach_money"},{label:"Comercial",value:"Comercial",icon:"business"},{label:"Correspond\xEAncia",value:"Correspond\xEAncia",icon:"mail"},{label:"Entrega",value:"Entrega",icon:"local_shipping"},{label:"Instala\xE7\xE3o",value:"Instala\xE7\xE3o",icon:"build"},{label:"Residencial",value:"Residencial",icon:"store_mall_directory"},{label:"Outros",value:"Outros",icon:"location_city"}],regimes:[{label:"Normal",value:"Normal"},{label:"Simples Nacional",value:"SimplesNacional"}],sexos:[{label:"Masculino",value:"Masculino"},{label:"Feminino",value:"Feminino"},{label:"Outro",value:"Outro"}],telefoneTipos:[{label:"Principal",value:"Principal",color:"orange",icon:"star"},{label:"Comercial",value:"Comercial",color:"dark",icon:"phone"},{label:"Celular",value:"Celular",color:"dark",icon:"phone_iphone"},{label:"Fixo",value:"Fixo",color:"dark",icon:"phone"},{label:"WhatsApp",value:"WhatsApp",color:"positive",icon:"mdi-whatsapp",ix:"duo"}],permissoes:{},configuracoes:{},rules:{}}},methods:{async atualizar({id:a}){var e;try{if(a||(a=this.$route.params.id),this.somenteCarteira=!1,this.contatoUsuario={},!$db.usuario.logado.administrador&&await $db.permissao.objetoClienteSistema("Diretiva_Contatos_AcessaTodosContatos")&&!await $db.permissao.objeto("Diretiva_Contatos_AcessaTodosContatos")){let o=$db.usuario.logado.codigoContato;o&&(this.contatoUsuario=(await $erp().contato.where({codigoContato:o}).toArray()).find(r=>r.id)),this.somenteCarteira=!0}this.podeAlterarVendedorAssistente=!1,!$db.usuario.logado.administrador&&await $db.permissao.objetoClienteSistema("Diretiva_Contatos_AlterarVendedorEAssistente")&&!await $db.permissao.objeto("Diretiva_Contatos_AlterarVendedorEAssistente")&&(this.podeAlterarVendedorAssistente=!0);const i=await $db.contato.leCompletoV3(a);this.contato=i.contato;for(let o=0;o<i.endereco.length;o++)this.enderecoEstrangeiro[o]=!1,((e=i.endereco[o].uf)!=null?e:"").toUpperCase()==="EX"&&(this.enderecoEstrangeiro[o]=!0);this.arquivoOriginal=await $db.arquivo.ler({filtros:{idTabelaMaster:this.contato.id}}),this.arquivo=$utils.clonarV2(this.arquivoOriginal),this.endereco=i.endereco,this.telefone=i.telefone,this.redeSocial=i.redeSocial,this.filhos=i.filhos,this.consulta=i.consulta,this.grupo=i.grupo.map(o=>({...o,label:o.descricao})),this.contatoOriginal=$utils.clonarV2(i.contato),this.enderecoOriginal=$utils.clonarV2(i.endereco),this.telefoneOriginal=$utils.clonarV2(i.telefone),this.redeSocialOriginal=$utils.clonarV2(i.redeSocial),this.filhosOriginal=$utils.clonarV2(i.filhos),this.consultaOriginal=$utils.clonarV2(i.consulta),this.grupoOriginal=$utils.clonarV2(i.grupo),a===""&&(i.contato.id=$utils.uuid(),this.contatoOriginal={});const s=i.contato;this.descricaoAssistente=(await $erp().contato.get(s.idContatoAssistente||"")||{}).apelido||"",this.descricaoTransportadora=(await $erp().contato.get(s.idContatoTransportadora||"")||{}).apelido||"",this.descricaoEmpresaCarteira=(await $erp().contato.get(s.idEmpresaCarteira||"")||{}).apelido||"",this.descricaoContatoLider=(await $erp().contato.get(s.idContatoLider||"")||{}).apelido||"",this.descricaoVendedor=(await $erp().contato.get(s.idContatoVendedor||"")||{}).apelido||"",this.descricaoFormaPagamento=(await $erp().formaPagamento.get(s.idFormaPagamento||"")||{}).descricao||"",this.descricaoItemTabelaPreco=(await $erp().itemTabelaPreco.get(s.idItemTabelaPreco||"")||{}).descricao||"";for(const o of i.filhos)this.filhosId[o.idContatoRelacionado]=await $db.contato.le({id:o.idContatoRelacionado});this.atualizarTabelaPreco()}catch(i){this.$q.notifyError("Ocorreu um erro ao obter contato.",i)}},async restaurarContato(){try{$q.loading.show(),this.contato.ativo=!0,await this.salvarContato(),this.$q.notifyPositive("O contato foi restaurado com sucesso.")}catch{this.$q.notify("Ocorreu um erro ao restaurar.")}finally{this.$q.loading.hide()}},validateEmail(a){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a).toLowerCase())},async salvarContato(){if(!this.verificarSeAlterouCampos())return this.$q.notifyPositive("N\xE3o h\xE1 dados alterados.");try{this.$q.loading.show();const a=this.contato.id,e=$utils.clonarV2(this.grupo).map(s=>(s.descricao=s.label,s.idContato=a,delete s.label,s)),i={dadosOriginais:{contato:this.contatoOriginal,endereco:this.enderecoOriginal,telefone:this.telefoneOriginal,redeSocial:this.redeSocialOriginal,filhos:this.filhosOriginal,consulta:this.consultaOriginal,grupo:this.grupoOriginal},contato:this.contato,endereco:this.endereco,telefone:this.telefone,redeSocial:this.redeSocial,filhos:this.filhos,consulta:this.consulta,grupo:e};await $db.contato.grava(i),await $db.arquivo.remove(this.arquivoOriginal.filter(s=>!this.arquivo.find(o=>o.id===s.id)));for(const s of this.arquivo)await $db.arquivo.gravar({original:this.arquivoOriginal.find(o=>o.id===s.id),atual:s});await this.atualizar({id:a}),$db.contato.selecionado=await $db.contato.le({id:a}),$utils.emitter.emit("carregarContatoAtendimentoLayout"),$q.notifyPositive("Os dados do contato foram salvos com sucesso.")}catch(a){$q.notifyError("Ocorreu um erro ao salvar.",a)}finally{$q.loading.hide()}},async contatoRemover(){let a=!1;if(this.$refs.form.getValidationComponents().forEach(e=>{!e.validate()&&!a&&(a=!0)}),!a){await this.removerConfirma();try{$q.loading.show();const e=$utils.clonar(this.contato),i=e.id;e.ativo=!1;const s={dadosOriginais:{contato:this.contatoOriginal},contato:e};await $db.contato.grava(s),await this.atualizar({id:i}),$db.contato.selecionado=await $db.contato.le({id:i}),$utils.emitter.emit("carregarContatoAtendimentoLayout"),$q.notifyPositive("O contato foi exclu\xEDdo com sucesso.")}catch(e){$q.notifyError("Ocorreu um erro ao remover",e)}finally{$q.loading.hide()}}},aoCancelar(){if(!this.verificarSeAlterouCampos()){this.$q.notifyPositive("N\xE3o h\xE1 dados alterados.");return}this.$q.dialog({cancel:{label:"Manter",push:!0,color:"tertiary",flat:!0},title:"Tem certeza?",message:"Ao continuar voc\xEA ir\xE1 perder todas as modifica\xE7\xF5es.",ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{this.atualizar({id:this.contato.id})})},async dependenteCriar(){const a=await this.$refs.promptCriarDependente.mostrar();$lodash.get(a,"nome")&&this.filhoAdicionar({data:a})},async filhosBuscar(a,e){try{if(a=a.trim(),this.opcoesDependentes=[],a.length>1){const i=(await $db.contato.ler({filtros:{termoBusca:a,ativo:!0}})).data;this.opcoesDependentes=i.map(s=>({data:s,label:s.apelido,stamp:"#0000000",sublabel:s.nome,value:s.nome}))}e()}catch{e(),this.$q.notify("Ocorreu um erro ao obter os contatos.")}},async filhoRemover(a){await this.removerConfirma();const e=this.filhos.filter(i=>!(i.idContato===a.idContato&&i.idContatoRelacionado===a.idContatoRelacionado||i.idContato===a.idContatoRelacionado&&i.idContatoRelacionado===a.idContato));this.filhos=e},async filhoAdicionar(a){const e=a.data;this.filhoCampo="",this.filhosId[e.id]=await $db.contato.le({id:e.id}),this.filhos.push({id:$utils.uuid(),idContato:this.contato.id,idContatoRelacionado:e.id,socio:!1,cobranca:!1}),this.filhos.push({id:$utils.uuid(),idContato:e.id,idContatoRelacionado:this.contato.id,socio:!1,cobranca:!1}),this.filhos=$.exports.orderBy(this.filhos,"apelido")},async btSelecionarVendedor_click(){var s,o;const a=$utils.clonarV2(this.contato),e=this.descricaoVendedor,i=await $g.promptContato.show({filtro:{ativo:!0,vendedores:!0},placeholder:"Selecione o vendedor"});i!=null&&i.id&&(this.contato.idContatoVendedor=i.id,this.descricaoVendedor=i.apelido||""),(a==null?void 0:a.idContatoVendedor)&&((s=this.contato)==null?void 0:s.idContatoVendedor)&&(a==null?void 0:a.idContatoVendedor)!==((o=this.contato)==null?void 0:o.idContatoVendedor)&&$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},title:"Alterar Vendedor",message:`Deseja alterar o Vendedor em todos os Clientes de '${e}'' para '${this.descricaoVendedor}'?`,ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(async()=>{try{$q.loading.show();const r=await $db.hibrido.lista({table:"contato",whereFilter:{idContatoVendedor:a==null?void 0:a.idContatoVendedor}}),u=$utils.clonarV2(r);u.map(c=>{var w;c.idContatoVendedor=(w=this.contato)==null?void 0:w.idContatoVendedor});for(let c=0;c<u.length;c++)try{await $db.contato.grava({dadosOriginais:{contato:r[c]},contato:u[c]})}catch(w){console.error(w)}}catch(r){console.log(r.message),$q.notifyError("Ocorreu um erro ao alterar Vendedor",r)}finally{$q.loading.hide()}})},vendedorLimpar(){this.contato.idContatoVendedor="",this.descricaoVendedor=""},async btSelecionarAssistente_click(){const a=await $g.promptContato.show({filtro:{ativo:!0,vendedores:!0},placeholder:"Selecione a empresa"});$lodash.get(a,"id")&&(this.contato.idContatoAssistente=a.id,this.descricaoAssistente=a.apelido||"")},assistenteLimpar(){this.contato.idContatoAssistente="",this.descricaoAssistente=""},async btSelecionaFormaPagamento_click(){const a=await this.$root.$refs.promptFormaPagamento.show();!$lodash.get(a,"id")||(this.contato.idFormaPagamento=a.id,this.descricaoFormaPagamento=a.descricao||"")},formaPagamentoLimpar(){this.contato.idFormaPagamento="",this.descricaoFormaPagamento=""},async btSelecionarTransportadora_click(){const a=await $g.promptContato.show({filtro:{ativo:!0,transportadoras:!0},placeholder:"Transportadora"});$lodash.get(a,"id")&&(this.contato.idContatoTransportadora=a.id,this.descricaoTransportadora=a.apelido||"")},transportadoraLimpar(){this.contato.idContatoTransportadora="",this.descricaoTransportadora=""},async btSelecionarEmpresaCarteira_click(){const a=await $g.promptContato.show({filtro:{ativo:!0,empresas:!0},placeholder:"Empresa Carteira"});$lodash.get(a,"id")&&(this.contato.idEmpresaCarteira=a.id,this.descricaoEmpresaCarteira=a.apelido||"")},empresaCarteiraLimpar(){this.contato.idEmpresaCarteira="",this.descricaoEmpresaCarteira=""},async btSelecionarContatoLider_click(){const a=await $g.promptContato.show({filtro:{ativo:!0},placeholder:"Contato L\xEDder"});!a.id||(this.contato.idContatoLider=a.id,this.descricaoContatoLider=a.apelido||"")},contatoLiderLimpar(){this.contato.idContatoLider="",this.descricaoContatoLider=""},async btRedeSocialadicionar_click(){const a=await this.$refs.modalRedesSociais.show({idContato:this.contato.id,itens:this.redeSocial});this.redeSocial=a},consultaAdicionar(){try{if(!this.consultaDescricao){this.$q.notifyError("Informar a descri\xE7\xE3o da consulta de cadastro");return}const a=this.consultaDescricao+` (Cadastro realizado pelo usu\xE1rio: ${$db.usuario.logado.nome} - CPF: ${this.$filters.cpfCnpj($db.usuario.logado.numeroDocumentoNacional)})`;this.consulta.push({id:$utils.uuid(),idContato:this.contato.id,dataConsulta:$utils.dataAtual(),descricao:a}),this.consulta=$.exports.orderBy(this.consulta,"dataConsulta","desc"),this.consultaDescricao=""}catch(a){this.$q.notifyError("Ocorreu um erro ao adicionar",a)}},async fotoTrocar_click(){const a=await this.$refs.modalTrocarFoto.show();a&&(this.contato.imagem=a)},uploadClick(){this.$refs.Upload.click()},async abrirArquivo(a){const e=this.$refs.Upload.files;if(FileReader&&e&&e.length){var i=new FileReader;i.onload=()=>{eo(e[0],{crop:!0,outputFormat:"jpg",targetHeight:200,targetWidth:200},(s,o)=>{this.contato.imagem=o})},i.readAsDataURL(e[0])}},async grupoSelecionar_Click(){const a=await this.$refs.PromptGrupoUnico.show();!a.descricao||this.grupo.push({id:$utils.uuid(),label:a.descricao})},async atualizarTabelaPreco(a,e,i){const s=await $db.itemTabelaPreco.le({tabelaMaster:!0})||[];for(const o of s)o.empresa=(await $db.contato.le({id:o.idEmpresa})).nome;this.opcoesTabelaPreco=s,typeof e=="function"&&e()},telefoneAdicionar(){this.telefone.push({id:$utils.uuid(),idContato:this.contato.id})},async telefoneAbrir(a){if(!a.telefone)return;const e=a.tipoTelefone==="WhatsApp"?"https://api.whatsapp.com/send?phone=":"tel:+";this.abrirURL(e+await $utils.formatarTelefone(a))},async telefoneRemover(a){await this.removerConfirma(),a>=0&&this.telefone.splice(a,1)},enderecoAdicionar(){this.endereco.push({id:$utils.uuid(),idContato:this.contato.id}),this.enderecoEstrangeiro[this.endereco.length-1]=!1},async enderecoRemover(a){await this.removerConfirma(),a>=0&&this.endereco.splice(a,1)},enderecoIcone(a){const e=this.enderecoTipos.find(i=>i.label===a)||{};return{color:e.color||"dark",name:e.icon||"store_mall_directory",size:a==="Principal"?"18px":"24px"}},consultarCep(a){const e=this.endereco[a];if(!e.cep||this.enderecoEstrangeiro[a])return;const i=e.cep.replace(/[^0-9]/g,"");i.length<8||$utils.buscarEndereco(i).then(async({data:s})=>{if(e.bairro=s.bairro,e.complemento=s.complemento,e.ibgeCod=s.ibge,e.logradouro=s.logradouro,e.municipio=s.localidade,e.pais="Brasil",e.codigoPais=1058,e.uf=s.uf,e.ufCod=$utils.mapearEstadoCodigo[s.uf],s.ibge){const o=await $db.cidade.le({cidadeCodIbge:s.ibge.toString(),ativo:!0});e.cidadeCodChave=(o.find(r=>r.cod)||{}).cod}})},async selecionarCidade(a,e){const i=this.endereco[e];i.municipio=a.municipio||"",i.ibgeCod=a.ibgeCod||"",i.uf=a.uf||"",i.ufCod=a.ufCod||"",i.cidadeCodChave=a.cidadeCodChave||"",i.codigoPais=1058,i.pais="Brasil"},async selecionarPais(a,e){const i=this.endereco[e];i.pais=a.nome,i.codigoPais=a.codigo,this.enderecoEstrangeiro[e]=!1,a.codigo!==1058&&(this.enderecoEstrangeiro[e]=!0,this.setarEstrangeiro(e))},removerConfirma(){return new Promise((a,e)=>{this.$q.dialog({cancel:{label:"N\xE3o",push:!0,color:"tertiary",flat:!0},title:"Remover",message:"Ao continuar voc\xEA ir\xE1 remover este contato.",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk(()=>{a()})})},verificarSeAlterouCampos(){const a={contato:this.contatoOriginal,endereco:this.enderecoOriginal,telefone:this.telefoneOriginal,redeSocial:this.redeSocialOriginal,filhos:this.filhosOriginal,consulta:this.consultaOriginal,grupo:this.grupoOriginal};for(const o of this.arquivoOriginal)if(!this.arquivo.some(r=>r.id===o.id))return!0;for(const o of this.arquivo)if(!this.arquivoOriginal.some(r=>r.id===o.id))return!0;const e=$utils.clonarV2(this.grupo).map(o=>(o.descricao=o.label,o.idContato=this.contato.id,delete o.label,o)),i={contato:this.contato,endereco:this.endereco,telefone:this.telefone,redeSocial:this.redeSocial,filhos:this.filhos,consulta:this.consulta,grupo:e},s=$utils.diferenca(a,i);return $utils.gconsole.log("ContatoFicha","verificarSeAlterouCampos",s!==null,s),s!==null},abrirURL(a){Ao(a)},async configRules(){await $db.contato.carregarMemoria(),this.rules={numeroDocumentoNacional:[()=>{const a=(this.contato.numeroDocumentoNacional||"").replace(/\D/g,"");if(!a.trim())return!0;if(!$utils.validarDocumentoNacional(a))return"Documento inv\xE1lido";for(const e of $db.contato.contatos){if(e.id===this.contato.id)continue;const i=(e.numeroDocumentoNacional||"").replace(/\D/g,"");if(!!i&&a===i)return"Documento j\xE1 existente"}return!0}]}},setarEstrangeiro(a){this.endereco[a].municipio="Exterior",this.endereco[a].ibgeCod="9999999",this.endereco[a].cep="99999-999",this.endereco[a].uf="EX"}},watch:{"campos.nome"(a,e){this.campos.apelido===e&&(this.campos.apelido=a)},"$route.params.id"(){this.atualizar({id:this.$route.params.id})}},created(){this.configRules(),this.permissoes={editarLimiteCredito:!1,editarCondutaRestricao:!1},this.configuracoes={descontoCondicionado:!1},$db.configuracoes.le({nome:"usa.DescontoCondicionado"}).then(a=>{var e;this.configuracoes.descontoCondicionado=Number((e=a[0])==null?void 0:e.valor)||!1}),$db.permissao.objeto("Diretiva_Contatos_EditaLimiteCredito").then(a=>{this.permissoes.editarLimiteCredito=a}),$db.permissao.objeto("Diretiva_Contatos_EditaCondutaRestricao").then(a=>{this.permissoes.editarCondutaRestricao=a}),this.atualizar({id:this.id||""})},props:{id:{required:!1,default:null}}},Zo={class:"col-12 col-md-3 text-center"},Ko={class:"group q-mt-md"},Yo={class:"col-12 col-md-6"},$o={key:0,class:"text-right"},oe={class:"col-12 col-sm-4"},ee={class:"col-12 col-sm-4"},te={class:"col-12 col-sm-4"},ae=d("div",{class:"text-subtitle1 q-mt-lg"},"Telefones",-1),le={class:"col-6 col-sm-4"},re={class:"col-6 col-sm-4"},ie={class:"col-10 col-sm-3"},se={class:"mlmobile34"},ne={class:"col-2 col-sm-1 text-right"},ce={class:"q-mt-md text-center"},de=d("div",{class:"text-subtitle1 q-mt-lg"},"Endere\xE7os",-1),ue={class:"col-8"},me={class:"col-4"},pe={class:"col-5"},he={class:"col-2"},fe={class:"col-5"},ge={class:"col-12 col-sm-5"},be={class:"col-3 col-sm-2"},Ce={class:"col-9 col-sm-5"},ve={class:"col-5 col-sm-6"},Ve={class:"col-5"},_e={class:"col-2 col-sm-1 text-right"},Te={class:"q-my-md text-center"},ye={class:"col-12 col-md-3"},we={class:"col-12 col-sm-4"},ke={class:"col-12 col-sm-4"},Se={class:"col-12 col-sm-4"},qe={class:"col-12 col-sm"},Ue={key:0,class:"col-12 col-sm"},Ee={class:"col-12 col-sm"},Pe={class:"col-12 col-sm"},Ae={class:"col-12 col-sm-6"},De={class:"col-12 col-sm-6"},xe={class:"col-12 q-mt-sm"},Fe={class:"q-mt-lg"},Ne={class:"col-auto"},Re={class:"col"},Le={class:"q-mb-none"},Oe={class:"q-mb-none"},Ie={class:"q-mb-none"},ze={class:"hideondesktop"},je={class:"hideondesktop"},Be={class:"col-12 col-md hideonmobile"},Me={class:"col-12 col-md-auto hideonmobile",style:{"justify-content":"flex-start !important"}},Qe={class:"col-12 col-md-auto"},He={class:"col"},Je={class:"col-auto text-right"},Ge={class:"col-12 col-sm-6"},We={class:"col-12 col-sm-6"},Xe={class:"q-col-gutter-sm items-center row"},Ze=d("strong",null,"Empresa: ",-1),Ke=d("strong",null,"Fator (%): ",-1),Ye=d("strong",null,"Arredondamento: ",-1),$e={class:"col-12 col-sm-4"},ot={class:"col-12 col-sm-4"},et={class:"q-pa-md"},tt={class:"items-center justify-around q-my-lg row"},at={key:0},lt={key:1},rt={class:"u-container relative-position"},it={key:1,class:"q-py-sm"},st=d("span",{class:"text-tertiary"},"N\xE3o \xE9 poss\xEDvel editar informa\xE7\xF5es de um contato exclu\xEDdo.",-1);function nt(a,e,i,s,o,r){const u=V("avatar"),c=V("icone"),w=V("badge"),p=V("campo"),T=V("row"),j=V("SeletorCidade"),E=V("SeletorPais"),to=V("SeletorCampoTabela"),ao=V("gchips"),lo=V("arquivo"),ro=V("contato-criar"),io=V("RedesSociaisModal"),so=V("modalTrocarFoto"),no=V("ConsultaCNPJ"),co=V("PromptGrupoUnico"),uo=_o("mask");return h(),C(q,null,[t(G,{ref:"form",onSubmit:r.salvarContato,class:"ContatoFicha q-mt-md"},{default:n(()=>[t(I,{class:"bg-white no-shadow q-px-md q-py-md"},{default:n(()=>[t(T,{class:"q-col-gutter-x-md justify-around"},{default:n(()=>[d("div",Zo,[t(u,{imagem:o.contato.imagem,rotulo:o.contato.apelido,tamanho:"160",onClick:r.uploadClick},null,8,["imagem","rotulo","onClick"]),d("input",{ref:"Upload",type:"file",id:"Upload",onChange:e[0]||(e[0]=(...l)=>r.abrirArquivo&&r.abrirArquivo(...l)),style:{visibility:"hidden"}},null,544),d("div",Ko,[(h(!0),C(q,null,A(o.redeSocial,(l,f)=>(h(),b(g,{color:l.tipo==="link"?"primary":l.tipo,key:f,round:"",size:"sm",onClick:m=>r.abrirURL(l.link),class:"q-mx-xs"},{default:n(()=>[l.tipo==="link"?(h(),b(v,{key:0,name:"launch"})):(h(),b(c,{key:1,nome:l.tipo,tamanho:"12"},null,8,["nome"]))]),_:2},1032,["color","onClick"]))),128)),t(g,{color:"positive",icon:"add",outline:"",round:r.temRedeSocial,size:"sm",class:"q-mx-xs",onClick:r.btRedeSocialadicionar_click},null,8,["round","onClick"])])]),d("div",Yo,[o.contato&&o.contato.codigoContato?(h(),C("div",$o,[t(w,{cor:r.badgeCor,escuro:""},{default:n(()=>[y("#"+k((o.contato.codigoContato||0).toString().padStart(6,"0")),1)]),_:1},8,["cor"])])):_("",!0),t(p,{tipo:"texto",class:"q-title",placeholder:r.ehEmpresa?"Fantasia":"Apelido",autogrow:"","class-campo":"q-pb-sm",modelValue:o.contato.apelido,"onUpdate:modelValue":e[1]||(e[1]=l=>o.contato.apelido=l),rules:[l=>l&&l.length>2||"obrigat\xF3rio."],dense:""},null,8,["placeholder","modelValue","rules"]),t(p,{tipo:"texto",rotulo:r.ehEmpresa?"Raz\xE3o social":"Nome completo",modelValue:o.contato.nome,"onUpdate:modelValue":e[2]||(e[2]=l=>o.contato.nome=l),autogrow:"","class-campo":"q-pb-sm",rules:[l=>l&&l.length>2||"O nome \xE9 obrigat\xF3rio."],dense:""},null,8,["rotulo","modelValue","rules"]),t(T,{class:"q-col-gutter-sm"},{default:n(()=>[d("div",oe,[z((h(),b(oo,{label:r.ehEmpresa?"CNPJ":"CPF/CNPJ",class:"q-pb-xs",modelValue:o.contato.numeroDocumentoNacional,"onUpdate:modelValue":e[4]||(e[4]=l=>o.contato.numeroDocumentoNacional=l),rules:o.rules.numeroDocumentoNacional,dense:""},{append:n(()=>[(o.contato.numeroDocumentoNacional||"").length===18&&a.$utils.validarDocumentoNacional(o.contato.numeroDocumentoNacional)?(h(),b(g,{key:0,dense:"",flat:"",round:"",icon:"mdi-arrow-down-bold-circle",color:"positive",onClick:e[3]||(e[3]=l=>a.$refs.consultaCNPJ.consultar(o.contato.numeroDocumentoNacional))},{default:n(()=>[t(N,null,{default:n(()=>[y("Consultar cadastro")]),_:1})]),_:1})):_("",!0)]),_:1},8,["label","modelValue","rules"])),[[uo,["###.###.###-##","##.###.###/####-##"]]])]),d("div",ee,[t(p,{rotulo:r.ehEmpresa?"Inscri\xE7\xE3o estadual":"RG/IE",modelValue:o.contato.numeroDocumentoEstadual,"onUpdate:modelValue":e[5]||(e[5]=l=>o.contato.numeroDocumentoEstadual=l),class:"q-pb-xs"},null,8,["rotulo","modelValue"])]),d("div",te,[t(p,{rotulo:"Inscri\xE7\xE3o municipal",modelValue:o.contato.numeroDocumentoMunicipal,"onUpdate:modelValue":e[6]||(e[6]=l=>o.contato.numeroDocumentoMunicipal=l),class:"q-pb-xs"},null,8,["modelValue"])])]),_:1}),ae,(h(!0),C(q,null,A(o.telefone,(l,f)=>(h(),C("div",{key:f,class:"q-mt-md"},[t(T,null,{default:n(()=>[d("div",le,[t(U,{modelValue:l.tipoTelefone,"onUpdate:modelValue":m=>l.tipoTelefone=m,options:o.telefoneTipos,"option-value":"value","option-label":"label","emit-value":"","map-options":"",dense:"",label:"Tipo"},{before:n(()=>[t(g,{flat:"",round:"",icon:(o.telefoneTipos.find(m=>m.value===l.tipoTelefone)||{}).icon||"star",color:"tertiary",size:"sm",onClick:m=>r.telefoneAbrir(l)},null,8,["icon","onClick"])]),option:n(m=>[t(B,H(J(m.itemProps)),{default:n(()=>[t(F,{avatar:""},{default:n(()=>[t(v,{name:m.opt.icon},null,8,["name"])]),_:2},1024),t(F,null,{default:n(()=>[t(P,{innerHTML:m.opt.label},null,8,["innerHTML"])]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),d("div",re,[t(p,{rotulo:"Telefone",modelValue:l.telefone,"onUpdate:modelValue":m=>l.telefone=m},null,8,["modelValue","onUpdate:modelValue"])]),d("div",ie,[d("div",se,[t(p,{rotulo:"Descri\xE7\xE3o",modelValue:l.observacao,"onUpdate:modelValue":m=>l.observacao=m},null,8,["modelValue","onUpdate:modelValue"])])]),d("div",ne,[t(g,{onClick:m=>r.telefoneRemover(f),icon:"delete",flat:"",round:"",dense:"",color:"tertiary",class:"q-mt-sm"},null,8,["onClick"])])]),_:2},1024)]))),128)),d("div",ce,[t(g,{color:"positive",icon:"add",label:"Telefone",outline:"",size:"sm",onClick:r.telefoneAdicionar},null,8,["onClick"])]),de,(h(!0),C(q,null,A(o.endereco,(l,f)=>(h(),C("div",{class:"u-separador animate-pop q-mt-md",key:f},[t(T,null,{default:n(()=>[d("div",ue,[t(U,{modelValue:l.grupo,"onUpdate:modelValue":m=>l.grupo=m,options:o.enderecoTipos,"option-value":"value","option-label":"label",class:"q-pb-md","emit-value":"","map-options":"",dense:"",label:"Grupo"},{before:n(()=>[t(v,To(r.enderecoIcone(l.grupo),{color:"tertiary",size:"xs",class:"q-mx-xs"}),null,16)]),option:n(m=>[t(B,H(J(m.itemProps)),{default:n(()=>[t(F,{avatar:""},{default:n(()=>[t(v,{name:m.opt.icon},null,8,["name"])]),_:2},1024),t(F,null,{default:n(()=>[t(P,{innerHTML:m.opt.label},null,8,["innerHTML"])]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),d("div",me,[t(R,{modelValue:l.estrangeiro,"onUpdate:modelValue":[m=>l.estrangeiro=m,m=>r.setarEstrangeiro(f)],val:!1,label:"Estrangeiro",class:"q-pl-none"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024),t(T,null,{default:n(()=>[d("div",pe,[t(p,{debounce:"500",rotulo:"CEP",tipo:"texto",modelValue:l.cep,"onUpdate:modelValue":m=>l.cep=m,onChange:m=>r.consultarCep(f),mask:"#####-###",dense:"",rules:[m=>m&&m.replace(/\D/g,"").length===8||"O CEP est\xE1 muito curto."],class:"q-pb-none","somente-leitura":o.enderecoEstrangeiro[f]},null,8,["modelValue","onUpdate:modelValue","onChange","rules","somente-leitura"])]),d("div",he,[t(p,{"class-campo":"q-pb-none ",rotulo:"UF",maxlength:"2",modelValue:l.uf,"onUpdate:modelValue":m=>l.uf=m,onBlur:o.endereco.$touch,dense:"",rules:[m=>m&&m.length===2||"Insira um UF."],"somente-leitura":o.enderecoEstrangeiro[f]},null,8,["modelValue","onUpdate:modelValue","onBlur","rules","somente-leitura"])]),d("div",fe,[t(j,{ibgeCod:l.ibgeCod,onSelecionar:m=>r.selecionarCidade(m,f),required:"","somente-leitura":o.enderecoEstrangeiro[f]},null,8,["ibgeCod","onSelecionar","somente-leitura"])]),d("div",ge,[t(p,{"class-campo":"q-pb-md",rotulo:"Endere\xE7o",modelValue:l.logradouro,"onUpdate:modelValue":m=>l.logradouro=m,autogrow:"",onBlur:o.endereco.$touch,dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",be,[t(p,{"class-campo":"q-pb-md",rotulo:"N\xFAmero",modelValue:l.numero,"onUpdate:modelValue":m=>l.numero=m,onBlur:o.endereco.$touch,dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",Ce,[t(p,{rotulo:"Complemento",modelValue:l.complemento,"onUpdate:modelValue":m=>l.complemento=m,onBlur:o.endereco.$touch,"class-campo":"q-pb-md",dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",ve,[t(p,{rotulo:"Bairro",modelValue:l.bairro,"onUpdate:modelValue":m=>l.bairro=m,onBlur:o.endereco.$touch,"class-campo":"q-pb-sm",dense:""},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),d("div",Ve,[t(E,{codigoPais:l.codigoPais,onSelecionar:m=>r.selecionarPais(m,f),required:""},null,8,["codigoPais","onSelecionar"])]),d("div",_e,[t(g,{onClick:m=>r.enderecoRemover(f),icon:"delete",flat:"",round:"",dense:"",color:"tertiary",class:"q-mt-sm"},null,8,["onClick"])])]),_:2},1024)]))),128)),d("div",Te,[t(g,{color:"positive",icon:"add",label:"Endere\xE7o",outline:"",size:"sm",onClick:r.enderecoAdicionar},null,8,["onClick"])])]),d("div",ye,[t(p,{rotulo:"Observa\xE7\xF5es",rows:"10",tipo:"textoArea",modelValue:o.contato.observacao,"onUpdate:modelValue":e[7]||(e[7]=l=>o.contato.observacao=l)},null,8,["modelValue"])])]),_:1})]),_:1}),t(yo,{modelValue:o.tab,"onUpdate:modelValue":e[8]||(e[8]=l=>o.tab=l),class:"bg-transparent q-mt-lg text-primary",color:"transparent",align:"left"},{default:n(()=>[t(D,{label:"Dados Adicionais",name:"profile-tab-1"}),t(D,{label:"Dependentes / Empresa",name:"profile-tab-2"}),t(D,{label:"Consulta de cadastro",name:"profile-tab-3"}),t(D,{label:"Conduta",name:"profile-tab-4"}),t(D,{label:"Configura\xE7\xF5es comerciais",name:"profile-tab-5"}),t(D,{label:"Arquivos",name:"profile-arquivos"})]),_:1},8,["modelValue"]),t(wo,{modelValue:o.tab,"onUpdate:modelValue":e[42]||(e[42]=l=>o.tab=l),animated:""},{default:n(()=>[t(x,{class:"bg-white",name:"profile-tab-1"},{default:n(()=>[t(T,{class:"q-col-gutter-sm"},{default:n(()=>[d("div",we,[t(p,{modelValue:o.contato.email,"onUpdate:modelValue":e[9]||(e[9]=l=>o.contato.email=l),before:[{icon:"alternate_email"}],rotulo:"E-mail",rules:[l=>r.validateEmail(l)||(l||"").length===0||"email inv\xE1lido"]},null,8,["modelValue","rules"])]),d("div",ke,[t(p,{modelValue:o.contato.site,"onUpdate:modelValue":e[10]||(e[10]=l=>o.contato.site=l),before:[{icon:"language"}],rotulo:"Site"},null,8,["modelValue"])]),d("div",Se,[t(to,{modelValue:o.contato.segmento,"onUpdate:modelValue":e[11]||(e[11]=l=>o.contato.segmento=l),tabela:"contato",campo:"segmento",label:r.segmentoProfissao,buscarSemCaractere:!0,enableAdd:""},null,8,["modelValue","label"])]),r.ehEmpresa?(h(),C(q,{key:0},[d("div",qe,[t(p,{tipo:"seletor",dense:"","rotulo-fixo":"Regime",options:o.regimes,modelValue:o.contato.regime,"onUpdate:modelValue":e[12]||(e[12]=l=>o.contato.regime=l)},null,8,["options","modelValue"])]),o.contato.regime==="Normal"?(h(),C("div",Ue,[t(p,{modelValue:o.contato.tributacao,"onUpdate:modelValue":e[13]||(e[13]=l=>o.contato.tributacao=l),tipo:"seletor","rotulo-fixo":"Tributa\xE7\xE3o",opcoes:[{rotulo:"",valor:""},{rotulo:"Lucro real",valor:"1"},{rotulo:"Lucro presumido",valor:"2"}]},null,8,["modelValue"])])):_("",!0),d("div",Ee,[t(p,{modelValue:o.contato.tributacaoSetor,"onUpdate:modelValue":e[14]||(e[14]=l=>o.contato.tributacaoSetor=l),opcoes:[{rotulo:"",valor:""},{rotulo:"Ind\xFAstria",valor:"1"},{rotulo:"Outros",valor:"99"}],"rotulo-fixo":"Setor tributa\xE7\xE3o",tipo:"seletor"},null,8,["modelValue"])]),d("div",Pe,[t(p,{modelValue:o.contato.dataAbertura,"onUpdate:modelValue":e[15]||(e[15]=l=>o.contato.dataAbertura=l),rotulo:"Data de abertura",clearable:"",suffix:o.contato.dataAbertura?`${r.idade} anos`:"",max:Date.now(),tipo:"data"},null,8,["modelValue","suffix","max"])])],64)):(h(),C(q,{key:1},[d("div",Ae,[t(p,{tipo:"seletor","rotulo-fixo":"Sexo",options:o.sexos,modelValue:o.contato.sexo,"onUpdate:modelValue":e[16]||(e[16]=l=>o.contato.sexo=l)},null,8,["options","modelValue"])]),d("div",De,[t(p,{modelValue:o.contato.dataAbertura,"onUpdate:modelValue":e[17]||(e[17]=l=>o.contato.dataAbertura=l),rotulo:"Data de nascimento",clearable:"",suffix:o.contato.dataAbertura?`${r.idade} anos`:"",max:Date.now(),tipo:"data"},null,8,["modelValue","suffix","max"])])],64))]),_:1}),t(T,null,{default:n(()=>[d("div",xe,[t(ao,{modelValue:o.grupo,"onUpdate:modelValue":e[18]||(e[18]=l=>o.grupo=l),rotulo:"Grupos",dense:"",before:[{icon:"local_offer",handler(){r.grupoSelecionar_Click()}}]},null,8,["modelValue","before"])])]),_:1})]),_:1}),t(x,{class:"bg-white",name:"profile-tab-2"},{default:n(()=>[t(T,null,{default:n(()=>[t(U,{modelValue:o.filhoCampo,"onUpdate:modelValue":[e[19]||(e[19]=l=>o.filhoCampo=l),r.filhoAdicionar],"use-input":"","input-debounce":"500",label:"Dependentes",options:o.opcoesDependentes,outlined:"",onFilter:r.filhosBuscar},{append:n(()=>[t(g,{color:"tertiary",size:"lg",icon:"person_add",dense:"",flat:"",round:"",onClick:r.dependenteCriar},{default:n(()=>[t(N,null,{default:n(()=>[y("Criar contato")]),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue","options","onFilter","onUpdate:modelValue"])]),_:1}),d("div",Fe,[(h(!0),C(q,null,A(o.filhos.filter(l=>l.idContato===o.contato.id),l=>(h(),C(q,{key:l.id},[t(T,{class:"q-col-gutter-x-md items-center"},{default:n(()=>[d("div",Ne,[t(u,{imagem:(o.filhosId[l.idContatoRelacionado]||{}).imagem,rotulo:(o.filhosId[l.idContatoRelacionado]||{}).apelido},null,8,["imagem","rotulo"])]),d("div",Re,[d("p",Le,k((o.filhosId[l.idContatoRelacionado]||{}).apelido),1),d("p",Oe,k((o.filhosId[l.idContatoRelacionado]||{}).nome),1),d("p",Ie,k((o.filhosId[l.idContatoRelacionado]||{}).numeroDocumentoNacional||""),1),d("span",ze,[t(p,{modelValue:l.observacao,"onUpdate:modelValue":f=>l.observacao=f,rotulo:"Observacao"},null,8,["modelValue","onUpdate:modelValue"])]),d("span",je,[t(R,{modelValue:l.socio,"onUpdate:modelValue":f=>l.socio=f,val:!0,label:"S\xF3cio",class:"q-pl-none"},null,8,["modelValue","onUpdate:modelValue"]),t(R,{modelValue:l.cobranca,"onUpdate:modelValue":f=>l.cobranca=f,val:!0,label:"Cobran\xE7a",class:"q-pl-none"},null,8,["modelValue","onUpdate:modelValue"])])]),d("div",Be,[t(p,{modelValue:l.observacao,"onUpdate:modelValue":f=>l.observacao=f,rotulo:"Observacao",autogrow:"",filled:""},null,8,["modelValue","onUpdate:modelValue"])]),d("div",Me,[t(R,{modelValue:l.socio,"onUpdate:modelValue":f=>l.socio=f,val:!0,label:"S\xF3cio"},null,8,["modelValue","onUpdate:modelValue"]),t(R,{modelValue:l.cobranca,"onUpdate:modelValue":f=>l.cobranca=f,val:!0,label:"Cobran\xE7a"},null,8,["modelValue","onUpdate:modelValue"])]),d("div",Qe,[t(T,{class:"justify-end"},{default:n(()=>[!o.somenteCarteira||o.somenteCarteira&&o.contatoUsuario.id&&(o.filhosId[l.idContatoRelacionado]||{}).idContatoVendedor===o.contatoUsuario.id?(h(),b(g,{key:0,to:{name:"AtendimentoContato",params:{id:l.idContatoRelacionado}},icon:"edit",flat:"",round:"",dense:"",color:"tertiary",class:"q-mr-sm"},{default:n(()=>[t(N,null,{default:n(()=>[y("Editar contato")]),_:1})]),_:2},1032,["to"])):_("",!0),t(g,{onClick:f=>r.filhoRemover(l),icon:"delete",flat:"",round:"",dense:"",color:"tertiary",class:"q-mr-sm"},{default:n(()=>[t(N,null,{default:n(()=>[y("Remover")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)])]),_:2},1024),t(ko)],64))),128))])]),_:1}),t(x,{class:"bg-white",name:"profile-tab-3"},{default:n(()=>[t(T,{class:"q-col-gutter-sm"},{default:n(()=>[d("div",He,[t(p,{rotulo:"Descri\xE7\xE3o",modelValue:o.consultaDescricao,"onUpdate:modelValue":e[20]||(e[20]=l=>o.consultaDescricao=l),modelModifiers:{trim:!0}},null,8,["modelValue"])]),d("div",Je,[t(g,{color:"positive",icon:"add",label:"Consulta",outline:"",size:"sm",onClick:r.consultaAdicionar},null,8,["onClick"])])]),_:1}),(h(!0),C(q,null,A(o.consulta,(l,f)=>(h(),b(I,{class:"animate-pop q-mt-md shadow-1",key:f},{default:n(()=>[t(W,null,{default:n(()=>[d("div",null,k(l.descricao),1),d("span",null,[y("Consulta realizada em "),d("strong",null,k(a.$filters.dataHora(l.dataConsulta)),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(x,{modelValue:o.tab,"onUpdate:modelValue":e[23]||(e[23]=l=>o.tab=l),class:"bg-white",name:"profile-tab-4"},{default:n(()=>[t(T,{class:"q-col-gutter-sm q-pb-sm"},{default:n(()=>[d("div",Ge,[t(p,{rows:"3",rotulo:"Observa\xE7\xF5es",tipo:"textoArea",modelValue:o.contato.condutaObservacao,"onUpdate:modelValue":e[21]||(e[21]=l=>o.contato.condutaObservacao=l),"class-campo":"q-mb-sm",ajuda:"Este conte\xFAdo ser\xE1 exibido sempre que um documento for criado para este contato."},null,8,["modelValue"])]),d("div",We,[t(p,{rows:"3",rotulo:"Restri\xE7\xE3o",tipo:"textoArea",modelValue:o.contato.condutaRestricao,"onUpdate:modelValue":e[22]||(e[22]=l=>o.contato.condutaRestricao=l),"class-campo":"q-mb-sm",somenteLeitura:!o.permissoes.editarCondutaRestricao,ajuda:"Ao preencher este campo, o contato n\xE3o poder\xE1 comprar e o operador visualizar\xE1 esta mensagem."},null,8,["modelValue","somenteLeitura"])])]),_:1})]),_:1},8,["modelValue"]),t(x,{modelValue:o.tab,"onUpdate:modelValue":e[40]||(e[40]=l=>o.tab=l),class:"bg-white",name:"profile-tab-5"},{default:n(()=>[d("div",Xe,[t(U,{dense:"",rounded:"",modelValue:o.descricaoVendedor,"onUpdate:modelValue":e[24]||(e[24]=l=>o.descricaoVendedor=l),label:"Vendedor",options:["a","b"],disable:o.podeAlterarVendedorAssistente,onFilter:r.btSelecionarVendedor_click,class:"col-12 col-sm-4"},{append:n(()=>[o.descricaoVendedor!==""?(h(),b(v,{key:0,name:"close",onClick:S(r.vendedorLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):_("",!0),t(v,{name:"search",onClick:S(r.btSelecionarVendedor_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","disable","onFilter"]),t(U,{dense:"",rounded:"",modelValue:o.descricaoAssistente,"onUpdate:modelValue":e[25]||(e[25]=l=>o.descricaoAssistente=l),label:"Assistente",options:["a","b"],disable:o.podeAlterarVendedorAssistente,onFilter:r.btSelecionarAssistente_click,class:"col-12 col-sm-4"},{append:n(()=>[o.descricaoAssistente!==""?(h(),b(v,{key:0,name:"close",onClick:S(r.assistenteLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):_("",!0),t(v,{name:"search",onClick:S(r.btSelecionarAssistente_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","disable","onFilter"]),t(U,{dense:"",rounded:"",modelValue:o.descricaoContatoLider,"onUpdate:modelValue":e[26]||(e[26]=l=>o.descricaoContatoLider=l),label:"Contato L\xEDder",options:["a","b"],onFilter:r.btSelecionarContatoLider_click,class:"col-12 col-sm-4"},{append:n(()=>[o.descricaoContatoLider!==""?(h(),b(v,{key:0,name:"close",onClick:S(r.contatoLiderLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):_("",!0),t(v,{name:"search",onClick:S(r.btSelecionarContatoLider_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(U,{dense:"",rounded:"",modelValue:o.descricaoEmpresaCarteira,"onUpdate:modelValue":e[27]||(e[27]=l=>o.descricaoEmpresaCarteira=l),label:"Empresa Carteira",options:["a","b"],onFilter:r.btSelecionarEmpresaCarteira_click,class:"col-12 col-sm-4"},{append:n(()=>[o.descricaoEmpresaCarteira!==""?(h(),b(v,{key:0,name:"close",onClick:S(r.empresaCarteiraLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):_("",!0),t(v,{name:"search",onClick:S(r.btSelecionarEmpresaCarteira_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.origemMarketing,"onUpdate:modelValue":e[28]||(e[28]=l=>o.contato.origemMarketing=l),rotulo:"Origem Marketing"},null,8,["modelValue"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.grupoEconomico,"onUpdate:modelValue":e[29]||(e[29]=l=>o.contato.grupoEconomico=l),rotulo:"Grupo Econ\xF4mico"},null,8,["modelValue"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.rotaVendedor,"onUpdate:modelValue":e[30]||(e[30]=l=>o.contato.rotaVendedor=l),rotulo:"Rota Vendedor"},null,8,["modelValue"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.rotaEntrega,"onUpdate:modelValue":e[31]||(e[31]=l=>o.contato.rotaEntrega=l),rotulo:"Rota Entrega"},null,8,["modelValue"]),t(U,{dense:"",rounded:"",modelValue:o.descricaoTransportadora,"onUpdate:modelValue":e[32]||(e[32]=l=>o.descricaoTransportadora=l),label:"Transportadora",options:["a","b"],onFilter:r.btSelecionarTransportadora_click,class:"col-12 col-sm-4"},{append:n(()=>[o.descricaoTransportadora!==""?(h(),b(v,{key:0,name:"close",onClick:S(r.transportadoraLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):_("",!0),t(v,{name:"search",onClick:S(r.btSelecionarTransportadora_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(U,{dense:"",rounded:"",modelValue:o.contato.idItemTabelaPreco,"onUpdate:modelValue":e[34]||(e[34]=l=>o.contato.idItemTabelaPreco=l),label:"Tabela de pre\xE7o",options:o.opcoesTabelaPreco,"option-value":"id","option-label":"descricao",onFilter:r.atualizarTabelaPreco,"emit-value":"","map-options":"",class:"col-12 col-sm-4"},So({option:n(l=>[t(B,H(J(l.itemProps)),{default:n(()=>[t(F,null,{default:n(()=>[t(P,{innerHTML:l.opt.descricao},null,8,["innerHTML"]),t(P,{caption:""},{default:n(()=>[Ze,y(k(l.opt.empresa),1)]),_:2},1024),l.opt.fatorPercentual?(h(),b(P,{key:0,caption:"",sublabel:""},{default:n(()=>[Ke,y(k(a.$filters.numero(l.opt.fatorPercentual,2))+" %",1)]),_:2},1024)):_("",!0),t(P,{caption:""},{default:n(()=>[Ye,y(k(l.opt.arredondamento?"Sim":"N\xE3o"),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[o.contato.idItemTabelaPreco?{name:"append",fn:n(()=>[t(v,{name:"close",onClick:e[33]||(e[33]=S(l=>{o.contato.idItemTabelaPreco="",o.contato.codigoItemTabelaPreco=""},["stop"])),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue","options","onFilter"]),t(U,{dense:"",rounded:"",modelValue:o.descricaoFormaPagamento,"onUpdate:modelValue":e[35]||(e[35]=l=>o.descricaoFormaPagamento=l),label:"Forma de pagamento",options:["a","b"],onFilter:r.btSelecionaFormaPagamento_click,class:"col-12 col-sm-4"},{append:n(()=>[o.descricaoFormaPagamento!==""?(h(),b(v,{key:0,name:"close",onClick:S(r.formaPagamentoLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):_("",!0),t(v,{name:"search",onClick:S(r.btSelecionaFormaPagamento_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue","onFilter"]),t(p,{class:"col-12 col-sm-4",modelValue:o.contato.limiteCredito,"onUpdate:modelValue":e[36]||(e[36]=l=>o.contato.limiteCredito=l),decimals:"2",rotulo:"Limite de cr\xE9dito",tipo:"decimal","somente-leitura":!o.permissoes.editarLimiteCredito},null,8,["modelValue","somente-leitura"]),d("div",$e,[t(p,{rotulo:"E-mail NFe",modelValue:o.contato.emailNfe,"onUpdate:modelValue":e[37]||(e[37]=l=>o.contato.emailNfe=l)},null,8,["modelValue"])]),d("div",ot,[t(p,{rotulo:"Observa\xE7\xF5es na NFe",modelValue:o.contato.observacaoNFE,"onUpdate:modelValue":e[38]||(e[38]=l=>o.contato.observacaoNFE=l)},null,8,["modelValue"])]),o.configuracoes.descontoCondicionado?(h(),b(p,{key:0,class:"col-12 col-sm-4",modelValue:o.contato.descontoCondicionadoPercentual,"onUpdate:modelValue":e[39]||(e[39]=l=>o.contato.descontoCondicionadoPercentual=l),decimals:"2",suffix:"%",rotulo:"Desconto Condicionado",tipo:"decimal"},null,8,["modelValue"])):_("",!0)])]),_:1},8,["modelValue"]),t(x,{modelValue:o.tab,"onUpdate:modelValue":e[41]||(e[41]=l=>o.tab=l),class:"bg-white",name:"profile-arquivos"},{default:n(()=>[d("div",et,[t(lo,{resize:{crop:!0,width:1e3,height:1e3},idTabelaMaster:o.contato.id,tipoArquivo:"contatoImagem",arquivo:o.arquivo},null,8,["idTabelaMaster","arquivo"])])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),d("div",tt,[o.contato.dataCadastro?(h(),C("small",at,"Data do cadastro: "+k(a.$filters.dataHora(o.contato.dataCadastro)),1)):_("",!0),o.contato.dataAlteracao?(h(),C("small",lt,"\xDAltima altera\xE7\xE3o: "+k(a.$filters.dataHora(o.contato.dataAlteracao)),1)):_("",!0)]),t(qo,{class:"bg-light no-shadow q-pa-sm text-right u-bordaCima"},{default:n(()=>[d("div",rt,[o.contato.ativo?(h(),C(q,{key:0},[t(g,{color:"tertiary",flat:"",label:"Cancelar",onClick:r.aoCancelar},null,8,["onClick"]),t(g,{class:"q-ml-sm no-shadow",color:"primary",unelevated:"",label:"Salvar",type:"submit"}),t(g,{color:"tertiary",flat:"",icon:"delete",round:"",onClick:r.contatoRemover},{default:n(()=>[t(N,null,{default:n(()=>[y("Remover")]),_:1})]),_:1},8,["onClick"])],64)):(h(),C("div",it,[st,t(g,{class:"q-ml-sm text-white",unelevated:"",color:"primary",onClick:r.restaurarContato,label:"Restaurar contato"},null,8,["onClick"])]))])]),_:1})]),_:1},8,["onSubmit"]),t(ro,{ref:"promptCriarDependente","cpf-cnpj":"","data-nascimento":"",observacao:""},null,512),t(io,{ref:"modalRedesSociais"},null,512),t(so,{ref:"modalTrocarFoto"},null,512),t(no,{ref:"consultaCNPJ",contato:o.contato,endereco:o.endereco},null,8,["contato","endereco"]),t(co,{ref:"PromptGrupoUnico"},null,512)],64)}var pt=Q(Xo,[["render",nt]]);export{pt as default};
