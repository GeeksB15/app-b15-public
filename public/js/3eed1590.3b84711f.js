(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["3eed1590"],{"0117":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"bg-white q-pb-lg"},[a("q-toolbar",{staticClass:"q-pt-lg",attrs:{color:"black",inverted:""}},[a("q-toolbar-title",[e._v("Filtros")])],1),a("div",{staticClass:"gutter-x-sm items-center q-px-lg row"},[a("q-field",{staticClass:"col-12 col-lg-4",attrs:{icon:"person"}},[a("q-select",{attrs:{"float-label":"Paciente",options:e.filtros.pacientes.todos,filter:"",multiple:""},on:{input:e.atualizar},model:{value:e.filtros.pacientes.selecionados,callback:function(t){e.$set(e.filtros.pacientes,"selecionados",t)},expression:"filtros.pacientes.selecionados"}})],1),a("q-field",{staticClass:"col-12 col-lg-4",attrs:{icon:"healing"}},[a("q-select",{attrs:{"float-label":"Médico",options:e.filtros.medicos.todos,filter:"",multiple:""},on:{input:e.atualizar},model:{value:e.filtros.medicos.selecionados,callback:function(t){e.$set(e.filtros.medicos,"selecionados",t)},expression:"filtros.medicos.selecionados"}})],1),a("q-field",{staticClass:"col-12 col-lg-4",attrs:{icon:"calendar_today"}},[a("q-select",{attrs:{"float-label":"Validade",options:e.filtros.validade.todos,multiple:""},on:{input:e.atualizar},model:{value:e.filtros.validade.selecionados,callback:function(t){e.$set(e.filtros.validade,"selecionados",t)},expression:"filtros.validade.selecionados"}})],1)],1)],1),e.receitas.length?e._e():a("div",{staticClass:"bg-white q-pa-xl text-center"},[a("p",[e._v("Não há receitas cadastradas para o contato "+e._s((e.dbContato.selecionado.nome||"").trim())+".")]),a("p",{staticClass:"q-caption"},[e._v("Para incluir, utilize o botão de adição.")])]),a("div",e._l(e.receitas,function(t){return a("div",{key:t.id,staticClass:"bg-white q-mt-md q-py-sm"},[a("q-toolbar",{attrs:{color:"black",inverted:""}},[a("q-toolbar-title",[e._v("Receita")]),a("badge",{staticClass:"q-mr-md",attrs:{cor:"positive",escuro:""}},[e._v(e._s(t.id?"#"+t.id.substr(-6,6):""))]),a("q-btn",{attrs:{color:"primary",dense:"",flat:"",icon:"edit",round:""},on:{click:function(a){e.abrirModalReceita(t.id,!1)}}}),e.configImpressaoReceita[t.idEmpresa]?[e.configImpressaoReceita[t.idEmpresa].length>1?a("q-btn",{attrs:{color:"primary",dense:"",flat:"",icon:"print",round:""}},[a("q-popover",[a("q-list",{attrs:{link:"",separator:""}},e._l(e.configImpressaoReceita[t.idEmpresa],function(i){return a("q-item",{key:i.valor,nativeOn:{click:function(a){e.imprimir(i.valor,(t||{}).id||"0")}}},[a("q-item-side",{attrs:{icon:"print"}}),a("q-item-main",{attrs:{label:i.texto}})],1)}))],1)],1):a("q-btn",{attrs:{color:"primary",dense:"",flat:"",icon:"print",round:""},on:{click:function(a){e.imprimir(e.configImpressaoReceita[t.idEmpresa][0].valor,(t||{}).id||"0")}}})]:e._e(),a("q-btn",{attrs:{color:"faded",flat:"",icon:"more_vert",round:""}},[a("q-popover",[a("q-list",{attrs:{link:"",separator:""}},[a("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],nativeOn:{click:function(a){e.abrirModalReceita(t.id,!0)}}},[a("q-item-side",{attrs:{icon:"file_copy"}}),a("q-item-main",{attrs:{label:"Duplicar"}})],1),a("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],nativeOn:{click:function(a){e.excluirReceita(t.id)}}},[a("q-item-side",{attrs:{icon:"delete"}}),a("q-item-main",{attrs:{label:"Remover"}})],1)],1)],1)],1)],2),a("div",{staticClass:"q-mt-lg q-px-lg row gutter-sm"},[a("div",{staticClass:"col-12 col-lg-4"},[a("span",{staticClass:"q-body-1"},[e._v("Paciente: ")]),a("strong",[e._v(e._s(t.paciente.nome))])]),a("div",{staticClass:"col-12 col-lg-4"},[a("span",{staticClass:"q-body-1"},[e._v("Médico: ")]),a("strong",[e._v(e._s(t.medico.nome))])]),a("div",{staticClass:"col-12 col-lg-2"},[a("span",{staticClass:"q-body-1"},[e._v("Data: ")]),a("strong",[e._v(e._s(e._f("data")(t.data)))])]),a("div",{staticClass:"col-12 col-lg-2"},[a("span",{staticClass:"q-body-1"},[e._v("Validade: ")]),a("strong",[e._v(e._s(e._f("data")(t.validade)))])]),t.observacoes?a("div",{staticClass:"col-12"},[a("strong",{staticClass:"q-body-1"},[e._v("Observação:")]),a("p",[e._v(e._s(t.observacoes))])]):e._e()]),a("div",{staticClass:"row justify-around q-ma-lg"},[e._l(["od","oe"],function(i){return[a("q-table",{key:i,staticClass:"col-xs-12 col-xl-6 no-shadow",staticStyle:{"border-left":"1px solid rgba(0,0,0,0.12)"},attrs:{data:e.dadosTabela(i,t.prescricao),columns:e.columns,"row-key":"name",separator:"cell",dense:"","hide-bottom":""},scopedSlots:e._u([{key:"header",fn:function(t){return a("q-tr",{},[a("q-th",{key:"distancia",staticStyle:{"min-width":"110px","max-width":"110px"},attrs:{props:t}},[a("span",{staticStyle:{"font-weight":"bold !important","font-size":"120%",color:"black"}},["od"===i?[e._v("Olho Direito")]:e._e(),"oe"===i?[e._v("Olho Esquerdo")]:e._e()],2)]),a("q-th",{key:"adicao",attrs:{props:t}},[e._v("Adição")]),a("q-th",{key:"esferico",attrs:{props:t}},[e._v("Esférico")]),a("q-th",{key:"cilindrico",attrs:{props:t}},[e._v("Cilíndrico")]),a("q-th",{key:"eixo",attrs:{props:t}},[e._v("Eixo")]),a("q-th",{key:"prisma",attrs:{props:t}},[e._v("Prisma")]),a("q-th",{key:"base",attrs:{props:t}},[e._v("Base")]),a("q-th",{key:"dnp",attrs:{props:t}},[e._v("DNP")])],1)}},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"distancia",attrs:{props:t}},[e._v(e._s(t.row.distancia))]),a("q-td",{key:"adicao",attrs:{props:t}},["-"!==t.row.adicao?[e._v(e._s(e._f("numero")(t.row.adicao,2)))]:[e._v("-")]],2),a("q-td",{key:"esferico",attrs:{props:t}},["-"!==t.row.esferico?[e._v(e._s(e._f("numero")(t.row.esferico,2)))]:[e._v("-")]],2),a("q-td",{key:"cilindrico",attrs:{props:t}},["-"!==t.row.cilindrico?[e._v(e._s(e._f("numero")(t.row.cilindrico,2)))]:[e._v("-")]],2),a("q-td",{key:"eixo",attrs:{props:t}},[e._v(e._s(t.row.eixo))]),a("q-td",{key:"prisma",attrs:{props:t}},[e._v(e._s(t.row.prisma))]),a("q-td",{key:"base",attrs:{props:t}},[e._v(e._s(t.row.base))]),a("q-td",{key:"dnp",attrs:{props:t}},["-"!==t.row.dnp?[e._v(e._s(e._f("numero")(t.row.dnp,2)))]:[e._v("-")]],2)],1)]}}])})]})],2),a("div",{staticClass:"row q-ma-lg"},e._l(e.idsEnvelopeReceita[t.id],function(e){return a("envelopeCard",{key:e,staticClass:"col-12",attrs:{id:e}})}))],1)})),a("receita",{attrs:{id:e.modalReceita.id,idEmpresa:e.modalReceita.idEmpresa,duplicarReceita:e.modalReceita.duplicar},on:{atualizar:e.atualizar},model:{value:e.modalReceita.visivel,callback:function(t){e.$set(e.modalReceita,"visivel",t)},expression:"modalReceita.visivel"}}),a("q-btn",{staticClass:"fixed",staticStyle:{right:"18px",bottom:"18px"},attrs:{round:"",color:"primary",icon:"add",size:"lg"},on:{click:function(t){e.abrirModalReceita("",!1)}}}),a("prompt-contato-novo",{attrs:{filtro:{ativo:!0,empresas:!0},placeholder:"Selecione a empresa"},on:{selecionar:e.selecionarEmpresa},model:{value:e.modalContatoEmpresa.visivel,callback:function(t){e.$set(e.modalContatoEmpresa,"visivel",t)},expression:"modalContatoEmpresa.visivel"}})],1)},o=[];i._withStripped=!0;a("cadf"),a("ac4d"),a("8a81"),a("ac6a"),a("6762"),a("2fdb"),a("551c");var r=a("3156"),s=a.n(r),n=(a("96cf"),a("c973")),c=a.n(n),l=a("a0fd"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("q-card",{staticClass:"card q-pt-md q-pa-xs"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-6"},[a("div",{staticClass:"q-px-sm"},[a("q-toolbar-title",[e._v("\n            Envelope\n          ")]),a("q-chip",{staticClass:"q-ma-sm q-my-sm",attrs:{rounded:"",color:"grey",small:""}},[e._v("\n            "+e._s(e.envelope.status)+"\n          ")]),e._.get(e.envelope,"itens.length")?a("q-list",{staticClass:"no-border"},e._l(e.envelope.itens,function(t){return a("q-item",{key:t.id,staticClass:"q-pa-none",staticStyle:{"min-height":"auto"}},[a("q-item-side",[a("small",[e._v(e._s(t.quantidade)+"x")])]),a("q-item-main",[a("small",[e._v("\n                  "+e._s(t.descricaoItem)+"\n                ")])]),a("q-item-side",{attrs:{right:""}},[a("small",[e._v(e._s(e._f("numero")(t.total,2)))])])],1)})):e._e()],1)]),a("div",{staticClass:"col-12 col-md-3"},[a("div",{staticClass:"q-px-sm"},[a("badge",{staticClass:"q-mr-sm",attrs:{escuro:"",cor:"positive"}},[e._v("\n            #"+e._s(parseInt(e.envelope.numero)||(e.envelope.id||"").slice(-6))+"\n          ")])],1)]),a("div",{staticClass:"col-6 col-md-3"},[a("div",{staticClass:"q-px-sm"},[e.pupilometro.mostrarBotao?a("q-btn",{staticClass:"no-shadow q-ma-xs",staticStyle:{float:"right"},attrs:{icon:"mdi-eye-settings-outline",color:"primary",size:"md",rounded:"",dense:"",flat:""},on:{click:function(t){e.abrirModalPupilometro()}}}):e._e(),e.arquivos.mostrarBotao?a("q-btn",{staticClass:"no-shadow q-ma-xs",staticStyle:{float:"right"},attrs:{rounded:"",dense:"",flat:"",icon:"mdi-paperclip",color:"primary",size:"md"},on:{click:function(t){e.abrirModalArquivos()}}}):e._e(),a("q-btn",{staticClass:"no-shadow q-ma-xs",staticStyle:{float:"right"},attrs:{rounded:"",dense:"",flat:"",icon:"print",color:"primary",size:"md"}},[a("q-popover",[a("q-list",{attrs:{link:"",separator:""}},e._l(e.configImpressaoEnvelope,function(t){return a("q-item",{key:t.valor,nativeOn:{click:function(a){e.imprimir(t.valor,e.envelope.documentoId||"0")}}},[a("q-item-side",{attrs:{icon:"print"}}),a("q-item-main",{attrs:{label:t.texto}})],1)}))],1)],1)],1)])])]),a("q-modal",{attrs:{maximized:""},model:{value:e.pupilometro.mostrarModal,callback:function(t){e.$set(e.pupilometro,"mostrarModal",t)},expression:"pupilometro.mostrarModal"}},[a("q-modal-layout",[a("pupilometro",{attrs:{avancar:"Medidas",somenteLeitura:!0},on:{fecharModal:function(t){e.pupilometro.mostrarModal=!1}}})],1)],1),e._.get(e.arquivos,"arr.length")?a("q-modal",{model:{value:e.arquivos.mostrarModal,callback:function(t){e.$set(e.arquivos,"mostrarModal",t)},expression:"arquivos.mostrarModal"}},[a("q-modal-layout",[e.arquivos.obj.id?[a("q-toolbar",{attrs:{slot:"header"},slot:"header"},[a("q-btn",{attrs:{dense:"",flat:"",icon:"arrow_back",round:""},nativeOn:{click:function(t){e.arquivos.obj={}}}}),a("q-toolbar-title",[e._v(e._s(e.arquivos.obj.nome))]),a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{dense:"",flat:"",icon:"close",round:""}})],1),a("div",{staticClass:"q-pa-lg"},[a("img",{staticStyle:{"max-height":"750px"},attrs:{src:e.arquivos.obj.arquivo}})])]:[a("q-toolbar",{attrs:{slot:"header"},slot:"header"},[a("q-toolbar-title",[e._v("Imagens")]),a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{dense:"",flat:"",icon:"close",round:""}})],1),a("q-list",e._l(e.arquivos.arr,function(t){return a("q-item",{key:t.id,attrs:{multiline:""}},[a("q-item-side",{staticStyle:{cursor:"pointer"},attrs:{image:t.arquivo},nativeOn:{click:function(a){e.arquivos.obj=t}}}),a("q-item-main",{attrs:{label:t.nome}})],1)}))]],2)],1):e._e()],1)},u=[];d._withStripped=!0;var p=a("448a"),m=a.n(p),v=(a("7514"),a("4e44")),f=a("8149"),h=a("3e8a"),b={components:{Badge:l["a"],Pupilometro:v["default"]},data:function(){return{arquivos:{},configImpressaoEnvelope:[],envelope:{},pupilometro:{}}},methods:{abrirModalArquivos:function(){this.arquivos.obj={},this.arquivos.mostrarModal=!0},abrirModalPupilometro:function(){f["a"].pupilometro.limpar(),f["a"].pupilometro.foto=this.pupilometro.obj.foto,f["a"].pupilometro.fotoOriginal=this.pupilometro.obj.fotoOriginal,f["a"].pupilometro.medidas=this.pupilometro.obj.medidas,this.pupilometro.mostrarModal=!0},atualizar:function(){var e=c()(regeneratorRuntime.mark(function e(){var t,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["a"])().documento.get(this.id);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(t=e.t0,!t.id){e.next=18;break}return e.next=9,Object(h["a"])().documentoItem.where({idDocumentoAdicional:this.id}).toArray();case 9:return a=e.sent,a=a.filter(function(e){return e.idItem}),e.next=13,Object(h["a"])().arquivo.where({idTabelaMaster:this.id}).toArray();case 13:i=e.sent,this.arquivos=this.createFreshArquivos(),i.length&&(this.arquivos.arr=i,this.arquivos.mostrarBotao=!0),t.documentoId&&t.idEmpresa&&this.configuraImpressaoEnvelope(t.idEmpresa),this.envelope=s()({},t,{itens:a});case 18:this.carregarPupilometro();case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),carregarPupilometro:function(){var e=c()(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["a"])().json.where({descricao:"Pupilômetro",referencia:"idEnvelope:"+this.id}).toArray();case 2:if(t=e.sent,a=(t.find(function(e){return e.id})||{}).json,this.pupilometro=this.createFreshPupilometro(),a&&(this.pupilometro.obj=JSON.parse(a),this.pupilometro.mostrarBotao=!0),e.t0=this.pupilometro.mostrarBotao,!e.t0){e.next=11;break}return e.next=10,f["a"].permissao.objeto("pupilometro");case 10:e.t0=e.sent;case 11:this.pupilometro.mostrarBotao=e.t0;case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),configuraImpressaoEnvelope:function(){var e=c()(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].configuracoes.porNome("impressao.envelope",t);case 2:a=e.sent,this.configImpressaoEnvelope=m()(a.length?a.map(function(e){return s()({texto:"Imprimir Envelope"},e)}):[{valor:"envelope",texto:"Imprimir Envelope"},{valor:"envelopeMini",texto:"Imprimir Envelope Mini"}]);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),createFreshArquivos:function(){return{mostrarBotao:!1,mostrarModal:!1,obj:{},arr:[]}},createFreshPupilometro:function(){return{mostrarBotao:!1,mostrarModal:!1,obj:{}}}},props:{id:{type:String,required:!0}},created:function(){this.atualizar()}},g=b,q=(a("6903"),a("2877")),x=Object(q["a"])(g,d,u,!1,null,"ecd616d0",null);x.options.__file="EnvelopeCard.vue";var _=x.exports,k=a("41ff"),y=a("e38f1"),w=a("2ef0"),C=a("ed08"),R={components:{Badge:l["a"],EnvelopeCard:_,PromptContatoNovo:k["a"],Receita:y["a"]},data:function(){return{columns:[{name:"distancia",align:"left",field:"distancia",style:"font-weight:bold;min-width:110px"},{name:"adicao",align:"center",field:"adicao"},{name:"esferico",align:"center",field:"esferico"},{name:"cilindrico",align:"center",field:"cilindrico"},{name:"eixo",align:"center",field:"eixo"},{name:"prisma",align:"center",field:"prisma"},{name:"base",align:"center",field:"base"},{name:"dnp",align:"center",field:"dnp"}],dbContato:f["a"].contato,configImpressaoReceita:{},modalContatoEmpresa:{visivel:!1},modalReceita:{visivel:!1,id:"",idEmpresa:"",duplicar:!1},receitas:[],idsEnvelopeReceita:{},filtro:{},filtros:{pacientes:{todos:[],selecionados:[]},medicos:{todos:[],selecionados:[]},validade:{todos:[{label:"Vencido",value:"vencido"},{label:"À vencer",value:"aVencer"}],selecionados:[]}}}},methods:{configuraImpressaoReceita:function(){var e=c()(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.configImpressaoReceita[t]){e.next=2;break}return e.abrupt("return");case 2:return a=[],e.next=5,f["a"].configuracoes.porNome("impressao.receita",t);case 5:i=e.sent,a=i.length?i.map(function(e){return s()({texto:"Imprimir Receita"},e)}):[{valor:"receita-qrcode",texto:"Imprimir Receita"}],this.$set(this.configImpressaoReceita,t,a);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),dadosTabela:function(e,t){for(var a,i,o,r,s,n=[],c=Object(w["get"])(t,"prisma.".concat(e,".valor"))||"-",l=Object(w["get"])(t,"prisma.".concat(e,".base"),"").trim()||"-",d=[{label:"Longe",value:"longe"},{label:"Médio",value:"medio"},{label:"Perto",value:"perto"}],u=0;u<d.length;u++){var p=d[u];a=Object(w["get"])(t,"dioptria.".concat(e,".").concat(p.value,".adicao"),"-"),i=Object(w["get"])(t,"dioptria.".concat(e,".").concat(p.value,".esferico")),o=Object(w["get"])(t,"dioptria.".concat(e,".").concat(p.value,".cilindrico")),r=Object(w["get"])(t,"dioptria.".concat(e,".").concat(p.value,".eixo")),s=Object(w["get"])(t,"dioptria.".concat(e,".").concat(p.value,".dnp")),(i||o||r||s)&&n.push({distancia:p.label,adicao:a,esferico:i,cilindrico:o,eixo:r,prisma:c,base:l,dnp:s})}return n},habilitaPerto:function(e){var t=!1,a=!1;return(Object(w["get"])(e,"dioptria.od.longe.esferico")||Object(w["get"])(e,"dioptria.od.longe.cilindrico")||Object(w["get"])(e,"dioptria.od.longe.eixo")||Object(w["get"])(e,"dioptria.od.longe.dnp")||Object(w["get"])(e,"dioptria.oe.longe.esferico")||Object(w["get"])(e,"dioptria.oe.longe.cilindrico")||Object(w["get"])(e,"dioptria.oe.longe.eixo")||Object(w["get"])(e,"dioptria.oe.longe.dnp"))&&(a=!0),!a&&(Object(w["get"])(e,"dioptria.od.perto.cilindrico")||Object(w["get"])(e,"dioptria.od.perto.eixo")||Object(w["get"])(e,"dioptria.oe.perto.cilindrico")||Object(w["get"])(e,"dioptria.oe.perto.eixo"))&&(t=!0),t},abrirModalReceita:function(){var e=c()(regeneratorRuntime.mark(function e(t,a){var i,o,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=6;break}return e.next=4,f["a"].documento.le({id:t});case 4:o=e.sent,o.idEmpresa&&(i=o.idEmpresa);case 6:if(t&&i){e.next=11;break}return this.modalContatoEmpresa.visivel=!0,e.next=10,new Promise(function(e,t){r.modalContatoEmpresa.resolve=e});case 10:i=this.modalContatoEmpresa.id;case 11:if(i){e.next=13;break}return e.abrupt("return");case 13:this.modalReceita={visivel:!0,id:t||Object(C["uuid"])(),idEmpresa:i,duplicar:a},e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](0),this.modalReceita={visivel:!1,id:"",idEmpresa:"",duplicar:!1},this.$q.notifyError("Ocorreu um erro ao carregar a receita.",e.t0);case 20:case"end":return e.stop()}},e,this,[[0,16]])}));return function(t,a){return e.apply(this,arguments)}}(),atualizar:function(){var e=c()(regeneratorRuntime.mark(function e(){var t,a,i,o,r,n,c,l,d,u,p,m,v,b,g,q,x,_,k,y,R,E,O,j,M,I,P=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=[],e.next=3,Object(h["a"])().documento.where({tipo:"Prescrição"}).toArray();case 3:if(a=e.sent,i=s()({idContato:f["a"].contato.selecionado.id,idsPaciente:[],idsMedico:[],validade:""},this.filtro),i.idContato){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,f["a"].contato.leFilhos(i.idContato);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0=[];case 12:o=e.t0,o.push({id:i.idContato}),r=!0,n=!1,c=void 0,e.prev=17,l=a[Symbol.iterator]();case 19:if(r=(d=l.next()).done){e.next=29;break}if(u=d.value,o.map(function(e){return e.id}).includes(u.idContato)){e.next=23;break}return e.abrupt("continue",26);case 23:if("Prescrição"===u.tipo){e.next=25;break}return e.abrupt("continue",26);case 25:t.push(u);case 26:r=!0,e.next=19;break;case 29:e.next=35;break;case 31:e.prev=31,e.t1=e["catch"](17),n=!0,c=e.t1;case 35:e.prev=35,e.prev=36,r||null==l.return||l.return();case 38:if(e.prev=38,!n){e.next=41;break}throw c;case 41:return e.finish(38);case 42:return e.finish(35);case 43:p={},m={},e.t2=regeneratorRuntime.keys(t);case 46:if((e.t3=e.t2()).done){e.next=55;break}return v=e.t3.value,e.next=50,f["a"].receita.le({id:t[v].id});case 50:t[v]=e.sent,p[t[v].medico.id]={nome:t[v].medico.nome},m[t[v].paciente.id]={nome:t[v].paciente.nome},e.next=46;break;case 55:for(g in b=[],p)b.push({value:g,label:p[g].nome});for(x in this.filtros.medicos.todos=b,q=[],m)q.push({value:x,label:m[x].nome});this.filtros.pacientes.todos=q,_=this.filtros.pacientes.selecionados.filter(function(e){return q.map(function(e){return e.value}).includes(e)}),this.filtros.pacientes.selecionados=_,k=this.filtros.medicos.selecionados.filter(function(e){return b.map(function(e){return e.value}).includes(e)}),this.filtros.medicos.selecionados=k,this.filtros.pacientes.selecionados.length&&(t=t.filter(function(e){return P.filtros.pacientes.selecionados.includes(e.paciente.id)})),this.filtros.medicos.selecionados.length&&(t=t.filter(function(e){return P.filtros.medicos.selecionados.includes(e.medico.id)})),1===this.filtros.validade.selecionados.length&&(y=(new Date).setHours(0,0,0,0),this.filtros.validade.selecionados.includes("vencido")&&(t=t.filter(function(e){var t=new Date(e.validade).setHours(0,0,0,0);return t<y})),this.filtros.validade.selecionados.includes("aVencer")&&(t=t.filter(function(e){var t=new Date(e.validade).setHours(0,0,0,0);return t>=y}))),R=!0,E=!1,O=void 0,e.prev=71,j=regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=I.value,a=[],e.next=4,Object(h["a"])().documento.where({idDocumentoAdicional:t.id}).each(function(e){a.push(e.id)});case 4:P.idsEnvelopeReceita[t.id]=a,P.configuraImpressaoReceita(t.idEmpresa);case 6:case"end":return e.stop()}},e)}),M=t[Symbol.iterator]();case 74:if(R=(I=M.next()).done){e.next=79;break}return e.delegateYield(j(),"t4",76);case 76:R=!0,e.next=74;break;case 79:e.next=85;break;case 81:e.prev=81,e.t5=e["catch"](71),E=!0,O=e.t5;case 85:e.prev=85,e.prev=86,R||null==M.return||M.return();case 88:if(e.prev=88,!E){e.next=91;break}throw O;case 91:return e.finish(88);case 92:return e.finish(85);case 93:C["gconsole"].log("AtendimentoOticaReceita","atualizar",t),this.receitas=Object(w["orderBy"])(t,"validade","desc");case 95:case"end":return e.stop()}},e,this,[[17,31,35,43],[36,,38,42],[71,81,85,93],[86,,88,92]])}));return function(){return e.apply(this,arguments)}}(),excluirReceita:function(){var e=c()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$q.dialog({cancel:"Cancelar",message:"Esta ação irá excluir a receita.",noRefocus:!0,ok:"Continuar",preventClose:!0,title:"Tem certeza?"});case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e["catch"](0),e.abrupt("return");case 8:return e.prev=8,e.next=11,f["a"].receita.exclui(t);case 11:this.$q.notifyPositive("Receita excluída com sucesso."),e.next=17;break;case 14:e.prev=14,e.t1=e["catch"](8),this.$q.notifyError("Ocorreu um erro ao excluir a receita.",e.t1);case 17:this.atualizar();case 18:case"end":return e.stop()}},e,this,[[0,5],[8,14]])}));return function(t){return e.apply(this,arguments)}}(),selecionarEmpresa:function(e){this.modalContatoEmpresa.id=e,this.modalContatoEmpresa.resolve&&this.modalContatoEmpresa.resolve()}},watch:{"dbContato.selecionado":function(e){C["gconsole"].log("AtendimentoOticaReceita","watch contato",e),this.atualizar()}},mounted:function(){this.atualizar()}},E=R,O=Object(q["a"])(E,i,o,!1,null,null,null);O.options.__file="AtendimentoOticaReceita.vue";t["default"]=O.exports},"5e35":function(e,t,a){},6903:function(e,t,a){"use strict";var i=a("5e35"),o=a.n(i);o.a}}]);