"use strict";(self.webpackChunkb15=self.webpackChunkb15||[]).push([[82],{29403:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Ut});var a=o(34182);const l={class:"row"},i={class:"col-12 row q-px-md q-mt-lg"},r=(0,a.createElementVNode)("strong",{class:"col-12 text-body1 text-dark"},"Período de Emissão",-1),n={class:"col-6"},s={class:"col-6"},d={class:"col-12 row q-px-md q-mt-lg"},c=(0,a.createElementVNode)("strong",{class:"col-12 text-body1 text-dark"},"Período de Finalização",-1),m={class:"col-6"},u={class:"col-6"},p={class:"col-12 row q-px-md q-mt-lg"},h={class:"row items-center"},V={class:"absolute-full flex flex-center"},f={class:"text-tertiary q-gutter-xs"},g=(0,a.createTextVNode)(" Origem "),N=(0,a.createTextVNode)(" Destino ");var C=o(26531),v=(o(26891),o(72407));const x={data:()=>({modal:{visivel:!1}}),emits:["excluir"]};var w=o(74260),q=o(39341),k=o(63626),b=o(54553),y=o(47266),E=o(48761),I=o(37617),_=o(83671),D=o(98586),B=o(7518),F=o.n(B);F()(x,"components",{QDialog:q.Z,QLayout:k.Z,QHeader:b.Z,QToolbar:y.Z,QToolbarTitle:E.Z,QBtn:I.Z,QFooter:_.Z}),F()(x,"directives",{ClosePopup:D.Z});const z=(0,a.createTextVNode)("Manipulação de Itens "),T={key:0},A={ref:"form"},S={class:"col-12"},$={class:"col-6"},Q={class:"col-6"},M={class:"col-12 col-md-6"},P={class:"q-item-label q-mb-none",style:{color:"#0c0c0c"}},Z=(0,a.createTextVNode)(" Origem "),L=(0,a.createTextVNode)("Remover todos"),U=(0,a.createTextVNode)("Adicionar Item"),O=(0,a.createElementVNode)("div",{class:"col-2 col-md"},"Código",-1),H=(0,a.createElementVNode)("div",{class:"col-10 col-md-4"},"Descrição",-1),R=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Quantidade",-1),j=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Valor",-1),Y=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Total",-1),G=(0,a.createElementVNode)("div",{class:"col-6 col-md-1 text-right"},"Ações",-1),X={class:"col-2 col-md"},K={class:"col-10 col-md-4"},J={class:"col-6 col-md text-right"},W={class:"col-6 col-md text-right"},ee={class:"col-6 col-md text-right"},te={key:0,class:"col-6 col-md-1 text-right"},oe=(0,a.createTextVNode)("Excluir"),ae=(0,a.createElementVNode)("div",{class:"col-2 col-md"},null,-1),le=(0,a.createElementVNode)("div",{class:"col-10 col-md-4"},null,-1),ie=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},null,-1),re=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},null,-1),ne={class:"col-6 col-md text-right"},se=(0,a.createElementVNode)("div",{class:"col-6 col-md-1 text-right"}," ",-1),de={class:"col-12 col-md-6"},ce={class:"q-item-label q-mb-none",style:{color:"#0c0c0c"}},me=(0,a.createTextVNode)(" Destino "),ue=(0,a.createTextVNode)("Remover todos"),pe=(0,a.createTextVNode)("Adicionar Item"),he=(0,a.createElementVNode)("div",{class:"col-2 col-md"},"Código",-1),Ve=(0,a.createElementVNode)("div",{class:"col-10 col-md-4"},"Descrição",-1),fe=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Quantidade",-1),ge=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Unidade",-1),Ne=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Valor",-1),Ce=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Total",-1),ve=(0,a.createElementVNode)("div",{class:"col-6 col-md-1 text-right"},"Ações",-1),xe={class:"col-2 col-md"},we={class:"col-10 col-md-4"},qe={class:"col-6 col-md text-right"},ke={class:"col-6 col-md text-right"},be={class:"col-6 col-md text-right"},ye={class:"col-6 col-md text-right"},Ee={key:0,class:"col-6 col-md-1 text-right"},Ie=(0,a.createTextVNode)("Excluir"),_e=(0,a.createElementVNode)("div",{class:"col-2 col-md"},null,-1),De=(0,a.createElementVNode)("div",{class:"col-10 col-md-4"},null,-1),Be=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},null,-1),Fe=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},null,-1),ze={class:"col-6 col-md text-right"},Te=(0,a.createElementVNode)("div",{class:"col-6 col-md-1 text-right"}," ",-1),Ae={class:"col-12 col-md-12"},Se={class:"q-item-label q-mb-none",style:{color:"#0c0c0c"}},$e=(0,a.createTextVNode)(" Apontamentos "),Qe=(0,a.createTextVNode)("Remover todos"),Me=(0,a.createTextVNode)("Adicionar Apontamento"),Pe=(0,a.createElementVNode)("div",{class:"col-6 col-md"},"Data hora inicio",-1),Ze=(0,a.createElementVNode)("div",{class:"col-6 col-md"},"Data hora fim",-1),Le=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Tempo total",-1),Ue=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Equipamentos",-1),Oe=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Operador",-1),He=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Quantidade",-1),Re=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Peso",-1),je=(0,a.createElementVNode)("div",{class:"col-6 col-md-1 text-right"},"Ações",-1),Ye={class:"col-6 col-md"},Ge={class:"col-6 col-md"},Xe={class:"col-6 col-md text-right"},Ke={class:"col-6 col-md text-right"},Je={class:"col-6 col-md text-right"},We={class:"col-6 col-md text-right"},et={class:"col-6 col-md text-right"},tt={class:"col-6 col-md-1 text-right"},ot=(0,a.createTextVNode)("Excluir"),at={class:"u-container relative-position"};var lt=o(58294),it=o(48409),rt=o(43119),nt=o(4676);const st=(0,a.createTextVNode)(" Produção de Item "),dt={class:"col"},ct={class:"col"},mt={class:"col"},ut={class:"col"},pt={class:"col"},ht={class:"col"},Vt={class:"col"},ft={class:"col"},gt={class:"col"},Nt={class:"col"},Ct=(0,a.createElementVNode)("span",{class:"text-tertiary"},null,-1),vt=(0,a.createElementVNode)("span",{class:"text-positive float-right"},null,-1),xt={data:()=>({apontamento:{dataIni:new Date,dataFim:$utils.dataAtual(),equipamento:null,operador:null,quantidade:0,unidade:null,peso:0},dataIni:new Date,dataFim:new Date,horaIni:new Date,horaFim:new Date,operadores:null,equipamentos:null,calcularPesoQtd:!0,visivel:!1,item:{peso:6,quantidade:1}}),emits:["incluirApontamento"],computed:{},methods:{async show(){await this.carregarEquipamentos(),await this.carregarOperadores(),this.visivel=!0},async carregarEquipamentos(){console.log("carregar equipamentos");let e=await $db.item.leRefatorado({filtros:{tipo:"Serviço"}});this.equipamentos=e.data.map((e=>({rotulo:e.descricao,valor:e.id})))},async selecionarEquipamento(){this.apontamento.equipamento=this.equipamentos},async carregarOperadores(){console.log("carregar operadores");let e=await $db.contato.leRefatorado({filtros:{}});this.operadores=e.data.map((e=>({rotulo:e.nome,valor:e.id})))},selecionarOperador(e,t){this.apontamento.operador=this.operadores},async concluir(){"string"==typeof this.dataIni&&(this.dataIni=new Date(this.dataIni)),"string"==typeof this.dataFim&&(this.dataFim=new Date(this.dataFim)),this.dataIni=new Date(this.dataIni),this.dataFim=new Date(this.dataFim);let e=this.dataIni.getFullYear()+"-"+(this.dataIni.getMonth()+1)+"-"+this.dataIni.getDate(),t=this.dataFim.getFullYear()+"-"+(this.dataFim.getMonth()+1)+"-"+this.dataFim.getDate();e+="T"+this.horaIni+":00",t+="T"+this.horaFim+":00",this.apontamento.dataIni=new Date(e),this.apontamento.dataFim=new Date(t),this.$emit("incluirApontamento",this.apontamento),this.fechar()},fechar(e){e&&e.stopPropagation(),this.$emit("update:modelValue",!1),this.apontamento={dataIni:new Date,dataFim:$utils.dataAtual(),equipamento:null,operador:null,quantidade:0,peso:0},this.dataIni=new Date,this.horaIni=new Date,this.dataFim=new Date,this.dataFim=new Date,this.visivel=!1},calcularPeso(){this.calcularPesoQtd&&(this.apontamento.peso=this.apontamento.quantidade*this.item.peso)},calcularQuantidade(){this.calcularPesoQtd&&(this.apontamento.quantidade=this.apontamento.peso/this.item.peso)}}};var wt=o(7112),qt=o(24515),kt=o(83054);const bt=(0,w.Z)(xt,[["render",function(e,t,o,l,i,r){const n=(0,a.resolveComponent)("q-btn"),s=(0,a.resolveComponent)("q-toolbar-title"),d=(0,a.resolveComponent)("q-toolbar"),c=(0,a.resolveComponent)("q-header"),m=(0,a.resolveComponent)("campo"),u=(0,a.resolveComponent)("row"),p=(0,a.resolveComponent)("q-card"),h=(0,a.resolveComponent)("q-page"),V=(0,a.resolveComponent)("q-page-container"),f=(0,a.resolveComponent)("q-footer"),g=(0,a.resolveComponent)("q-layout"),N=(0,a.resolveComponent)("q-dialog");return(0,a.openBlock)(),(0,a.createBlock)(N,{modelValue:i.visivel,"onUpdate:modelValue":t[11]||(t[11]=e=>i.visivel=e),persistent:"",maximized:"",onKeyup:(0,a.withKeys)(r.fechar,["esc"])},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(g,{class:"bg-white",container:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{dense:"",flat:"",icon:"arrow_back",round:"",onClick:r.fechar},null,8,["onClick"]),(0,a.createVNode)(s,null,{default:(0,a.withCtx)((()=>[st])),_:1})])),_:1})])),_:1}),(0,a.createVNode)(V,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,null,{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",dt,[(0,a.createVNode)(p,{class:"q-pa-sm q-ml-sm no-shadow"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{class:"items-center q-col-gutter-md"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",ct,[(0,a.createElementVNode)("div",mt,[(0,a.createVNode)(m,{class:"col-md-6",modelValue:i.dataIni,"onUpdate:modelValue":t[0]||(t[0]=e=>i.dataIni=e),tipo:"data",format:"DD/MM/YYYY",rotulo:"Inicio da Produção"},null,8,["modelValue"])]),(0,a.createElementVNode)("div",ut,[(0,a.createVNode)(m,{class:"col-6",modelValue:i.horaIni,"onUpdate:modelValue":t[1]||(t[1]=e=>i.horaIni=e),tipo:"hora",format:"HH:mm:ss",rotulo:"Inicio da Produção"},null,8,["modelValue"])])]),(0,a.createElementVNode)("div",pt,[(0,a.createElementVNode)("div",ht,[(0,a.createVNode)(m,{class:"col-md-6",modelValue:i.dataFim,"onUpdate:modelValue":t[2]||(t[2]=e=>i.dataFim=e),tipo:"data",format:"DD/MM/YYYY",rotulo:"Fim da Produção"},null,8,["modelValue"])]),(0,a.createElementVNode)("div",Vt,[(0,a.createVNode)(m,{class:"col-6",modelValue:i.horaFim,"onUpdate:modelValue":t[3]||(t[3]=e=>i.horaFim=e),tipo:"hora",format:"HH:mm:ss",rotulo:"Fim da Produção"},null,8,["modelValue"])])])])),_:1}),(0,a.createVNode)(u,{class:"items-center q-col-gutter-md"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",{class:"col",onClick:t[5]||(t[5]=(...e)=>r.carregarEquipamentos&&r.carregarEquipamentos(...e))},[(0,a.createVNode)(m,{modelValue:i.apontamento.equipamento,"onUpdate:modelValue":t[4]||(t[4]=e=>i.apontamento.equipamento=e),opcoes:i.equipamentos,tipo:"seletor",rotulo:"Equipamento"},null,8,["modelValue","opcoes"])]),(0,a.createElementVNode)("div",{class:"col",onClick:t[7]||(t[7]=(...e)=>r.carregarOperadores&&r.carregarOperadores(...e))},[(0,a.createVNode)(m,{modelValue:i.apontamento.operador,"onUpdate:modelValue":t[6]||(t[6]=e=>i.apontamento.operador=e),opcoes:i.operadores,tipo:"seletor",rotulo:"Operador"},null,8,["modelValue","opcoes"])])])),_:1}),(0,a.createVNode)(u,{class:"items-center q-col-gutter-md"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",ft,[(0,a.createVNode)(m,{modelValue:i.apontamento.quantidade,"onUpdate:modelValue":t[8]||(t[8]=e=>i.apontamento.quantidade=e),tipo:"quantidade",onBlur:r.calcularPeso,rotulo:"Quantidade produzida"},null,8,["modelValue","onBlur"])]),(0,a.createElementVNode)("div",gt,[(0,a.createVNode)(m,{modelValue:i.calcularPesoQtd,"onUpdate:modelValue":t[9]||(t[9]=e=>i.calcularPesoQtd=e),tipo:"logico",rotulo:"Calcular Quantidade X Peso"},null,8,["modelValue"])]),(0,a.createElementVNode)("div",Nt,[(0,a.createVNode)(m,{modelValue:i.apontamento.peso,"onUpdate:modelValue":t[10]||(t[10]=e=>i.apontamento.peso=e),tipo:"decimal",onBlur:r.calcularQuantidade,rotulo:"Peso em quilos"},null,8,["modelValue","onBlur"])])])),_:1})])),_:1})])])),_:1})])),_:1}),(0,a.createVNode)(f,{class:"bg-light"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)((()=>[Ct,vt])),_:1}),(0,a.createVNode)(n,{class:"q-ml-sm no-shadow float-right",color:"primary",label:"Concluir",onClick:r.concluir,unelevated:""},null,8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","onKeyup"])}]]);F()(xt,"components",{QDialog:q.Z,QLayout:k.Z,QHeader:b.Z,QToolbar:y.Z,QBtn:I.Z,QToolbarTitle:E.Z,QPageContainer:wt.Z,QPage:qt.Z,QCard:kt.Z,QFooter:_.Z});var yt=o(14285);const Et={components:{Badge:v.Z,BadgeCopiarUid:rt.Z,PromptItemV2:nt.Z,PromptApontamento:bt,SeletorCampoTabela:yt.Z},data:()=>({itens:[],documentoAnterior:{},documentoItensAnterior:[],documento:{id:"",codigoDocumento:"",idEmpresa:"",codigoEmpresa:"",descricaoEmpresa:"",numeroDocumentoEmpresa:"",inscricaoMunicipalEmpresa:"",operacao:"Manipulacao",tipo:"Estoque",status:"",dataEmissao:(0,lt.dataAtual)(),dataFinalizacao:"",observacao:""},documentoItens:[],adicionar:{modal:{name:"",value:!1}},listaApontamentos:[],apontamento:{modal:{name:"",value:!1}},totalOrigem:0,totalDestino:0,visivel:!1,promptItem:{filtros:{}},promptApontamento:{},equipamentos:[]}),emits:["atualizar"],methods:{zerarCampos(){this.empresa={},this.documentoAnterior={},this.documentoItensAnterior=[],this.documento={id:(0,lt.uuid)(),idEmpresa:"",descricaoEmpresa:"",operacao:"Manipulação",tipo:"Estoque",status:"Digitação",dataHoraEmissao:(0,lt.dataAtual)(),dataHoraFinalizado:"",observacao:""},this.documentoItens=[],this.totalOrigem=0,this.totalDestino=0},async atualizar(e){if(this.zerarCampos(),e)this.documentoAnterior=await $db.itemManipulacao.le({id:e}),this.documento=$utils.clonarV2(this.documentoAnterior),this.documentoItensAnterior=await $db.itemManipulacao.leItens({idDocumento:e}),this.documentoItens=(0,lt.clonarV2)(this.documentoItensAnterior);else{let e=[],t=await $db.contatoBusca.filtrar(null,{ativo:!0,empresas:!0},0);if(t.length&&await(0,it.X)().empresa.where("idContato").anyOf(t.map((e=>e.id))).each((t=>{e.push(t)})),!e.length)return void this.$q.notify({message:"Não há empresa configurada",timeout:0,type:"negative",closeBtn:!0});let o={};if(e.length>1){const e={ativo:!0,empresas:!0};if(o=await $g.promptContato.show({filtro:e,placeholder:"Selecione"}),!o)return this.visivel=!1,void this.$q.notifyError("Empresa não selecionada.")}else o=e[0];this.empresa=o,this.documento.descricaoEmpresa=o.nome,this.documento.idEmpresa=o.id,this.documento.numeroDocumentoEmpresa=o.numeroDocumentoNacional,this.documento.inscricaoMunicipalEmpresa=o.numeroDocumentoMunicipal}this.somarValorTotal(),this.buscarApontamentos(),e||this.abrirModal("Destino")},async salvar(e,t){try{await $db.itemManipulacao.grava({documentoAnterior:this.documentoAnterior,documento:this.documento,documentoItensAnterior:this.documentoItensAnterior,documentoItens:this.documentoItens})}catch(e){this.$q.notifyError("Erro ao salvar",e)}this.atualizar(this.documento.id),this.$emit("atualizar"),this.$q.notify(t),this.visivel=e},finalizar(){if(this.verificarTotal()){this.documento.status="Finalizado",this.documento.dataHoraFinalizado=(0,lt.dataAtual)();for(let e of this.documentoItens)e.status="Finalizado",e.dataHoraFinalizado=(0,lt.dataAtual)();this.salvar(!1,"Produção Finalizada")}},reabrir(){try{this.documento.status="Digitação",this.documento.dataHoraFinalizado="";for(let e of this.documentoItens)e.status="Digitação",e.dataHoraFinalizado="";this.salvar(!0,"Produção reaberta")}catch(e){this.$q.notifyError("Erro ao reabrir",e)}},async excluirItem(e){this.documentoItens=this.documentoItens.filter((t=>t.id!==e)),this.somarValorTotal()},async removerTodosItens(e){$q.dialog({title:"Remover todos os itens",message:`Deseja remover todos os itens de ${e}`,cancel:!0,persistent:!0}).onOk((()=>{let t=[];const o="Destino"===e?1:-1;t=this.documentoItens.filter((e=>e.operacaoFator===o));for(const e of t)this.excluirItem(e.id),console.log(e)}))},async recalcularTotal(e,t=!1){if(e.subTotal=(0,lt.arredondar)(e.quantidade*e.valorItem),e.total=(0,lt.arredondar)(e.quantidade*e.valorItem),t){let t={titulo:"Composição",msg:"Deseja recalcular a origem?"};1===e.operacaoFator&&await this.verificarComposicao(e.idItem,e.quantidade,t)}this.somarValorTotal()},async recalcularQuantidade(e){e.quantidade=(0,lt.arredondar)(e.subTotal/e.valorItem),e.total=e.subTotal,this.somarValorTotal()},async recalcularValorItem(e){e.valorItem=(0,lt.arredondar)(e.subTotal/e.quantidade),e.total=e.subTotal,this.somarValorTotal()},somarValorTotal(){this.totalOrigem=this.documentoItens.filter((e=>-1===e.operacaoFator)).reduce(((e,t)=>e+t.total),0),this.totalDestino=this.documentoItens.filter((e=>1===e.operacaoFator)).reduce(((e,t)=>e+t.total),0)},verificarTotal(){return 0===this.documentoItens.length&&0===this.totalDestino&&0===this.totalOrigem?(this.$q.notifyError("Selecione alguns itens na lista"),!1):this.totalOrigem===this.totalDestino||(this.$q.notifyError("Valores Totais de Origem e Destino devem ser iguais!"),!1)},async abrirModal(e,t=""){let o={},a=[];const l="Destino"===e?1:-1;a=t?this.documentoItens.filter((e=>e.idItem===t)):this.documentoItens.filter((e=>e.operacaoFator===l));for(const e of a)o[e.idItem]={item:await(0,it.X)().item.get(e.idItem)||{},quantidade:e.quantidade};this.$refs.promptItem.itensSelecionados=o,this.$refs.promptItem.termo=t,this.$refs.promptItem.atualizar(),this.adicionar.modal.value=!0,this.adicionar.modal.name=e},async selecionarItens(e){let t=!0,o={};const a="Destino"===this.adicionar.modal.name?1:-1;for(const l in e){let i=await $db.estoqueSaldoProdutoEmpresa.le({idEmpresa:this.documento.idEmpresa,tipoEstoque:"Disponível",idItem:l});if(i=i[0],!i||i<=0)return void this.$q.notifyError("Item não disponível no estoque");const r=e[l].item||{},n=e[l].quantidade||0,s=i.valorCustoMedio||r.valorCustoReposicao;let d=this.documentoItens.find((e=>e.idItem===l));d?(d.quantidade=n,d.quantidadeRealizado=n,d.subTotal=(0,lt.arredondar)(n*s),d.total=(0,lt.arredondar)(n*s)):this.documentoItens.push({dataHoraEmissao:(0,lt.dataAtual)(),dataHoraFinalizado:"",descricaoItem:r.descricao,id:(0,lt.uuid)(),idDocumento:this.documento.id,idItem:r.id,operacao:"Manipulação",operacaoFator:a,quantidade:n,quantidadeRealizado:n,status:"Digitação",tipoItem:r.tipoItem,subTotal:(0,lt.arredondar)(n*s),total:(0,lt.arredondar)(n*s),unidade:r.unidade,valorCustoMedio:i.valorCustoMedio,valorItem:s,codigoItem:r.codigoItem,referencia:r.referencia}),o=t?{titulo:"Composição",msg:"O item selecionado possue itens de composição, deseja preencher?"}:{},1===a&&await this.verificarComposicao(r.id,n,o),t=!1}this.somarValorTotal(),t=!0},async verificarComposicao(e,t,o){let a=!1,l=[],i=await $db.item.leCompleto({id:e});for(let e of i.atual.composicao)e.idItemUtilizado&&(e.quantidade=e.quantidade*t,l.push(e),a=!0);const r=l.reduce(((e,t)=>(e[t.idItemUtilizado]||(e[t.idItemUtilizado]=t),e)),{});o.titulo?$q.dialog({title:o.titulo,message:o.msg,cancel:!0,persistent:!0}).onOk((()=>{this.adicionar.modal.name="Origem",this.selecionarItens(r)})):this.selecionarItens(r)},async abrirModalApontamento(){this.$refs.promptApontamento.show()},async incluirApontamento(e){let t={id:(0,lt.uuid)(),documentoItemCodigoContato:e.operador,idItem:e.equipamento,tipoItem:"ApontamentoPCP",quantidade:e.quantidade,dataHoraEmissao:e.dataIni,dataHoraFinalizado:e.dataFim,documentoItem:this.documento.id};try{await $db.documentoItem.grava({atual:t})}catch(e){this.$q.notifyError("Erro ao salvar",e)}this.buscarApontamentos()},async buscarApontamentos(){try{(await $db.documentoItem.leApontamento({tipoItem:"ApontamentoPCP",documentoItem:this.documento.id})).forEach(((e,t)=>{this.listaApontamentos[t]={id:e.id,operador:e.documentoItemCodigoContato,equipamento:e.idItem,quantidade:e.quantidade,dataIni:e.dataHoraEmissao,dataFim:e.dataHoraFinalizado,documentoItem:e.documentoItem}}))}catch(e){this.$q.notifyError("Erro ao consultar apontamentos",e)}},async carregarEquipamentos(){console.log("carregar equipamentos");let e=await $db.item.leRefatorado({filtros:{tipo:"Serviço"}});this.equipamentos=e.data.map((e=>({descricao:e.descricao,id:e.id})))},buscaEquipamentoApontado(e){let t=this.equipamentos.find((t=>t.id===e));return t?t.descricao:""},async carregarOperadores(){console.log("carregar operadores");let e=await $db.contato.leRefatorado({filtros:{}});this.operadores=e.data.map((e=>({nome:e.nome,id:e.id})))},buscaOperadorApontado(e){let t=this.operadores.find((t=>t.id===e));return t?t.nome:""},calculoHorasProducao(e,t){let o=new Date(e)-new Date(t);return Math.floor(o%864e5/36e5)+"h "+Math.round(o%864e5%36e5/6e4)+"m"},async removerTodosApontamentos(){$q.dialog({title:"Remover todos os apontamentos",message:"Deseja remover todos os apontamentos de produção",cancel:!0,persistent:!0}).onOk((()=>{for(const e of this.listaApontamentos)this.excluirApontamento(e.id)}))},async excluirApontamento(e){try{await $db.documentoItem.removeApontamento(e),this.listaApontamentos=this.listaApontamentos.filter((t=>t.id!==e)),this.$q.notify("Apontamento removido!")}catch(e){this.$q.notifyError("Não foi possivel remover o apontamento!")}}},mounted(){console.log("executou"),this.carregarEquipamentos(),this.carregarOperadores()}};var It=o(31106),_t=o(68900),Dt=o(4957),Bt=o(25901),Ft=o(77953),zt=o(60880),Tt=o(83831);const At=(0,w.Z)(Et,[["render",function(e,t,o,l,i,r){const n=(0,a.resolveComponent)("q-btn"),s=(0,a.resolveComponent)("q-toolbar-title"),d=(0,a.resolveComponent)("q-toolbar"),c=(0,a.resolveComponent)("q-header"),m=(0,a.resolveComponent)("badge"),u=(0,a.resolveComponent)("BadgeCopiarUid"),p=(0,a.resolveComponent)("campo"),h=(0,a.resolveComponent)("SeletorCampoTabela"),V=(0,a.resolveComponent)("row"),f=(0,a.resolveComponent)("q-card"),g=(0,a.resolveComponent)("q-icon"),N=(0,a.resolveComponent)("q-tooltip"),C=(0,a.resolveComponent)("q-item-label"),v=(0,a.resolveComponent)("q-separator"),x=(0,a.resolveComponent)("q-item-section"),w=(0,a.resolveComponent)("q-item"),q=(0,a.resolveComponent)("q-list"),k=(0,a.resolveComponent)("q-page"),b=(0,a.resolveComponent)("q-footer"),y=(0,a.resolveComponent)("q-page-container"),E=(0,a.resolveComponent)("q-layout"),I=(0,a.resolveComponent)("q-dialog"),_=(0,a.resolveComponent)("PromptItemV2"),D=(0,a.resolveComponent)("PromptApontamento"),B=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(I,{modelValue:i.visivel,"onUpdate:modelValue":t[13]||(t[13]=e=>i.visivel=e),maximized:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(E,{class:"bg-light",container:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(y,{class:"u-container"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)((()=>[(0,a.withDirectives)((0,a.createVNode)(n,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[B]]),(0,a.createVNode)(s,null,{default:(0,a.withCtx)((()=>[z])),_:1}),(0,a.createVNode)(n,{class:"q-ml-sm no-shadow",color:"white",unelevated:"","text-color":"primary",label:"Salvar",onClick:t[0]||(t[0]=e=>r.salvar(!1,"Produção salva!"))})])),_:1})])),_:1}),(0,a.createVNode)(k,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{class:"q-pa-none q-ma-none q-my-md",color:"none","text-color":"black",style:{"min-height":"auto"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,{class:"text-black q-px-none text-body2"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("Emissão: "+(0,a.toDisplayString)(e.$filters.data(i.documento.dataHoraEmissao))+" ",1),i.documento.dataHoraFinalizado?((0,a.openBlock)(),(0,a.createElementBlock)("span",T,"Cancelamento: "+(0,a.toDisplayString)(e.$filters.data(i.documento.dataHoraFinalizado)),1)):(0,a.createCommentVNode)("",!0)])),_:1}),i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,cor:"positive",class:"q-mx-sm",icone:"flag",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.documento.status),1)])),_:1})):(0,a.createCommentVNode)("",!0),i.documento.numero?((0,a.openBlock)(),(0,a.createBlock)(m,{key:1,class:"q-mr-sm",cor:"tertiary",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" #"+(0,a.toDisplayString)(i.documento.numero.toString().padStart(6,"0")),1)])),_:1})):((0,a.openBlock)(),(0,a.createBlock)(u,{key:2,id:i.documento.id,"numero:":"documento.id.slice(-8)",cor:"tertiary"},null,8,["id"]))])),_:1}),(0,a.createVNode)(f,{class:"bg-white q-pa-md q-mt-md no-shadow"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("form",A,[(0,a.createVNode)(V,{class:"q-col-gutter-sm"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",S,[(0,a.createVNode)(p,{modelValue:i.documento.descricaoEmpresa,"onUpdate:modelValue":t[1]||(t[1]=e=>i.documento.descricaoEmpresa=e),disable:"",rotulo:"Empresa",tipo:"texto"},null,8,["modelValue"])]),(0,a.createElementVNode)("div",$,[(0,a.createVNode)(p,{modelValue:i.documento.observacao,"onUpdate:modelValue":t[2]||(t[2]=e=>i.documento.observacao=e),rotulo:"Observação",tipo:"texto"},null,8,["modelValue"])]),(0,a.createElementVNode)("div",Q,[(0,a.createVNode)(h,{modelValue:i.documento.operacao,"onUpdate:modelValue":t[3]||(t[3]=e=>i.documento.operacao=e),tabela:"documento",campo:"operacao",label:"Operação",enableAdd:""},null,8,["modelValue"])])])),_:1})],512)])),_:1}),(0,a.createVNode)(V,{class:"q-col-gutter-x-sm q-mt-md"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",M,[(0,a.createVNode)(f,{class:"no-shadow bg-white full-width fit q-pa-md"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{class:"q-pa-none q-ma-none q-mb-md",color:"none","text-color":"black",style:{"min-height":"auto"}},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("p",P,[(0,a.createVNode)(g,{class:"q-mr-md",name:"shopping_cart",size:"24px",style:{color:"#737373"}}),Z]),(0,a.createVNode)(s,{class:"q-pa-none q-ma-none",style:{height:"0 !important","min-height":"auto"}}),"Digitação"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(n,{key:0,color:"tertiary",dense:"",flat:"",icon:"delete",round:"",size:"md",onClick:t[4]||(t[4]=e=>r.removerTodosItens("Origem"))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[L])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0),"Digitação"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(n,{key:1,color:"positive",dense:"",flat:"",icon:"add",round:"",size:"md",onClick:t[5]||(t[5]=e=>r.abrirModal("Origem"))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[U])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0)])),_:1}),(0,a.createVNode)(q,{class:"col-12 no-border q-mx-none q-pa-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(w,{class:"q-pa-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,{class:"q-col-gutter-md text-weight-bold text-left justify-around"},{default:(0,a.withCtx)((()=>[O,H,R,j,Y,G])),_:1})])),_:1}),(0,a.createVNode)(v,{class:"q-my-xs"}),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(i.documentoItens,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:t},[-1===e.operacaoFator?((0,a.openBlock)(),(0,a.createBlock)(C,{key:0,caption:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,{class:"text-left justify-around"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",X,(0,a.toDisplayString)(e.referencia||"-"),1),(0,a.createElementVNode)("div",K,(0,a.toDisplayString)(e.descricaoItem||"-"),1),(0,a.createElementVNode)("div",J,[(0,a.createVNode)(p,{modelValue:e.quantidade,"onUpdate:modelValue":t=>e.quantidade=t,somenteLeitura:"Finalizado"===i.documento.status,decimals:"4",tipo:"decimal",onBlur:t=>r.recalcularTotal(e,!0)},null,8,["modelValue","onUpdate:modelValue","somenteLeitura","onBlur"])]),(0,a.createElementVNode)("div",W,[(0,a.createVNode)(p,{modelValue:e.valorItem,"onUpdate:modelValue":t=>e.valorItem=t,decimals:"4",disable:"",tipo:"decimal",somenteLeitura:"Finalizado"===i.documento.status,onBlur:t=>r.recalcularTotal(e)},null,8,["modelValue","onUpdate:modelValue","somenteLeitura","onBlur"])]),(0,a.createElementVNode)("div",ee,[(0,a.createVNode)(p,{modelValue:e.subTotal,"onUpdate:modelValue":t=>e.subTotal=t,somenteLeitura:"Finalizado"===i.documento.status,decimals:"4",tipo:"decimal",onBlur:t=>r.recalcularQuantidade(e)},null,8,["modelValue","onUpdate:modelValue","somenteLeitura","onBlur"])]),"Digitação"===i.documento.status?((0,a.openBlock)(),(0,a.createElementBlock)("div",te,[(0,a.createVNode)(n,{dense:"",flat:"",icon:"delete",round:"",size:"md",onClick:t=>r.excluirItem(e.id)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[oe])),_:1})])),_:2},1032,["onClick"])])):(0,a.createCommentVNode)("",!0)])),_:2},1024)])),_:2},1024)):(0,a.createCommentVNode)("",!0),-1===e.operacaoFator?((0,a.openBlock)(),(0,a.createBlock)(v,{key:1,class:"q-my-xs"})):(0,a.createCommentVNode)("",!0),-1===e.operacaoFator?((0,a.openBlock)(),(0,a.createBlock)(C,{key:2,caption:""})):(0,a.createCommentVNode)("",!0)])))),128))])),_:1})])),_:1}),(0,a.createVNode)(w,{class:"q-pa-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,{class:"text-weight-bold text-left justify-around"},{default:(0,a.withCtx)((()=>[ae,le,ie,re,(0,a.createElementVNode)("div",ne,(0,a.toDisplayString)(e.$filters.numero(i.totalOrigem,2)),1),se])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.createVNode)(w,{class:"q-px-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,{class:"text-center"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{class:"q-mx-auto",color:"positive",icon:"add",label:"Adicionar item",outline:"",size:"xs",onClick:t[6]||(t[6]=e=>r.abrirModal("Origem"))})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})]),(0,a.createElementVNode)("div",de,[(0,a.createVNode)(f,{class:"no-shadow bg-white full-width fit q-pa-md"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{class:"q-pa-none q-ma-none q-mb-md",color:"none","text-color":"black",style:{"min-height":"auto"}},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("p",ce,[(0,a.createVNode)(g,{class:"q-mr-md",name:"shopping_cart",size:"24px",style:{color:"#737373"}}),me]),(0,a.createVNode)(s,{class:"q-pa-none q-ma-none",style:{height:"0 !important","min-height":"auto"}}),"Digitação"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(n,{key:0,color:"tertiary",dense:"",flat:"",icon:"delete",round:"",size:"md",onClick:t[7]||(t[7]=e=>r.removerTodosItens("Destino"))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[ue])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0),"Digitação"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(n,{key:1,color:"positive",dense:"",flat:"",icon:"add",round:"",size:"md",onClick:t[8]||(t[8]=e=>r.abrirModal("Destino"))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[pe])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0)])),_:1}),(0,a.createVNode)(q,{class:"col-12 no-border q-mx-none q-pa-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(w,{class:"q-pa-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,{class:"q-col-gutter-md text-weight-bold text-left justify-around"},{default:(0,a.withCtx)((()=>[he,Ve,fe,ge,Ne,Ce,ve])),_:1})])),_:1}),(0,a.createVNode)(v,{class:"q-my-xs"}),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(i.documentoItens,((e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:t},[1===e.operacaoFator?((0,a.openBlock)(),(0,a.createBlock)(C,{key:0,caption:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,{class:"text-left justify-around"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",xe,(0,a.toDisplayString)(e.referencia||"-"),1),(0,a.createElementVNode)("div",we,(0,a.toDisplayString)(e.descricaoItem||"-"),1),(0,a.createElementVNode)("div",qe,[(0,a.createVNode)(p,{modelValue:e.quantidade,"onUpdate:modelValue":t=>e.quantidade=t,somenteLeitura:"Finalizado"===i.documento.status,decimals:"4",tipo:"decimal",onBlur:t=>r.recalcularTotal(e,!0)},null,8,["modelValue","onUpdate:modelValue","somenteLeitura","onBlur"])]),(0,a.createElementVNode)("div",ke,(0,a.toDisplayString)(e.unidade),1),(0,a.createElementVNode)("div",be,[(0,a.createVNode)(p,{modelValue:e.valorItem,"onUpdate:modelValue":t=>e.valorItem=t,somenteLeitura:"Finalizado"===i.documento.status,class:"col",decimals:"4",tipo:"decimal",onBlur:t=>r.recalcularTotal(e)},null,8,["modelValue","onUpdate:modelValue","somenteLeitura","onBlur"])]),(0,a.createElementVNode)("div",ye,[(0,a.createVNode)(p,{modelValue:e.subTotal,"onUpdate:modelValue":t=>e.subTotal=t,somenteLeitura:"Finalizado"===i.documento.status,decimals:"4",tipo:"decimal",onBlur:t=>r.recalcularValorItem(e)},null,8,["modelValue","onUpdate:modelValue","somenteLeitura","onBlur"])]),"Digitação"===i.documento.status?((0,a.openBlock)(),(0,a.createElementBlock)("div",Ee,[(0,a.createVNode)(n,{dense:"",flat:"",icon:"delete",round:"",size:"md",onClick:t=>r.excluirItem(e.id)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[Ie])),_:1})])),_:2},1032,["onClick"])])):(0,a.createCommentVNode)("",!0)])),_:2},1024)])),_:2},1024)):(0,a.createCommentVNode)("",!0),1===e.operacaoFator?((0,a.openBlock)(),(0,a.createBlock)(v,{key:1,class:"q-my-xs"})):(0,a.createCommentVNode)("",!0),1===e.operacaoFator?((0,a.openBlock)(),(0,a.createBlock)(C,{key:2,caption:""})):(0,a.createCommentVNode)("",!0)])))),128))])),_:1})])),_:1}),(0,a.createVNode)(w,{class:"q-pa-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,{class:"text-weight-bold text-left justify-around"},{default:(0,a.withCtx)((()=>[_e,De,Be,Fe,(0,a.createElementVNode)("div",ze,(0,a.toDisplayString)(e.$filters.numero(i.totalDestino,2)),1),Te])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.createVNode)(w,{class:"q-px-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,{class:"text-center"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{class:"q-mx-auto",color:"positive",icon:"add",label:"Adicionar item",outline:"",size:"xs",onClick:t[9]||(t[9]=e=>r.abrirModal("Destino"))})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])])),_:1}),(0,a.createVNode)(V,{class:"q-col-gutter-x-sm q-mt-md"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",Ae,[(0,a.createVNode)(f,{class:"no-shadow bg-white full-width fit q-pa-md"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{class:"q-pa-none q-ma-none q-mb-md",color:"none","text-color":"black",style:{"min-height":"auto"}},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("p",Se,[(0,a.createVNode)(g,{class:"q-mr-md",name:"content_paste",size:"24px",style:{color:"#737373"}}),$e]),(0,a.createVNode)(s,{class:"q-pa-none q-ma-none",style:{height:"0 !important","min-height":"auto"}}),"Digitação"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(n,{key:0,color:"tertiary",dense:"",flat:"",icon:"delete",round:"",size:"md",onClick:t[10]||(t[10]=e=>r.removerTodosApontamentos())},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[Qe])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0),"Digitação"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(n,{key:1,color:"positive",dense:"",flat:"",icon:"add",round:"",size:"md",onClick:t[11]||(t[11]=e=>r.abrirModalApontamento())},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[Me])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0)])),_:1}),(0,a.createVNode)(q,{class:"col-12 no-border q-mx-none q-pa-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(w,{class:"q-pa-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,{class:"q-col-gutter-md text-weight-bold text-left justify-around"},{default:(0,a.withCtx)((()=>[Pe,Ze,Le,Ue,Oe,He,Re,je])),_:1})])),_:1}),(0,a.createVNode)(v,{class:"q-my-xs"}),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(i.listaApontamentos,((t,o)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:o},[(0,a.createVNode)(C,{caption:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,{class:"text-left justify-around"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",Ye,(0,a.toDisplayString)(e.$filters.dataHora(t.dataIni)),1),(0,a.createElementVNode)("div",Ge,(0,a.toDisplayString)(e.$filters.dataHora(t.dataFim)),1),(0,a.createElementVNode)("div",Xe,(0,a.toDisplayString)(r.calculoHorasProducao(t.dataFim,t.dataIni)),1),(0,a.createElementVNode)("div",Ke,(0,a.toDisplayString)(r.buscaEquipamentoApontado(t.equipamento)),1),(0,a.createElementVNode)("div",Je,(0,a.toDisplayString)(r.buscaOperadorApontado(t.operador)),1),(0,a.createElementVNode)("div",We,(0,a.toDisplayString)(t.quantidade),1),(0,a.createElementVNode)("div",et,(0,a.toDisplayString)(t.peso),1),(0,a.createElementVNode)("div",tt,[(0,a.createVNode)(n,{dense:"",flat:"",icon:"delete",round:"",size:"md",onClick:e=>r.excluirApontamento(t.id)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[ot])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024)])))),128))])),_:1})])),_:1}),(0,a.createVNode)(w,{class:"q-px-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,{class:"text-center"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{class:"q-mx-auto",color:"positive",icon:"add",label:"Adicionar apontamento",outline:"",size:"xs",onClick:t[12]||(t[12]=e=>r.abrirModalApontamento())})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])])),_:1})])),_:1}),(0,a.createVNode)(b,{class:"bg-light no-shadow q-pa-sm text-right",bordered:""},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",at,[(0,a.createVNode)(s,{class:"text-right"},{default:(0,a.withCtx)((()=>["Finalizado"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(n,{key:0,color:"primary",label:"Reabrir",onClick:r.reabrir},null,8,["onClick"])):(0,a.createCommentVNode)("",!0),"Digitação"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(n,{key:1,color:"primary",label:"Finalizar",onClick:r.finalizar},null,8,["onClick"])):(0,a.createCommentVNode)("",!0)])),_:1})])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.createVNode)(_,{modelValue:i.adicionar.modal.value,"onUpdate:modelValue":t[14]||(t[14]=e=>i.adicionar.modal.value=e),filtro:i.promptItem.filtros,habilitarQuantidade:!0,onSelecionarItens:r.selecionarItens,ref:"promptItem"},null,8,["modelValue","filtro","onSelecionarItens"]),(0,a.createVNode)(D,{onIncluirApontamento:r.incluirApontamento,habilitarQuantidade:!0,ref:"promptApontamento"},null,8,["onIncluirApontamento"])],64)}]]);F()(Et,"components",{QDialog:q.Z,QLayout:k.Z,QPageContainer:wt.Z,QHeader:b.Z,QToolbar:y.Z,QBtn:I.Z,QToolbarTitle:E.Z,QPage:qt.Z,QCard:kt.Z,QItemLabel:It.Z,QIcon:_t.Z,QTooltip:Dt.Z,QList:Bt.Z,QItem:Ft.Z,QItemSection:zt.Z,QSeparator:Tt.Z,QFooter:_.Z}),F()(Et,"directives",{ClosePopup:D.Z});var St=o(11463),$t=o(88603);const Qt={components:{lista:C.Z,Badge:v.Z,ItensManipulacao:At,BadgeCopiarUid:rt.Z},data:()=>({paginacao:{atual:1,minimo:1,maximo:1,total:1,limite:25},filtros:{tab:"digitacao",empresa:{selecionada:"",opcoes:[]},periodoEmissao:{ini:"",fim:""},periodoFinalizado:{ini:"",fim:""}},documentos:[],tabs:[{rotulo:"Digitação",value:"digitacao"},{rotulo:"Finalizados",value:"finalizado"},{rotulo:"Todos",value:"Todos"}],tabSelecionada:{valor:"digitacao"},listaLayout:{},confirm:!1,currentId:null,documentoItens:null,showsectionm:!1,buscaCampo:"",checkboxModel:[],carregando:!1,contatosEmpresa:[],dados:{},erroEmpresas:!1,erroPeriodo:!1,modalManipulacao:!1,configImpressao:[]}),watch:{showFilters:function(e){!0===e?this.showList=!1:!0!==this.section&&!0!==this.kanban&&!0!==this.gantt||(this.showList=!0)}},methods:{trocarTab(e){this.paginacao.atual=1,this.filtros.tab=e,this.atualizar()},async atualizar(){this.filtros.tab=this.tabSelecionada.valor;try{this.$q.loading.show();const e=this.paginacao.limite,t=this.paginacao.atual,o="descricao";let a="";"digitacao"===this.filtros.tab?a="Digitação":"finalizado"===this.filtros.tab&&(a="Finalizado");let l=this.filtros.empresa.selecionada.value||"";this.filtros.idEmpresa=l;let i={};if(this.buscaCampo){let l=this.$utils.eliminarVazios(this.filtros);l.termoBusca=this.buscaCampo,l.status=a,i=await this.filtrarCampos(l,e,t,o)}else{let l=this.$utils.eliminarVazios(this.filtros);l.status=a,i=await this.filtrarCampos(l,e,t,o)}this.listaLayout={};for(let e of i.data)this.listaLayout[e.id]={detalhes:!1};this.documentos=i.data,this.calcularPorcentagem(this.documentos),this.paginacao.total=i.total,this.paginacao.maximo=i.totalPages,this.configuraImpressao(this.filtros.idEmpresa)}catch(e){this.$q.notifyError("Erro iniciar",e)}finally{this.$q.loading.hide()}},filtrarCampos:async(e,t,o,a)=>(console.log({filtros:e}),St.db.itemManipulacao.leRefatorado({filtros:e,limit:t,page:o,sort:a})),limparFiltros_click(){this.filtros={tab:this.tabAtiva,empresa:{selecionada:"",opcoes:[]},periodoEmissao:{ini:"",fim:""},periodoFinalizado:{ini:"",fim:""}},this.atualizar()},async showDetails(e){let t=await St.db.itemManipulacao.leItens({idDocumento:e.id});e.documentoItens=t,e.showPreviewDetail=!e.showPreviewDetail},async editarManipulacao(e){this.$refs.itensManipulacao.visivel=!0,await this.$refs.itensManipulacao.atualizar(e)},async adicionarManipulacaoItens(){this.$refs.itensManipulacao.visivel=!0,await this.$refs.itensManipulacao.atualizar()},async filtrar(e=1){this.buscaCampo="";const t=(e-1)*this.pageSize;this.documentos.status="digitacao";let o=await St.db.itemManipulacao.le({periodoEmissao:{ini:this.filtro.periodoEmissao.ini,fim:this.filtro.periodoEmissao.fim},periodoFinalizado:{ini:this.filtro.periodoFinalizado.ini,fim:this.filtro.periodoFinalizado.fim},status:this.page.ativa,idEmpresa:this.filtro.empresas.selected,offset:t,limit:this.pageSize});this.documentos=o[0].map((e=>({...e,showPreviewDetail:!1,documentoItens:[]}))),this.documentos=(0,$t.orderBy)(this.documentos,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"]);let a=o[1];this.page.digitacao.max=Math.ceil(a/this.pageSize),this.page.finalizado.max=Math.ceil(a/this.pageSize)},getPage(e){this.page.ativa=e,this.filtrar()},excluir(e){$q.dialog({cancel:{label:"Não",push:!0,color:"tertiary",flat:!0},title:"Remover",message:"Ao continuar você irá remover este item.",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk((async()=>{try{$q.loading.show(),await St.db.itemManipulacao.remove(e),this.atualizar(),$q.notifyPositive("O item foi excluído com sucesso.")}catch(e){$q.notifyError("Ocorreu um erro ao remover item",e)}finally{$q.loading.hide()}}))},async buscar(){setTimeout((async()=>{let e=(await St.db.item.ler({filtros:{termoBusca:this.buscaCampo}})).data,t=[],o=[];for(let o of e)t=await St.db.itemManipulacao.leItens({idItem:o.id});for(let e of t){console.log("doc");let t=await St.db.itemManipulacao.le({id:e.idDocumento});o.push(t)}this.documentos=o.map((e=>({...e,showPreviewDetail:!1,documentoItens:[]})))}),1500)},abrirFiltro(){!0===this.section||!0===this.kanban||!0===this.gantt?this.left=!0:this.left=!1,this.showFilters=!this.showFilters},async empresaOpcoesCarregar(){console.log("carregar empresas"),this.filtros.empresa.opcoes=(await St.db.empresa.le()).map((e=>({rotulo:e.nome,valor:e.idContato})))},carregaComponent(e){this.showFilters=!1,"list"===e&&(this.left=!1,this.section=!1,this.showList=!1,this.list=!0,this.kanban=!1,this.gantt=!1,this.ganttL=!1,this.kanbanL=!1)},async configuraImpressao(e){const t=await $db.configuracoes.porNome("impressao.producao",e);this.configImpressao=[...t.length?t.map((e=>({texto:"Imprimir Compisição",...e}))):[{valor:"producao",texto:"Produção"},{}]]},async calcularPorcentagem(e){for(let t=0;t<e.length;t++){let o=0,a=0,l=await St.db.itemManipulacao.leItens({idDocumento:e[t].id}),i=await St.db.documentoItem.leApontamento({tipoItem:"ApontamentoPCP",documentoItem:e[t].id});l.forEach(((e,t)=>{e?1===e.operacaoFator&&(o+=e.quantidade):o+=0})),i.forEach(((e,t)=>{e?"ApontamentoPCP"===e.tipoItem&&(a+=e.quantidade):a+=0})),0===o?(e[t].porcentagemApontamento=0,e[t].porcentagemApontamentoLabel="0 %"):(e[t].porcentagemApontamento=a/o,e[t].porcentagemApontamentoLabel=a/o*100+" %")}}},created(){this.atualizar()}};var Mt=o(40320),Pt=o(98482),Zt=o(76106),Lt=o(54707);const Ut=(0,w.Z)(Qt,[["render",function(e,t,o,C,v,x){const w=(0,a.resolveComponent)("campo"),q=(0,a.resolveComponent)("q-select"),k=(0,a.resolveComponent)("badge"),b=(0,a.resolveComponent)("BadgeCopiarUid"),y=(0,a.resolveComponent)("q-item-section"),E=(0,a.resolveComponent)("q-item-label"),I=(0,a.resolveComponent)("q-icon"),_=(0,a.resolveComponent)("q-item-labe"),D=(0,a.resolveComponent)("q-tooltip"),B=(0,a.resolveComponent)("q-badge"),F=(0,a.resolveComponent)("q-linear-progress"),z=(0,a.resolveComponent)("q-btn"),T=(0,a.resolveComponent)("q-item"),A=(0,a.resolveComponent)("q-list"),S=(0,a.resolveComponent)("q-menu"),$=(0,a.resolveComponent)("q-separator"),Q=(0,a.resolveComponent)("lista"),M=(0,a.resolveComponent)("ItensManipulacao");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(Q,{titulo:"Manipulação de Itens",onCriar_click:x.adicionarManipulacaoItens,showAdd:"false",showToolbar:!1,icone:"mdi-set-center-right",onCheckBoxGeral_click:e.checkBoxGeral_click,onFiltro_change:x.atualizar,onLimparFiltros_click:x.limparFiltros_click,onAbrirTodosPreview:e.abrirTodosPreview,onExportarXLSX_click:e.exportarXLSX_click,onRemoverTodos:e.removerTodos,onRestaurarTodos:e.restaurarTodos,tabSelecionada:v.tabSelecionada,tabs:v.tabs,lista:e.lista,listaLayout:v.listaLayout,paginacao:v.paginacao,filtros:v.filtros,opcoesMarca:e.opcoesMarca,opcoesGrupo:e.opcoesGrupo,opcoesSubGrupo:e.opcoesSubGrupo,opcoesTipo:e.opcoesTipo,buscaCampo:v.buscaCampo,"onUpdate:buscaCampo":t[7]||(t[7]=e=>v.buscaCampo=e),checkboxModel:v.checkboxModel,"onUpdate:checkboxModel":t[8]||(t[8]=e=>v.checkboxModel=e)},{filtroCampos:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",l,[(0,a.createElementVNode)("div",{class:"col-12 q-px-sm",onClick:t[1]||(t[1]=(...e)=>x.empresaOpcoesCarregar&&x.empresaOpcoesCarregar(...e))},[(0,a.createVNode)(w,{modelValue:v.filtros.empresa.selecionada,"onUpdate:modelValue":t[0]||(t[0]=e=>v.filtros.empresa.selecionada=e),opcoes:v.filtros.empresa.opcoes,rotulo:"Por Empresa",tipo:"seletor"},null,8,["modelValue","opcoes"])]),(0,a.createElementVNode)("div",i,[r,(0,a.createElementVNode)("div",n,[(0,a.createVNode)(w,{modelValue:v.filtros.periodoEmissao.ini,"onUpdate:modelValue":t[2]||(t[2]=e=>v.filtros.periodoEmissao.ini=e),after:[{icon:"mdi-close-circle",handler(){v.filtros.periodoEmissao.ini=""}}],class:"no-shadow full-width",rotulo:"De",tipo:"data"},null,8,["modelValue","after"])]),(0,a.createElementVNode)("div",s,[(0,a.createVNode)(w,{modelValue:v.filtros.periodoEmissao.fim,"onUpdate:modelValue":t[3]||(t[3]=e=>v.filtros.periodoEmissao.fim=e),after:[{icon:"mdi-close-circle",handler(){v.filtros.periodoEmissao.fim=""}}],class:"no-shadow full-width",rotulo:"até",tipo:"data"},null,8,["modelValue","after"])])]),(0,a.createElementVNode)("div",d,[c,(0,a.createElementVNode)("div",m,[(0,a.createVNode)(w,{modelValue:v.filtros.periodoFinalizado.ini,"onUpdate:modelValue":t[4]||(t[4]=e=>v.filtros.periodoFinalizado.ini=e),after:[{icon:"mdi-close-circle",handler(){v.filtros.periodoFinalizado.ini=""}}],class:"no-shadow full-width",rotulo:"De",tipo:"data"},null,8,["modelValue","after"])]),(0,a.createElementVNode)("div",u,[(0,a.createVNode)(w,{modelValue:v.filtros.periodoFinalizado.fim,"onUpdate:modelValue":t[5]||(t[5]=e=>v.filtros.periodoFinalizado.fim=e),after:[{icon:"mdi-close-circle",handler(){v.filtros.periodoFinalizado.fim=""}}],class:"no-shadow full-width",rotulo:"até",tipo:"data"},null,8,["modelValue","after"])])]),(0,a.createElementVNode)("div",p,[(0,a.createVNode)(q,{modelValue:v.paginacao.limite,"onUpdate:modelValue":t[6]||(t[6]=e=>v.paginacao.limite=e),options:[10,25,50,100],placeholder:"Quantidade por página"},null,8,["modelValue"])])])])),itemLista:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(v.documentos,(t=>((0,a.openBlock)(),(0,a.createBlock)(A,{key:t.id,class:"q-py-none qListaItems",style:{border:"none !important"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{class:"items-center d-flex"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(y,{avatar:"",center:""},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",h,[t.numero?((0,a.openBlock)(),(0,a.createBlock)(k,{key:0,class:"q-mr-sm",cor:"tertiary",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" #"+(0,a.toDisplayString)(t.numero.toString().padStart(6,"0")),1)])),_:2},1024)):((0,a.openBlock)(),(0,a.createBlock)(b,{key:1,id:t.id,"numero:":"documento.id.slice(-8)",cor:"tertiary"},null,8,["id"]))])])),_:2},1024),(0,a.createVNode)(y,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(E,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.descricaoEmpresa),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(y,{caption:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(I,{class:"text-tertiary",name:"event"}),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$filters.data(t.dataHoraEmissao)),1)])),_:2},1024),(0,a.createVNode)(D,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("Data Emissão "+(0,a.toDisplayString)(e.$filters.dataHora(t.dataHoraEmissao)),1)])),_:2},1024)])),_:2},1024),"digitacao"!==v.tabSelecionada.valor?((0,a.openBlock)(),(0,a.createBlock)(y,{key:0,caption:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(I,{class:"text-tertiary",name:"event"}),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$filters.data(t.dataHoraFinalizado)),1)])),_:2},1024),(0,a.createVNode)(D,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("Data Finalizado "+(0,a.toDisplayString)(e.$filters.dataHora(t.dataHoraFinalizado)),1)])),_:2},1024)])),_:2},1024)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(y,{caption:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(F,{stripe:"",rounded:"",size:"20px",value:t.porcentagemApontamento,color:"secondary",class:"q-mt-sm"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",V,[(0,a.createVNode)(B,{color:"white","text-color":"secondary",label:t.porcentagemApontamentoLabel},null,8,["label"])])])),_:2},1032,["value"])])),_:2},1024),(0,a.createVNode)(D,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.porcentagemApontamentoLabel)+" Concluída ",1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(y,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(k,{class:"q-mr-sm",cor:"warning",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.status),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(y,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(k,{class:"q-mr-sm",cor:"primary",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.operacao),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(y,{side:"",top:""},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",f,[(0,a.createVNode)(z,{icon:t.showPreviewDetail?"keyboard_arrow_up":"keyboard_arrow_down",class:"buttons",color:"tertiary",dense:"",flat:"",round:"",size:"md",onClick:e=>x.showDetails(t)},null,8,["icon","onClick"]),(0,a.createVNode)(z,{rounded:"",dense:"",flat:"",icon:"print",color:"primary",class:"no-shadow q-mx-xs",size:"md",style:{float:"right"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(S,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(A,{link:"",separator:""},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(v.configImpressao.filter((e=>e.valor)),(t=>((0,a.openBlock)(),(0,a.createBlock)(T,{clickable:"",key:t.valor,onClick:o=>e.$imprimir(t.valor,(v.dados.venda||{}).id||"0")},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(y,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(I,{name:"print"})])),_:1}),(0,a.createVNode)(y,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(E,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.texto),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1}),(0,a.createVNode)(z,{class:"buttons",color:"primary",dense:"",flat:"",icon:"edit",round:"",size:"md",onClick:e=>x.editarManipulacao(t.id)},null,8,["onClick"]),"digitacao"===v.tabSelecionada.valor?((0,a.openBlock)(),(0,a.createBlock)(z,{key:0,class:"buttons",color:"tertiary",dense:"",flat:"",icon:"delete",round:"",size:"md",onClick:e=>x.excluir(t.id)},null,8,["onClick"])):(0,a.createCommentVNode)("",!0)])])),_:2},1024)])),_:2},1024),t.showPreviewDetail?((0,a.openBlock)(),(0,a.createBlock)(T,{key:0,class:"q-pa-md"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(y,null,{default:(0,a.withCtx)((()=>[g,((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.documentoItens,(e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e.id},[-1===e.operacaoFator?((0,a.openBlock)(),(0,a.createBlock)(y,{key:0,stamp:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.quantidade)+" "+(0,a.toDisplayString)(e.unidade)+" - "+(0,a.toDisplayString)(e.descricaoItem),1)])),_:2},1024)):(0,a.createCommentVNode)("",!0)])))),128))])),_:2},1024),(0,a.createVNode)(E,null,{default:(0,a.withCtx)((()=>[N,((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t.documentoItens,(e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e.id},[1===e.operacaoFator?((0,a.openBlock)(),(0,a.createBlock)(y,{key:0,stamp:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.quantidade)+" "+(0,a.toDisplayString)(e.unidade)+" - "+(0,a.toDisplayString)(e.descricaoItem),1)])),_:2},1024)):(0,a.createCommentVNode)("",!0)])))),128))])),_:2},1024)])),_:2},1024)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)($)])),_:2},1024)))),128))])),_:1},8,["onCriar_click","onCheckBoxGeral_click","onFiltro_change","onLimparFiltros_click","onAbrirTodosPreview","onExportarXLSX_click","onRemoverTodos","onRestaurarTodos","tabSelecionada","tabs","lista","listaLayout","paginacao","filtros","opcoesMarca","opcoesGrupo","opcoesSubGrupo","opcoesTipo","buscaCampo","checkboxModel"]),(0,a.createVNode)(M,{ref:"itensManipulacao",onAtualizar:x.atualizar},null,8,["onAtualizar"])],64)}]]);F()(Qt,"components",{QSelect:Mt.Z,QBtn:I.Z,QList:Bt.Z,QItem:Ft.Z,QItemSection:zt.Z,QItemLabel:It.Z,QIcon:_t.Z,QTooltip:Dt.Z,QLinearProgress:Pt.Z,QBadge:Zt.Z,QMenu:Lt.Z,QSeparator:Tt.Z}),F()(Qt,"directives",{ClosePopup:D.Z})}}]);