(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["95e59ef6"],{"0cec":function(t,e,o){"use strict";var a=o("7d8e"),r=o.n(a);r.a},"53d5":function(t,e,o){"use strict";var a=o("e1fb"),r=o.n(a);r.a},"7d8e":function(t,e,o){},d009:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-layout",{staticClass:"AdmCustom"},[o("barra-topo"),o("q-page-container",[o("q-page",[o("q-toolbar",{staticClass:"q-py-sm q-my-sm",attrs:{color:"none"}},[o("q-toolbar-title",[t._v("Adm. Custom")]),o("q-btn",{staticClass:" no-shadow u-semClique",attrs:{icon:"mdi-filter",round:"",color:"primary",inverted:""},on:{click:function(e){t.showfilters=!t.showfilters}}})],1),o("q-layout-drawer",{attrs:{overlay:"",side:"right"},model:{value:t.showfilters,callback:function(e){t.showfilters=e},expression:"showfilters"}},[o("q-toolbar",{attrs:{color:"white","text-color":"faded"}},[o("q-icon",{attrs:{name:"mdi-filter",color:"faded"}}),o("q-toolbar-title",[t._v(" Filtrar")]),o("q-btn",{attrs:{dense:"",flat:"",icon:"close",round:""},on:{click:function(e){t.showfilters=!t.showfilters}}})],1),o("div",{staticClass:"col-12 q-px-md q-mt-md"},[o("q-input",{staticClass:"no-shadow",attrs:{color:"white",placeholder:"Por cliente ou responsável"},on:{input:t.filtraDebounce},model:{value:t.fraseFiltro,callback:function(e){t.fraseFiltro=e},expression:"fraseFiltro"}})],1),o("div",{staticClass:"col-12 q-px-sm q-my-md"},[o("q-select",{staticClass:"q-mx-sm",attrs:{options:t.prazoOpcoes,clearable:"",placeholder:"Por prazo"},model:{value:t.prazoSelecionado,callback:function(e){t.prazoSelecionado=e},expression:"prazoSelecionado"}})],1),o("div",{staticClass:"col-12 q-px-sm"},[o("q-select",{staticClass:"q-mx-sm",attrs:{options:t.empresaOpcoes,clearable:"",placeholder:"Por empresa"},on:{input:t.refazFiltro},nativeOn:{click:function(e){return t.empresaOpcoesCarregar(e)}},model:{value:t.empresaSelecionada,callback:function(e){t.empresaSelecionada=e},expression:"empresaSelecionada"}})],1)],1),o("div",{staticClass:"row overflowXCustom filterfalse"},t._l(t.listas,function(e,a){return o("div",{key:a,staticClass:"no-shadow col q-pa-none coluna"},[o("div",{staticClass:" q-pa-none"},[o("q-toolbar",{staticClass:"no-shadow q-py-none q-px-sm"},[o("q-toolbar-title",{staticClass:"q-py-none"},[t._v("\n                "+t._s(a)+"\n              ")])],1),"Entregue"===a?o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 q-pl-none"},[o("campo",{staticClass:"q-mx-sm",attrs:{rotulo:"Início",tipo:"data"},model:{value:t.entregueInicio,callback:function(e){t.entregueInicio=e},expression:"entregueInicio"}}),o("campo",{staticClass:"q-mx-sm",attrs:{rotulo:"Fim",tipo:"data"},model:{value:t.entregueFim,callback:function(e){t.entregueFim=e},expression:"entregueFim"}})],1)]):t._e(),o("draggable",{staticClass:"dragAreaCustom ",attrs:{delay:"400",list:e,group:"customGroup",draggable:".extratoCustom"},on:{end:t.eventoEnd}},t._l(e,function(e){return!e.mostra||null!==t.prazoSelecionado&&t.prazoSelecionado!==e.corBorda?t._e():o("q-card",{key:e.codigoDocumento,staticClass:"q-pa-sm q-pb-md q-my-sm q-mb-md shadow-1 extratoCustom bg-white",class:e.corBorda},[o("div",{staticClass:"row q-mt-xs"},[o("div",{staticClass:"col-6"},[e.corLabel?o("badge",{staticClass:"q-mx-xs",attrs:{cor:e.corLabel,escuro:"",rotulo:e.txtLabel}}):o("badge",{staticClass:"q-mx-xs",attrs:{rotulo:e.txtLabel}})],1),o("div",{staticClass:"col-6 justify-end q-pr-xs",staticStyle:{display:"flex"}},[o("badge",{staticClass:"q-mx-sm ",attrs:{cor:"grey-1",icone:"shopping_cart",rotulo:e.numeroVenda}}),"-"!==e.codigoCompra?o("badge",{attrs:{cor:"light",icone:"mdi-factory"}},[t._v("\n                      "+t._s(e.codigoCompra)+"\n                    ")]):t._e(),o("badge",{attrs:{cor:"grey-8",escuro:"",icone:"assignment_turned_in",rotulo:e.codigoDocumento}})],1)]),o("q-card-title",{staticClass:"q-pa-xs "},[o("div",{staticClass:"q-subheading"},[t._v(t._s(e.nomeCliente))]),o("span",{staticClass:"q-caption",attrs:{slot:"subtitle"},slot:"subtitle"},[t._v("\n                    "+t._s(e.descricao)+"\n                  ")])]),o("q-card-main",{staticClass:"row q-pa-xs q-pb-none q-mt-md"},[o("div",{staticClass:"col-11"},[e.descricaoEmpresa?o("div",{staticStyle:{background:"rgb(236, 239, 241)","border-radius":"50px","text-align":"center",display:"inline-block",width:"22px",height:"22px","line-height":"22px","margin-right":"3px"}},[o("q-icon",{attrs:{name:"business",color:"grey-7",size:"14px"}}),o("q-tooltip",[t._v("\n                        "+t._s(e.descricaoEmpresa)+"\n                      ")])],1):t._e(),e.nomeFornecedor?o("div",{staticStyle:{background:"rgb(236, 239, 241)","border-radius":"50px","text-align":"center",display:"inline-block",width:"22px",height:"22px","line-height":"22px","margin-right":"3px"}},[o("q-icon",{attrs:{name:"business",color:"grey-7",size:"14px"}})],1):t._e(),e.nomeFornecedor?o("div",{staticClass:"q-caption",staticStyle:{display:"inline-block","margin-right":"6px"}},[t._v(t._s(e.nomeFornecedor))]):t._e(),o("div",{staticStyle:{background:"rgb(236, 239, 241)","border-radius":"50px","text-align":"center",display:"inline-block",width:"22px",height:"22px","line-height":"22px","margin-right":"3px"}},[o("q-icon",{attrs:{name:"person",color:"grey-7",size:"14px"}})],1),o("div",{staticClass:"q-caption",staticStyle:{display:"inline-block","margin-right":"6px"}},[t._v(t._s(e.nomeVendedor)+"\n                    ")]),o("div",{staticStyle:{background:"rgb(236, 239, 241)","border-radius":"50px","text-align":"center",display:"inline-block",width:"22px",height:"22px","line-height":"22px","margin-right":"3px"}},[o("q-icon",{attrs:{name:"calendar_today",color:"grey-7",size:"14px"}})],1),o("div",{staticClass:"q-caption",staticStyle:{display:"inline-block"}},[t._v("\n                      "+t._s(t._f("data")(e.dataHoraFinalizado>new Date("1970-01-01T00:00:00.000Z")?e.dataHoraFinalizado:e.dataHoraPrevisto))+"\n                      "),o("q-tooltip",[t._v("\n                        "+t._s(e.dataHoraFinalizado>new Date("1970-01-01T00:00:00.000Z")?"Finalizado em":"Previsto para")+"\n                      ")])],1)]),o("div",{staticClass:"col-1 self-end"},[o("q-icon",{staticStyle:{color:"grey",float:"right","text-align":"right","font-size":"1.2rem",cursor:"pointer"},attrs:{name:"more_vert",onMouseOver:"this.style.color='black'",onMouseOut:"this.style.color='grey'"}},[o("q-popover",[o("q-list",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{link:"",separator:""}},[o("q-item",{nativeOn:{click:function(o){t.exibirProdutosServicos(e.codigoDocumento)}}},[o("q-item-side",{attrs:{icon:"view_list"}}),o("q-item-main",{attrs:{label:"Produtos e Serviços"}})],1),o("q-item",{nativeOn:{click:function(o){t.exibirHistorico(e.codigoDocumento)}}},[o("q-item-side",{attrs:{icon:"history"}}),o("q-item-main",{attrs:{label:"Histórico do Status"}})],1),o("q-item",{nativeOn:{click:function(o){t.irParaAtendimento(e.codigoContato)}}},[o("q-item-side",{attrs:{icon:"launch"}}),o("q-item-main",{attrs:{label:"Ir para o Atendimento"}})],1)],1)],1)],1)],1)])],1)}))],1)])})),o("custom-trocar-status",{attrs:{dados:t.trocarStatusDados},on:{confirmar:t.eventoConfirmarTroca,cancelar:t.eventoCancelarTroca},model:{value:t.trocarStatusModal,callback:function(e){t.trocarStatusModal=e},expression:"trocarStatusModal"}}),t.modalHistoricoStatus.activated?o("modal-historico-status",{attrs:{dados:t.modalHistoricoStatus}}):t._e(),t.modalProdutosServicos.activated?o("modal-produtos-servicos",{attrs:{dados:t.modalProdutosServicos}}):t._e()],1)],1)],1)},r=[];a._withStripped=!0;o("6762"),o("2fdb"),o("c5f6"),o("28a5");var s=o("3156"),n=o.n(s),i=(o("cadf"),o("ac4d"),o("8a81"),o("ac6a"),o("96cf"),o("c973")),c=o.n(i),l=o("01f0"),d=o("88db"),u=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-modal",{attrs:{value:t.value},on:{input:t.eventoInput}},[o("q-modal-layout",[o("q-toolbar",{attrs:{slot:"header"},slot:"header"},[o("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{dense:"",flat:"",icon:"arrow_back",round:""}}),o("q-toolbar-title",[t._v("Trocar status do Custom")])],1),o("form",{on:{submit:function(e){return e.preventDefault(),t.eventoConfirmar(e)}}},[o("div",{staticClass:"layout-padding"},[o("div",{staticClass:"row gutter-x-sm"},[o("campo",{staticClass:"col-12",attrs:{somenteLeitura:"",rotulo:"Cliente"},model:{value:t.dados.nomeCliente,callback:function(e){t.$set(t.dados,"nomeCliente",e)},expression:"dados.nomeCliente"}})],1),o("div",{staticClass:"row gutter-x-sm"},[o("campo",{staticClass:"col-12",attrs:{somenteLeitura:"",rotulo:"De"},model:{value:t.dados.statusAtual,callback:function(e){t.$set(t.dados,"statusAtual",e)},expression:"dados.statusAtual"}})],1),o("div",{staticClass:"row gutter-x-sm"},[o("campo",{staticClass:"col-12",attrs:{somenteLeitura:"",rotulo:"Para"},model:{value:t.dados.statusNovo,callback:function(e){t.$set(t.dados,"statusNovo",e)},expression:"dados.statusNovo"}})],1),o("div",{staticClass:"row gutter-x-sm"},[o("campo",{staticClass:"col-12",attrs:{maxlength:"50",rotulo:"Observação"},model:{value:t.dados.observacao,callback:function(e){t.$set(t.dados,"observacao","string"===typeof e?e.trim():e)},expression:"dados.observacao"}})],1),o("div",{staticClass:"row gutter-x-sm"},[o("campo",{staticClass:"col-12",attrs:{rotulo:"Gerar pedido de compra",tipo:"logico"},model:{value:t.dados.gerarPedido,callback:function(e){t.$set(t.dados,"gerarPedido",e)},expression:"dados.gerarPedido"}})],1),o("div",{staticClass:"row gutter-x-sm"},[o("campo",{staticClass:"col-12",attrs:{value:t.dados.nomeFornecedor,somenteLeitura:"",before:[{icon:"search",handler:function(){return t.modalFornecedor=!0}}],rotulo:"Fornecedor",erro:t.fornecedorErro,erroRotulo:"Seleção de fornecedor obrigatória"},on:{click:function(e){t.modalFornecedor=!0}}})],1)]),o("q-toolbar",{attrs:{slot:"footer",color:"light"},slot:"footer"},[o("q-toolbar-title",[o("div",{staticClass:"row justify-end"},[o("q-btn",{attrs:{flat:"",color:"primary",label:"Cancelar"},on:{click:t.eventoCancelar}}),o("q-btn",{attrs:{flat:"",color:"primary",type:"submit",label:"Trocar"}})],1)])],1)],1)],1),o("prompt-contato-novo",{attrs:{filtro:{ativo:!0}},on:{selecionar:t.selecionarFornecedor},model:{value:t.modalFornecedor,callback:function(e){t.modalFornecedor=e},expression:"modalFornecedor"}})],1)},m=[];u._withStripped=!0;var p=o("41ff"),v=o("ed08"),g={components:{Campo:d["a"],PromptContatoNovo:p["a"]},data:function(){return{confirmado:!1,descricaoFornecedor:"",fornecedorErro:!1,modalFornecedor:!1}},methods:{eventoConfirmar:function(){v["gconsole"].log("CustomTrocarStatus","eventoConfirmar",this.dados),this.dados.codigoFornecedor?(this.confirmado=!0,this.eventoInput(!1),this.$emit("confirmar",this.dados)):this.fornecedorErro=!0},eventoCancelar:function(){v["gconsole"].log("CustomTrocarStatus","eventoCancelar",this.dados),this.confirmado=!1,this.eventoInput(!1)},eventoInput:function(t){this.$emit("input",t)},selecionarFornecedor:function(){var t=c()(regeneratorRuntime.mark(function t(e,o){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:v["gconsole"].log("CustomTrocarStatus","selecionarFornecedor",e,o),this.dados.codigoFornecedor=o.codigoContato,this.dados.nomeFornecedor=o.nome,this.fornecedorErro=!1;case 4:case"end":return t.stop()}},t,this)}));return function(e,o){return t.apply(this,arguments)}}()},props:{value:{required:!0,type:Boolean},dados:{required:!0,type:Object}},watch:{value:function(t){t?(this.confirmado=!1,this.fornecedorErro=!1):this.confirmado||this.$emit("cancelar",this.dados)}}},h=g,f=o("2877"),b=Object(f["a"])(h,u,m,!1,null,null,null);b.options.__file="CustomTrocarStatus.vue";var q=b.exports,C=o("e970"),x=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-modal",{model:{value:t.dados.show,callback:function(e){t.$set(t.dados,"show",e)},expression:"dados.show"}},[o("q-modal-layout",[o("q-toolbar",{staticClass:"q-pa-sm",attrs:{slot:"header"},slot:"header"},[o("q-toolbar-title",[t._v("\n        "+t._s(t.dados.custom.descricao)+"\n        ")]),o("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{dense:"",flat:"",icon:"close",round:""}})],1),o("q-list",{staticClass:"q-pl-sm q-pr-sm q-pt-lg q-pb-lg",attrs:{"no-border":"",dense:""}},[t._l(t.dados.produtos,function(e,a){return[a?o("q-item-separator",{key:a}):t._e(),o("q-item",{key:e.codigoDocumentoItem,attrs:{multiline:""}},[o("q-item-side",[o("avatar",{attrs:{imagem:e.imagem,rotulo:e.descricaoItem}})],1),o("q-item-main",[o("q-item-tile",{attrs:{label:""}},[o("span",{staticClass:"q-body-2"},[t._v(t._s(e.descricaoItem))])]),e.quantidade?o("q-item-tile",{staticClass:"q-mt-sm",attrs:{sublabel:""}},[t._v("\n              Quantidade:\n              "+t._s(e.quantidade)+"\n            ")]):t._e(),e.referencia?o("q-item-tile",{staticClass:"q-mt-sm",attrs:{sublabel:""}},[t._v("\n              Ref:\n              "+t._s(e.referencia)+"\n            ")]):t._e(),e.observacao?o("q-item-tile",{staticClass:"q-mt-sm",attrs:{sublabel:""}},[t._v("\n              Obs:\n              "+t._s(e.observacao)+"\n            ")]):t._e()],1),e.codigoItem?o("q-item-side",{attrs:{right:""}},[o("q-item-tile",{attrs:{stamp:""}},[t._v("#"+t._s(e.codigoItem))])],1):t._e()],1)]})],2),t.dados.custom.observacao?o("q-card",{staticClass:"q-pa-sm"},[o("q-card-main",{staticClass:"q-body-1"},[o("dl",[o("dt",[t._v("Observação")]),o("dd",[t._v(t._s(t.dados.custom.observacao))])])])],1):t._e()],1)],1)},w=[];x._withStripped=!0;var y=o("df3a"),_={components:{Avatar:y["a"]},props:{dados:{type:Object,required:!0}}},S=_,k=(o("53d5"),Object(f["a"])(S,x,w,!1,null,"85d3d322",null));k.options.__file="ModalProdutosServicos.vue";var F=k.exports,D=o("310e"),P=o.n(D),O=o("3e8a"),H=o("8149"),A=o("2ef0"),z=o("a0fd"),E={components:{Badge:z["a"],BarraTopo:l["a"],Campo:d["a"],CustomTrocarStatus:q,ModalHistoricoStatus:C["a"],ModalProdutosServicos:F,draggable:P.a},data:function(){return{showfilters:!0,empresaOpcoes:[],empresaSelecionada:null,entregueInicio:new Date(new Date(Object(v["dataAtual"])()).toDateString()),entregueFim:new Date(new Date(Object(v["dataAtual"])()).toDateString()),fraseFiltro:"",listas:{Processando:[],Entregue:[]},trocarStatusDados:{},trocarStatusModal:!1,periodoOpcoes:[{label:"Hoje",value:0},{label:"Uma semana",value:7},{label:"Um mês",value:30}],prazoSelecionado:null,prazoOpcoes:[{label:"Em dia",value:"bordaVerdeCustom"},{label:"Entrega para esta semana",value:"bordaAmarelaCustom"},{label:"Entrega atrasada",value:"bordaVermelhaCustom"}],modalHistoricoStatus:{},modalProdutosServicos:{}}},methods:{eventoEnd:function(){var t=c()(regeneratorRuntime.mark(function t(){var e,o,a,r,s,n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:t.t0=regeneratorRuntime.keys(this.listas);case 1:if((t.t1=t.t0()).done){t.next=34;break}e=t.t1.value,o=!0,a=!1,r=void 0,t.prev=6,s=this.listas[e][Symbol.iterator]();case 8:if(o=(n=s.next()).done){t.next=18;break}if(i=n.value,i.status===e){t.next=15;break}return v["gconsole"].log("AdmCustom","eventoEnd De:",i.status,"Para:",e,"codigo:",i.codigoDocumento),this.trocarStatusDados={codigoContatoVendedor:i.codigoContatoVendedor,codigoDocumento:i.codigoDocumento,codigoFornecedor:i.codigoFornecedor,codigoFornecedorOriginal:i.codigoFornecedor,codigoUsuario:null,gerarPedido:!1,nomeCliente:i.nomeCliente,nomeFornecedor:i.nomeFornecedor,observacao:"",statusAtual:i.status,statusNovo:e},this.trocarStatusModal=!0,t.abrupt("return");case 15:o=!0,t.next=8;break;case 18:t.next=24;break;case 20:t.prev=20,t.t2=t["catch"](6),a=!0,r=t.t2;case 24:t.prev=24,t.prev=25,o||null==s.return||s.return();case 27:if(t.prev=27,!a){t.next=30;break}throw r;case 30:return t.finish(27);case 31:return t.finish(24);case 32:t.next=1;break;case 34:case"end":return t.stop()}},t,this,[[6,20,24,32],[25,,27,31]])}));return function(){return t.apply(this,arguments)}}(),eventoConfirmarTroca:function(){var t=c()(regeneratorRuntime.mark(function t(e){var o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return v["gconsole"].log("AdmCustom","eventoConfirmaTroca",n()({},e)),this.$q.loading.show(),t.prev=2,t.next=5,H["a"].usuario.leOnline(H["a"].usuario.logado.id);case 5:if(t.t1=t.sent,t.t1){t.next=8;break}t.t1=[];case 8:if(t.t0=t.t1[0],t.t0){t.next=11;break}t.t0={};case 11:return o=t.t0,e.codigoUsuario=o.codigoUsuario,t.next=15,H["a"].custom.trocaStatusOnline(e);case 15:if(this.$q.notifyPositive("Status trocado com sucesso"),e.codigoFornecedor===e.codigoFornecedorOriginal){t.next=19;break}return t.next=19,H["a"].custom.gravaFornecedorOnline(e);case 19:if(!e.gerarPedido){t.next=23;break}return t.next=22,H["a"].custom.geraPedidoOnline(e);case 22:this.$q.notifyPositive("Pedido de compra gerado");case 23:this.atualiza(),t.next=29;break;case 26:t.prev=26,t.t2=t["catch"](2),this.$q.notifyError("Erro na troca de status",t.t2);case 29:return t.prev=29,this.$q.loading.hide(),t.finish(29);case 32:case"end":return t.stop()}},t,this,[[2,26,29,32]])}));return function(e){return t.apply(this,arguments)}}(),eventoCancelarTroca:function(t){v["gconsole"].log("AdmCustom","eventoCancelarTroca",t),this.atualiza()},empresaOpcoesCarregar:function(){var t=c()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return v["gconsole"].log("AdmCustom","empresaOpcoesCarregar()"),t.next=3,H["a"].empresa.leOnline();case 3:t.t0=function(t){return{label:t.nome,value:t.codigoContato}},this.empresaOpcoes=t.sent.map(t.t0);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),filtraDebounce:function(){Object(A["debounce"])(this.refazFiltro,700)()},refazFiltro:function(){v["gconsole"].log("AdmCustom","refazFiltro()",this.fraseFiltro,this.empresaSelecionada);var t=Object(v["removerAcentos"])(this.fraseFiltro.toUpperCase()).split(" ").filter(function(t){return""!==t});for(var e in this.listas){var o=!0,a=!1,r=void 0;try{for(var s,n=this.listas[e][Symbol.iterator]();!(o=(s=n.next()).done);o=!0){var i=s.value,c=Object(v["removerAcentos"])(i.id.toUpperCase()+i.nomeCliente.toUpperCase()+i.nomeVendedor.toUpperCase()+i.nomeFornecedor.toUpperCase()+" "+String(i.numeroVenda)+"  "+String(i.numeroCompra)+"  "+String(i.numeroCustom)+" "),l=!0,d=!0,u=!1,m=void 0;try{for(var p,g=t[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){var h=p.value;l=isNaN(Number(h))?l&&c.includes(h):l&&c.includes(" "+h+" ")}}catch(t){u=!0,m=t}finally{try{d||null==g.return||g.return()}finally{if(u)throw m}}this.empresaSelecionada&&(l=l&&this.empresaSelecionada===i.codigoEmpresa),i.mostra=l}}catch(t){a=!0,r=t}finally{try{o||null==n.return||n.return()}finally{if(a)throw r}}}},irParaAtendimento:function(){var t=c()(regeneratorRuntime.mark(function t(e){var o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(O["a"])().contato.where({codigoContato:e}).first();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:o=t.t0,o.id&&this.$router.push({name:"Atendimento",params:{id:o.id}});case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),exibirProdutosServicos:function(){var t=c()(regeneratorRuntime.mark(function t(e){var o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.$q.loading.show({message:"Processando"}),t.next=4,H["a"].custom.leProdutosServicos(e);case 4:return o=t.sent,this.modalProdutosServicos.activated||(this.modalProdutosServicos={activated:!0,custom:{},produtos:[]}),t.next=8,this.$nextTick();case 8:this.modalProdutosServicos=n()({},this.modalProdutosServicos,{show:!0},o),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),this.$q.notify({type:"negative",message:t.t0.message});case 14:return t.prev=14,this.$q.loading.hide(),t.finish(14);case 17:case"end":return t.stop()}},t,this,[[0,11,14,17]])}));return function(e){return t.apply(this,arguments)}}(),exibirHistorico:function(){var t=c()(regeneratorRuntime.mark(function t(e){var o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.$q.loading.show({message:"Processando"}),t.next=4,H["a"].documentoStatus.leHistoricoOnline(e);case 4:if(o=t.sent,o.status.length){t.next=8;break}return this.$q.notify({type:"warning",message:"Não há histórico disponível."}),t.abrupt("return");case 8:return this.modalHistoricoStatus.activated||(this.modalHistoricoStatus={activated:!0}),t.next=11,this.$nextTick();case 11:this.modalHistoricoStatus=n()({},this.modalHistoricoStatus,{show:!0},o),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),this.$q.notify({type:"negative",message:t.t0.message});case 17:return t.prev=17,this.$q.loading.hide(),t.finish(17);case 20:case"end":return t.stop()}},t,this,[[0,14,17,20]])}));return function(e){return t.apply(this,arguments)}}(),atualiza:function(){var t=c()(regeneratorRuntime.mark(function t(){var e,o,a,r,s,n,i,c,l,d,u,m,p,g,h,f,b,q,C,x,w,y,_,S,k;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,H["a"].custom.leOnline({entregueInicio:this.entregueInicio,entregueFim:this.entregueFim});case 3:return e=t.sent,Object(v["verificarAlerta"])(!e||!e.length,"Não há customs"),t.next=7,H["a"].configuracoes.le({nome:"vendas.custom.status"});case 7:for(o=t.sent,o=o.filter(function(t){return!["Processando","Entregue"].includes(t.texto)}),a={Processando:[]},r=!0,s=!1,n=void 0,t.prev=13,i=Object(A["orderBy"])(o,"valor","asc").map(function(t){return t.texto})[Symbol.iterator]();!(r=(c=i.next()).done);r=!0)l=c.value,a[l]=[];t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](13),s=!0,n=t.t0;case 21:t.prev=21,t.prev=22,r||null==i.return||i.return();case 24:if(t.prev=24,!s){t.next=27;break}throw n;case 27:return t.finish(24);case 28:return t.finish(21);case 29:for(a["Entregue"]=[],d=!0,u=!1,m=void 0,t.prev=33,p=e[Symbol.iterator]();!(d=(g=p.next()).done);d=!0)h=g.value,f="bordaVerdeCustom",b="",q="Normal","Entregue"===h.status?h.dataHoraPrevisto&&h.dataHoraFinalizado&&(C=new Date(new Date(h.dataHoraPrevisto).toDateString()),x=new Date(new Date(h.dataHoraFinalizado).toDateString()),w=(x-C)/864e5,f=w>=0?"bordaVermelhaCustom":w>-7?"bordaAmarelaCustom":"bordaVerdeCustom",b=w>=0?"negative":w>-7?"warning":"",q=w>=0?"Atrasado":w>-7?"Atenção":"Normal"):h.dataHoraPrevisto&&(y=new Date(new Date(h.dataHoraPrevisto).toDateString()),_=new Date((new Date).toDateString()),S=(_-y)/864e5,f=S>=0?"bordaVermelhaCustom":S>-7?"bordaAmarelaCustom":"bordaVerdeCustom",b=S>=0?"negative":S>-7?"warning":"",q=S>=0?"Atrasado":S>-7?"Atenção":"Normal"),k={id:h.id,codigoCompra:h.codigoCompra||"-",codigoContatoVendedor:h.codigoContatoVendedor,codigoDocumento:h.codigoDocumento?String(h.codigoDocumento):"-",codigoContato:h.codigoContato,codigoEmpresa:h.codigoEmpresa,codigoFornecedor:h.codigoFornecedor,descricao:h.descricao,descricaoEmpresa:h.descricaoEmpresa,corBorda:f,corLabel:b,txtLabel:q,dataHoraEmissao:h.dataHoraEmissao?new Date(h.dataHoraEmissao):"",dataHoraFinalizado:h.dataHoraFinalizado?new Date(h.dataHoraFinalizado):"",dataHoraRetorno:h.dataHoraRetorno?new Date(h.dataHoraRetorno):"",dataHoraPrevisto:h.dataHoraPrevisto?new Date(h.dataHoraPrevisto):"",mostra:!0,nomeCliente:h.nomeCliente||"-",nomeFornecedor:h.nomeFornecedor||"",nomeVendedor:h.nomeVendedor||"-",numeroVenda:h.numeroVenda?String(h.numeroVenda):"-",numeroCompra:h.numeroCompra?String(h.numeroCompra):"-",numeroCustom:h.numeroCustom||"-",status:h.status},a[h.status]&&a[h.status].push(k);t.next=41;break;case 37:t.prev=37,t.t1=t["catch"](33),u=!0,m=t.t1;case 41:t.prev=41,t.prev=42,d||null==p.return||p.return();case 44:if(t.prev=44,!u){t.next=47;break}throw m;case 47:return t.finish(44);case 48:return t.finish(41);case 49:this.listas=a,this.refazFiltro(),t.next=56;break;case 53:t.prev=53,t.t2=t["catch"](0),this.$q.notifyError("Erro na consulta online de customs",t.t2);case 56:case"end":return t.stop()}},t,this,[[0,53],[13,17,21,29],[22,,24,28],[33,37,41,49],[42,,44,48]])}));return function(){return t.apply(this,arguments)}}()},watch:{entregueInicio:function(){v["gconsole"].log("AdmCustom","entregueInicio"),this.atualiza()},entregueFim:function(){v["gconsole"].log("AdmCustom","entregueFim"),this.atualiza()}},created:function(){v["gconsole"].log("AdmCustom","created()"),this.atualiza()}},$=E,R=(o("0cec"),Object(f["a"])($,a,r,!1,null,"502e5c98",null));R.options.__file="AdmCustom.vue";e["default"]=R.exports},e1fb:function(t,e,o){},e970:function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-modal",{model:{value:t.dados.show,callback:function(e){t.$set(t.dados,"show",e)},expression:"dados.show"}},[o("q-modal-layout",[o("q-toolbar",{attrs:{slot:"header"},slot:"header"},[o("q-toolbar-title",[t._v("Histórico do Status")]),o("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{dense:"",flat:"",icon:"close",round:""}})],1),o("q-list",{staticClass:"q-pl-sm q-pr-sm q-pt-lg q-pb-lg",attrs:{"no-border":"",dense:""}},[t._l(t.dados.status,function(e,a){return[a?o("q-item-separator",{key:a}):t._e(),o("q-item",{key:e.codigoDocumentoStatus,attrs:{multiline:""}},[o("q-item-side",[o("avatar",{attrs:{imagem:(t.dados.contatos[e.codigoUsuarioAlterou]||{}).imagem,rotulo:(t.dados.contatos[e.codigoUsuarioAlterou]||{}).nome}})],1),o("q-item-main",[o("q-item-tile",{attrs:{label:""}},[o("span",{staticClass:"q-body-1"},[t._v("De:")]),t._v(" "),o("span",{staticClass:"q-body-2"},[t._v(t._s(e.statusOriginal))])]),o("q-item-tile",{attrs:{label:""}},[o("span",{staticClass:"q-body-1"},[t._v("Para:")]),t._v(" "),o("span",{staticClass:"q-body-2"},[t._v(t._s(e.statusFinalizado))])]),o("q-item-tile",{staticClass:"q-mt-sm",attrs:{sublabel:""}},[o("strong",{staticClass:"q-body-1"},[t._v(t._s((t.dados.contatos[e.codigoUsuarioAlterou]||{}).nome))])]),e.observacao?o("q-item-tile",{staticClass:"q-mt-sm",attrs:{sublabel:""}},[t._v("\n              "+t._s(e.observacao)+"\n            ")]):t._e()],1),o("q-item-side",{attrs:{right:""}},[o("q-item-tile",{attrs:{stamp:""}},[t._v(t._s(t._f("dataHora")(e.dataHoraEmissao)))])],1)],1)]})],2)],1)],1)},r=[];a._withStripped=!0;var s=o("df3a"),n={components:{Avatar:s["a"]},props:{dados:{type:Object,required:!0}}},i=n,c=o("2877"),l=Object(c["a"])(i,a,r,!1,null,null,null);l.options.__file="ModalHistoricoStatus.vue";e["a"]=l.exports}}]);