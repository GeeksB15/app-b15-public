(self.webpackChunkb15=self.webpackChunkb15||[]).push([[987],{23166:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>be});var a=o(34182);const i=(0,a.createVNode)("span",{class:"text-subtitle1 text-weight-bold hideonmobile"},"Vendas",-1),d=(0,a.createTextVNode)("Criar"),r=(0,a.createTextVNode)("Filtro Avançado"),l={class:"q-pa-md"},n=(0,a.createVNode)("span",{class:"col-12 text-body1 text-dark"},"Período de Emissão",-1),s=(0,a.createVNode)("span",{class:"col-12 text-body1 text-dark"},"Período de Finalização",-1),c={class:"row q-col-gutter-x-sm q-pa-md"},m={class:"col-auto q-pl-none items-center"},u={class:"col"},p={class:"col-12"},f=(0,a.createTextVNode)(" Finalizado "),h=(0,a.createTextVNode)(" Emissão "),V=(0,a.createTextVNode)(" Vendedor(a) "),v=(0,a.createTextVNode)("Valor total"),C=(0,a.createTextVNode)("NFe de Saída/Venda"),g=(0,a.createTextVNode)("NFe de Entrada/Devolução"),x=(0,a.createTextVNode)("NFe de Remessa"),N=(0,a.createTextVNode)("Migrar para nova fatura"),w=(0,a.createTextVNode)("Histórico do Status"),b={class:"col-12 col-md-4"},k=(0,a.createTextVNode)(" OS "),y=(0,a.createTextVNode)("OS "),_={class:"col-12 col-md-4"},D={class:"q-px-sm"},I={class:"q-mt-sm"},S={style:{display:"block"}},q=(0,a.createVNode)("br",null,null,-1),F={class:"round-borders"},B={class:"col-12 col-md-4"},T={class:"q-px-sm"},E=(0,a.createTextVNode)(" Faturamento "),z={class:"q-mt-sm"},Z={style:{display:"block"}},M={class:"q-px-sm text-right"},A={class:"q-mt-none text-right"},U=(0,a.createVNode)("small",{class:"q-mr-xs"},"Desconto",-1),H={class:"text-subtitle1"};var $=o(15358),Q=o(75173),O=o(25111),P=o(79815),L=o(30525),R=o(25592),G=o(96986),W=o(88603);const j={components:{Avatar:$.Z,Badge:Q.Z,DocumentosFiscais:O.Z,VendaModal:L.Z,ModalHistoricoStatus:P.Z},computed:{config:()=>R.db.configuracoes.valores,podeMigrarFatura(){return!["Aguardando Estoque","Aguardando Financeiro","Aguardando Aprovação","Aguardando Pagamento","Cancelado","Não Aprovado","Orçamento","Faturado"].includes(this.dados.venda.status)}},data:()=>({dbUsuario:R.db.usuario,dados:{venda:{}},contatos:{},faturasAbertas:[],detalhesVisivel:!1,visibilidade:{botao:{editar:!1,remover:!1}},modalDevolucaoGarantia:{visivel:!1,item:{},orcamento:{}},sistemaPai:"",configImpressaoOrcamento:[],configImpressaoEnvelope:[]}),emits:["executar"],methods:{irParaAtendimentoFatura(e){this.$router.push({name:"AtendimentoFatura",params:{id:e}})},async migrarFatura(e){try{await this.$q.dialog({message:"Esta ação irá migrar esta venda para outra fatura.",noRefocus:!0,preventClose:!0,title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0}})}catch(e){return}e||(e=R.db.fatura.criar(this.dados.venda),await R.db.fatura.grava({fatura:e})),e.id?(await R.db.venda.grava({venda:{id:this.dados.venda.id,idFatura:e.id},vendaOriginal:this.dados.venda}),localStorage.setItem("idFatura",e.id),this.dados.venda.idContato&&(this.$emit("executar","atualizar"),this.irParaAtendimentoFatura(this.dados.venda.idContato))):this.$q.notify("Não foi possível realizar a operação")},alternarDetalhes(){this.detalhesVisivel=!this.detalhesVisivel},async atualizar(){const e=await R.db.venda.leCompleto(this.id);if(e.carrinho.sort(((e,t)=>new Date(e.dataHoraEmissao)<new Date(t.dataHoraEmissao)?-1:1)),e.oss.sort(((e,t)=>new Date(e.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1)),e.customs.sort(((e,t)=>new Date(e.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1)),(e.venda||{}).idContato&&(e.venda||{}).idEmpresa){let t=[];t=await R.db.fatura.obterAbertas(e.venda.idContato,e.venda.idEmpresa),this.faturasAbertas=t.sort(((e,t)=>!e.numero||e.numero<t.numero?-1:1))}const t={};if(e.venda.idContato){const o=e.venda.idContato;t[o]||(t[o]=await R.db.contato.le({id:o}))}if(e.venda.idContatoVendedor){const o=e.venda.idContatoVendedor;t[o]||(t[o]=await R.db.contato.le({id:o}))}this.configuraImpressaoEnvelope(e.venda.idEmpresa),this.configuraImpressaoOrcamento(e.venda.idEmpresa),this.contatos=t,this.dados=e,await this.$nextTick(),e.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:e.venda.id}),localStorage.removeItem("idVenda"))},async configuraImpressaoEnvelope(e){const t=await R.db.configuracoes.porNome("impressao.envelope",e);this.configImpressaoEnvelope=[...t.length?t.map((e=>({texto:"Imprimir Envelope",...e}))):[{valor:"envelope",texto:"Imprimir Envelope"},{valor:"envelopeMini",texto:"Imprimir Envelope Mini"}]]},async configuraImpressaoOrcamento(e){const t=await R.db.configuracoes.porNome("impressao.venda",e);this.configImpressaoOrcamento=[...t.length?t.map((e=>({texto:"Imprimir Orçamento",...e}))):[{valor:"invoice",texto:"Orçamento/Venda (Invoice)"},"optisoul"===this.sistemaPai?{valor:"orcamento",texto:"Orçamento (Antigo)"}:{}]]},copiarUid(){const e=this.$refs.uid;e.type="text";try{e.select(),document.execCommand("copy"),this.$q.notify({message:"UID copiado para a área de transferência.",type:"info"})}catch(e){this.$q.notify("Erro ao copiar.")}e.type="hidden",window.getSelection().removeAllRanges()},descricaoEnvelope(e){let t="";for(const o of this.dados.itensEnvelopes)o.idDocumentoAdicional===e&&o.descricaoItem.trim()&&(t+=o.descricaoItem.trim()+" | ");return t.slice(0,-3)},async devolucaoGarantia(e){let t=await R.db.documento.le({idContato:R.db.contato.selecionado.id,tipo:"Venda",status:"Orçamento"});t=(0,W.orderBy)(t,"dataHoraEmissao","desc"),t.length?this.modalDevolucaoGarantia={visivel:!0,item:e,orcamento:t[0]}:this.$q.notify({message:"Crie um orçamento para inclusão de devolução/garantia.",type:"info"})},editar(){this.$refs.vendaModal.mostrar({id:this.dados.venda.id})},executar(e){switch(e){case"atualizar":this.atualizar();break;case"cancelar":case"finalizar":case"reprovar":this.$emit("executar","atualizar");break;case"retornarOrcamento":this.$emit("executar",e)}},async finalizaDevolucaoGarantia(e,t,o){const a=(0,G.clonar)(e);"devolucao"===t&&(a.operacao="Devolução de Venda"),"garantia"===t&&(a.operacao="Garantia de Venda",a.motivo=o),a.idDocumentoItemVenda=a.id,a.idDocumentoVenda=a.idDocumento,a.id=(0,G.uuid)(),a.idDocumento=this.modalDevolucaoGarantia.orcamento.id,a.status="Orçamento",a.operacaoFator=1,a.codigoCfop=20,a.idCfop=(await R.db.cfop.le({codigoCfop:20}))[0].id,a.dataHoraEmissao=(0,G.dataAtual)(),a.dataHoraFinalizado="",a.subTotal=-1*a.subTotal,a.total=-1*a.total,a.valorItem=-1*a.valorItem,a.descontoSubTotal=0,delete a.codigoCfop,delete a.codigoDocumento,delete a.codigoDocumentoItem,delete a.codigoItem,delete a.codigoPlanoContaDestino,delete a.codigoPlanoContaEstoque,await R.db.documentoItem.grava({atual:a}),this.$q.notify({message:"Item adicionado ao orçamento.",type:"positive"}),localStorage.setItem("idVenda",this.modalDevolucaoGarantia.orcamento.id),this.$emit("executar","atualizar")},async remover(){this.$q.dialog({message:"Esta ação irá remover esta venda da fatura",title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk((async()=>{let e=(0,G.clonar)(this.dados.venda);this.dados.venda.idFatura="",await R.db.venda.grava({venda:this.dados.venda,vendaOriginal:e}),this.$emit("executar","remover")}))}},props:{id:{required:!0,type:String}},watch:{async dados(e){this.visibilidade.botao.editar=!1,this.visibilidade.botao.remover=!1,(await R.db.contatoBusca.filtrar(null,{ativo:!0,empresas:!0},0)).find((t=>t.id===e.venda.idEmpresa))&&(e.venda.idFatura&&this.faturasAbertas.find((t=>t.id===e.venda.idFatura))&&(this.visibilidade.botao.remover=!0),["Cancelado","Não Aprovado"].includes(e.venda.status)||e.venda.idFatura||(this.visibilidade.botao.editar=!0))}},mounted(){this.sistemaPai=(0,G.sistemaPai)(),this.atualizar()}};var J=o(77953),K=o(60880),X=o(31106),Y=o(76106),ee=o(4957),te=o(76210),oe=o(54707),ae=o(25901),ie=o(68900),de=o(48761),re=o(83831),le=o(98586),ne=o(7518),se=o.n(ne);j.render=function(e,t,o,i,d,r){const l=(0,a.resolveComponent)("badge"),n=(0,a.resolveComponent)("q-item-section"),s=(0,a.resolveComponent)("avatar"),c=(0,a.resolveComponent)("q-item-label"),$=(0,a.resolveComponent)("q-badge"),Q=(0,a.resolveComponent)("row"),O=(0,a.resolveComponent)("q-tooltip"),P=(0,a.resolveComponent)("q-btn"),L=(0,a.resolveComponent)("q-icon"),R=(0,a.resolveComponent)("q-item"),G=(0,a.resolveComponent)("q-list"),W=(0,a.resolveComponent)("q-menu"),j=(0,a.resolveComponent)("q-toolbar-title"),J=(0,a.resolveComponent)("documentos-fiscais"),K=(0,a.resolveComponent)("q-separator"),X=(0,a.resolveComponent)("VendaModal"),Y=(0,a.resolveComponent)("modal-historico-status"),ee=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createBlock)(a.Fragment,null,[d.dados.venda.id?((0,a.openBlock)(),(0,a.createBlock)(R,{key:0,id:"VendaCard","manual-focus":"",clickable:"",class:"items-center d-flex q-pa-xs"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{avatar:"",center:"",class:"mw100",onClick:r.editar},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(l,{class:"q-mr-sm",escuro:"",cor:"positive",onClick:r.copiarUid},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" #"+(0,a.toDisplayString)(parseInt(d.dados.venda.numero)||(d.dados.venda.id||"").slice(-6))+" ",1),(0,a.withDirectives)((0,a.createVNode)("input",{type:"hidden","onUpdate:modelValue":t[1]||(t[1]=e=>d.dados.venda.id=e),ref:"uid"},null,512),[[a.vModelText,d.dados.venda.id]])])),_:1},8,["onClick"])])),_:1},8,["onClick"]),(0,a.createVNode)(n,{onClick:r.editar},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(Q,{class:" items-center"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)("div",m,[(0,a.createVNode)(s,{imagem:(d.contatos[d.dados.venda.idContato]||{}).imagem,rotulo:d.dados.venda.descricaoContato,tamanho:"40",style:{float:"left"}},null,8,["imagem","rotulo"])]),(0,a.createVNode)("div",u,[(0,a.createVNode)(c,{class:"text-tertiary text-weight-bold"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(d.dados.venda.descricaoContato),1)])),_:1}),(0,a.createVNode)(Q,{class:"hideondesktop items-center q-my-sm"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)("div",p,[(0,a.createVNode)($,{rounded:"",color:"grey",small:"",class:"q-ma-sm"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(d.dados.venda.status),1)])),_:1})])])),_:1})])])),_:1})])),_:1},8,["onClick"]),(0,a.createVNode)(n,{onClick:r.editar},{default:(0,a.withCtx)((()=>[d.dados.venda.dataHoraFinalizado?((0,a.openBlock)(),(0,a.createBlock)(a.Fragment,{key:0},[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.data(d.dados.venda.dataHoraFinalizado))+" ",1),(0,a.createVNode)(O,null,{default:(0,a.withCtx)((()=>[f])),_:1})],64)):((0,a.openBlock)(),(0,a.createBlock)(a.Fragment,{key:1},[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.data(d.dados.venda.dataHoraEmissao))+" ",1),(0,a.createVNode)(O,null,{default:(0,a.withCtx)((()=>[h])),_:1})],64))])),_:1},8,["onClick"]),(0,a.createVNode)(n,{onClick:r.editar},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)((d.contatos[d.dados.venda.idContatoVendedor]||{}).apelido)+" ",1),(0,a.createVNode)(O,null,{default:(0,a.withCtx)((()=>[V])),_:1})])),_:1},8,["onClick"]),(0,a.createVNode)(n,{avatar:"",class:"mw240 "},{default:(0,a.withCtx)((()=>[(0,a.createVNode)($,{color:"tertiary"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(d.dados.venda.status),1)])),_:1})])),_:1}),(0,a.createVNode)(n,{onClick:r.editar},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{caption:"",class:"text-right text-tertiary text-weight-bold"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.numero(d.dados.venda.totalDocumento,2))+" ",1),(0,a.createVNode)(O,null,{default:(0,a.withCtx)((()=>[v])),_:1})])),_:1})])),_:1},8,["onClick"]),(0,a.createVNode)(n,{side:"",top:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(Q,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{rounded:"",dense:"",flat:"",icon:d.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",size:"md",unelevated:"",class:" q-mx-xs",color:"tertiary",style:{float:"right"},onClick:r.alternarDetalhes},null,8,["icon","onClick"]),(0,a.createVNode)(P,{rounded:"",dense:"",flat:"",icon:"clear",color:"tertiary",unelevated:"",class:" q-mx-xs",size:"md",onClick:r.remover,style:{float:"right"}},null,8,["onClick"]),(0,a.createVNode)(P,{rounded:"",dense:"",flat:"",icon:"edit",color:"tertiary",unelevated:"",class:" q-mx-xs",size:"md",onClick:r.editar,style:{float:"right"}},null,8,["onClick"]),(0,a.createVNode)(P,{rounded:"",dense:"",flat:"",icon:"print",color:"tertiary",unelevated:"",class:" q-mx-xs",size:"md",style:{float:"right"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(W,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(G,{link:"",separator:""},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(d.configImpressaoOrcamento.filter((e=>e.valor)),(t=>((0,a.openBlock)(),(0,a.createBlock)(R,{clickable:"",key:t.valor,onClick:o=>e.$imprimir(t.valor,{id:(d.dados.venda||{}).id||"0",Oculto:"0"})},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(L,{name:"print"})])),_:1}),(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.texto),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),"optisoul"===d.sistemaPai?((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,{key:0},(0,a.renderList)(d.configImpressaoEnvelope,(t=>((0,a.openBlock)(),(0,a.createBlock)(R,{clickable:"",key:t.valor,onClick:o=>e.$imprimir(t.valor,(d.dados.venda||{}).id||"0")},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(L,{name:"print"})])),_:1}),(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.texto),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1})])),_:1}),(0,a.createVNode)(P,{rounded:"",dense:"",flat:"",icon:"more_vert",color:"tertiary",unelevated:"",class:" q-mx-xs",size:"md",style:{float:"right"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(W,null,{default:(0,a.withCtx)((()=>[(0,a.withDirectives)((0,a.createVNode)(G,{link:"",separator:""},{default:(0,a.withCtx)((()=>[e.$utils.mapearStatus(d.dados.venda).permiteNota?((0,a.openBlock)(),(0,a.createBlock)(a.Fragment,{key:0},[(0,a.withDirectives)((0,a.createVNode)(R,{clickable:"",onClick:t[2]||(t[2]=t=>e.emitirNFeV2({idVenda:d.dados.venda.id},1,"Venda"))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(L,{name:"account_balance"})])),_:1}),(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[C])),_:1})])),_:1},512),[[ee]]),(0,a.withDirectives)((0,a.createVNode)(R,{clickable:"",onClick:t[3]||(t[3]=t=>e.emitirNFeV2({idVenda:d.dados.venda.id},0,"Devolução"))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(L,{name:"account_balance"})])),_:1}),(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[g])),_:1})])),_:1},512),[[ee]]),(0,a.withDirectives)((0,a.createVNode)(R,{clickable:"",onClick:t[4]||(t[4]=t=>e.emitirNFeV2({idVenda:d.dados.venda.id},1,"Remessa"))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(L,{name:"account_balance"})])),_:1}),(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[x])),_:1})])),_:1},512),[[ee]])],64)):(0,a.createCommentVNode)("",!0),r.podeMigrarFatura?((0,a.openBlock)(),(0,a.createBlock)(a.Fragment,{key:1},[((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(d.faturasAbertas.filter((e=>e.id!==d.dados.venda.idFatura)),(e=>(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)(R,{key:e.id,onClick:t=>r.migrarFatura(e)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(L,{name:"mdi-folder-move"})])),_:1}),(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)("Migrar para fatura #"+(e.numero||e.id.slice(-6))),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[ee]]))),128)),(0,a.withDirectives)((0,a.createVNode)(R,{onClick:t[5]||(t[5]=e=>r.migrarFatura())},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(L,{name:"mdi-folder-move"})])),_:1}),(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[N])),_:1})])),_:1},512),[[ee]])],64)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(R,{clickable:"",onClick:t[6]||(t[6]=t=>e.$refs.modalHistoricoStatus.mostrar({idDocumento:d.dados.venda.id}))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(L,{name:"history"})])),_:1}),(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[w])),_:1})])),_:1})])),_:1},512),[[ee]])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0),d.detalhesVisivel?((0,a.openBlock)(),(0,a.createBlock)(Q,{key:1,class:"q-col-gutter-md q-pt-md"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)("div",b,[d.detalhesVisivel?((0,a.openBlock)(),(0,a.createBlock)(G,{key:0},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(d.dados.carrinho,(t=>((0,a.openBlock)(),(0,a.createBlock)(R,{class:"fullWidth ",key:t.id},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{avatar:"",class:"w120"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.quantidade)+"x",1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.descricaoItem),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(n,{side:"",top:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.numero(t.total,2)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(d.dados.customs,(t=>((0,a.openBlock)(),(0,a.createBlock)(R,{class:"fullWidth ",key:t.documento.id},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{avatar:"",class:"w120"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.documento.numero)+"x ",1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.documento.descricao),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(n,{side:"",top:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.numero(t.documento.totalDocumento,2)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(d.dados.oss,(t=>((0,a.openBlock)(),(0,a.createBlock)(R,{class:"fullWidth ",key:t.documento.id},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{avatar:"",class:"w120"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>["Orçamento"!==t.documento.status?((0,a.openBlock)(),(0,a.createBlock)(l,{key:0,class:"q-mx-sm",escuro:"",cor:"grey-5",denso:"",round:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.documento.status)+" ",1),(0,a.createVNode)(O,null,{default:(0,a.withCtx)((()=>[k])),_:1})])),_:2},1024)):((0,a.openBlock)(),(0,a.createBlock)(l,{key:1},{default:(0,a.withCtx)((()=>[y])),_:1}))])),_:2},1024)])),_:2},1024),(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.documento.descricao),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(n,{right:"",top:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.numero(t.documento.totalDocumento,2)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(d.dados.envelopes,(t=>((0,a.openBlock)(),(0,a.createBlock)(R,{class:"fullWidth ",key:t.id},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{avatar:"",class:"w120"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(l,{class:"q-mx-sm",escuro:"",cor:"grey-5",denso:"",round:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" #"+(0,a.toDisplayString)(parseInt(t.numero)||(t.id||"").slice(-6))+" ",1),(0,a.createVNode)(O,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.tipo)+" - "+(0,a.toDisplayString)(t.descricaoContato),1)])),_:2},1024)])),_:2},1024),"Orçamento"!==t.status?((0,a.openBlock)(),(0,a.createBlock)(l,{key:0,class:"q-mx-sm",escuro:"",cor:"grey-5",denso:"",round:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.status),1)])),_:2},1024)):(0,a.createCommentVNode)("",!0)])),_:2},1024),(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(r.descricaoEnvelope(t.id)),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(n,{right:"",top:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.numero(t.totalDocumento,2)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)("div",_,[(0,a.createVNode)("div",D,[(0,a.createVNode)(j,{class:"q-mx-none q-mt-sm q-px-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(L,{name:"business"}),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(d.dados.venda.descricaoEmpresa),1)])),_:1}),(0,a.createVNode)("p",I,[(0,a.createVNode)("small",S,[(0,a.createTextVNode)((0,a.toDisplayString)(d.dados.venda.observacao)+" ",1),q,(0,a.createTextVNode)(" "+(0,a.toDisplayString)(d.dados.venda.observacaoInterna),1)])]),(0,a.createVNode)("div",F,[(0,a.createVNode)(J,{idVenda:d.dados.venda.id},null,8,["idVenda"])])])]),(0,a.createVNode)("div",B,[(0,a.createVNode)("div",T,[(0,a.createVNode)(j,{class:"q-mx-none q-mt-sm q-px-none"},{default:(0,a.withCtx)((()=>[E])),_:1}),(0,a.createVNode)("p",z,[(0,a.createVNode)("small",Z,(0,a.toDisplayString)(d.dados.venda.observacaoFaturamento),1)])]),(0,a.createVNode)("div",M,[(0,a.createVNode)("dl",A,[(0,a.createVNode)("dd",null,[U,(0,a.createVNode)("span",H,[(0,a.createVNode)("strong",null,(0,a.toDisplayString)(e.$filters.numero(d.dados.venda.totalDesconto,2)),1)])])])])])])),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(K),(0,a.createVNode)(X,{ref:"vendaModal",onExecutar:r.executar},null,8,["onExecutar"]),(0,a.createVNode)(Y,{ref:"modalHistoricoStatus"},null,512)],64)};const ce=j;se()(j,"components",{QItem:J.Z,QItemSection:K.Z,QItemLabel:X.Z,QBadge:Y.Z,QTooltip:ee.Z,QBtn:te.Z,QMenu:oe.Z,QList:ae.Z,QIcon:ie.Z,QToolbarTitle:de.Z,QSeparator:re.Z}),se()(j,"directives",{ClosePopup:le.Z});const me={components:{VendaCard:ce,PromptContatoNovo:o(71348).Z,VendaModal:L.Z},data:()=>({page:{digitacao:{current:1,min:0,max:0},finalizado:{current:1,min:0,max:0},ativa:"Digitação"},status:[],operacoes:[],pageSize:10,grupos:[],buscaCampo:"",empresas:[],empresa:{},contatosModal:!1,vendedorModal:!1,digitadorModal:!1,filtro:{status:"",operacao:"",grupos:[],empresa:{id:""},cliente:{id:""},vendedor:{id:""},digitador:{id:""},periodo:{emissao:{ini:"",fim:""},finalizado:{ini:"",fim:""}}},dbContato:R.db.contato,documentos:null,showFilters:!1,itens:[],documentoItens:[]}),methods:{async filtrar(){let e=[];try{e=await R.db.venda.leNew({periodoEmissao:{ini:this.filtro.periodo.emissao.ini,fim:this.filtro.periodo.emissao.fim},periodoFinalizado:{ini:this.filtro.periodo.finalizado.ini,fim:this.filtro.periodo.finalizado.fim},status:this.filtro.status,operacao:this.filtro.operacao,idEmpresa:this.filtro.empresa.id,idContato:this.filtro.cliente.id,idContatoVendedor:this.filtro.vendedor.id,idContatoDigitador:this.filtro.digitador.id}),this.documentos=e}catch(e){this.$q.notify("Erro ao filtrar")}let t=[];for(const o of e){const e=await R.db.documentoItem.leNew({idDocumento:o.id});t=[...t,...e.filter((e=>e.idItem))]}let o=[],a={};for(const e of t)if(e.idItem&&!o.filter((t=>t.id===e.idItem)).length){const t=await R.db.item.leNew({id:e.idItem});o.push(t)}if(!this.filtro.grupos.length){e=(0,W.orderBy)(e,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"]),this.documentos=e.reduce(((e,t)=>(e[t.id]||(e[t.id]=t),e)),{});for(const e of t)if(!a[e.idItem]){const t=o.filter((t=>t.id===e.idItem));t.length&&(a[e.idItem]=t[0])}return this.itens=a,void(this.documentosItens=(0,W.orderBy)(t,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"]))}const i=(0,G.clonarV2)(this.filtro.grupos).map((e=>(0,G.removerAcentos)(e)));let d=e.filter((e=>{if(!e.numero)return!1;const t=String(e.numero);for(const e of i){const o=new RegExp(e,"gi");if(t.match(o))return!0}})),r=[],l=t.filter((e=>{if(!e.idItem&&!e.descricaoItem)return!1;const t=(0,G.removerAcentos)(e.descricaoItem);for(const o of i){const a=new RegExp(o,"gi");if(t.match(a))return r.push(e.id),!0}}));a=o.filter((e=>{const t=e.marca||"",o=e.referencia||"",a=e.codigoItem?String(e.codigoItem):"",d=e.codigoBarras||"",r=(0,G.removerAcentos)(t+o+a+d);for(const e of i){const t=new RegExp(e,"gi");if(r.match(t))return!0}}));for(const e of d){const o=t.filter((t=>{if(t.idItem&&t.idDocumento===e.id&&!r.includes(t.id))return r.push(t.id),!0}));l=[...l,...o]}for(const e of a){const o=t.filter((t=>{if(t.idItem===e.id&&!r.includes(t.id))return r.push(t.id),!0}));l=[...l,...o]}l=l.filter((t=>{let a=(0,G.clonarV2)(i),d=e.filter((e=>e.id===t.idDocumento)),r=o.filter((e=>e.id===t.idItem));d=d.length?d[0]:{},r=r.length?r[0]:{};let l=d.numero?String(d.numero):"";if(l+=t.descricaoItem||"",l+=r.marca||"",l+=r.referencia||"",l+=r.codigoItem?String(r.codigoItem):"",l+=r.codigoBarras||"",l)for(const e of i){const t=new RegExp(e,"gi");l.match(t)&&(a=a.filter((t=>t!==e)))}if(!a.length)return!0}));let n=[];d=[],a={};for(const t of l)if(n.includes(t.idDocumento)||(n.push(t.idDocumento),d=[...d,...e.filter((e=>e.id===t.idDocumento))]),!a[t.idItem]){const e=o.filter((e=>e.id===t.idItem));e.length&&(a[t.idItem]=e[0])}e=(0,W.orderBy)(d,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"]),this.documentos=d.reduce(((e,t)=>(e[t.id]||(e[t.id]=t),e)),{}),this.itens=a,this.documentosItens=(0,W.orderBy)(l,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"])},aoSelecionarEmpresa(){this.filtro.empresa=this.empresas.filter((e=>e.id===this.empresa.id))[0]},aoSelecionarCliente(e,t){e&&(this.filtro.cliente=(0,G.clonarV2)(t),this.contatosModal=!1)},aoSelecionarVendedor(e,t){e&&(this.filtro.vendedor=(0,G.clonarV2)(t),this.vendedorModal=!1)},aoSelecionarDigitador(e,t){e&&(this.filtro.digitador=(0,G.clonarV2)(t),this.digitadorModal=!1)},adicionarVenda(){this.$refs.modalVenda.mostrar()},async buscar(){let e=await R.db.venda.leNew(),t=[];for(const o of e){const e=await R.db.documentoItem.leNew({idDocumento:o.id});t=[...t,...e.filter((e=>e.idItem))]}let o=[],a={};for(const e of t)if(e.idItem&&!o.filter((t=>t.id===e.idItem)).length){const t=await R.db.item.leNew({id:e.idItem});o.push(t)}const i=[(0,G.removerAcentos)(this.buscaCampo)];let d=e.filter((e=>{if(!e.numero)return!1;const t=String(e.numero);for(const e of i){const o=new RegExp(e,"gi");if(t.match(o))return!0}})),r=[],l=t.filter((e=>{if(!e.idItem&&!e.descricaoItem)return!1;const t=(0,G.removerAcentos)(e.descricaoItem);for(const o of i){const a=new RegExp(o,"gi");if(t.match(a))return r.push(e.id),!0}}));a=o.filter((e=>{const t=e.marca||"",o=e.referencia||"",a=e.codigoItem?String(e.codigoItem):"",d=e.codigoBarras||"",r=(0,G.removerAcentos)(t+o+a+d);for(const e of i){const t=new RegExp(e,"gi");if(r.match(t))return!0}}));for(const e of d){const o=t.filter((t=>{if(t.idItem&&t.idDocumento===e.id&&!r.includes(t.id))return r.push(t.id),!0}));l=[...l,...o]}for(const e of a){const o=t.filter((t=>{if(t.idItem===e.id&&!r.includes(t.id))return r.push(t.id),!0}));l=[...l,...o]}l=l.filter((t=>{let a=(0,G.clonarV2)(i),d=e.filter((e=>e.id===t.idDocumento)),r=o.filter((e=>e.id===t.idItem));d=d.length?d[0]:{},r=r.length?r[0]:{};let l=d.numero?String(d.numero):"";if(l+=t.descricaoItem||"",l+=r.marca||"",l+=r.referencia||"",l+=r.codigoItem?String(r.codigoItem):"",l+=r.codigoBarras||"",l)for(const e of i){const t=new RegExp(e,"gi");l.match(t)&&(a=a.filter((t=>t!==e)))}if(!a.length)return!0}));let n=[];d=[],a={};for(const t of l)if(n.includes(t.idDocumento)||(n.push(t.idDocumento),d=[...d,...e.filter((e=>e.id===t.idDocumento))]),!a[t.idItem]){const e=o.filter((e=>e.id===t.idItem));e.length&&(a[t.idItem]=e[0])}e=(0,W.orderBy)(d,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"]),this.documentos=d.reduce(((e,t)=>(e[t.id]||(e[t.id]=t),e)),{}),this.itens=a,this.documentosItens=(0,W.orderBy)(l,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"])},async abrirEdicao(e){console.log(e);let t=await R.db.venda.leCompleto({codigoDocumento:e.codigoDocumento});console.log({leCompleto:t})},filtraDebounce(){(0,W.debounce)(this.refazFiltro,700)()},refazFiltro(){G.gconsole.log("FunilVendas","refazFiltro()",this.fraseFiltro,this.empresaSelecionada);const e=(0,G.removerAcentos)((this.fraseFiltro||"").toUpperCase()).split(" ").filter((e=>""!==e)),t={};for(const o in this.listas)for(const a of this.listas[o]){const o=(0,G.removerAcentos)((a.id||"").toUpperCase()+(a.nomeCliente||"").toUpperCase()+(a.nomeDigitador||"").toUpperCase()+(a.nomeVendedor||"").toUpperCase()+" "+String(a.numeroVenda||"")+" ");let i=!0;for(const t of e)i=isNaN(Number(t))?i&&o.includes(t):i&&o.includes(" "+t+" ");this.empresaSelecionada&&(i=i&&this.empresaSelecionada===a.codigoEmpresa),a.mostra=i,a.mostra&&(t[a.crmFunilStatus]=(t[a.crmFunilStatus]||0)+(a.totalDocumento||0))}this.total=t},async atualizar(){this.documentos=await R.db.venda.leNew(),this.empresas=await R.db.empresa.le(),this.documentos.map((e=>{this.status.includes(e.status)||this.status.push(e.status),this.operacoes.includes(e.operacao)||this.operacoes.push(e.operacao)})),await this.filtrar()}},watch:{filtro(e,t){console.log(e,t),this.filtrar()},"filtro.status"(e,t){console.log("status",e,t)}},created(){G.gconsole.log("FunilVendas","created()"),this.atualizar()}};var ue=o(24515),pe=o(47266),fe=o(86952),he=o(16078),Ve=o(38837),ve=o(95277),Ce=o(63626),ge=o(54553),xe=o(7112),Ne=o(67280),we=o(83671);me.render=function(e,t,o,m,u,p){const f=(0,a.resolveComponent)("q-icon"),h=(0,a.resolveComponent)("q-input"),V=(0,a.resolveComponent)("q-toolbar-title"),v=(0,a.resolveComponent)("q-tooltip"),C=(0,a.resolveComponent)("q-btn"),g=(0,a.resolveComponent)("q-toolbar"),x=(0,a.resolveComponent)("q-tab"),N=(0,a.resolveComponent)("q-tabs"),w=(0,a.resolveComponent)("venda-card"),b=(0,a.resolveComponent)("q-list"),k=(0,a.resolveComponent)("q-page"),y=(0,a.resolveComponent)("q-header"),_=(0,a.resolveComponent)("q-chips-input"),D=(0,a.resolveComponent)("campo"),I=(0,a.resolveComponent)("row"),S=(0,a.resolveComponent)("q-page-container"),q=(0,a.resolveComponent)("q-footer"),F=(0,a.resolveComponent)("q-layout"),B=(0,a.resolveComponent)("q-drawer"),T=(0,a.resolveComponent)("prompt-contato-novo"),E=(0,a.resolveComponent)("VendaModal");return(0,a.openBlock)(),(0,a.createBlock)(a.Fragment,null,[(0,a.createVNode)(k,{class:"Modelo"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(g,{class:"bg-gradiente text-white "},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{size:"sm",name:"shopping_cart",class:"q-mr-sm"}),i,(0,a.createVNode)(V,{class:"q-py-sm"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,{debounce:500,modelValue:u.buscaCampo,"onUpdate:modelValue":[t[3]||(t[3]=e=>u.buscaCampo=e),p.atualizar],ref:"buscaCampo",placeholder:"Filtrar",id:"busca",standout:"",filled:"",dark:"",dense:"",clearable:"","clear-icon":"close",style:{"max-width":"990px",margin:"0 auto"}},{prepend:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{name:"mdi-filter",class:"cursor-pointer text-white float-right",onClick:t[1]||(t[1]=()=>{u.showFilters=!u.showFilters})})])),append:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{name:"keyboard_arrow_down",onClick:t[2]||(t[2]=()=>{u.showFilters=!u.showFilters}),class:"cursor-pointer text-white"})])),_:1},8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.createVNode)(C,{flat:"",dense:"",icon:"add",color:"white",class:"hideonmobile",onClick:p.adicionarVenda},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(v,null,{default:(0,a.withCtx)((()=>[d])),_:1})])),_:1},8,["onClick"])])),_:1}),(0,a.createVNode)(N,{modelValue:e.tabSelecionada,"onUpdate:modelValue":t[4]||(t[4]=t=>e.tabSelecionada=t),dense:"",class:"text-primary q-mt-md",align:"left",style:{"border-bottom":"1px solid rgba(0, 0, 0, 0.12)"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,{label:"Ativo",name:"Ativo"}),(0,a.createVNode)(x,{label:"Finalizadas",name:"Finalizadas"}),(0,a.createVNode)(x,{label:"Canceladas",name:"Canceladas"}),(0,a.createVNode)(x,{label:"Todas",name:"Todas"})])),_:1},8,["modelValue"]),(0,a.createVNode)("div",null,[(0,a.createVNode)(b,{class:"rounded-borders"},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(u.documentos,(e=>((0,a.openBlock)(),(0,a.createBlock)("div",{key:e.id,class:"itemHover fullWidth q-px-sm"},[(0,a.createVNode)(w,{id:e.id,class:"q-mb-md"},null,8,["id"])])))),128))])),_:1})])])),_:1}),(0,a.createVNode)(B,{modelValue:u.showFilters,"onUpdate:modelValue":t[20]||(t[20]=e=>u.showFilters=e),bordered:"",side:"right"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(F,{view:"hHh lpR lFr"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(y,{class:"bg-white","height-hint":"98"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(g,{color:"white",class:"text-tertiary"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{class:"text-h5",name:"mdi-filter"}),(0,a.createVNode)(V,null,{default:(0,a.withCtx)((()=>[r])),_:1}),(0,a.createVNode)(C,{dense:"",flat:"",icon:"close",round:"",onClick:t[5]||(t[5]=e=>u.showFilters=!u.showFilters)})])),_:1})])),_:1}),(0,a.createVNode)(S,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)("div",l,[(0,a.createVNode)(_,{modelValue:u.filtro.grupos,"onUpdate:modelValue":t[6]||(t[6]=e=>u.filtro.grupos=e),color:"tertiary",class:"col-12",placeholder:"Filtre por Produto, Marca, Número..."},null,8,["modelValue","placeholder"]),(0,a.createVNode)(D,{tipo:"seletor",dense:"",modelValue:u.empresa.id,"onUpdate:modelValue":[t[7]||(t[7]=e=>u.empresa.id=e),p.aoSelecionarEmpresa],options:u.empresas.map((e=>({label:e.nome,value:e.id}))),clearable:"",rotulo:"Por empresa"},null,8,["modelValue","options","onUpdate:modelValue"]),(0,a.createVNode)(D,{tipo:"seletor",dense:"",modelValue:u.filtro.status,"onUpdate:modelValue":t[8]||(t[8]=e=>u.filtro.status=e),options:u.status.map((e=>({label:e,value:e}))),clearable:"",rotulo:"Status"},null,8,["modelValue","options"]),(0,a.createVNode)(D,{tipo:"seletor",dense:"",modelValue:u.filtro.operacao,"onUpdate:modelValue":t[9]||(t[9]=e=>u.filtro.operacao=e),options:u.operacoes.map((e=>({label:e,value:e}))),clearable:"",rotulo:"Operação"},null,8,["modelValue","options"]),(0,a.createVNode)(D,{rotulo:"Cliente",tipo:"texto",before:[{icon:"search"}],modelValue:u.filtro.cliente.nome,"onUpdate:modelValue":[t[10]||(t[10]=e=>u.filtro.cliente.nome=e),p.aoSelecionarCliente],onClick:t[11]||(t[11]=e=>u.contatosModal=!0),dense:""},null,8,["modelValue","onUpdate:modelValue"]),(0,a.createVNode)(D,{rotulo:"Vendedor",tipo:"texto",before:[{icon:"search"}],modelValue:u.filtro.vendedor.nome,"onUpdate:modelValue":[t[12]||(t[12]=e=>u.filtro.vendedor.nome=e),p.aoSelecionarVendedor],onClick:t[13]||(t[13]=e=>u.vendedorModal=!0),dense:""},null,8,["modelValue","onUpdate:modelValue"]),(0,a.createVNode)(D,{rotulo:"Digitador",tipo:"texto",before:[{icon:"search"}],modelValue:u.filtro.digitador.nome,"onUpdate:modelValue":[t[14]||(t[14]=e=>u.filtro.digitador.nome=e),p.aoSelecionarDigitador],onClick:t[15]||(t[15]=e=>u.digitadorModal=!0),dense:""},null,8,["modelValue","onUpdate:modelValue"]),(0,a.createVNode)(I,{class:"q-col-gutter-md q-mt-md"},{default:(0,a.withCtx)((()=>[n,(0,a.createVNode)(D,{modelValue:u.filtro.periodo.emissao.ini,"onUpdate:modelValue":t[16]||(t[16]=e=>u.filtro.periodo.emissao.ini=e),tipo:"data",class:"no-shadow full-width",rotulo:"De",col:"12",after:[{icon:"mdi-close-circle",handler(){u.filtro.periodo.emissao.ini=""}}],dense:""},null,8,["modelValue","after"]),(0,a.createVNode)(D,{modelValue:u.filtro.periodo.emissao.fim,"onUpdate:modelValue":t[17]||(t[17]=e=>u.filtro.periodo.emissao.fim=e),tipo:"data",class:"no-shadow full-width",rotulo:"até",col:"12",after:[{icon:"mdi-close-circle",handler(){u.filtro.periodo.emissao.fim=""}}],dense:""},null,8,["modelValue","after"])])),_:1}),(0,a.createVNode)(I,{class:"q-col-gutter-md q-mt-md"},{default:(0,a.withCtx)((()=>[s,(0,a.createVNode)(D,{modelValue:u.filtro.periodo.finalizado.ini,"onUpdate:modelValue":t[18]||(t[18]=e=>u.filtro.periodo.finalizado.ini=e),tipo:"data",class:"no-shadow full-width",rotulo:"De",col:"12",after:[{icon:"mdi-close-circle",handler(){u.filtro.periodo.finalizado.ini=""}}],dense:""},null,8,["modelValue","after"]),(0,a.createVNode)(D,{modelValue:u.filtro.periodo.finalizado.fim,"onUpdate:modelValue":t[19]||(t[19]=e=>u.filtro.periodo.finalizado.fim=e),tipo:"data",class:"no-shadow full-width",rotulo:"até",col:"12",after:[{icon:"mdi-close-circle",handler(){u.filtro.periodo.finalizado.fim=""}}],dense:""},null,8,["modelValue","after"])])),_:1})])])),_:1}),(0,a.createVNode)(q,{class:"bg-white"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)("div",c,[(0,a.createVNode)(C,{class:"col-6",color:"tertiary",flat:"",label:"Limpar",unelevated:""}),(0,a.createVNode)(C,{class:"col-6 no-shadow",color:"primary",label:"Aplicar",unelevated:"",onClick:p.filtrar},null,8,["onClick"])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.createVNode)(T,{modelValue:u.contatosModal,"onUpdate:modelValue":t[21]||(t[21]=e=>u.contatosModal=e),filtro:{ativo:!0},onSelecionar:p.aoSelecionarCliente},null,8,["modelValue","onSelecionar"]),(0,a.createVNode)(T,{modelValue:u.vendedorModal,"onUpdate:modelValue":t[22]||(t[22]=e=>u.vendedorModal=e),filtro:{ativo:!0,vendedores:!0},onSelecionar:p.aoSelecionarVendedor},null,8,["modelValue","onSelecionar"]),(0,a.createVNode)(T,{modelValue:u.digitadorModal,"onUpdate:modelValue":t[23]||(t[23]=e=>u.digitadorModal=e),filtro:{ativo:!0},onSelecionar:p.aoSelecionarDigitador},null,8,["modelValue","onSelecionar"]),(0,a.createVNode)(E,{ref:"modalVenda",onExecutar:e.executar},null,8,["onExecutar"])],64)};const be=me;se()(me,"components",{QPage:ue.Z,QToolbar:pe.Z,QIcon:ie.Z,QToolbarTitle:de.Z,QInput:fe.Z,QBtn:te.Z,QTooltip:ee.Z,QTabs:he.Z,QTab:Ve.Z,QList:ae.Z,QDrawer:ve.Z,QLayout:Ce.Z,QHeader:ge.Z,QPageContainer:xe.Z,QChip:Ne.Z,QFooter:we.Z})}}]);