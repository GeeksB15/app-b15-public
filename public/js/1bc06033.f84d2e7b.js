(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["1bc06033"],{"01f4":function(e,t,o){},"504c":function(e,t,o){var a=o("9e1e"),r=o("0d58"),n=o("6821"),i=o("52a7").f;e.exports=function(e){return function(t){var o,s=n(t),c=r(s),l=c.length,u=0,d=[];while(l>u)o=c[u++],a&&!i.call(s,o)||d.push(e?[o,s[o]]:s[o]);return d}}},"57da":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("svg",{class:e.classes,style:e.estilos},[o("use",{attrs:{"xlink:href":e.iconeComposto}})])},r=[];a._withStripped=!0;o("c5f6");var n={computed:{classes:function(){return["Icone",!!this.cor&&"text-".concat(this.cor)]},estilos:function(){return{height:"".concat(this.tamanho,"px"),width:"".concat(this.tamanho,"px")}},iconeComposto:function(){return"statics/icones.svg#"+this.nome}},props:{cor:{type:[Boolean,String],default:!1},nome:{type:String,required:!0},tamanho:{type:[Number,String],default:24}}},i=n,s=(o("e25e"),o("2877")),c=Object(s["a"])(i,a,r,!1,null,null,null);c.options.__file="Icone.vue";t["a"]=c.exports},5845:function(e,t,o){},"61f3":function(e,t,o){"use strict";var a=o("5845"),r=o.n(a);r.a},"68db":function(e,t,o){"use strict";var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-modal",{attrs:{value:e.value},on:{input:e.eventoInput}},[o("q-modal-layout",[o("q-toolbar",{attrs:{slot:"header"},slot:"header"},[o("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{dense:"",flat:"",icon:"arrow_back",round:""}}),o("q-toolbar-title",[e._v(e._s(e.titulo))])],1),o("form",{on:{submit:function(t){return t.preventDefault(),e.criarContato(t)}}},[o("div",{staticClass:"layout-padding"},[o("div",{staticClass:"row gutter-x-sm"},[o("campo",{staticClass:"col-12",attrs:{erro:e.$v.campos.nome.$error,"erro-rotulo":"O nome é obrigatório.",maxlength:"50",rotulo:"Nome do contato"},on:{blur:e.$v.campos.nome.$touch},model:{value:e.campos.nome,callback:function(t){e.$set(e.campos,"nome","string"===typeof t?t.trim():t)},expression:"campos.nome"}}),e.cpfCnpj?o("q-field",{staticClass:"col-12 col-sm-6",attrs:{error:e.$v.campos.numeroDocumentoNacional.$error,"error-label":e.campos.numeroDocumentoNacionalErro}},[o("q-input",{directives:[{name:"mask",rawName:"v-mask",value:["###.###.###-##","##.###.###/####-##"],expression:"['###.###.###-##', '##.###.###/####-##']"}],attrs:{"float-label":"CPF/CNPJ"},on:{blur:e.$v.campos.numeroDocumentoNacional.$touch},model:{value:e.campos.numeroDocumentoNacional,callback:function(t){e.$set(e.campos,"numeroDocumentoNacional",t)},expression:"campos.numeroDocumentoNacional"}})],1):e._e(),e.numeroDocumentoMunicipal?o("campo",{staticClass:"col-12 col-sm-6",attrs:{rotulo:e.numeroDocumentoMunicipal},model:{value:e.campos.numeroDocumentoMunicipal,callback:function(t){e.$set(e.campos,"numeroDocumentoMunicipal",t)},expression:"campos.numeroDocumentoMunicipal"}}):e._e(),e.dataNascimento?o("campo",{staticClass:"col-12 col-sm-6",attrs:{after:[{icon:"delete",handler:function(){e.campos.dataAbertura=""}}],format:"DD/MM/YYYY",rotulo:"Data de nascimento",max:Date.now(),tipo:"data"},model:{value:e.campos.dataAbertura,callback:function(t){e.$set(e.campos,"dataAbertura",t)},expression:"campos.dataAbertura"}}):e._e(),e.observacao?o("campo",{staticClass:"col-12",attrs:{maxlength:"50",rotulo:"Observacao"},model:{value:e.observacaoFilho,callback:function(t){e.observacaoFilho="string"===typeof t?t.trim():t},expression:"observacaoFilho"}}):e._e()],1)]),o("q-toolbar",{attrs:{slot:"footer",color:"light"},slot:"footer"},[o("q-toolbar-title",[o("div",{staticClass:"row justify-end"},[o("q-btn",{attrs:{flat:"",color:"primary",label:"Cancelar"},on:{click:function(t){e.eventoInput(!1)}}}),o("q-btn",{attrs:{flat:"",color:"primary",type:"submit",label:"Criar"}})],1)])],1)],1)],1)],1)},r=[];a._withStripped=!0;o("96cf");var n=o("c973"),i=o.n(n),s=o("88db"),c=o("b5ae"),l=o("ed08"),u=o("8149"),d={components:{Campo:s["a"]},data:function(){return{campos:{nome:""},observacaoFilho:""}},methods:{criarContato:function(){var e=i()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return l["gconsole"].log("ContatoCriar","criarContato"),e.next=3,Object(l["verificarSeCamposSaoValidos"])(this.$v.campos,this);case 3:if(e.sent){e.next=5;break}return e.abrupt("return",this.$q.notify("Há erros de validação no formulário."));case 5:return e.prev=5,this.$q.loading.show(),e.next=9,u["a"].contato.criarContatoBasico(this.campos);case 9:t=e.sent,t.observacaoFilho=this.observacaoFilho,this.eventoInput(!1),this.$q.notifyPositive(this.msgSucesso),this.$emit("pronto",t),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](5),this.$q.notifyError(this.msgErro,e.t0);case 19:return e.prev=19,this.$q.loading.hide(),e.finish(19);case 22:case"end":return e.stop()}},e,this,[[5,16,19,22]])}));return function(){return e.apply(this,arguments)}}(),eventoInput:function(e){this.$emit("input",e)}},props:{value:{required:!0,type:Boolean},cpfCnpj:{default:!1,type:Boolean},dataNascimento:{default:!1,type:Boolean},msgErro:{default:"Ocorreu um erro ao salvar.",type:String},msgSucesso:{default:"Contato criado com sucesso.",type:String},numeroDocumentoMunicipal:{type:String},observacao:{default:!1,type:Boolean},titulo:{default:"Criar contato",type:String}},validations:{campos:{nome:{minLength:Object(c["minLength"])(2),required:c["required"]},numeroDocumentoNacional:{cnpjOuCpfUnico:function(){var e=i()(regeneratorRuntime.mark(function e(t,o){var a,r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=(o||{}).id||"",e.next=3,Object(l["validarDocumentoNacionalUnico"])(t,a);case 3:return r=e.sent,n=r.valido,i=r.mensagem,o.numeroDocumentoNacionalErro=i,e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}));return function(t,o){return e.apply(this,arguments)}}()}}},watch:{value:function(e){e&&(this.campos={nome:""},this.observacaoFilho="",this.$v.campos.$reset())}}},m=d,p=o("2877"),f=Object(p["a"])(m,a,r,!1,null,null,null);f.options.__file="ContatoCriar.vue";t["a"]=f.exports},8615:function(e,t,o){var a=o("5ca1"),r=o("504c")(!1);a(a.S,"Object",{values:function(e){return r(e)}})},"96a1":function(e,t,o){"use strict";var a=o("a60d");t["a"]=function(e,t){if(a["a"].is.cordova&&navigator&&navigator.app)return navigator.app.loadUrl(e,{openExternal:!0});var o=window.open(e,"_blank");if(o)return o.focus(),o;t&&t()}},d86f:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.campos&&e.campos.id?o("form",{staticClass:"ContatoFicha",on:{submit:function(t){return t.preventDefault(),e.salvarContato(t)}}},[o("div",{staticClass:"bg-white gutter-x-md q-px-md q-py-lg row"},[o("div",{staticClass:"col-12 col-md-3 text-center"},[o("avatar",{attrs:{imagem:e.campos.imagem,rotulo:e.campos.apelido,tamanho:"160"},nativeOn:{click:function(t){return e.abrirModalFoto(t)}}}),o("div",{staticClass:"group q-mt-md"},[e._l(e.campos.redeSocial,function(t,a){return o("q-btn",{key:a,attrs:{color:"link"===t.tipo?"primary":t.tipo,round:"",size:"sm"},on:{click:function(o){e.abrirURL(t.link)}}},["link"===t.tipo?o("q-icon",{attrs:{name:"launch"}}):o("icone",{attrs:{nome:t.tipo,tamanho:"12"}})],1)}),o("q-btn",{attrs:{color:"positive",icon:"add",label:"Rede social",outline:"",round:e.temRedeSocial,size:"sm"},on:{click:e.abrirRedeSocialModal}})],2)],1),o("div",{staticClass:"col-12 col-md-6"},[e.campos&&e.campos.codigoContato?o("div",{staticClass:"text-right"},[o("badge",{attrs:{cor:e.badgeCor,escuro:""}},[e._v("#"+e._s((e.campos.codigoContato||0).toString().padStart(6,"0")))])],1):e._e(),o("q-field",[o("q-input",{staticClass:"q-title",attrs:{placeholder:e.ehEmpresa?"Fantasia":"Apelido"},model:{value:e.campos.apelido,callback:function(t){e.$set(e.campos,"apelido",t)},expression:"campos.apelido"}})],1),o("q-field",{staticClass:"q-mt-md",attrs:{error:e.$v.campos.nome.$error,"error-label":"O nome é obrigatório."}},[o("q-input",{attrs:{"float-label":e.ehEmpresa?"Razão social":"Nome completo"},on:{blur:e.$v.campos.nome.$touch},model:{value:e.campos.nome,callback:function(t){e.$set(e.campos,"nome",t)},expression:"campos.nome"}})],1),o("div",{staticClass:"gutter-x-sm row"},[o("q-field",{staticClass:"col-12 col-sm",attrs:{error:e.$v.campos.numeroDocumentoNacional.$error,"error-label":e.campos.numeroDocumentoNacionalErro}},[o("div",{staticClass:"row"},[o("q-input",{directives:[{name:"mask",rawName:"v-mask",value:["###.###.###-##","##.###.###/####-##"],expression:"['###.###.###-##', '##.###.###/####-##']"}],staticClass:"col",attrs:{"float-label":e.ehEmpresa?"CNPJ":"CPF/CNPJ"},on:{blur:e.$v.campos.numeroDocumentoNacional.$touch,input:function(t){e.consultarCadastroSefaz(!1)}},model:{value:e.campos.numeroDocumentoNacional,callback:function(t){e.$set(e.campos,"numeroDocumentoNacional",t)},expression:"campos.numeroDocumentoNacional"}}),18===e._.get(e.campos,"numeroDocumentoNacional","").length?o("q-btn",{staticClass:"col-auto self-start q-mt-lg",attrs:{color:"none",dense:"",flat:"",round:"",size:"xs"},on:{click:function(t){e.consultarCadastroSefaz(!0)}}},[o("q-icon",{attrs:{color:"positive",name:"mdi-arrow-down-bold-circle",size:"24px"}}),o("q-tooltip",[e._v("Consultar cadastro no Sefaz")])],1):e._e()],1)]),o("q-field",{staticClass:"col-12 col-sm"},[o("q-input",{attrs:{"float-label":e.ehEmpresa?"Inscrição estadual":"RG/IE"},model:{value:e.campos.numeroDocumentoEstadual,callback:function(t){e.$set(e.campos,"numeroDocumentoEstadual",t)},expression:"campos.numeroDocumentoEstadual"}})],1),o("q-field",{staticClass:"col-12 col-sm"},[o("q-input",{attrs:{"float-label":"Inscrição municipal"},model:{value:e.campos.numeroDocumentoMunicipal,callback:function(t){e.$set(e.campos,"numeroDocumentoMunicipal",t)},expression:"campos.numeroDocumentoMunicipal"}})],1)],1),o("div",{staticClass:"q-mt-xl"},[o("div",{staticClass:"q-mb-md q-subheading"},[e._v("Telefones")]),e._l(e.campos.telefone,function(t,a){return o("div",{key:a,staticClass:"u-separador animate-pop"},[o("div",{staticClass:"gutter-x-sm items-baseline row"},[o("div",{staticClass:"col-2 col-sm-1"},[o("q-btn",{attrs:{color:"none",dense:"",flat:"",round:""},on:{click:function(o){e.abrirTelefone(t)}}},[o("WhatsApp"===t.tipoTelefone?"icone":"q-icon",e._b({tag:"component"},"component",e.telefoneIcone(t.tipoTelefone),!1))],1)],1),o("q-field",{staticClass:"col-4 col-sm-3"},[o("q-select",{attrs:{"float-label":"Tipo",options:e.telefoneTipos},model:{value:e.campos.telefone[a].tipoTelefone,callback:function(t){e.$set(e.campos.telefone[a],"tipoTelefone",t)},expression:"campos.telefone[indice].tipoTelefone"}})],1),o("q-field",{staticClass:"col-6 col-sm-4"},[o("q-input",{attrs:{"float-label":"Telefone"},model:{value:e.campos.telefone[a].telefone,callback:function(t){e.$set(e.campos.telefone[a],"telefone",t)},expression:"campos.telefone[indice].telefone"}})],1),o("q-field",{staticClass:"col-10 col-sm-3"},[o("q-input",{attrs:{"float-label":"Descrição"},model:{value:e.campos.telefone[a].observacao,callback:function(t){e.$set(e.campos.telefone[a],"observacao",t)},expression:"campos.telefone[indice].observacao"}})],1),o("div",{staticClass:"col-2 col-sm-1 text-right"},[o("q-btn",{attrs:{color:"negative",size:"xs",icon:"remove",outline:"",round:""},on:{click:function(t){e.removerTelefone(a)}}},[o("q-tooltip",[e._v("Excluir")])],1)],1)],1)])}),o("div",{staticClass:"q-mt-md text-center"},[o("q-btn",{attrs:{color:"positive",icon:"add",label:"Telefone",outline:"",size:"sm"},on:{click:e.adicionarTelefone}})],1)],2),o("div",{staticClass:"q-mt-xl"},[o("div",{staticClass:"q-mb-md q-subheading"},[e._v("Endereços")]),e._l(e.$v.campos.endereco.$each.$iter,function(t,a){return o("div",{key:a,staticClass:"u-separador animate-pop"},[o("div",{staticClass:"gutter-x-sm items-baseline row"},[o("div",{staticClass:"col-2 col-sm-1"},[o("q-btn",{attrs:{color:"none u-semClique",dense:"",flat:"",round:""}},[o("q-icon",e._b({},"q-icon",e.enderecoIcone(t.grupo.$model),!1))],1)],1),o("q-field",{staticClass:"col-10 col-sm-11"},[o("q-select",{attrs:{options:e.enderecoTipos,"float-label":"Grupo"},model:{value:t.grupo.$model,callback:function(o){e.$set(t.grupo,"$model",o)},expression:"endereco.grupo.$model"}})],1),o("q-field",{staticClass:"col-6 col-sm-4",attrs:{error:t.cep.$error,"error-label":"O CEP está muito curto."}},[o("q-search",{directives:[{name:"mask",rawName:"v-mask",value:"#####-###",expression:"'#####-###'"}],attrs:{"float-label":"CEP"},on:{blur:t.$touch,input:function(t){e.consultarCep(a)}},model:{value:t.cep.$model,callback:function(o){e.$set(t.cep,"$model",o)},expression:"endereco.cep.$model"}})],1),o("q-field",{staticClass:"col-2 col-sm-2",attrs:{error:t.uf.$error,"error-label":"Insira um UF."}},[o("q-input",{attrs:{"float-label":"UF",maxlength:"2"},on:{blur:t.$touch},model:{value:t.uf.$model,callback:function(o){e.$set(t.uf,"$model",o)},expression:"endereco.uf.$model"}})],1),o("q-field",{staticClass:"col-10 col-sm-6",attrs:{helper:"Código IBGE: "+(t.ibgeCod.$model||""),error:t.municipio.$error,"error-label":"Selecione um município"}},[o("q-search",{attrs:{"float-label":"Cidade","no-icon":""},on:{blur:function(t){e.conferirCidade(a)}},model:{value:t.municipio.$model,callback:function(o){e.$set(t.municipio,"$model",o)},expression:"endereco.municipio.$model"}},[o("q-autocomplete",{attrs:{"min-characters":2,"max-results":5,"value-field":function(e){return""+e.nomeMunic}},on:{search:e.buscarCidade,selected:function(t){return e.selecionarCidade(t,a)}}})],1)],1),o("q-field",{staticClass:"col-12 col-sm-7",attrs:{error:t.logradouro.$error,"error-label":"O endereço está muito curto."}},[o("q-input",{attrs:{"float-label":"Endereço"},on:{blur:t.$touch},model:{value:t.logradouro.$model,callback:function(o){e.$set(t.logradouro,"$model",o)},expression:"endereco.logradouro.$model"}},[o("q-autocomplete",{staticClass:"q-ma-none",attrs:{"min-characters":3},on:{search:function(t,o){return e.consultarLogradouro(a,t,o)},selected:function(t){return e.selecionarLogradouro(a,t)}}})],1)],1),o("q-field",{staticClass:"col-12 col-sm-2"},[o("q-input",{attrs:{"float-label":"Número"},on:{blur:t.$touch},model:{value:t.numero.$model,callback:function(o){e.$set(t.numero,"$model",o)},expression:"endereco.numero.$model"}})],1),o("q-field",{staticClass:"col-12 col-sm-3"},[o("q-input",{attrs:{"float-label":"Complemento"},on:{blur:t.$touch},model:{value:t.complemento.$model,callback:function(o){e.$set(t.complemento,"$model",o)},expression:"endereco.complemento.$model"}})],1),o("q-field",{staticClass:"col-12 col-sm-6",attrs:{error:t.bairro.$error,"error-label":"O bairro está muito curto."}},[o("q-input",{attrs:{"float-label":"Bairro"},on:{blur:t.$touch},model:{value:t.bairro.$model,callback:function(o){e.$set(t.bairro,"$model",o)},expression:"endereco.bairro.$model"}})],1),o("q-field",{staticClass:"col-10 col-sm-5",attrs:{error:t.pais.$error,"error-label":"Insira um país."}},[o("q-input",{attrs:{"float-label":"País"},on:{blur:t.$touch},model:{value:t.pais.$model,callback:function(o){e.$set(t.pais,"$model",o)},expression:"endereco.pais.$model"}})],1),o("div",{staticClass:"col-2 col-sm-1 text-right"},[o("q-btn",{attrs:{color:"negative",size:"xs",icon:"remove",outline:"",round:""},on:{click:function(t){e.removerEndereco(a)}}},[o("q-tooltip",[e._v("Remover")])],1)],1)],1)])}),o("div",{staticClass:"q-mt-md text-center"},[o("q-btn",{attrs:{color:"positive",icon:"add",label:"Endereço",outline:"",size:"sm"},on:{click:e.adicionarEndereco}})],1)],2)],1),o("div",{staticClass:"col-12 col-md-3"},[o("q-field",[o("q-input",{staticClass:"bg-light q-px-md",attrs:{"float-label":"Observações",rows:"10",type:"textarea"},model:{value:e.campos.observacao,callback:function(t){e.$set(e.campos,"observacao",t)},expression:"campos.observacao"}})],1)],1)]),o("q-tabs",{staticClass:"bg-transparent q-mt-lg",attrs:{color:"transparent","text-color":"primary"}},[o("q-tab",{attrs:{slot:"title",default:"",label:"Dados Adicionais",name:"profile-tab-1"},slot:"title"}),o("q-tab",{attrs:{slot:"title",label:"Dependentes / Empresa",name:"profile-tab-2"},slot:"title"}),o("q-tab",{attrs:{slot:"title",label:"Consulta de cadastro",name:"profile-tab-3"},slot:"title"}),o("q-tab",{attrs:{slot:"title",label:"Conduta",name:"profile-tab-4"},slot:"title"}),o("q-tab",{attrs:{slot:"title",label:"Configurações comerciais",name:"profile-tab-5"},slot:"title"}),o("q-tab-pane",{staticClass:"bg-white",attrs:{name:"profile-tab-1"}},[o("div",{staticClass:"gutter-sm items-baseline row"},[o("campo",{staticClass:"col-12 col-sm-4 u-semClique",attrs:{before:[{icon:"alternate_email"}],erro:e.$v.campos.email.$error,"erro-rotulo":"Insira um e-mail válido.",rotulo:"E-mail"},on:{blur:e.$v.campos.email.$touch},model:{value:e.campos.email,callback:function(t){e.$set(e.campos,"email",t)},expression:"campos.email"}}),o("campo",{staticClass:"col-12 col-sm-4 u-semClique",attrs:{before:[{icon:"language"}],rotulo:"Site"},model:{value:e.campos.site,callback:function(t){e.$set(e.campos,"site",t)},expression:"campos.site"}}),o("campo",{staticClass:"col-12 col-sm-4",attrs:{after:[{icon:"add_circle",handler:function(){e.abrirModalSegmento()}}],opcoes:e.opcoesSegmento,"rotulo-fixo":e.segmentoProfissao,tipo:"seletor"},model:{value:e.campos.segmento,callback:function(t){e.$set(e.campos,"segmento",t)},expression:"campos.segmento"}}),e.ehEmpresa?[o("q-field",{staticClass:"col-12 col-sm-3"},[o("q-select",{attrs:{"float-label":"Regime",options:e.regimes},model:{value:e.campos.regime,callback:function(t){e.$set(e.campos,"regime",t)},expression:"campos.regime"}})],1),"Normal"===e.campos.regime?o("campo",{staticClass:"col-12 col-sm-3",attrs:{opcoes:[{rotulo:"",valor:""},{rotulo:"Lucro real",valor:"1"},{rotulo:"Lucro presumido",valor:"2"}],rotulo:"Tributação",tipo:"seletor"},model:{value:e.campos.tributacao,callback:function(t){e.$set(e.campos,"tributacao",t)},expression:"campos.tributacao"}}):o("div",{staticClass:"col-12 col-sm-3"}),o("campo",{staticClass:"col-12 col-sm-3",attrs:{opcoes:[{rotulo:"",valor:""},{rotulo:"Indústria",valor:"1"},{rotulo:"Outros",valor:"99"}],rotulo:"Setor tributação",tipo:"seletor"},model:{value:e.campos.tributacaoSetor,callback:function(t){e.$set(e.campos,"tributacaoSetor",t)},expression:"campos.tributacaoSetor"}}),o("campo",{staticClass:"col-12 col-sm-3",attrs:{after:[{icon:"delete",handler:function(){e.campos.dataAbertura=""}}],rotulo:"Data de abertura",suffix:e.campos.dataAbertura?e.idade+" anos":"",max:Date.now(),tipo:"data"},model:{value:e.campos.dataAbertura,callback:function(t){e.$set(e.campos,"dataAbertura",t)},expression:"campos.dataAbertura"}})]:[o("q-field",{staticClass:"col-12 col-sm-6"},[o("q-select",{attrs:{"float-label":"Sexo",options:e.sexos},model:{value:e.campos.sexo,callback:function(t){e.$set(e.campos,"sexo",t)},expression:"campos.sexo"}})],1),o("campo",{staticClass:"col-12 col-sm-6",attrs:{after:[{icon:"delete",handler:function(){e.campos.dataAbertura=""}}],rotulo:"Data de nascimento",suffix:e.campos.dataAbertura?e.idade+" anos":"",max:Date.now(),tipo:"data"},model:{value:e.campos.dataAbertura,callback:function(t){e.$set(e.campos,"dataAbertura",t)},expression:"campos.dataAbertura"}})],o("q-field",{staticClass:"col-12"},[o("q-chips-input",{attrs:{before:[{icon:"local_offer",handler:function(){e.abrirModalGrupo()}}],"float-label":"Grupos","no-icon":""},model:{value:e.campos.nomesGrupo,callback:function(t){e.$set(e.campos,"nomesGrupo",t)},expression:"campos.nomesGrupo"}})],1)],2)]),o("q-tab-pane",{staticClass:"bg-white",attrs:{name:"profile-tab-2"}},[o("div",{staticClass:"gutter-x-sm items-baseline row"},[o("div",[o("q-btn",{attrs:{color:"faded",size:"lg",icon:"person_add",dense:"",flat:"",round:""},on:{click:e.abrirModalDependente}},[o("q-tooltip",[e._v("Criar contato")])],1)],1),o("q-field",{staticClass:"col"},[o("q-search",{attrs:{"float-label":"Dependentes"},model:{value:e.filhoCampo,callback:function(t){e.filhoCampo=t},expression:"filhoCampo"}},[o("q-autocomplete",{attrs:{"min-characters":2},on:{search:e.buscarFilhos,selected:e.adicionarFilho}})],1)],1)],1),o("q-list",{staticClass:"q-mt-lg",attrs:{"no-border":"",separator:""}},e._l(e.campos.filhos.filter(function(t){return t.idContato===e.campos.id}),function(t){return o("q-item",{key:t.id},[o("q-item-side",[o("avatar",{attrs:{imagem:(e.filhos[t.idContatoRelacionado]||{}).imagem,rotulo:(e.filhos[t.idContatoRelacionado]||{}).apelido}})],1),o("q-item-main",[o("div",{staticClass:"row gutter-x-sm items-center"},[o("div",{staticClass:"col-4"},[o("q-item-tile",{attrs:{label:""}},[e._v(e._s((e.filhos[t.idContatoRelacionado]||{}).apelido))]),o("q-item-tile",{attrs:{sublabel:""}},[e._v("\n                  "+e._s((e.filhos[t.idContatoRelacionado]||{}).nome)+"\n                  "+e._s((e.filhos[t.idContatoRelacionado]||{}).numeroDocumentoNacional||"")+"\n                ")])],1),o("div",{staticClass:"col-4"},[o("campo",{attrs:{rotulo:"Observacao"},model:{value:t.observacao,callback:function(o){e.$set(t,"observacao",o)},expression:"filho.observacao"}})],1),o("div",{staticClass:"col-4 gutter-x-sm"},[o("q-toggle",{attrs:{val:!0,label:"Sócio"},model:{value:t.socio,callback:function(o){e.$set(t,"socio",o)},expression:"filho.socio"}}),o("q-toggle",{attrs:{val:!0,label:"Cobrança"},model:{value:t.cobranca,callback:function(o){e.$set(t,"cobranca",o)},expression:"filho.cobranca"}})],1)])]),o("q-item-side",{attrs:{right:""}},[!e.somenteCarteira||e.somenteCarteira&&e.contatoUsuario.id&&(e.filhos[t.idContatoRelacionado]||{}).idContatoVendedor===e.contatoUsuario.id?o("q-btn",{staticClass:"q-mr-sm",attrs:{color:"faded",size:"xs",icon:"edit",outline:"",round:"",to:{name:"AtendimentoContato",params:{id:t.idContatoRelacionado}}}},[o("q-tooltip",[e._v("Editar contato")])],1):e._e(),o("q-btn",{attrs:{color:"negative",size:"xs",icon:"remove",outline:"",round:""},on:{click:function(o){e.removerFilho(t)}}},[o("q-tooltip",[e._v("Remover")])],1)],1)],1)}))],1),o("q-tab-pane",{staticClass:"bg-white",attrs:{name:"profile-tab-3"}},[o("div",{staticClass:"gutter-x-sm items-baseline q-mb-lg row"},[o("q-field",{staticClass:"col-10"},[o("q-input",{attrs:{"float-label":"Descrição"},model:{value:e.consultaDescricao,callback:function(t){e.consultaDescricao="string"===typeof t?t.trim():t},expression:"consultaDescricao"}})],1),o("div",{staticClass:"col-2 text-right"},[o("q-btn",{attrs:{color:"positive",icon:"add",label:"Consulta",outline:"",size:"sm"},on:{click:e.adicionarConsulta}})],1)],1),e._l(e.campos.consulta,function(t,a){return o("q-card",{key:a,staticClass:"animate-pop q-mb-md shadow-1"},[o("q-card-title",[e._v("\n          "+e._s(t.descricao)+"\n          "),o("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[e._v("Consulta realizada em "),o("strong",[e._v(e._s(e._f("dataHora")(t.dataConsulta)))])])])],1)})],2),o("q-tab-pane",{staticClass:"bg-white",attrs:{name:"profile-tab-4"}},[o("div",{staticClass:"gutter-sm row"},[o("q-field",{staticClass:"col-12 col-sm-6",attrs:{helper:"Este conteúdo será exibido sempre que um documento for criado para este contato."}},[o("q-input",{staticClass:"bg-light q-px-sm",attrs:{rows:"3","stack-label":"Observações",type:"textarea"},model:{value:e.campos.condutaObservacao,callback:function(t){e.$set(e.campos,"condutaObservacao",t)},expression:"campos.condutaObservacao"}})],1),o("q-field",{staticClass:"col-12 col-sm-6",attrs:{helper:"Ao preencher este campo, o contato não poderá comprar e o operador visualizará esta mensagem."}},[o("q-input",{staticClass:"bg-light q-px-sm",attrs:{rows:"3","stack-label":"Restrição",type:"textarea",readonly:!e.permissoes.editarCondutaRestricao},model:{value:e.campos.condutaRestricao,callback:function(t){e.$set(e.campos,"condutaRestricao",t)},expression:"campos.condutaRestricao"}})],1)],1)]),o("q-tab-pane",{staticClass:"bg-white",attrs:{name:"profile-tab-5"}},[o("div",{staticClass:"gutter-sm items-center row"},[e.somenteCarteira?o("campo",{staticClass:"col-12 col-sm-4",attrs:{value:e.descricaoVendedor,before:[{icon:"search"}],"somente-leitura":"",disabled:"",rotulo:"Vendedor"}}):o("campo",{staticClass:"col-12 col-sm-4",attrs:{value:e.descricaoVendedor,before:[{icon:"search",handler:e.abrirModalVendedor}],"somente-leitura":"",rotulo:"Vendedor"},on:{click:e.abrirModalVendedor}}),o("input",{attrs:{type:"hidden"},domProps:{value:e.campos.idContatoVendedor}}),e.somenteCarteira?o("campo",{staticClass:"col-12 col-sm-4",attrs:{value:e.descricaoAssistente,before:[{icon:"search"}],"somente-leitura":"",disabled:"",rotulo:"Assistente"}}):o("campo",{staticClass:"col-12 col-sm-4",attrs:{value:e.descricaoAssistente,before:[{icon:"search",handler:e.abrirModalAssistente}],"somente-leitura":"",rotulo:"Assistente"},on:{click:e.abrirModalAssistente}}),o("input",{attrs:{type:"hidden"},domProps:{value:e.campos.idContatoAssistente}}),o("campo",{staticClass:"col-12 col-sm-4",attrs:{decimals:"2",rotulo:"Limite de crédito",tipo:"decimal","somente-leitura":!e.permissoes.editarLimiteCredito},model:{value:e.campos.limiteCredito,callback:function(t){e.$set(e.campos,"limiteCredito",t)},expression:"campos.limiteCredito"}}),o("campo",{staticClass:"col-12 col-sm-4",attrs:{value:e.descricaoItemTabelaPreco,before:[{icon:"search",handler:e.abrirModalItemTabelaPreco}],"somente-leitura":"",rotulo:"Tabela de preço"},on:{click:e.abrirModalItemTabelaPreco}}),o("input",{attrs:{type:"hidden"},domProps:{value:e.campos.idItemTabelaPreco}}),o("campo",{staticClass:"col-12 col-sm-4",attrs:{value:e.descricaoFormaPagamento,before:[{icon:"search",handler:e.abrirModalFormaPagamento}],"somente-leitura":"",rotulo:"Forma de pagamento"},on:{click:e.abrirModalFormaPagamento}}),o("input",{attrs:{type:"hidden"},domProps:{value:e.campos.idFormaPagamento}}),o("campo",{staticClass:"col-12 col-sm-4",attrs:{value:e.descricaoTransportadora,before:[{icon:"search",handler:e.abrirModalTransportadora}],"somente-leitura":"",rotulo:"Transportadora"},on:{click:e.abrirModalTransportadora}}),o("input",{attrs:{type:"hidden"},domProps:{value:e.campos.idContatoTransportadora}}),o("q-field",{staticClass:"col-12 col-sm-4"},[o("q-input",{attrs:{"float-label":"E-mail NFe"},model:{value:e.campos.emailNfe,callback:function(t){e.$set(e.campos,"emailNfe",t)},expression:"campos.emailNfe"}})],1),o("q-field",{staticClass:"col-12 col-sm"},[o("q-input",{attrs:{"float-label":"Observações na NFe"},model:{value:e.campos.observacaoNFE,callback:function(t){e.$set(e.campos,"observacaoNFE",t)},expression:"campos.observacaoNFE"}})],1)],1)])],1),o("div",{staticClass:"items-center justify-around q-my-lg row"},[e.campos.dataCadastro?o("small",[e._v("Data do cadastro: "+e._s(e._f("dataHora")(e.campos.dataCadastro)))]):e._e(),e.campos.dataAlteracao?o("small",[e._v("Última alteração: "+e._s(e._f("dataHora")(e.campos.dataAlteracao)))]):e._e()]),o("q-layout-footer",{staticClass:"bg-light no-shadow q-pa-sm text-right u-bordaCima",attrs:{reveal:""}},[o("div",{staticClass:"u-container relative-position"},[e.campos.ativo?[o("q-btn",{attrs:{color:"faded",flat:"",label:"Cancelar"},on:{click:function(t){return t.preventDefault(),e.aoCancelar(t)}}}),o("q-btn",{staticClass:"q-ml-sm no-shadow",attrs:{color:"primary",label:"Salvar",type:"submit"}}),o("q-btn",{attrs:{color:"faded",flat:"",icon:"delete",round:""},on:{click:e.removerContato}},[o("q-tooltip",[e._v("Remover")])],1)]:o("div",{staticClass:"q-py-sm text-faded"},[e._v("\n        Não é possível editar informações de um contato excluído.\n        "),o("q-btn",{staticClass:"q-ml-sm",attrs:{color:"primary"},on:{click:e.restaurarContato}},[e._v("Restaurar contato")])],1)],2)]),o("q-modal",{attrs:{"content-css":{minWidth:"80vw"}},model:{value:e.redeSocialModal,callback:function(t){e.redeSocialModal=t},expression:"redeSocialModal"}},[o("q-modal-layout",[o("q-toolbar",{attrs:{slot:"header"},slot:"header"},[o("q-toolbar-title",[e._v("Redes Sociais")]),o("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{dense:"",flat:"",icon:"close",round:""}})],1),o("div",{staticClass:"layout-padding"},[o("q-list",{attrs:{"no-border":"",separator:""}},e._l(e.campos.redeSocial,function(t,a){return o("q-item",{key:a,staticClass:"animate-pop q-px-none"},[o("q-item-side",[e._v(e._s(t.tipo))]),o("q-item-main",[e._v(e._s(t.link))]),o("q-item-side",{staticClass:"text-right"},[o("q-btn",{attrs:{color:"negative",size:"xs",icon:"remove",outline:"",round:""},on:{click:function(t){e.removerRedeSocial(a)}}},[o("q-tooltip",[e._v("Remover")])],1)],1)],1)})),o("q-field",{attrs:{error:e.redeSocialErro,"error-label":e.redeSocialErroDescricao}},[o("q-input",{attrs:{after:[{icon:"done",handler:e.adicionarRedeSocial}],color:"green",placeholder:"Insira a URL aqui.",type:"url"},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.adicionarRedeSocial(t):null}},model:{value:e.redeSocialCampo,callback:function(t){e.redeSocialCampo=t},expression:"redeSocialCampo"}})],1)],1)],1)],1),o("q-modal",{model:{value:e.modalFoto,callback:function(t){e.modalFoto=t},expression:"modalFoto"}},[o("q-modal-layout",[o("q-toolbar",{attrs:{slot:"header"},slot:"header"},[o("q-toolbar-title",[e._v("Alterar foto")]),o("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{dense:"",flat:"",icon:"close",round:""}})],1),o("div",{staticClass:"q-ma-sm"},[o("form",{on:{submit:function(t){return t.preventDefault(),e.confirmarFoto(t)}}},[o("q-field",{staticClass:"q-ma-md"},[o("q-uploader",{ref:"fotoCampoMobile",staticClass:"mobile-only",attrs:{"auto-expand":"",color:"none","float-label":"Foto","hide-upload-button":"","hide-upload-progress":"","inverted-light":"",url:""},on:{add:e.trocarFoto}}),o("q-uploader",{ref:"fotoCampoDesktop",staticClass:"mobile-hide",attrs:{"auto-expand":"",color:"none",extensions:".jpg,.jpeg","float-label":"Foto","hide-upload-button":"","hide-upload-progress":"","inverted-light":"",url:""},on:{add:e.trocarFoto}})],1),o("div",{staticClass:"row justify-end"},[o("q-btn",{attrs:{flat:"",color:"primary",type:"submit",label:"Confirmar"}})],1)],1)])],1)],1),o("q-modal",{model:{value:e.segmento.modal,callback:function(t){e.$set(e.segmento,"modal",t)},expression:"segmento.modal"}},[o("div",{staticClass:"q-ma-sm"},[o("form",{on:{submit:function(t){return t.preventDefault(),e.criarSegmento(t)}}},[o("div",{staticClass:"q-ma-md"},[o("div",{staticClass:"row q-headline text-weight-bold"},[e._v("Cadastrar "+e._s(e.segmentoProfissao))]),o("campo",{staticClass:"row",attrs:{erro:!!e.segmento.erro,"erro-rotulo":e.segmento.erro,maxlength:"50",rotulo:"Descrição"},model:{value:e.segmento.nome,callback:function(t){e.$set(e.segmento,"nome","string"===typeof t?t.trim():t)},expression:"segmento.nome"}})],1),o("div",{staticClass:"row justify-end"},[o("q-btn",{attrs:{flat:"",color:"primary",label:"Cancelar"},on:{click:function(t){e.segmento.modal=!1}}}),o("q-btn",{attrs:{flat:"",color:"primary",type:"submit",label:"Criar"}})],1)])])]),o("contato-criar",{attrs:{"cpf-cnpj":"","data-nascimento":"",observacao:""},on:{pronto:e.criarDependente},model:{value:e.modalDependente,callback:function(t){e.modalDependente=t},expression:"modalDependente"}}),o("prompt",{attrs:{prop:{dados:e.itemTabelasPreco,esquema:e.esquemaItemTabelaPreco,ordens:e.ordensItemTabelaPreco},tipo:"buscar"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.itens;return o("q-list",{attrs:{link:"","no-border":"",separator:""}},e._l(a,function(t){return o("q-item",{key:t.id,nativeOn:{click:function(o){e.selecionarItemTabelaPreco(t)}}},[o("q-item-main",[o("q-item-tile",{attrs:{label:""}},[e._v(e._s(t.descricao))]),o("q-item-tile",{attrs:{sublabel:""}},[o("strong",[e._v("Empresa: ")]),e._v(e._s(t.empresa))]),t.fatorPercentual?o("q-item-tile",{attrs:{sublabel:""}},[o("strong",[e._v("Fator (%): ")]),e._v(e._s(e._f("numero")(t.fatorPercentual,2))+" %")]):e._e(),o("q-item-tile",{attrs:{sublabel:""}},[o("strong",[e._v("Arredondamento: ")]),e._v(e._s(t.arredondamento?"Sim":"Não")+"\n          ")])],1)],1)}))}}]),model:{value:e.modalItemTabelaPreco,callback:function(t){e.modalItemTabelaPreco=t},expression:"modalItemTabelaPreco"}}),o("prompt",{attrs:{prop:{dados:e.formasPagamento,esquema:e.esquemaFormaPagamento,ordens:e.ordensFormaPagamento},tipo:"buscar"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.itens;return o("q-list",{attrs:{link:"","no-border":"",separator:""}},e._l(a,function(t){return o("q-item",{key:t.id,nativeOn:{click:function(o){e.selecionarFormaPagamento(t.id)}}},[o("q-item-main",[o("q-item-tile",{attrs:{label:""}},[e._v(e._s(t.descricao))]),o("q-item-tile",{attrs:{sublabel:""}},[o("strong",[e._v("Tipo financeito:")]),e._v(e._s(t.tipoFinanceiro))])],1)],1)}))}}]),model:{value:e.modalFormaPagamento,callback:function(t){e.modalFormaPagamento=t},expression:"modalFormaPagamento"}}),o("prompt",{attrs:{prop:{dados:e.contatoGruposUnicos,esquema:e.esquemaGrupo,ordens:e.ordensGrupo},tipo:"buscar"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.itens;return o("q-list",{attrs:{link:"","no-border":"",separator:""}},e._l(a,function(t){return o("q-item",{key:t.descricao,nativeOn:{click:function(o){e.selecionarGrupo(t.descricao)}}},[o("q-item-main",[o("q-item-tile",{attrs:{label:""}},[e._v(e._s(t.descricao))])],1)],1)}))}}]),model:{value:e.modalGrupo,callback:function(t){e.modalGrupo=t},expression:"modalGrupo"}}),o("prompt-contato-novo",{attrs:{filtro:{ativo:!0,vendedores:!0}},on:{selecionar:e.selecionarAssistente},model:{value:e.modalAssistente,callback:function(t){e.modalAssistente=t},expression:"modalAssistente"}}),o("prompt-contato-novo",{attrs:{filtro:{ativo:!0,transportadoras:!0}},on:{selecionar:e.selecionarTransportadora},model:{value:e.modalTransportadora,callback:function(t){e.modalTransportadora=t},expression:"modalTransportadora"}}),o("prompt-contato-novo",{attrs:{filtro:{ativo:!0,vendedores:!0}},on:{selecionar:e.selecionarVendedor},model:{value:e.modalVendedor,callback:function(t){e.modalVendedor=t},expression:"modalVendedor"}}),o("ConsultaCadastroContribuinte",{attrs:{modal:e.modalCadastroContribuinte,modalCertificado:e.modalCertificado},on:{salvar:e.consultarCadastroSefazSalvar,consultar:e.consultarCadastroSefazCertificado}})],1):e._e()},r=[];a._withStripped=!0;o("cadf"),o("8615"),o("55dd");var n=o("448a"),i=o.n(n),s=(o("6b54"),o("6762"),o("2fdb"),o("f576"),o("a481"),o("b54a"),o("7514"),o("ac4d"),o("8a81"),o("386d"),o("28a5"),o("ac6a"),o("96cf"),o("c973")),c=o.n(s),l=o("3156"),u=o.n(l),d=o("df3a"),m=o("a0fd"),p=o("88db"),f=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("q-modal",{attrs:{"content-css":{maxWidth:"800px"}},model:{value:e.modal.visivel,callback:function(t){e.$set(e.modal,"visivel",t)},expression:"modal.visivel"}},[o("q-modal-layout",[o("q-toolbar",{attrs:{slot:"header"},slot:"header"},[o("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{dense:"",flat:"",icon:"arrow_back",round:""}}),o("q-toolbar-title",[e._v("Cadastro de contribuinte no Sefaz")])],1),o("form",{on:{submit:function(t){t.preventDefault(),e.$emit("salvar")}}},[o("div",{staticClass:"q-px-lg q-py-md"},[o("campo",{staticClass:"row",attrs:{value:e.campos.nome,"somente-leitura":"",rotulo:"Razão social"}}),o("campo",{staticClass:"row",attrs:{value:e.campos.apelido,"somente-leitura":"",rotulo:"Fantasia"}}),o("div",{staticClass:"row gutter-x-sm"},[o("campo",{staticClass:"col-12 col-md-6",attrs:{value:e.campos.numeroDocumentoEstadual,"somente-leitura":"",rotulo:"IE"}}),o("campo",{staticClass:"col-12 col-md-6",attrs:{value:e.campos.dataAbertura,"somente-leitura":"",rotulo:"Data de abertura",tipo:"data"}})],1),o("campo",{staticClass:"row",attrs:{value:e.campos.regime,"somente-leitura":"",rotulo:"Regime"}}),o("div",{staticClass:"row q-mt-lg q-mb-sm q-ml-sm q-subheading"},[e._v("Endereço")]),e.campos.endereco?o("div",{staticClass:"row gutter-x-sm q-ml-xs"},[o("campo",{staticClass:"col-6 col-sm-4",attrs:{value:e.campos.endereco.cep,"somente-leitura":"",rotulo:"CEP"}}),o("campo",{staticClass:"col-2 col-sm-2",attrs:{value:e.campos.endereco.uf,"somente-leitura":"",rotulo:"UF"}}),o("campo",{staticClass:"col-10 col-sm-6",attrs:{value:e.campos.endereco.municipio,"somente-leitura":"",rotulo:"Cidade",ajuda:"Código IBGE: "+(e.campos.endereco.ibgeCod||"")}}),o("campo",{staticClass:"col-12 col-sm-7",attrs:{value:e.campos.endereco.logradouro,"somente-leitura":"",rotulo:"Endereço"}}),o("campo",{staticClass:"col-12 col-sm-2",attrs:{value:e.campos.endereco.numero,"somente-leitura":"",rotulo:"Número"}}),o("campo",{staticClass:"col-12 col-sm-3",attrs:{value:e.campos.endereco.complemento,"somente-leitura":"",rotulo:"Complemento"}}),o("campo",{staticClass:"col-12 col-sm-6",attrs:{value:e.campos.endereco.bairro,"somente-leitura":"",rotulo:"Bairro"}}),o("campo",{staticClass:"col-12 col-sm-6",attrs:{value:e.campos.endereco.pais,"somente-leitura":"",rotulo:"País"}})],1):e._e()],1),o("q-toolbar",{attrs:{slot:"footer",color:"light"},slot:"footer"},[o("q-toolbar-title",[o("div",{staticClass:"row justify-end"},[o("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{flat:"",color:"primary",label:"Cancelar"}}),o("q-btn",{attrs:{flat:"",color:"primary",type:"submit",label:"Confirmar"}})],1)])],1)],1)],1)],1),o("q-modal",{attrs:{"content-css":{maxWidth:"800px"}},model:{value:e.modalCertificado.visivel,callback:function(t){e.$set(e.modalCertificado,"visivel",t)},expression:"modalCertificado.visivel"}},[e.modalCertificado.visivel?o("q-modal-layout",[o("q-toolbar",{attrs:{slot:"header"},slot:"header"},[o("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{dense:"",flat:"",icon:"arrow_back",round:""}}),o("q-toolbar-title",[e._v("Cadastro de contribuinte no Sefaz")])],1),o("form",{on:{submit:function(t){t.preventDefault(),e.$emit("consultar")}}},[o("div",{staticClass:"q-px-lg q-py-md"},[e._l(e.camposCertificado.erros,function(t,a){return o("div",{key:a,staticClass:"row q-py-xs text-negative"},[e._v("\n            "+e._s(t)+"\n          ")])}),o("campo",{staticClass:"row q-mt-md",attrs:{rotulo:"Certificado",tipo:"seletor",opcoes:e.modalCertificado.opcoesCertificados},model:{value:e.camposCertificado.certificado,callback:function(t){e.$set(e.camposCertificado,"certificado",t)},expression:"camposCertificado.certificado"}}),o("campo",{staticClass:"row",attrs:{rotulo:"UF do Sefaz para consulta",tipo:"seletor",opcoes:e.metadados.infNFe.emit.enderEmit.UF._enumeration},model:{value:e.camposCertificado.uf,callback:function(t){e.$set(e.camposCertificado,"uf",t)},expression:"camposCertificado.uf"}})],2),o("q-toolbar",{attrs:{slot:"footer",color:"light"},slot:"footer"},[o("q-toolbar-title",[o("div",{staticClass:"row justify-end"},[o("q-btn",{attrs:{flat:"",color:"primary",type:"submit",label:"Nova consulta"}})],1)])],1)],1)],1):e._e()],1)],1)},h=[];f._withStripped=!0;var v=o("7330"),b={components:{Campo:p["a"]},computed:{campos:function(){return this.modal.campos},camposCertificado:function(){return this.modalCertificado.campos},metadados:function(){return v["a"]}},data:function(){return{}},methods:{},props:{modal:{required:!0,type:Object},modalCertificado:{required:!0,type:Object}},watch:{}},C=b,g=(o("61f3"),o("2877")),x=Object(g["a"])(C,f,h,!1,null,null,null);x.options.__file="ConsultaCadastroContribuinte.vue";var q=x.exports,w=o("68db"),k=o("57da"),$=o("7979"),y=o("41ff"),_=o("0dd6"),S=o("8908"),R=o("da3f"),D=o("2f215"),E=o.n(D),P=o("2f62"),O=o("96a1"),F=o("2ef0"),T=o("3e8a"),A=o("8149"),N=o("b5ae"),j=o("ed08"),M={components:{Avatar:d["a"],Badge:m["a"],Campo:p["a"],ConsultaCadastroContribuinte:q,ContatoCriar:w["a"],Icone:k["a"],Prompt:$["a"],PromptContatoNovo:y["a"]},computed:u()({badgeCor:function(){return this.contato.ativo?this.contato.condutaRestricao?"negative":this.contato.condutaObservacao?"orange":"positive":"faded"},ehEmpresa:function(){var e=this.campos.numeroDocumentoNacional;return!!e&&e.length>14},idade:function(){var e=this.campos.dataAbertura;if(!e)return 0;e=new Date(e);var t=new Date(Date.now()-e.getTime());return Math.abs(t.getUTCFullYear()-1970)},segmentoProfissao:function(){var e=this.campos.numeroDocumentoNacional||"";return e.length>14?"Segmento":e.length>=11?"Profissão":"Segmento/Profissão"},temRedeSocial:function(){return this.campos.redeSocial&&!!this.campos.redeSocial.length}},Object(P["b"])({contato:"contato",contatoBase:"contatoBase"})),data:function(){return{campos:{id:null,ativo:!0,consulta:[],endereco:[],filhos:[],grupo:[],nomesGrupo:[],redeSocial:[],telefone:[]},consultaDescricao:"",contatosModal:!1,descricaoAssistente:"",descricaoFormaPagamento:"",descricaoItemTabelaPreco:"",descricaoTransportadora:"",descricaoVendedor:"",filhoCampo:"",modalAssistente:!1,modalCadastroContribuinte:{visivel:!1,campos:{}},modalCertificado:{visivel:!1,campos:{},opcoesCertificados:[{}]},modalCidade:!1,modalDependente:!1,modalFormaPagamento:!1,modalFoto:!1,modalGrupo:!1,modalItemTabelaPreco:!1,modalTransportadora:!1,modalVendedor:!1,segmento:{erro:"",modal:!1,nome:""},redeSocialCampo:"",redeSocialErro:!1,redeSocialErroDescricao:"",redeSocialModal:!1,contatoUsuario:{},somenteCarteira:!1,contatosAtivos:[],cidadesAtivas:[],opcoesSegmento:[],formasPagamento:[],filhos:{},itemTabelasPreco:[],contatoGruposUnicos:[],enderecoTipos:[{label:"Principal",value:"Principal",icon:"star",color:"orange"},{label:"Cobrança",value:"Cobrança",icon:"attach_money"},{label:"Comercial",value:"Comercial",icon:"business"},{label:"Correspondência",value:"Correspondência",icon:"mail"},{label:"Entrega",value:"Entrega",icon:"local_shipping"},{label:"Instalação",value:"Instalação",icon:"build"},{label:"Residencial",value:"Residencial",icon:"store_mall_directory"},{label:"Outros",value:"Outros",icon:"location_city"}],esquemaFormaPagamento:[{prioridade:.8,rotulo:"Descrição",tipo:"texto",valor:"descricao"},{prioridade:.6,rotulo:"Tipo financeiro",tipo:"texto",valor:"tipoFinanceiro"}],esquemaItemTabelaPreco:[{prioridade:.8,rotulo:"Descrição",tipo:"texto",valor:"descricao"}],esquemaCidade:[{prioridade:.8,rotulo:"Município",tipo:"texto",valor:"nomeMunic"},{prioridade:.6,rotulo:"Distrito",tipo:"texto",valor:"nomeDistr"},{prioridade:.6,rotulo:"UF",tipo:"texto",valor:"siglaUf"},{prioridade:.2,rotulo:"Estado",tipo:"texto",valor:"nomeUf"},{prioridade:.4,rotulo:"Código IBGE",tipo:"texto",valor:"cidadeCodIbge"}],esquemaGrupo:[{prioridade:.8,rotulo:"Descricao",tipo:"texto",valor:"descricao"}],ordensFormaPagamento:[{icone:"arrow_downward",padrao:!0,rotulo:"Alfabética",valor:"descricao"},{icone:"arrow_upward",ordem:"desc",rotulo:"Alfabética-invertida",valor:"descricao"},{icone:"date_range",rotulo:"Fipo financeiro",valor:"tipoFinanceiro"}],ordensItemTabelaPreco:[{icone:"arrow_downward",padrao:!0,rotulo:"Alfabética",valor:"descricao"},{icone:"arrow_upward",ordem:"desc",rotulo:"Alfabética-invertida",valor:"descricao"}],ordensCidade:[{icone:"arrow_downward",padrao:!0,rotulo:"Município",valor:"nomeMunic"},{icone:"arrow_upward",ordem:"desc",rotulo:"Município invertido",valor:"nomeMunic"},{icone:"arrow_downward",rotulo:"Estado",valor:"nomeUf"},{icone:"arrow_upward",ordem:"desc",rotulo:"Estado invertido",valor:"nomeUf"},{icone:"arrow_downward",rotulo:"Distrito",valor:"nomeDistr"},{icone:"arrow_upward",ordem:"desc",rotulo:"Distrito invertido",valor:"nomeDistr"}],ordensGrupo:[{icone:"arrow_downward",padrao:!0,rotulo:"Alfabética",valor:"descricao"},{icone:"arrow_upward",ordem:"desc",rotulo:"Alfabética-invertida",valor:"descricao"}],regimes:[{label:"Normal",value:"Normal"},{label:"Simples Nacional",value:"SimplesNacional"}],sexos:[{label:"Masculino",value:"Masculino"},{label:"Feminino",value:"Feminino"},{label:"Outro",value:"Outro"}],telefoneTipos:[{label:"Principal",value:"Principal"},{label:"Comercial",value:"Comercial"},{label:"Celular",value:"Celular"},{label:"Fixo",value:"Fixo"},{label:"WhatsApp",value:"WhatsApp"}],permissoes:{},dbUsuario:A["a"].usuario}},methods:{indexarCidades:function(){var e=c()(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.cidade=[],this.cidadeIdx=void 0,Object(T["a"])()._cidade.toArray().then(function(){var e=c()(regeneratorRuntime.mark(function e(o){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o.forEach(function(e){e.ativo&&t.cidade.push({id:e.id,municipio:e.nomeMunic||"",distrito:e.nomeDistr||"",ibgeCod:e.cidadeCodIbge||"",uf:e.siglaUf||"",ufCod:e.uf||"",cidadeCodChave:e.cod})}),a=t.cidade,e.next=4,E()(function(){var e=this;this.ref("idx"),this.field("texto"),a.forEach(function(t,o){e.add({idx:o,texto:Object(j["removerAcentos"])(t.municipio+" "+t.uf+(t.distrito!==t.municipio?" "+t.distrito:""))})})});case 4:t.cidadeIdx=e.sent;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),buscarCidade:function(){var e=c()(regeneratorRuntime.mark(function e(t,o){var a,r,n,i,s,c,l,u,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(this.cidadeIdx||o([]),a=t.split(" "),a.forEach(function(e,t){e&&(/[^*]/g.test(e)?a[t]="+"+e+"*":(t>0?a[t-1]=a[t-1]+"*":a.length>0&&(a[1]="*"+a[1]),a[t]=""))}),t=Object(j["removerAcentos"])(a.filter(function(e){return e}).join(" ")),r=[],n=!0,i=!1,s=void 0,e.prev=8,c=this.cidadeIdx.search(t).slice(0,5)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0)u=l.value,d=this.cidade[u.ref],r.push({nomeMunic:d.municipio,cidadeCodIbge:d.ibgeCod,siglaUf:d.uf,ufCod:d.ufCod,cidadeCodChave:d.cidadeCodChave,label:d.municipio+" - "+d.uf,sublabel:(d.distrito!==d.municipio?"<b>Distrito:</b> "+d.distrito+"<br>":"")+"<b>Código IBGE:</b> "+d.ibgeCod,value:d.id});e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](8),i=!0,s=e.t0;case 16:e.prev=16,e.prev=17,n||null==c.return||c.return();case 19:if(e.prev=19,!i){e.next=22;break}throw s;case 22:return e.finish(19);case 23:return e.finish(16);case 24:o(r);case 25:case"end":return e.stop()}},e,this,[[8,12,16,24],[17,,19,23]])}));return function(t,o){return e.apply(this,arguments)}}(),abrirModalAssistente:function(){var e=c()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.modalAssistente=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),abrirModalFormaPagamento:function(){var e=c()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A["a"].formaPagamento.le();case 2:this.formasPagamento=e.sent,this.modalFormaPagamento=!0;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),abrirModalItemTabelaPreco:function(){var e=c()(regeneratorRuntime.mark(function e(){var t,o,a,r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A["a"].itemTabelaPreco.le({tabelaMaster:!0});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:this.itemTabelasPreco=e.t0,t=!0,o=!1,a=void 0,e.prev=9,r=this.itemTabelasPreco[Symbol.iterator]();case 11:if(t=(n=r.next()).done){e.next=19;break}return i=n.value,e.next=15,A["a"].contato.le({id:i.idEmpresa});case 15:i.empresa=e.sent.nome;case 16:t=!0,e.next=11;break;case 19:e.next=25;break;case 21:e.prev=21,e.t1=e["catch"](9),o=!0,a=e.t1;case 25:e.prev=25,e.prev=26,t||null==r.return||r.return();case 28:if(e.prev=28,!o){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(25);case 33:this.modalItemTabelaPreco=!0;case 34:case"end":return e.stop()}},e,this,[[9,21,25,33],[26,,28,32]])}));return function(){return e.apply(this,arguments)}}(),abrirModalCidade:function(){var e=c()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A["a"].cidade.le({ativo:!0});case 2:this.cidadesAtivas=e.sent,this.indiceEndereco=t,this.modalCidade=!0;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),abrirModalDependente:function(){this.modalDependente=!0},abrirModalFoto:function(){this.modalFoto=!0,this.imagemModalFoto="",this.$refs.fotoCampoMobile.reset(),this.$refs.fotoCampoDesktop.reset()},abrirModalGrupo:function(){var e=c()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("leContatoGruposUnicos");case 2:this.contatoGruposUnicos=e.sent,this.modalGrupo=!0;case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),abrirModalSegmento:function(){var e=c()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.segmento={modal:!0,nome:"",erro:""};case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),atualizarSegmentos:function(){var e=c()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,A["a"].contato.leUnicos("segmento");case 2:e.t0=function(e){return!!e},e.t1=function(e){return{rotulo:e,valor:e,sort:e.toLowerCase()}},t=e.sent.filter(e.t0).map(e.t1),this.opcoesSegmento=Object(F["orderBy"])(t,"sort","asc");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),abrirModalTransportadora:function(){var e=c()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.modalTransportadora=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),abrirModalVendedor:function(){var e=c()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.modalVendedor=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),abrirURL:O["a"],abrirRedeSocialModal:function(){this.redeSocialModal=!0},abrirTelefone:function(e){if(e.telefone){var t="WhatsApp"===e.tipoTelefone?"https://api.whatsapp.com/send?phone=":"tel:+";this.abrirURL(t+this.formatarTelefone(e.telefone))}},adicionarConsulta:function(){try{if(!this.consultaDescricao)return void this.$q.notifyError("Informar a descrição da consulta de cadastro");var e=this.consultaDescricao+" (Cadastro realizado pelo usuário: ".concat(A["a"].usuario.logado.nome," - CPF: ").concat(this.$filters.cpfCnpj(A["a"].usuario.logado.numeroDocumentoNacional),")");this.campos.consulta.push({id:Object(j["uuid"])(),idContato:this.campos.id,dataConsulta:Object(j["dataAtual"])(),descricao:e}),this.campos.consulta=Object(F["orderBy"])(this.campos.consulta,"dataConsulta","desc"),this.consultaDescricao=""}catch(e){this.$q.notifyError("Ocorreu um erro ao adicionar",e)}},adicionarEndereco:function(){this.campos.endereco.push(u()({},this.contatoBase.endereco[0],{id:Object(j["uuid"])(),idContato:this.contato.id}))},adicionarFilho:function(){var e=c()(regeneratorRuntime.mark(function e(t,o){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.filhoCampo="",o){e.next=8;break}return e.next=4,A["a"].contato.le({id:t.data.id});case 4:this.filhos[t.data.id]=e.sent,this.campos.filhos.push({id:Object(j["uuid"])(),idContato:this.campos.id,idContatoRelacionado:t.data.id,socio:!1,cobranca:!1}),this.campos.filhos.push({id:Object(j["uuid"])(),idContato:t.data.id,idContatoRelacionado:this.campos.id,socio:!1,cobranca:!1}),this.campos.filhos=Object(F["orderBy"])(this.campos.filhos,"apelido");case 8:case"end":return e.stop()}},e,this)}));return function(t,o){return e.apply(this,arguments)}}(),adicionarRedeSocial:function(){this.redeSocialErro=!1,this.redeSocialErroDescricao="";var e=this.redeSocialCampo.toLowerCase();if(!e)return!1;if(this.campos.redeSocial.find(function(t){return t.link===e}))return this.redeSocialErro=!0,this.redeSocialErroDescricao="Rede social já cadastrada.",!1;try{this.campos.redeSocial.push(u()({},Object(j["analisarRedeSocialLink"])(e),{id:Object(j["uuid"])(),idContato:this.campos.id})),Object(F["orderBy"])(this.campos.redeSocial,["tipo","link"]),this.redeSocialCampo=""}catch(e){this.redeSocialErro=!0,this.redeSocialErroDescricao="Insira uma URL válida."}},adicionarTelefone:function(){this.campos.telefone.push({id:Object(j["uuid"])(),idContato:this.contato.id})},aoCancelar:function(){var e=this;this.verificarSeAlterouCampos()?this.$q.dialog({cancel:"Continuar",message:"Ao continuar você irá perder todas as modificações.",ok:"Manter",title:"Tem certeza?"}).catch(function(){e.atualizar()}):this.$q.notifyPositive("Não há dados alterados.")},buscarFilhos:function(){var e=c()(regeneratorRuntime.mark(function e(t,o){var a,r,n,i,s,c,l,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t=t.trim(),!t){e.next=29;break}return e.next=5,A["a"].contatoBusca.filtrar(t,{ativo:!0});case 5:for(a=e.sent,r=[],n=!0,i=!1,s=void 0,e.prev=10,c=a[Symbol.iterator]();!(n=(l=c.next()).done);n=!0)u=l.value,r.push({data:u,label:u.apelido,stamp:"#0000000",sublabel:u.nome,value:u.nome});e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](10),i=!0,s=e.t0;case 18:e.prev=18,e.prev=19,n||null==c.return||c.return();case 21:if(e.prev=21,!i){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:o(r),e.next=30;break;case 29:o([]);case 30:e.next=36;break;case 32:e.prev=32,e.t1=e["catch"](0),o([]),this.$q.notify("Ocorreu um erro ao obter os contatos.");case 36:case"end":return e.stop()}},e,this,[[0,32],[10,14,18,26],[19,,21,25]])}));return function(t,o){return e.apply(this,arguments)}}(),confirmarFoto:function(){this.modalFoto=!1,this.campos.imagem=this.imagemModalFoto},consultarCadastroSefaz:function(){var e=c()(regeneratorRuntime.mark(function e(t){var o,a,r,n,i,s,c,l,u,d,m,p,f,h,v,b,C=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=this.$utils.filtrarDigitos(this.campos.numeroDocumentoNacional||""),14===o.length){e.next=3;break}return e.abrupt("return");case 3:if(!this.consultandoCadastroSefaz){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,this.consultandoCadastroSefaz=!0,this.$q.loading.show({message:"Consultando cadastro no Sefaz"}),a="",r=[],e.next=12,Object(T["a"])().empresa.toArray();case 12:return n=e.sent,i=n.filter(function(e){return e.idContato}).map(function(e){return e.idContato}),e.next=16,Object(T["a"])().contato.where("id").anyOf(i).toArray();case 16:return s=e.sent,e.next=19,Object(T["a"])().contatoEndereco.where("idContato").anyOf(i).toArray();case 19:for(c=e.sent,l=!0,u=!1,d=void 0,e.prev=23,m=function(){var e=f.value,t=c.filter(function(t){return t.idContato===e.id}),o=t.find(function(e){return"Principal"===e.grupo});o||(o=t[0]);var n=C.$utils.filtrarDigitos(e.numeroDocumentoNacional),i=String(C.$utils.mapearEstadoCodigo[o.uf]);if(14===n.length&&2===i.length&&2===o.uf.length){var s=n+" "+i+" "+o.uf+";";a+=s,r.push({valor:s,rotulo:e.apelido,sublabel:e.numeroDocumentoNacional})}},p=s[Symbol.iterator]();!(l=(f=p.next()).done);l=!0)m();e.next=32;break;case 28:e.prev=28,e.t0=e["catch"](23),u=!0,d=e.t0;case 32:e.prev=32,e.prev=33,l||null==p.return||p.return();case 35:if(e.prev=35,!u){e.next=38;break}throw d;case 38:return e.finish(35);case 39:return e.finish(32);case 40:return h="07660198000189 35 SP;",r.push({valor:h,rotulo:""}),a+=h,v=S["a"].consultarCadastroContribuinte(o,""),this.$utils.gconsole.log("consultarCadastroSefaz","\nxml envio\n",v),e.next=47,R["a"].consultarCadastroContribuinte(a,v);case 47:if(b=e.sent,!t||"Erro"!==b.status){e.next=52;break}return this.$utils.gconsole.log("consultarCadastroSefaz",b.mensagem),this.modalCertificado={visivel:!0,campos:{certificado:h,uf:(r[0].valor||"").substr(18,2),erros:b.mensagem.split("\n")},opcoesCertificados:r},e.abrupt("return");case 52:return this.$utils.verificarErro("Erro"===b.status,b.mensagem),e.next=55,this.consultarCadastroSefazConfirmar(b.xml);case 55:e.next=60;break;case 57:e.prev=57,e.t1=e["catch"](5),this.$q.notifyError("Erro ao consultar cadastro",e.t1);case 60:return e.prev=60,this.$q.loading.hide(),this.consultandoCadastroSefaz=!1,e.finish(60);case 64:case"end":return e.stop()}},e,this,[[5,57,60,64],[23,28,32,40],[33,,35,39]])}));return function(t){return e.apply(this,arguments)}}(),consultarCadastroSefazCertificado:function(){var e=c()(regeneratorRuntime.mark(function e(){var t,o,a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.$q.loading.show(),this.modalCertificado.campos.erros=[],t=this.$utils.filtrarDigitos(this.campos.numeroDocumentoNacional||""),o=this.modalCertificado.campos.certificado,14===t.length&&o){e.next=7;break}return e.abrupt("return");case 7:return a=this.modalCertificado.campos.uf||"",r=S["a"].consultarCadastroContribuinte(t,a),this.$utils.gconsole.log("consultarCadastroSefaz","\nxml envio\n",r),e.next=12,R["a"].consultarCadastroContribuinte(o,r);case 12:if(n=e.sent,"Erro"!==n.status){e.next=17;break}return this.$utils.gconsole.log("consultarCadastroSefaz",n.mensagem),this.modalCertificado.campos.erros=n.mensagem.split("\n"),e.abrupt("return");case 17:return this.modalCertificado.visivel=!1,e.next=20,this.consultarCadastroSefazConfirmar(n.xml);case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](0),this.$q.notifyError("Erro ao consultar cadastro",e.t0);case 25:return e.prev=25,this.$q.loading.hide(),e.finish(25);case 28:case"end":return e.stop()}},e,this,[[0,22,25,28]])}));return function(){return e.apply(this,arguments)}}(),consultarCadastroSefazConfirmar:function(){var e=c()(regeneratorRuntime.mark(function e(t){var o,a,r,n,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:o=(new DOMParser).parseFromString(t,"application/xml"),this.$utils.gconsole.log("consultarCadastroSefaz","\nxml resposta\n",o),a=o.getElementsByTagName("infCons")[0],r=a.getElementsByTagName("infCad")[0],n=r.getElementsByTagName("ender")[0],i=function(e,t){return(e.getElementsByTagName(t)[0]||{}).innerHTML||""},s={apelido:i(r,"xFant")||i(r,"xNome"),nome:i(r,"xNome"),numeroDocumentoEstadual:i(r,"IE"),regime:i(r,"xRegApur"),dataAbertura:i(r,"dIniAtiv"),endereco:{bairro:i(n,"xBairro"),cep:i(n,"CEP").padStart(8,"0").replace(/(\d{5})(\d{3})/g,"$1-$2"),complemento:i(n,"xCpl"),ibgeCod:i(n,"cMun"),logradouro:i(n,"xLgr"),municipio:i(n,"xMun"),numero:i(n,"nro"),uf:i(r,"UF"),pais:"Brasil"}},this.modalCadastroContribuinte={visivel:!0,campos:s},this.$utils.gconsole.log("consultarCadastroSefaz",s);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),consultarCadastroSefazSalvar:function(){var e=c()(regeneratorRuntime.mark(function e(){var t,o,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.modalCadastroContribuinte.campos,this.campos.apelido=t.apelido||t.nome,this.campos.nome=t.nome,this.campos.numeroDocumentoEstadual=t.numeroDocumentoEstadual,this.campos.dataAbertura=t.dataAbertura,this.campos.regime=t.regime.includes("SIMPLES NACIONAL")?"SimplesNacional":"Normal",o=t.endereco||{},a=this.campos.endereco.find(function(e){return e.bairro===o.bairro&&e.cep===o.cep&&e.complemento===o.complemento&&e.ibgeCod===o.ibgeCod&&e.logradouro===o.logradouro&&e.municipio===o.municipio&&e.numero===o.numero&&e.uf===o.uf}),r=this.campos.endereco.find(function(e){return"Principal"===e.grupo}),a||this.campos.endereco.push(u()({},t.endereco,{grupo:r?void 0:"Principal",id:Object(j["uuid"])(),idContato:this.contato.id})),this.modalCadastroContribuinte.visivel=!1;case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),consultarCep:function(e){var t=this.campos.endereco[e];if(t.cep){var o=t.cep.replace(/[^0-9]/g,"");o.length<8||Object(j["buscarEndereco"])(o).then(function(){var e=c()(regeneratorRuntime.mark(function e(o){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=o.data,t.bairro=a.bairro,t.complemento=a.complemento,t.ibgeCod=a.ibge,t.logradouro=a.logradouro,t.municipio=a.localidade,t.pais="Brasil",t.uf=a.uf,t.ufCod=j["mapearEstadoCodigo"][a.uf],!a.ibge){e.next=14;break}return e.next=12,A["a"].cidade.le({cidadeCodIbge:a.ibge.toString(),ativo:!0});case 12:r=e.sent,t.cidadeCodChave=(r.find(function(e){return e.cod})||{}).cod;case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}},consultarLogradouro:function(e,t,o){var a=this.campos.endereco[e],r=a.logradouro,n=a.municipio,i=a.uf;!i||2!==i.length||!n||n.length<=3||!t||t.length<=3||Object(j["buscarCep"])(i,n,r).then(function(e){var t=e.data;t=t.map(function(e){return{data:e,label:"\n            ".concat(e.logradouro,'\n            <small class="q-ml-sm text-faded">').concat(e.complemento,"</small>\n          "),stamp:e.cep,sublabel:"".concat(e.bairro,", ").concat(e.localidade," - ").concat(e.uf),value:e.logradouro}}),o(t)})},criarDependente:function(e){this.adicionarFilho({data:e},!1)},criarSegmento:function(){var e=c()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.segmento.nome){e.next=4;break}return this.segmento.erro="Favor preencher",e.abrupt("return");case 4:if(!(this.segmento.nome.length>50)){e.next=7;break}return this.segmento.erro="Máximo 50 caracteres",e.abrupt("return");case 7:this.opcoesSegmento=Object(F["orderBy"])(i()(this.opcoesSegmento).concat([{rotulo:this.segmento.nome,valor:this.segmento.nome,sort:this.segmento.nome.toLowerCase()}]),"sort","asc"),this.campos.segmento=this.segmento.nome,this.segmento.modal=!1,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),this.$q.notifyError("Ocorreu um erro ao criar",e.t0);case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),enderecoIcone:function(e){var t=this.enderecoTipos.find(function(t){return t.label===e})||{};return{color:t.color||"dark",name:t.icon||"store_mall_directory",size:"Principal"===e?"18px":"24px"}},fecharRedeSocialModal:function(){this.redeSocialModal=!1},formatarTelefone:function(e){return e||"string"===typeof e?"55"+e.replace(/\D/g,"").replace(/^55/,""):e},atualizar:function(){var e=c()(regeneratorRuntime.mark(function e(){var t,o,a,r,n,i,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.somenteCarteira=!1,this.contatoUsuario={},e.t1=!A["a"].usuario.logado.administrador,!e.t1){e.next=8;break}return e.next=7,A["a"].permissao.objetoClienteSistema("Diretiva_Contatos_AcessaTodosContatos");case 7:e.t1=e.sent;case 8:if(e.t0=e.t1,!e.t0){e.next=13;break}return e.next=12,A["a"].permissao.objeto("Diretiva_Contatos_AcessaTodosContatos");case 12:e.t0=!e.sent;case 13:if(!e.t0){e.next=21;break}if(t=A["a"].usuario.logado.codigoContato,!t){e.next=20;break}return e.next=18,Object(T["a"])().contato.where({codigoContato:t}).toArray();case 18:e.t2=function(e){return e.id},this.contatoUsuario=e.sent.find(e.t2);case 20:this.somenteCarteira=!0;case 21:return e.next=23,A["a"].contato.leCompleto(this.contato.id);case 23:if(e.t3=e.sent,e.t3){e.next=26;break}e.t3={};case 26:return o=e.t3,o.nomesGrupo||(o.nomesGrupo=[]),e.next=30,Object(T["a"])().contato.get(o.idContatoAssistente||"");case 30:if(e.t5=e.sent,e.t5){e.next=33;break}e.t5={};case 33:if(e.t4=e.t5.apelido,e.t4){e.next=36;break}e.t4="";case 36:return this.descricaoAssistente=e.t4,e.next=39,Object(T["a"])().contato.get(o.idContatoTransportadora||"");case 39:if(e.t7=e.sent,e.t7){e.next=42;break}e.t7={};case 42:if(e.t6=e.t7.apelido,e.t6){e.next=45;break}e.t6="";case 45:return this.descricaoTransportadora=e.t6,e.next=48,Object(T["a"])().contato.get(o.idContatoVendedor||"");case 48:if(e.t9=e.sent,e.t9){e.next=51;break}e.t9={};case 51:if(e.t8=e.t9.apelido,e.t8){e.next=54;break}e.t8="";case 54:return this.descricaoVendedor=e.t8,e.next=57,Object(T["a"])().formaPagamento.get(o.idFormaPagamento||"");case 57:if(e.t11=e.sent,e.t11){e.next=60;break}e.t11={};case 60:if(e.t10=e.t11.descricao,e.t10){e.next=63;break}e.t10="";case 63:return this.descricaoFormaPagamento=e.t10,e.next=66,Object(T["a"])().itemTabelaPreco.get(o.idItemTabelaPreco||"");case 66:if(e.t13=e.sent,e.t13){e.next=69;break}e.t13={};case 69:if(e.t12=e.t13.descricao,e.t12){e.next=72;break}e.t12="";case 72:this.descricaoItemTabelaPreco=e.t12,a=!0,r=!1,n=void 0,e.prev=76,i=o.filhos[Symbol.iterator]();case 78:if(a=(s=i.next()).done){e.next=86;break}return c=s.value,e.next=82,A["a"].contato.le({id:c.idContatoRelacionado});case 82:this.filhos[c.idContatoRelacionado]=e.sent;case 83:a=!0,e.next=78;break;case 86:e.next=92;break;case 88:e.prev=88,e.t14=e["catch"](76),r=!0,n=e.t14;case 92:e.prev=92,e.prev=93,a||null==i.return||i.return();case 95:if(e.prev=95,!r){e.next=98;break}throw n;case 98:return e.finish(95);case 99:return e.finish(92);case 100:this.campos=o||{},this.atualizarSegmentos(),this.$v&&this.$v.campos.$reset(),e.next=108;break;case 105:e.prev=105,e.t15=e["catch"](0),this.$q.notifyError("Ocorreu um erro ao obter contato.",e.t15);case 108:case"end":return e.stop()}},e,this,[[0,105],[76,88,92,100],[93,,95,99]])}));return function(){return e.apply(this,arguments)}}(),removerConfirma:function(){return this.$q.dialog({cancel:!0,color:"negative",message:"Ao continuar você irá remover este item.",ok:"Remover",title:"Tem certeza?"})},removerContato:function(){var e=c()(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=!1,e.prev=1,e.next=4,this.removerConfirma();case 4:t=!0,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),t=!1;case 10:if(this.$q.loading.show(),e.prev=11,!t){e.next=19;break}return this.campos.ativo=!1,e.next=16,this.$store.dispatch("salvarContato",this.campos);case 16:return e.next=18,this.atualizar();case 18:this.$q.notifyPositive("O contato foi excluído com sucesso.");case 19:e.next=24;break;case 21:e.prev=21,e.t1=e["catch"](11),this.$q.notifyError("Ocorreu um erro ao remover",e.t1);case 24:return e.prev=24,this.$q.loading.hide(),e.finish(24);case 27:case"end":return e.stop()}},e,this,[[1,7],[11,21,24,27]])}));return function(){return e.apply(this,arguments)}}(),removerEndereco:function(e){var t=this;this.removerConfirma().then(function(){e>=0&&t.campos.endereco.splice(e,1),t.campos.endereco.length||t.adicionarEndereco()})},removerFilho:function(e){var t=this;this.removerConfirma().then(function(){var o=t.campos.filhos.filter(function(t){return!(t.idContato===e.idContato&&t.idContatoRelacionado===e.idContatoRelacionado||t.idContato===e.idContatoRelacionado&&t.idContatoRelacionado===e.idContato)});t.campos.filhos=o})},removerFoto:function(){delete this.campo.imagem},removerRedeSocial:function(e){var t=this;this.removerConfirma().then(function(){e>=0&&(t.redeSocialCampo=t.campos.redeSocial[e].link,t.campos.redeSocial.splice(e,1))})},removerTelefone:function(){var e=c()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.removerConfirma();case 2:t>=0&&this.campos.telefone.splice(t,1),this.campos.telefone.length||this.adicionarTelefone();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),restaurarContato:function(){var e=c()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$q.loading.show(),e.prev=1,this.campos.ativo=!0,e.next=5,this.$store.dispatch("salvarContato",this.campos);case 5:return e.next=7,this.atualizar();case 7:this.$q.notifyPositive("O contato foi restaurado com sucesso."),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),this.$q.notify("Ocorreu um erro ao restaurar.");case 13:return e.prev=13,this.$q.loading.hide(),e.finish(13);case 16:case"end":return e.stop()}},e,this,[[1,10,13,16]])}));return function(){return e.apply(this,arguments)}}(),salvarContato:function(){var e=c()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.verificarSeAlterouCampos()){e.next=2;break}return e.abrupt("return",this.$q.notifyPositive("Não há dados alterados."));case 2:return e.next=4,Object(j["verificarSeCamposSaoValidos"])(this.$v.campos,this);case 4:if(e.sent){e.next=6;break}return e.abrupt("return",this.$q.notify("Há erros de validação no formulário."));case 6:return e.prev=6,this.$q.loading.show(),e.next=10,this.$store.dispatch("salvarContato",this.campos);case 10:return e.next=12,this.$store.dispatch("carregarContato",this.campos.id);case 12:return e.next=14,A["a"].contato.le({id:this.campos.id});case 14:A["a"].contato.selecionado=e.sent,this.$q.notifyPositive("Os dados do contato foram salvos com sucesso."),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](6),this.$q.notifyError("Ocorreu um erro ao salvar.",e.t0);case 21:return e.prev=21,this.$q.loading.hide(),e.finish(21);case 24:case"end":return e.stop()}},e,this,[[6,18,21,24]])}));return function(){return e.apply(this,arguments)}}(),conferirCidade:function(){var e=c()(regeneratorRuntime.mark(function e(t){var o,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:o=this.campos.endereco[t],a={},o.cidadeCodChave?a=this.cidade.find(function(e){return e.cidadeCodChave===o.cidadeCodChave})||{}:o.municipio="",o.municipio!==a.municipio&&(o.municipio=a.municipio||"");case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),selecionarCidade:function(){var e=c()(regeneratorRuntime.mark(function e(t,o){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=this.campos.endereco[o],a.municipio=t.nomeMunic||"",a.ibgeCod=t.cidadeCodIbge||"",a.uf=t.siglaUf||"",a.ufCod=t.ufCod||"",a.cidadeCodChave=t.cidadeCodChave||"",a.pais="Brasil";case 7:case"end":return e.stop()}},e,this)}));return function(t,o){return e.apply(this,arguments)}}(),selecionarFormaPagamento:function(){var e=c()(regeneratorRuntime.mark(function e(t){var o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.campos.idFormaPagamento=t,e.next=3,A["a"].formaPagamento.le({id:t});case 3:return o=e.sent,console.log(o),e.next=7,A["a"].formaPagamento.le({id:t});case 7:if(e.t0=e.sent.descricao,e.t0){e.next=10;break}e.t0="";case 10:this.descricaoFormaPagamento=e.t0,this.modalFormaPagamento=!1;case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),selecionarItemTabelaPreco:function(){var e=c()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.campos.idItemTabelaPreco=t.id,this.descricaoItemTabelaPreco=t.descricao||"",this.modalItemTabelaPreco=!1;case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),selecionarTransportadora:function(){var e=c()(regeneratorRuntime.mark(function e(t,o){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.campos.idContatoTransportadora=t,this.descricaoTransportadora=o.apelido||"",this.modalTransportadora=!1;case 3:case"end":return e.stop()}},e,this)}));return function(t,o){return e.apply(this,arguments)}}(),selecionarAssistente:function(){var e=c()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.campos.idContatoAssistente=t,e.next=3,A["a"].contato.le({id:t});case 3:if(e.t0=e.sent.apelido,e.t0){e.next=6;break}e.t0="";case 6:this.descricaoAssistente=e.t0,this.modalAssistente=!1;case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),selecionarGrupo:function(e){this.campos.nomesGrupo.includes(e)||(this.campos.nomesGrupo.push(e),this.campos.nomesGrupo=this.campos.nomesGrupo.sort()),this.modalGrupo=!1},selecionarVendedor:function(){var e=c()(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.campos.idContatoVendedor=t,e.next=3,A["a"].contato.le({id:t});case 3:if(e.t0=e.sent.apelido,e.t0){e.next=6;break}e.t0="";case 6:this.descricaoVendedor=e.t0,this.modalVendedor=!1;case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),selecionarLogradouro:function(e,t){var o=this.campos.endereco[e];o.bairro=t.data.bairro,o.cep=t.data.cep,o.complemento=t.data.complemento,o.ibgeCod=t.data.ibge,o.municipio=t.data.localidade,o.pais="Brasil"},telefoneIcone:function(e){return{Celular:{color:"dark",name:"phone_iphone",size:"18px"},Comercial:{color:"dark",name:"phone",size:"18px"},Fixo:{color:"dark",name:"phone",size:"18px"},Principal:{color:"orange",name:"star",size:"18px"},WhatsApp:{cor:"whatsapp",nome:"whatsapp",tamanho:18}}[e]||{color:"dark",name:"phone",size:"18px"}},trocarFoto:function(e){var t=this;this.$resizeImage(e[0],{crop:!0,outputFormat:"jpg",targetHeight:200,targetWidth:200},function(e,o){t.imagemModalFoto=o})},validarEndereco:function(e){var t=u()({},e);return delete t.id,delete t.idContato,Object.values(t).reduce(function(e,t){return e||!!t},!1)},verificarSeAlterouCampos:function(){var e=Object(j["clonarV2"])(this.campos.dadosOriginais),t={contato:Object(j["clonarV2"])(this.campos)};if(e&&t){t.consulta=t.contato.consulta,t.endereco=t.contato.endereco,t.filhos=t.contato.filhos,t.grupo=t.contato.grupo,t.nomesGrupo=t.contato.nomesGrupo,t.redeSocial=t.contato.redeSocial,t.telefone=t.contato.telefone,delete t.contato.dadosOriginais,delete t.contato.consulta,delete t.contato.endereco,delete t.contato.filhos,delete t.contato.filhosContato,delete t.contato.grupo,delete t.contato.nomesGrupo,delete t.contato.redeSocial,delete t.contato.telefone,e.contato.numeroDocumentoNacional!==t.contato.numeroDocumentoNacional&&(e.contato.numeroDocumentoNacional||"").replace(/[.-]/g,"")===(t.contato.numeroDocumentoNacional||"").replace(/[.-]/g,"")&&(e.contato.numeroDocumentoNacional=t.contato.numeroDocumentoNacional),delete t.contato.numeroDocumentoNacionalErro;var o=Object(j["diferenca"])(e,t);return j["gconsole"].log("ContatoFicha","verificarSeAlterouCampos",null!==o,o),null!==o}}},mixins:[_["a"]],validations:{campos:{email:{email:N["email"]},endereco:{$each:{bairro:{minLength:Object(N["minLength"])(2)},cep:{minLength:Object(N["minLength"])(9)},complemento:{},grupo:{},ibgeCod:{},logradouro:{minLength:Object(N["minLength"])(2)},municipio:{minLength:Object(N["minLength"])(2),required:Object(N["requiredIf"])(function(e){return this.validarEndereco(e)})},numero:{},pais:{minLength:Object(N["minLength"])(3),required:Object(N["requiredIf"])(function(e){return this.validarEndereco(e)})},uf:{minLength:Object(N["minLength"])(2),required:Object(N["requiredIf"])(function(e){return this.validarEndereco(e)})}}},nome:{minLength:Object(N["minLength"])(2),required:N["required"]},numeroDocumentoNacional:{cnpjOuCpfUnico:function(){var e=c()(regeneratorRuntime.mark(function e(t,o){var a,r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=(o||{}).id||"",e.next=3,Object(j["validarDocumentoNacionalUnico"])(t,a);case 3:return r=e.sent,n=r.valido,i=r.mensagem,o.numeroDocumentoNacionalErro=i,e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}));return function(t,o){return e.apply(this,arguments)}}()}}},watch:{"campos.nome":function(e,t){this.campos.apelido===t&&(this.campos.apelido=e)},"$route.params.id":function(){this.campos=u()({},this.contatoBase)},contato:function(){this.atualizar()}},beforeMount:function(){var e=this;this.permissoes={editarLimiteCredito:!1,editarCondutaRestricao:!1},A["a"].permissao.objeto("Diretiva_Contatos_EditaLimiteCredito").then(function(t){e.permissoes.editarLimiteCredito=t}),A["a"].permissao.objeto("Diretiva_Contatos_EditaCondutaRestricao").then(function(t){e.permissoes.editarCondutaRestricao=t})},created:function(){this.atualizar(),this.indexarCidades()}},I=M,z=Object(g["a"])(I,a,r,!1,null,null,null);z.options.__file="ContatoFicha.vue";t["default"]=z.exports},e25e:function(e,t,o){"use strict";var a=o("01f4"),r=o.n(a);r.a}}]);