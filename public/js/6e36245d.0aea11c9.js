(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["6e36245d"],{"01f4":function(t,e,a){},"2c76":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{staticClass:"shadow-3 filters row no-shadow"},[a("div",{staticClass:"col-12"},[a("q-toolbar",{staticClass:"no-shadow q-pa-none",attrs:{"text-color":"black",color:"transparent"}},[a("q-toolbar-title",{staticClass:"q-pa-none"},[a("div",{staticClass:"filters row content-stretch justify-between q-pt-sm q-pr-sm q-mt-md q-mb-md gutter-x-sm bg-white",staticStyle:{"border-radius":"5px","min-height":"50px"}},[a("div",{staticClass:"col-8"},[a("div",{staticClass:"row q-mb-sm"},[a("q-chips-input",{staticClass:"col q-mx-md",attrs:{color:"faded",placeholder:"Filtre por Empresa"},on:{remove:t.removerEmpresa},model:{value:t.nomesEmpresasSelecionadas,callback:function(e){t.nomesEmpresasSelecionadas=e},expression:"nomesEmpresasSelecionadas"}},[a("q-autocomplete",{attrs:{"value-field":"value"},on:{search:t.buscarEmpresas,selected:t.selecionarEmpresa}})],1)],1)]),a("div",{staticClass:"col-auto"},[a("div",{staticClass:"row q-mb-sm"},[a("campo",{staticClass:"col q-mx-md",attrs:{tipo:"data"},on:{input:t.filtrar},model:{value:t.filtro.periodo.ini,callback:function(e){t.$set(t.filtro.periodo,"ini",e)},expression:"filtro.periodo.ini"}})],1)]),a("div",{staticClass:"col-auto"},[a("div",{staticClass:"row q-mb-sm"},[a("label",{staticClass:"q-mx-md col-auto"},[t._v("até")])])]),a("div",{staticClass:"col-auto"},[a("div",{staticClass:"row q-mb-sm"},[a("campo",{staticClass:"col q-mx-md",attrs:{tipo:"data"},on:{input:t.filtrar},model:{value:t.filtro.periodo.fim,callback:function(e){t.$set(t.filtro.periodo,"fim",e)},expression:"filtro.periodo.fim"}})],1)]),a("q-btn",{staticClass:"no-shadow",attrs:{icon:"mdi-refresh",round:"",dense:"",flat:"",color:"faded"},nativeOn:{click:function(e){return t.filtrar(e)}}})],1)])],1)],1)]),a("div",{staticClass:"row gutter-sm q-pb-md"},[a("div",{staticClass:"col-12",staticStyle:{float:"right"}},[a("span",{staticStyle:{"font-size":"70%"}},[t._v("\n        Atualizado em: "+t._s(t._f("dataHora")(this.filtro.dataConsulta))+"\n        "),a("q-spinner",{directives:[{name:"show",rawName:"v-show",value:t.carregando,expression:"carregando"}],attrs:{color:"primary",size:20}})],1)]),a("div",{staticClass:"col-12 col-lg-3"},[a("q-card",{staticClass:"fit no-shadow",attrs:{inline:"",color:"white"}},[a("q-card-title",{staticClass:"q-title text-tertiary q-pb-sm"},[t._v("Pendências")]),a("q-card-main",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.carregando,expression:"!carregando"}]},[a("div",{staticClass:"row justify-around"},[a("div",{staticClass:"col-auto"},[a("q-toolbar-title",{staticClass:"q-display-1 text-weight-bold text-center text-negative",staticStyle:{cursor:"pointer"},nativeOn:{click:function(e){return t.irParaCockpitVendas(e)}}},[t._v("\n                  "+t._s(t._f("numero")(t.cockpit.pendencias.orcamentos))+"\n                ")]),a("q-card-main",{staticClass:"q-pa-none text-tertiary text-center"},[t._v("Orçamentos")])],1)])])])],1)],1),a("div",{staticClass:"col-12 col-lg-9"},[a("q-card",{staticClass:"fit no-shadow",attrs:{inline:"",color:"white"}},[a("q-card-title",{staticClass:"text-tertiary q-title q-pb-sm"},[t._v("Faturamento")]),a("q-card-main",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.carregando,expression:"!carregando"}]},[a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-bar bg-primary",style:t.faturamentoProgressBar.periodo}),a("div",{staticClass:"progress-bar progress-bar-striped bg-info",style:t.faturamentoProgressBar.hoje}),a("div",{staticClass:"progress-bar progress-bar-animated progress-bar-striped bg-success",style:t.faturamentoProgressBar.projecao})]),a("div",{staticClass:"row justify-between"},[a("div",{staticClass:"q-headline text-weight-bold text-left text-primary q-mt-sm q-pb-none",staticStyle:{"line-height":"22px"}},[t._v("\n                R$ "+t._s(t._f("numero")(t.cockpit.faturamento.periodo,2))),a("small",{staticClass:"q-body-2 text-tertiary text-weight-regular q-block q-ma-none q-pa-none",staticStyle:{display:"block"}},[t._v("Período")])]),a("div",{staticClass:"q-headline text-weight-bold text-center text-blue-5 q-mt-sm q-pb-none",staticStyle:{"line-height":"22px"}},[t._v("\n                R$ "+t._s(t._f("numero")(t.cockpit.faturamento.hoje,2))),a("small",{staticClass:"q-body-2 text-tertiary text-weight-regular q-block q-ma-none q-pa-none",staticStyle:{display:"block"}},[t._v("sendo Hoje")])]),a("div",{staticClass:"q-headline text-weight-bold text-right text-positive q-mt-sm q-pb-none",staticStyle:{"line-height":"22px"}},[t._v("\n                R$ "+t._s(t._f("numero")(t.cockpit.faturamento.projecao,2))),a("small",{staticClass:"q-body-2 text-tertiary text-weight-regular q-block q-ma-none q-pa-none",staticStyle:{display:"block"}},[t._v("Projeção Final")])])])])])],1)],1),a("div",{staticClass:"col-12 col-lg-3"},[a("q-card",{staticClass:"fit no-shadow",attrs:{inline:"",color:"white"}},[a("q-card-title",{staticClass:"text-tertiary q-title q-pb-sm"},[t._v("\n          Atendimento c/ vendas\n        ")]),a("q-card-main",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.carregando,expression:"!carregando"}]},[a("div",{staticClass:"row justify-around"},[a("div",[a("q-toolbar-title",{staticClass:"q-display-1 text-weight-bold text-center text-blue-8"},[t._v("\n                  "+t._s(t._f("numero")(t.cockpit.conversao.conversoesHoje))+"/"+t._s(t._f("numero")(t.cockpit.conversao.atendimentosHoje))+"\n                ")]),a("q-card-main",{staticClass:"q-pa-none text-tertiary text-center"},[t._v("\n                  Hoje\n                ")])],1),a("div",[a("q-toolbar-title",{staticClass:"q-display-1 text-weight-bold text-center text-blue-8"},[t._v("\n                  "+t._s(t._f("numero")(t.cockpit.conversao.conversoesPeriodo))+"/"+t._s(t._f("numero")(t.cockpit.conversao.atendimentosPeriodo))+"\n                ")]),a("q-card-main",{staticClass:"q-pa-none text-tertiary text-center"},[t._v("\n                  Período\n                ")])],1)])])])],1)],1),a("div",{staticClass:"col-12 col-lg-3"},[a("q-card",{staticClass:"fit no-shadow",attrs:{inline:"",color:"white"}},[a("q-card-main",{staticClass:"d-flex full-height column"},[a("q-card-main",{staticClass:"q-pa-none text-tertiary text-left"},[t._v("\n            Maior Venda Período\n          ")]),a("q-toolbar-title",{directives:[{name:"show",rawName:"v-show",value:!t.carregando,expression:"!carregando"}],staticClass:"q-display-1 text-weight-bold text-left text-blue-8 q-px-none"},[t._v("\n            "+t._s(t._f("numero")(t.cockpit.ticketMedio.maiorVendaPeriodo,2))+"\n\n            "),a("q-tooltip",[t._v("\n              Fatura N°. "+t._s(t.cockpit.ticketMedio.maiorVendaPeriodoNumeroFatura)),a("br"),t._v("\n              Cliente: "+t._s(t.cockpit.ticketMedio.maiorVendaPeriodoNomeCliente)+"\n            ")]),a("q-btn",{staticClass:"no-shadow",staticStyle:{float:"right"},attrs:{dense:"",round:"",icon:"mdi-trophy",color:"amber-7"}})],1),a("small",{directives:[{name:"show",rawName:"v-show",value:!t.carregando,expression:"!carregando"}],staticClass:"text-tertiary"},[t._v("Recorde Histórico\n            "),a("strong",[t._v(t._s(t._f("numero")(t.cockpit.ticketMedio.maiorVendaHistoria,2)))]),a("br")])],1)],1)],1),a("div",{staticClass:"col-6 col-lg-3 "},[a("q-card",{staticClass:"fit no-shadow",attrs:{inline:"",color:"white"}},[a("q-card-main",{staticClass:"d-flex full-height column"},[a("q-card-main",{staticClass:"q-pa-none text-tertiary text-left"},[t._v("\n            Ticket Médio Período\n          ")]),a("q-tooltip",[t._v("\n            "+t._s(t._f("data")(t.cockpit.parametros.periodoIniAnoAnterior))+"\n            "+t._s(t._f("data")(t.cockpit.parametros.periodoFimAnoAnterior))+"\n            do ano anterior\n          ")]),a("q-toolbar-title",{directives:[{name:"show",rawName:"v-show",value:!t.carregando,expression:"!carregando"}],staticClass:"q-display-1 text-weight-bold text-left text-blue-8 q-px-none"},[t._v("\n            "+t._s(t._f("numero")(t.cockpit.ticketMedio.ticketMedioPeriodo,2))+"\n            "),a("q-btn",{staticClass:"no-shadow",staticStyle:{float:"right"},attrs:{dense:"",round:"",icon:"mdi-bell",color:t.cockpit.ticketMedio.percentualTicketMedioYeartoDateRelAnterior>=0?"positive":"negative"}})],1),a("small",{directives:[{name:"show",rawName:"v-show",value:!t.carregando,expression:"!carregando"}],class:t.cockpit.ticketMedio.percentualTicketPeriodoRelAnterior>=0?"text-positive":"text-negative"},[a("span",{staticClass:"text-tertiary"},[t._v("\n              "+t._s(t._f("numero")(t.cockpit.ticketMedio.ticketMedioPeriodoAnoAnterior,2))+"\n            ")]),t._v("\n            (Δ "+t._s(t._f("numero")(t.cockpit.ticketMedio.percentualTicketPeriodoRelAnterior,2))+"%)\n            "),a("br")])],1)],1)],1),a("div",{staticClass:"col-6 col-lg-3"},[a("q-card",{staticClass:"fit no-shadow",attrs:{inline:"",color:"white"}},[a("q-card-main",{staticClass:"d-flex full-height column"},[a("q-card-main",{staticClass:"q-pa-none text-tertiary text-left"},[t._v("\n            Médio YtD\n          ")]),a("q-tooltip",[t._v("\n            "+t._s(t._f("data")(t.cockpit.parametros.ytDAnoAnteriorDia1))+"\n            "+t._s(t._f("data")(t.cockpit.parametros.ytDAnoAnteriorHoje))+"\n            do ano anterior\n          ")]),a("q-toolbar-title",{directives:[{name:"show",rawName:"v-show",value:!t.carregando,expression:"!carregando"}],staticClass:"q-display-1 text-weight-bold text-left text-blue-8 q-px-none"},[t._v("\n            "+t._s(t._f("numero")(t.cockpit.ticketMedio.ticketMedioYeartoDate,2))+"\n            "),a("q-btn",{staticClass:"no-shadow",staticStyle:{float:"right"},attrs:{dense:"",round:"",icon:"mdi-bell",color:t.cockpit.ticketMedio.percentualTicketMedioYeartoDateRelAnterior>=0?"positive":"negative"}})],1),a("small",{directives:[{name:"show",rawName:"v-show",value:!t.carregando,expression:"!carregando"}],class:t.cockpit.ticketMedio.percentualTicketMedioYeartoDateRelAnterior>=0?"text-positive":"text-negative"},[a("span",{staticClass:"text-tertiary"},[t._v("\n              "+t._s(t._f("numero")(t.cockpit.ticketMedio.ticketMedioYeartoDateAnoAnterior,2))+"\n            ")]),t._v("\n            (Δ "+t._s(t._f("numero")(t.cockpit.ticketMedio.percentualTicketMedioYeartoDateRelAnterior,2))+"%)\n            "),a("br")])],1)],1)],1),"optisoul"===t.sistemaPai?a("div",{staticClass:"col-12"},[a("q-card",{staticClass:"fit no-shadow",attrs:{inline:"",color:"white"}},[a("q-card-title",{staticClass:"q-title text-tertiary q-pb-sm"},[t._v("\n          Envelopes\n        ")]),a("q-card-main",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.carregando,expression:"!carregando"}]},[a("div",{staticClass:"row justify-around"},[a("div",{staticClass:"col-4 col-md-auto"},[a("q-toolbar-title",{staticClass:"q-display-1 text-weight-bold text-center text-negative",staticStyle:{cursor:"pointer"},nativeOn:{click:function(e){return t.irParaCockpitEnvelopes(e)}}},[t._v("\n                  "+t._s(t._f("numero")(t.cockpit.pendencias.envelopesAtrasados))+"\n                ")]),a("q-card-main",{staticClass:"q-pa-none text-tertiary text-center"},[t._v("\n                  Atrasados\n                ")])],1),a("div",{staticClass:"col-4 col-md-auto"},[a("q-toolbar-title",{staticClass:"q-display-1 text-weight-bold text-center text-negative",staticStyle:{cursor:"pointer"},nativeOn:{click:function(e){return t.irParaCockpitEnvelopes(e)}}},[t._v("\n                  "+t._s(t._f("numero")(t.cockpit.pendencias.envelopesHoje))+"\n                ")]),a("q-card-main",{staticClass:"q-pa-none text-tertiary text-center"},[t._v("\n                  Para hoje\n                ")])],1),a("div",{staticClass:"col-4 col-md-auto"},[a("q-toolbar-title",{staticClass:"q-display-1 text-weight-bold text-center text-negative",staticStyle:{cursor:"pointer"},nativeOn:{click:function(e){return t.irParaCockpitEnvelopes(e)}}},[t._v("\n                  "+t._s(t._f("numero")(t.cockpit.pendencias.envelopesAEntregar))+"\n                ")]),a("q-card-main",{staticClass:"q-pa-none text-tertiary text-center"},[t._v("\n                  A Entregar\n                ")])],1)])])])],1)],1):t._e(),a("div",{staticClass:"col-12 col-lg-6"},[a("q-card",{staticClass:"fit no-shadow",attrs:{inline:"",color:"white"}},[a("q-card-title",{staticClass:"text-tertiary q-title q-pb-sm"},[t._v("\n          Pós-venda\n        ")]),a("q-card-main",[a("q-table",{directives:[{name:"show",rawName:"v-show",value:!t.carregando,expression:"!carregando"}],staticClass:"no-shadow text-left",attrs:{data:t.cockpit.posVenda,columns:t.colunas.posVenda},scopedSlots:t._u([{key:"body",fn:function(e){return a("q-tr",{staticStyle:{cursor:"pointer"},attrs:{props:e}},[a("q-td",{key:"imagem",attrs:{props:e},nativeOn:{click:function(a){t.irParaAtendimentoVenda(e.row.idContato)}}},[a("div",{staticClass:"row items-center justify-between"},[a("avatar",{staticClass:"q-mr-sm",attrs:{imagem:(t.contato[e.row.idContato]||{}).imagem,rotulo:e.row.nome,tamanho:"40"}})],1)]),a("q-td",{key:"nome",attrs:{props:e},nativeOn:{click:function(a){t.irParaAtendimentoVenda(e.row.idContato)}}},[t._v("\n                "+t._s(e.row.nome)+"\n              ")]),a("q-td",{key:"telefone",staticClass:"text-no-wrap",attrs:{props:e},nativeOn:{click:function(a){t.abrirTelefone(e.row)}}},[a("div",{staticClass:"row items-center no-wrap"},[a("q-btn",{attrs:{color:"none",dense:"",flat:"",round:""}},[a("WhatsApp"===e.row.tipoTelefone?"icone":"q-icon",t._b({tag:"component"},"component",t.telefoneIcone(e.row.tipoTelefone),!1))],1),t._v("\n\n                  "+t._s(e.row.telefone)+"\n                ")],1)]),a("q-td",{key:"nroVenda",attrs:{props:e},nativeOn:{click:function(a){t.irParaAtendimentoVenda(e.row.idContato)}}},[t._v("\n                #"+t._s(e.row.nroVenda)+"\n              ")]),e.row.optisoul?a("q-td",{key:"nroEnvelope",attrs:{props:e},nativeOn:{click:function(a){t.irParaAtendimentoVenda(e.row.idContato)}}},[t._v("\n                #"+t._s(e.row.nroEnvelope)+"\n              ")]):t._e(),a("q-td",{key:"valor",attrs:{props:e},nativeOn:{click:function(a){t.irParaAtendimentoVenda(e.row.idContato)}}},[a("div",{staticClass:"row items-center"},[a("q-btn",{staticClass:"q-mx-xs",attrs:{color:"none",dense:"",flat:"",round:"",icon:"shopping_cart"}}),t._v("\n                  "+t._s(t._f("numero")(e.row.valor||0,2))+"\n                ")],1)])],1)}}])})],1)],1)],1),a("div",{staticClass:"col-12 col-lg-6"},[a("q-card",{staticClass:"fit no-shadow",attrs:{inline:"",color:"white"}},[a("q-card-title",{staticClass:"text-tertiary q-title q-pb-sm"},[t._v("\n          Aniversariantes\n        ")]),a("q-card-main",[a("q-table",{directives:[{name:"show",rawName:"v-show",value:!t.carregando,expression:"!carregando"}],staticClass:"no-shadow text-left",attrs:{data:t.cockpit.aniversariantes,columns:t.colunas.aniversariantes},scopedSlots:t._u([{key:"body",fn:function(e){return a("q-tr",{staticStyle:{cursor:"pointer"},attrs:{props:e}},[a("q-td",{key:"imagem",attrs:{props:e},nativeOn:{click:function(a){t.irParaAtendimentoContato(e.row.idContato)}}},[a("avatar",{attrs:{imagem:(t.contato[e.row.idContato]||{}).imagem,rotulo:e.row.nome,tamanho:"40"}})],1),a("q-td",{key:"nome",attrs:{props:e},nativeOn:{click:function(a){t.irParaAtendimentoContato(e.row.idContato)}}},[t._v("\n                "+t._s(e.row.nome))]),a("q-td",{key:"telefone",attrs:{props:e},nativeOn:{click:function(a){t.abrirTelefone(Object.assign({},e.row,{aniversario:!0}))}}},[a("div",{staticClass:"row items-center no-wrap"},[a("q-btn",{attrs:{color:"none",dense:"",flat:"",round:""}},[a("WhatsApp"===e.row.tipoTelefone?"icone":"q-icon",t._b({tag:"component"},"component",t.telefoneIcone(e.row.tipoTelefone),!1))],1),t._v("\n\n                  "+t._s(e.row.telefone)+"\n                ")],1)]),a("q-td",{key:"aniversario",attrs:{props:e},nativeOn:{click:function(a){t.irParaAtendimentoContato(e.row.idContato)}}},[t._v("\n                "+t._s(e.row.aniversario))])],1)}}])})],1)],1)],1)])],1)},r=[];o._withStripped=!0;a("551c"),a("ac4d"),a("8a81"),a("ac6a"),a("96cf");var n=a("c973"),i=a.n(n),s=(a("6762"),a("2fdb"),a("7514"),a("386d"),a("a481"),a("448a")),c=a.n(s),l=a("df3a"),d=a("88db"),p=a("57da"),m=a("3e8a"),u=a("ffe7"),f=a.n(u),v=a("96a1"),h=a("ed08"),g={components:{Avatar:l["a"],Campo:d["a"],Icone:p["a"]},computed:{faturamentoProgressBar:function(){var t,e,a,o,r,n={};return e=this.cockpit.faturamento.periodo||0,a=this.cockpit.faturamento.hoje||0,o=this.cockpit.faturamento.projecao||0,t=Object(h["arredondar"])(o),r=Object(h["arredondar"])(100*(e-a)/t),n.periodo="width:"+r+"%",r=Object(h["arredondar"])(100*a/t),n.hoje="width:"+r+"%",r=Object(h["arredondar"])(100*(o-e)/t),n.projecao="width:"+r+"%",n},colunas:function(){return{aniversariantes:[{name:"imagem",label:"",field:"imagem",align:"left"},{name:"nome",label:"Nome",field:"nome",sortable:!0,align:"left"},{name:"telefone",label:"Telefone",field:"telefone",align:"left"},{name:"aniversario",label:"Data",field:"aniversario",align:"left"}],posVenda:[{name:"imagem",label:"",field:"imagem",align:"left"},{name:"nome",label:"Cliente",field:"nome",sortable:!0,align:"left"},{name:"telefone",label:"Telefone",field:"telefone",align:"left"},{name:"nroVenda",label:"Venda",field:"numero",align:"left"}].concat(c()("optisoul"===this.sistemaPai?[{name:"nroEnvelope",label:"Envelope",field:"numero",align:"left"}]:[]),[{name:"valor",label:"Valor",field:"valor",align:"left"}])}}},data:function(){return{carregando:!0,cockpit:{faturamento:{periodo:0,hoje:0,projecao:0},ticketMedio:{ticketMedioPeriodo:0,ticketMedioPeriodoAnoAnterior:0,percentualTicketPeriodoRelAnterior:0,ticketMedioYeartoDate:0,ticketMedioYeartoDateAnoAnterior:0,percentualTicketMedioYeartoDateRelAnterior:0,maiorVendaPeriodo:0,maiorVendaPeriodoNumeroFatura:0,maiorVendaPeriodoNomeCliente:"",maiorVendaHistoria:0},conversao:{conversoesHoje:0,atendimentosHoje:0,conversoesPeriodo:0,atendimentosPeriodo:0},pendencias:{orcamentos:0,envelopesAtrasados:0,envelopesHoje:0,envelopesAEntregar:0,tarefas:0},parametros:{periodoIni:0,periodoFim:0,periodoIniAnoAnterior:0,periodoFimAnoAnterior:0,ytDDia1:0,ytDHoje:0,ytDAnoAnteriorDia1:0,ytDAnoAnteriorHoje:0},posVenda:[],aniversariantes:[]},contato:{},empresas:[],nomesEmpresasSelecionadas:[],filtro:{codigoClienteSistema:"",codigoContatoUsuario:"",empresas:[],periodo:{ini:"",fim:""}},sistemaPai:""}},methods:{irParaCockpitVendas:function(){this.$router.push({name:"CockpitVendas",params:{id:this.$route.params.id,periodo:{ini:this.cockpit.pendencias.orcamentosPeriodoIni,fim:this.cockpit.pendencias.orcamentosPeriodoFim}}})},irParaCockpitEnvelopes:function(){this.$router.push({name:"CockpitEnvelopes",params:{id:this.$route.params.id,filtroT:this.filtro}})},irParaAtendimentoContato:function(t){this.$router.push({name:"AtendimentoContato",params:{id:t}})},irParaAtendimentoVenda:function(t){this.$router.push({name:"AtendimentoVenda",params:{id:t}})},abrirTelefone:function(t){if(t.telefone){var e="WhatsApp"===t.tipoTelefone?"https://api.whatsapp.com/send?"+(t.aniversario?"text=Parabéns, "+t.nome+"&":"")+"phone=":"tel:+";Object(v["a"])(e+this.formatarTelefone(t.telefone))}},formatarTelefone:function(t){return t||"string"===typeof t?"55"+t.replace(/\D/g,"").replace(/^55/,""):t},telefoneIcone:function(t){return{Celular:{color:"dark",name:"phone_iphone",size:"18px"},Comercial:{color:"dark",name:"phone",size:"18px"},Fixo:{color:"dark",name:"phone",size:"18px"},Principal:{color:"orange",name:"star",size:"18px"},WhatsApp:{cor:"whatsapp",nome:"whatsapp",tamanho:18}}[t]||{color:"dark",name:"phone",size:"18px"}},buscarEmpresas:function(t,e){if(t=(t||"").trim(),t){var a=!!t.replace(/[^\d]/g,""),o=new f.a(this.empresas,{keys:[{name:"nome",weight:.9},{name:"apelido",weight:.9},a?{name:"numeroDocumentoNacional"}:{}]});e(o.search(t).map(function(t){return{value:t.codigoContato,label:t.nome,sublabel:t.numeroDocumentoNacional}}))}else e(this.empresas.map(function(t){return{value:t.codigoContato,label:t.nome,sublabel:t.numeroDocumentoNacional}}))},removerEmpresa:function(t){var e=this.empresas.find(function(e){return e.nome===t.value[0]});e&&(this.filtro.empresas=this.filtro.empresas.filter(function(t){return t!==e.codigoContato}),this.filtrar())},selecionarEmpresa:function(t){this.filtro.empresas.includes(t.value)?this.nomesEmpresasSelecionadas=this.nomesEmpresasSelecionadas.slice(0,this.nomesEmpresasSelecionadas.length-1):(this.filtro.empresas.push(t.value),this.nomesEmpresasSelecionadas.splice(this.nomesEmpresasSelecionadas.length-1,1,t.label),this.filtrar())},obterContatos:function(){var t=i()(regeneratorRuntime.mark(function t(e){var a,o,r,n,i,s,c,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a={},o=!0,r=!1,n=void 0,t.prev=4,i=e[Symbol.iterator]();case 6:if(o=(s=i.next()).done){t.next=16;break}if(c=s.value,!c.idContato||a[c.idContato]){t.next=13;break}return t.next=11,Object(m["a"])().contato.get(c.idContato);case 11:l=t.sent,l&&l.id&&(a[c.idContato]={imagem:l.imagem||""});case 13:o=!0,t.next=6;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](4),r=!0,n=t.t0;case 22:t.prev=22,t.prev=23,o||null==i.return||i.return();case 25:if(t.prev=25,!r){t.next=28;break}throw n;case 28:return t.finish(25);case 29:return t.finish(22);case 30:this.contato=a;case 31:case"end":return t.stop()}},t,this,[[4,18,22,30],[23,,25,29]])}));return function(e){return t.apply(this,arguments)}}(),obterConsultaRecente:function(){var t=i()(regeneratorRuntime.mark(function t(){var e,a,o,r,n,i,s,l,d,p=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.criarObjStoreIDB();case 2:return e=String(this.codigoClienteSistema)+"_"+String(this.codigoContatoUsuario)+"/vendedor",t.next=5,this.obterObjIDb(e);case 5:if(a=t.sent,!a){t.next=35;break}for(this.filtro={codigoClienteSistema:this.codigoClienteSistema,codigoContatoUsuario:this.codigoContatoUsuario,empresas:a.empresas,dataConsulta:new Date(a.dataConsulta),periodo:a.periodo},this.nomesEmpresasSelecionadas=[],o=!0,r=!1,n=void 0,t.prev=12,i=function(){var t=l.value,e=p.empresas.find(function(e){return e.codigoContato===t});e&&p.nomesEmpresasSelecionadas.push(e.nome)},s=this.filtro.empresas[Symbol.iterator]();!(o=(l=s.next()).done);o=!0)i();t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](12),r=!0,n=t.t0;case 21:t.prev=21,t.prev=22,o||null==s.return||s.return();case 24:if(t.prev=24,!r){t.next=27;break}throw n;case 27:return t.finish(24);case 28:return t.finish(21);case 29:return d=a.dados,t.next=32,this.obterContatos(c()(d.posVenda).concat(c()(d.aniversariantes)));case 32:return this.acertarDatas(d),this.cockpit=d,t.abrupt("return",!0);case 35:return t.abrupt("return",!1);case 36:case"end":return t.stop()}},t,this,[[12,17,21,29],[22,,24,28]])}));return function(){return t.apply(this,arguments)}}(),salvarConsultaRecente:function(){var t=i()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.criarObjStoreIDB();case 2:this.salvarObjIDb({id:String(this.filtro.codigoClienteSistema)+"_"+String(this.filtro.codigoContatoUsuario)+"/vendedor",periodo:this.filtro.periodo,dataConsulta:this.filtro.dataConsulta.toISOString(),empresas:this.filtro.empresas,dados:this.cockpit});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),criarObjStoreIDB:function(){var t=i()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if("indexedDB"in window){t.next=3;break}return console.log("Navegador sem suporte ao IndexedDB"),t.abrupt("return");case 3:return e=indexedDB.open("cockpit",1),e.onupgradeneeded=function(t){var e=t.target.result,a=e.createObjectStore("consultasRecentes",{keyPath:"id"});a.createIndex("id","id",{unique:!0})},t.abrupt("return",new Promise(function(t,a){e.onsuccess=function(e){t()},e.onerror=function(e){t()}}));case 6:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),salvarObjIDb:function(t){var e,a,o;if("indexedDB"in window)return e=new Promise(function(t,e){o=t}),a=indexedDB.open("cockpit",1),a.onsuccess=function(){var e=a.result.transaction(["consultasRecentes"],"readwrite"),r=e.objectStore("consultasRecentes");a=r.put(t),a.onsuccess=function(t){o()},a.onerror=function(t){o()}},e},obterObjIDb:function(t){var e,a,o;if("indexedDB"in window)return e=new Promise(function(t,e){o=t}),a=indexedDB.open("cockpit",1),a.onsuccess=function(){var e=a.result.transaction(["consultasRecentes"],"readwrite"),r=e.objectStore("consultasRecentes");a=r.get(t),a.onsuccess=function(t){o(t.target.result)},a.onerror=function(t){o()}},e},filtrar:function(){var t=i()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.carregando=!0,this.contato={},this.filtro.periodo.ini=new Date(this.filtro.periodo.ini).toISOString(),this.filtro.periodo.fim=new Date(this.filtro.periodo.fim).toISOString(),this.filtro.dataConsulta=new Date,t.next=7,this.$utils.geeksApi({"cockpit-vendedor":{funcao:"4AA26CFA-1FE9-426C-955D-09206DE424CB",codigoClienteSistema:this.filtro.codigoClienteSistema,codigoContatoUsuario:this.filtro.codigoContatoUsuario,empresas:this.filtro.empresas,periodo:this.filtro.periodo}});case 7:return e=t.sent,e=e.data["cockpit-vendedor"],t.next=11,this.obterContatos(c()(e.posVenda).concat(c()(e.aniversariantes)));case 11:this.acertarDatas(e),this.cockpit=e,this.salvarConsultaRecente(),this.carregando=!1;case 15:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),acertarDatas:function(t){var e=new Date((new Date).setHours(0,0,0,0)).toISOString().replace(/\d{4}-\d{2}-\d{2}/g,"");t.parametros.periodoIni=(t.parametros.periodoIni||"").replace(/T.+$/g,e),t.parametros.periodoFim=(t.parametros.periodoFim||"").replace(/T.+$/g,e),t.parametros.periodoIniAnoAnterior=(t.parametros.periodoIniAnoAnterior||"").replace(/T.+$/g,e),t.parametros.periodoFimAnoAnterior=(t.parametros.periodoFimAnoAnterior||"").replace(/T.+$/g,e),t.parametros.ytDDia1=(t.parametros.ytDDia1||"").replace(/T.+$/g,e),t.parametros.ytDHoje=(t.parametros.ytDHoje||"").replace(/T.+$/g,e),t.parametros.ytDAnoAnteriorDia1=(t.parametros.ytDAnoAnteriorDia1||"").replace(/T.+$/g,e),t.parametros.ytDAnoAnteriorHoje=(t.parametros.ytDAnoAnteriorHoje||"").replace(/T.+$/g,e)},atualizar:function(){var t=i()(regeneratorRuntime.mark(function t(){var e,a,o,r,n,i,s,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=this.$route.params.id,Object(h["verificarErro"])(!r,"Id do contato não encontrado"),t.next=5,Object(m["a"])().contato.get(r);case 5:if(t.t0=t.sent,t.t0){t.next=8;break}t.t0={};case 8:return n=t.t0,o=n.codigoContato,Object(h["verificarErro"])(!o,"Contato não encontrado"),e=JSON.parse(localStorage.getItem("clienteSistema"))||{},a=e.codigoClienteSistema,Object(h["verificarErro"])(!a,"Cliente Sistema não encontrado"),this.codigoClienteSistema=a,this.codigoContatoUsuario=o,t.next=18,Object(m["a"])().empresa.toArray();case 18:return i=t.sent,this.empresas=i.map(function(t){return{codigoContato:t.codigoContato,nome:t.nome,apelido:t.apelido,numeroDocumentoNacional:t.numeroDocumentoNacional}}),s=new Date(new Date((new Date).setDate(1)).setHours(0,0,0,0)),c=new Date(new Date(new Date(s).setMonth(s.getMonth()+1)).setDate(0)),this.nomesEmpresasSelecionadas=[],this.filtro={codigoClienteSistema:this.codigoClienteSistema,codigoContatoUsuario:this.codigoContatoUsuario,empresas:[],dataConsulta:new Date,periodo:{ini:s,fim:c}},t.next=26,this.obterConsultaRecente();case 26:if(!t.sent){t.next=30;break}if(this.carregando=!1,new Date-new Date(this.filtro.dataConsulta)>3e5){t.next=30;break}return t.abrupt("return");case 30:this.filtrar(),t.next=36;break;case 33:t.prev=33,t.t1=t["catch"](0),this.$q.notifyError("Não foi possível carregar os dados do cockpit",t.t1);case 36:case"end":return t.stop()}},t,this,[[0,33]])}));return function(){return t.apply(this,arguments)}}()},watch:{"$route.params.id":function(){this.atualizar()}},mounted:function(){this.sistemaPai=Object(h["sistemaPai"])(),this.atualizar()}},w=g,b=(a("9fa6"),a("2877")),C=Object(b["a"])(w,o,r,!1,null,"76f10fd8",null);C.options.__file="CockpitVendedor.vue";e["default"]=C.exports},"57da":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{class:t.classes,style:t.estilos},[a("use",{attrs:{"xlink:href":t.iconeComposto}})])},r=[];o._withStripped=!0;a("c5f6");var n={computed:{classes:function(){return["Icone",!!this.cor&&"text-".concat(this.cor)]},estilos:function(){return{height:"".concat(this.tamanho,"px"),width:"".concat(this.tamanho,"px")}},iconeComposto:function(){return"statics/icones.svg#"+this.nome}},props:{cor:{type:[Boolean,String],default:!1},nome:{type:String,required:!0},tamanho:{type:[Number,String],default:24}}},i=n,s=(a("e25e"),a("2877")),c=Object(s["a"])(i,o,r,!1,null,null,null);c.options.__file="Icone.vue";e["a"]=c.exports},"96a1":function(t,e,a){"use strict";var o=a("a60d");e["a"]=function(t,e){if(o["a"].is.cordova&&navigator&&navigator.app)return navigator.app.loadUrl(t,{openExternal:!0});var a=window.open(t,"_blank");if(a)return a.focus(),a;e&&e()}},"9fa6":function(t,e,a){"use strict";var o=a("b2be"),r=a.n(o);r.a},b2be:function(t,e,a){},e25e:function(t,e,a){"use strict";var o=a("01f4"),r=a.n(o);r.a}}]);