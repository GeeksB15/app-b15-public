"use strict";(self.webpackChunkb15=self.webpackChunkb15||[]).push([[987],{28349:(e,o,t)=>{t.d(o,{Z:()=>le});var a=t(34182);const i={class:"col-auto q-pl-none items-center"},r={class:"col"},l={class:"col-12"},d=(0,a.createTextVNode)(" Finalizado "),n=(0,a.createTextVNode)(" Emissão "),s=(0,a.createTextVNode)(" Vendedor(a) "),c=(0,a.createTextVNode)("Valor total"),m=(0,a.createTextVNode)("NFe de Saída/Venda"),u=(0,a.createTextVNode)("NFe de Entrada/Devolução"),p=(0,a.createTextVNode)("NFe de Remessa"),f=(0,a.createTextVNode)("Migrar para nova fatura"),h=(0,a.createTextVNode)("Histórico do Status"),v=(0,a.createTextVNode)("Resetar Envio"),V={class:"col-12 col-md-4"},g=(0,a.createTextVNode)(" OS "),C=(0,a.createTextVNode)("OS "),w={class:"col-12 col-md-4"},N={class:"q-px-sm"},x={class:"q-mt-sm"},b={style:{display:"block"}},y=(0,a.createElementVNode)("br",null,null,-1),k={class:"round-borders"},E={class:"col-12 col-md-4"},D={class:"q-px-sm"},_=(0,a.createTextVNode)(" Faturamento "),S={class:"q-mt-sm"},q={style:{display:"block"}},F={class:"q-px-sm text-right"},$={class:"q-mt-none text-right"},T=(0,a.createElementVNode)("small",{class:"q-mr-xs"},"Desconto",-1),I={class:"text-subtitle1"};var B=t(33337),A=(t(91330),t(72407)),z=t(40480),O=t(19306),P=t(39697),R=t(77418),U=t(35433),M=t(88603);t(65278);const Z={alterados:0,arquivo:null,cor:"text-negative",corFinal:"",erro:"",erros:0,incluidos:0,listaErros:[],mensagem:"",mensagemFinal:"",modalResultado:!1},L={components:{Avatar:B.Z,Badge:A.Z,DocumentosFiscais:z.Z,VendaModal:P.Z,ModalHistoricoStatus:O.Z},computed:{config:()=>R.db.configuracoes.valores,podeMigrarFatura(){return!["Aguardando Estoque","Aguardando Financeiro","Aguardando Aprovação","Aguardando Pagamento","Cancelado","Não Aprovado","Orçamento","Faturado"].includes(this.dados.venda.status)}},data:()=>({importar:$utils.clonarV2(Z),dbUsuario:R.db.usuario,dados:{venda:{}},contatos:{},faturasAbertas:[],detalhesVisivel:!1,visibilidade:{botao:{editar:!1,remover:!1}},modalDevolucaoGarantia:{visivel:!1,item:{},orcamento:{}},sistemaPai:"",configImpressaoOrcamento:[],configImpressaoEnvelope:[]}),emits:["executar"],methods:{irParaAtendimentoFatura(e){this.$router.push({name:"AtendimentoFatura",params:{id:e}})},async migrarFatura(e){try{await this.$q.dialog({message:"Esta ação irá migrar esta venda para outra fatura.",noRefocus:!0,preventClose:!0,title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0}})}catch(e){return}e||(e=R.db.fatura.criar(this.dados.venda),await R.db.fatura.grava({fatura:e})),e.id?(await R.db.venda.grava({venda:{id:this.dados.venda.id,idFatura:e.id},vendaOriginal:this.dados.venda}),localStorage.setItem("idFatura",e.id),this.dados.venda.idContato&&(this.$emit("executar","atualizar"),this.irParaAtendimentoFatura(this.dados.venda.idContato))):this.$q.notify("Não foi possível realizar a operação")},alternarDetalhes(){this.detalhesVisivel=!this.detalhesVisivel},async atualizar(){const e=await R.db.venda.leCompleto(this.id);if(e.venda.rotaJson&&e.venda.rotaJson.length>3&&(e.rotaJson=JSON.parse(e.venda.rotaJson)),this.fatura&&(e.fatura=this.fatura),e.carrinho.sort(((e,o)=>new Date(e.dataHoraEmissao)<new Date(o.dataHoraEmissao)?-1:1)),e.oss.sort(((e,o)=>new Date(e.documento.dataHoraEmissao)<new Date(o.documento.dataHoraEmissao)?-1:1)),e.customs.sort(((e,o)=>new Date(e.documento.dataHoraEmissao)<new Date(o.documento.dataHoraEmissao)?-1:1)),(e.venda||{}).idContato&&(e.venda||{}).idEmpresa){let o=[];o=await R.db.fatura.obterAbertas(e.venda.idContato,e.venda.idEmpresa),this.faturasAbertas=o.sort(((e,o)=>!e.numero||e.numero<o.numero?-1:1))}const o={};if(e.venda.idContato){const t=e.venda.idContato;o[t]||(o[t]=await R.db.contato.le({id:t}))}if(e.venda.idContatoVendedor){const t=e.venda.idContatoVendedor;o[t]||(o[t]=await R.db.contato.le({id:t}))}this.configuraImpressaoEnvelope(e.venda.idEmpresa),this.configuraImpressaoOrcamento(e.venda.idEmpresa),this.contatos=o,this.dados=e,await this.$nextTick(),e.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:e.venda.id}),localStorage.removeItem("idVenda"))},async configuraImpressaoEnvelope(e){const o=await R.db.configuracoes.porNome("impressao.envelope",e);this.configImpressaoEnvelope=[...o.length?o.map((e=>({texto:"Imprimir Envelope",...e}))):[{valor:"envelope",texto:"Imprimir Envelope"},{valor:"envelopeMini",texto:"Imprimir Envelope Mini"}]]},async configuraImpressaoOrcamento(e){const o=await R.db.configuracoes.porNome("impressao.venda",e);this.configImpressaoOrcamento=[...o.length?o.map((e=>({texto:"Imprimir Orçamento",...e}))):[{valor:"invoice",texto:"Orçamento/Venda (Invoice)"},"optisoul"===this.sistemaPai?{valor:"orcamento",texto:"Orçamento (Antigo)"}:{}]]},copiarUid(){const e=this.$refs.uid;e.type="text";try{e.select(),document.execCommand("copy"),this.$q.notify({message:"UID copiado para a área de transferência.",type:"info"})}catch(e){this.$q.notify("Erro ao copiar.")}e.type="hidden",window.getSelection().removeAllRanges()},descricaoEnvelope(e){let o="";for(const t of this.dados.itensEnvelopes)t.idDocumentoAdicional===e&&t.descricaoItem.trim()&&(o+=t.descricaoItem.trim()+" | ");return o.slice(0,-3)},async devolucaoGarantia(e){let o=await R.db.documento.le({idContato:R.db.contato.selecionado.id,tipo:"Venda",status:"Orçamento"});o=(0,M.orderBy)(o,"dataHoraEmissao","desc"),o.length?this.modalDevolucaoGarantia={visivel:!0,item:e,orcamento:o[0]}:this.$q.notify({message:"Crie um orçamento para inclusão de devolução/garantia.",type:"info"})},editar(){this.$refs.vendaModal.mostrar({id:this.dados.venda.id})},executar(e){switch(e){case"atualizar":this.atualizar();break;case"cancelar":case"finalizar":case"reprovar":this.$emit("executar","atualizar");break;case"retornarOrcamento":this.$emit("executar",e)}},async finalizaDevolucaoGarantia(e,o,t){const a=(0,U.clonar)(e);"devolucao"===o&&(a.operacao="Devolução de Venda"),"garantia"===o&&(a.operacao="Garantia de Venda",a.motivo=t),a.idDocumentoItemVenda=a.id,a.idDocumentoVenda=a.idDocumento,a.id=(0,U.uuid)(),a.idDocumento=this.modalDevolucaoGarantia.orcamento.id,a.status="Orçamento",a.operacaoFator=1,a.codigoCfop=20,a.idCfop=(await R.db.cfop.le({codigoCfop:20}))[0].id,a.dataHoraEmissao=(0,U.dataAtual)(),a.dataHoraFinalizado="",a.subTotal=-1*a.subTotal,a.total=-1*a.total,a.valorItem=-1*a.valorItem,a.descontoSubTotal=0,delete a.codigoCfop,delete a.codigoDocumento,delete a.codigoDocumentoItem,delete a.codigoItem,delete a.codigoPlanoContaDestino,delete a.codigoPlanoContaEstoque,await R.db.documentoItem.grava({atual:a}),this.$q.notify({message:"Item adicionado ao orçamento.",type:"positive"}),localStorage.setItem("idVenda",this.modalDevolucaoGarantia.orcamento.id),this.$emit("executar","atualizar")},async remover(){this.$q.dialog({message:"Esta ação irá remover esta venda da fatura",title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk((async()=>{let e=(0,U.clonar)(this.dados.venda);this.dados.venda.idFatura="",await R.db.venda.grava({venda:this.dados.venda,vendaOriginal:e}),this.$emit("executar","remover")}))}},props:{id:{required:!0,type:String},sendRouteEasy:{required:!1,type:Function},sendRouteEasyAll:{required:!1,type:Function},fatura:{required:!1,type:Object},resetarEnvio:{required:!1,type:Function}},watch:{async dados(e){this.visibilidade.botao.editar=!1,this.visibilidade.botao.remover=!1,(await $db.contato.ler({filtros:{ativo:!0,empresas:!0}})).data.find((o=>o.id===e.venda.idEmpresa))&&(e.venda.idFatura&&this.faturasAbertas.find((o=>o.id===e.venda.idFatura))&&(this.visibilidade.botao.remover=!0),["Cancelado","Não Aprovado"].includes(e.venda.status)||e.venda.idFatura||(this.visibilidade.botao.editar=!0))}},mounted(){this.sistemaPai=(0,U.sistemaPai)(),this.atualizar()}};var Q=t(74260),H=t(77953),J=t(60880),G=t(31106),j=t(76106),X=t(4957),W=t(37617),Y=t(54707),K=t(25901),ee=t(68900),oe=t(48761),te=t(83831),ae=t(98586),ie=t(7518),re=t.n(ie);const le=(0,Q.Z)(L,[["render",function(e,o,t,B,A,z){const O=(0,a.resolveComponent)("badge"),P=(0,a.resolveComponent)("q-item-section"),R=(0,a.resolveComponent)("avatar"),U=(0,a.resolveComponent)("q-item-label"),M=(0,a.resolveComponent)("q-badge"),Z=(0,a.resolveComponent)("row"),L=(0,a.resolveComponent)("q-tooltip"),Q=(0,a.resolveComponent)("q-btn"),H=(0,a.resolveComponent)("q-icon"),J=(0,a.resolveComponent)("q-item"),G=(0,a.resolveComponent)("q-list"),j=(0,a.resolveComponent)("q-menu"),X=(0,a.resolveComponent)("q-toolbar-title"),W=(0,a.resolveComponent)("documentos-fiscais"),Y=(0,a.resolveComponent)("q-separator"),K=(0,a.resolveComponent)("VendaModal"),ee=(0,a.resolveComponent)("modal-historico-status"),oe=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[A.dados.venda.id?((0,a.openBlock)(),(0,a.createBlock)(J,{key:0,id:"VendaCard","manual-focus":"",clickable:"",class:"items-center d-flex q-pa-xs"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{avatar:"",center:"",class:"mw100",onClick:z.editar},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(O,{class:"q-mr-sm",escuro:"",cor:"positive",onClick:z.copiarUid},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" #"+(0,a.toDisplayString)(parseInt(A.dados.venda.numero)||(A.dados.venda.id||"").slice(-6))+" ",1),(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"hidden","onUpdate:modelValue":o[0]||(o[0]=e=>A.dados.venda.id=e),ref:"uid"},null,512),[[a.vModelText,A.dados.venda.id]])])),_:1},8,["onClick"])])),_:1},8,["onClick"]),(0,a.createVNode)(P,{onClick:z.editar},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(Z,{class:"items-center"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",i,[(0,a.createVNode)(R,{imagem:(A.contatos[A.dados.venda.idContato]||{}).imagem,rotulo:A.dados.venda.descricaoContato,tamanho:"40",style:{float:"left"}},null,8,["imagem","rotulo"])]),(0,a.createElementVNode)("div",r,[(0,a.createVNode)(U,{class:"text-tertiary text-weight-bold"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(A.dados.venda.descricaoContato),1)])),_:1}),(0,a.createVNode)(Z,{class:"hideondesktop items-center q-my-sm"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",l,[(0,a.createVNode)(M,{color:"tertiary"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(A.dados.venda.status),1)])),_:1})])])),_:1})])])),_:1})])),_:1},8,["onClick"]),(0,a.createVNode)(P,{onClick:z.editar,class:"hideonmobile"},{default:(0,a.withCtx)((()=>[A.dados.venda.dataHoraFinalizado?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.data(A.dados.venda.dataHoraFinalizado))+" ",1),(0,a.createVNode)(L,null,{default:(0,a.withCtx)((()=>[d])),_:1})],64)):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.data(A.dados.venda.dataHoraEmissao))+" ",1),(0,a.createVNode)(L,null,{default:(0,a.withCtx)((()=>[n])),_:1})],64))])),_:1},8,["onClick"]),(0,a.createVNode)(P,{onClick:z.editar,class:"hideonmobile"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)((A.contatos[A.dados.venda.idContatoVendedor]||{}).apelido)+" ",1),(0,a.createVNode)(L,null,{default:(0,a.withCtx)((()=>[s])),_:1})])),_:1},8,["onClick"]),(0,a.createVNode)(P,{avatar:"",class:"mw240 hideonmobile"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(M,{color:"tertiary"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(A.dados.venda.status),1)])),_:1}),A.dados.venda.rotaStatus?((0,a.openBlock)(),(0,a.createBlock)(M,{key:0,color:"secondary",style:{"margin-top":"5px"}},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(A.dados.venda.rotaStatus),1)])),_:1})):(0,a.createCommentVNode)("",!0)])),_:1}),(0,a.createVNode)(P,{onClick:z.editar},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,{caption:"",class:"text-right text-tertiary text-weight-bold"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.numero(A.dados.venda.totalDocumento,2))+" ",1),(0,a.createVNode)(L,null,{default:(0,a.withCtx)((()=>[c])),_:1})])),_:1})])),_:1},8,["onClick"]),(0,a.createVNode)(P,{side:"",top:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(Z,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(Q,{rounded:"",dense:"",flat:"",icon:A.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",size:"md",unelevated:"",class:"hideonmobile q-mx-xs",color:"tertiary",style:{float:"right"},onClick:z.alternarDetalhes},null,8,["icon","onClick"]),(0,a.createVNode)(Q,{rounded:"",dense:"",flat:"",icon:"clear",color:"tertiary",unelevated:"",class:"hideonmobile q-mx-xs",size:"md",onClick:z.remover,style:{float:"right"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(L,{anchor:"top left",self:"bottom start"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" Remover da fatura #"+(0,a.toDisplayString)(parseInt(A.dados.venda.numero)||(A.dados.venda.id||"").slice(-6)),1)])),_:1})])),_:1},8,["onClick"]),(0,a.createVNode)(Q,{rounded:"",dense:"",flat:"",icon:"edit",color:"primary",unelevated:"",class:"hideonmobile q-mx-xs",size:"md",onClick:z.editar,style:{float:"right"}},null,8,["onClick"]),(0,a.createVNode)(Q,{rounded:"",dense:"",flat:"",icon:"print",color:"primary",unelevated:"",class:"hideonmobile q-mx-xs",size:"md",style:{float:"right"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(j,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(G,{link:"",separator:""},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(A.configImpressaoOrcamento.filter((e=>e.valor)),(o=>((0,a.openBlock)(),(0,a.createBlock)(J,{clickable:"",key:o.valor,onClick:t=>e.$imprimir(o.valor,{id:(A.dados.venda||{}).id||"0",Oculto:"0"})},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(H,{name:"print"})])),_:1}),(0,a.createVNode)(P,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.texto),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),"optisoul"===A.sistemaPai?((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,{key:0},(0,a.renderList)(A.configImpressaoEnvelope,(o=>((0,a.openBlock)(),(0,a.createBlock)(J,{clickable:"",key:o.valor,onClick:t=>e.$imprimir(o.valor,(A.dados.venda||{}).id||"0")},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(H,{name:"print"})])),_:1}),(0,a.createVNode)(P,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.texto),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1})])),_:1}),(0,a.createVNode)(Q,{rounded:"",dense:"",flat:"",icon:"more_vert",color:"tertiary",unelevated:"",class:"q-mx-xs",size:"md",style:{float:"right"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(j,null,{default:(0,a.withCtx)((()=>[(0,a.withDirectives)((0,a.createVNode)(G,{link:"",separator:""},{default:(0,a.withCtx)((()=>[e.$utils.mapearStatus(A.dados.venda).permiteNota?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.withDirectives)((0,a.createVNode)(J,{clickable:"",onClick:o[1]||(o[1]=o=>e.emitirNFeV2({idVenda:A.dados.venda.id},1,"Venda"))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(H,{name:"account_balance"})])),_:1}),(0,a.createVNode)(P,null,{default:(0,a.withCtx)((()=>[m])),_:1})])),_:1},512),[[oe]]),(0,a.withDirectives)((0,a.createVNode)(J,{clickable:"",onClick:o[2]||(o[2]=o=>e.emitirNFeV2({idVenda:A.dados.venda.id},0,"Devolução"))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(H,{name:"account_balance"})])),_:1}),(0,a.createVNode)(P,null,{default:(0,a.withCtx)((()=>[u])),_:1})])),_:1},512),[[oe]]),(0,a.withDirectives)((0,a.createVNode)(J,{clickable:"",onClick:o[3]||(o[3]=o=>e.emitirNFeV2({idVenda:A.dados.venda.id},1,"Remessa"))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(H,{name:"account_balance"})])),_:1}),(0,a.createVNode)(P,null,{default:(0,a.withCtx)((()=>[p])),_:1})])),_:1},512),[[oe]])],64)):(0,a.createCommentVNode)("",!0),z.podeMigrarFatura?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(A.faturasAbertas.filter((e=>e.id!==A.dados.venda.idFatura)),(e=>(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)(J,{key:e.id,onClick:o=>z.migrarFatura(e)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(H,{name:"mdi-folder-move"})])),_:1}),(0,a.createVNode)(P,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)("Migrar para fatura #"+(e.numero||e.id.slice(-6))),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[oe]]))),128)),(0,a.withDirectives)((0,a.createVNode)(J,{onClick:o[4]||(o[4]=e=>z.migrarFatura())},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(H,{name:"mdi-folder-move"})])),_:1}),(0,a.createVNode)(P,null,{default:(0,a.withCtx)((()=>[f])),_:1})])),_:1},512),[[oe]])],64)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(J,{clickable:"",onClick:o[5]||(o[5]=o=>e.$refs.modalHistoricoStatus.mostrar({idDocumento:A.dados.venda.id}))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(H,{name:"history"})])),_:1}),(0,a.createVNode)(P,null,{default:(0,a.withCtx)((()=>[h])),_:1})])),_:1}),t.resetarEnvio&&A.dados.venda.rotaJson&&A.dados.venda.rotaJson.length>0?((0,a.openBlock)(),(0,a.createBlock)(J,{key:2,clickable:"",onClick:o[6]||(o[6]=e=>t.resetarEnvio(A.dados.venda))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(H,{name:"restart_alt"})])),_:1}),(0,a.createVNode)(P,null,{default:(0,a.withCtx)((()=>[v])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0)])),_:1},512),[[oe]])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0),A.detalhesVisivel?((0,a.openBlock)(),(0,a.createBlock)(Z,{key:1,class:"q-col-gutter-md q-pt-md"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",V,[A.detalhesVisivel?((0,a.openBlock)(),(0,a.createBlock)(G,{key:0},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(A.dados.carrinho,(o=>((0,a.openBlock)(),(0,a.createBlock)(J,{class:"fullWidth",key:o.id},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{avatar:"",class:"w120"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.quantidade)+"x",1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(P,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.descricaoItem),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(P,{side:"",top:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.numero(o.total,2)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(A.dados.customs,(o=>((0,a.openBlock)(),(0,a.createBlock)(J,{class:"fullWidth",key:o.documento.id},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{avatar:"",class:"w120"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.documento.numero)+"x ",1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(P,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.documento.descricao),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(P,{side:"",top:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.numero(o.documento.totalDocumento,2)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(A.dados.oss,(o=>((0,a.openBlock)(),(0,a.createBlock)(J,{class:"fullWidth",key:o.documento.id},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{avatar:"",class:"w120"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>["Orçamento"!==o.documento.status?((0,a.openBlock)(),(0,a.createBlock)(O,{key:0,class:"q-mx-sm",escuro:"",cor:"grey-5",denso:"",round:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.documento.status)+" ",1),(0,a.createVNode)(L,null,{default:(0,a.withCtx)((()=>[g])),_:1})])),_:2},1024)):((0,a.openBlock)(),(0,a.createBlock)(O,{key:1},{default:(0,a.withCtx)((()=>[C])),_:1}))])),_:2},1024)])),_:2},1024),(0,a.createVNode)(P,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.documento.descricao),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(P,{right:"",top:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.numero(o.documento.totalDocumento,2)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(A.dados.envelopes,(o=>((0,a.openBlock)(),(0,a.createBlock)(J,{class:"fullWidth",key:o.id},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{avatar:"",class:"w120"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(O,{class:"q-mx-sm",escuro:"",cor:"grey-5",denso:"",round:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" #"+(0,a.toDisplayString)(parseInt(o.numero)||(o.id||"").slice(-6))+" ",1),(0,a.createVNode)(L,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.tipo)+" - "+(0,a.toDisplayString)(o.descricaoContato),1)])),_:2},1024)])),_:2},1024),"Orçamento"!==o.status?((0,a.openBlock)(),(0,a.createBlock)(O,{key:0,class:"q-mx-sm",escuro:"",cor:"grey-5",denso:"",round:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.status),1)])),_:2},1024)):(0,a.createCommentVNode)("",!0)])),_:2},1024),(0,a.createVNode)(P,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(z.descricaoEnvelope(o.id)),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(P,{right:"",top:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.numero(o.totalDocumento,2)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",w,[(0,a.createElementVNode)("div",N,[(0,a.createVNode)(X,{class:"q-mx-none q-mt-sm q-px-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(H,{name:"business"}),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(A.dados.venda.descricaoEmpresa),1)])),_:1}),(0,a.createElementVNode)("p",x,[(0,a.createElementVNode)("small",b,[(0,a.createTextVNode)((0,a.toDisplayString)(A.dados.venda.observacao)+" ",1),y,(0,a.createTextVNode)(" "+(0,a.toDisplayString)(A.dados.venda.observacaoInterna),1)])]),(0,a.createElementVNode)("div",k,[(0,a.createVNode)(W,{idVenda:A.dados.venda.id},null,8,["idVenda"])])])]),(0,a.createElementVNode)("div",E,[(0,a.createElementVNode)("div",D,[(0,a.createVNode)(X,{class:"q-mx-none q-mt-sm q-px-none"},{default:(0,a.withCtx)((()=>[_])),_:1}),(0,a.createElementVNode)("p",S,[(0,a.createElementVNode)("small",q,(0,a.toDisplayString)(A.dados.venda.observacaoFaturamento),1)])]),(0,a.createElementVNode)("div",F,[(0,a.createElementVNode)("dl",$,[(0,a.createElementVNode)("dd",null,[T,(0,a.createElementVNode)("span",I,[(0,a.createElementVNode)("strong",null,(0,a.toDisplayString)(e.$filters.numero(A.dados.venda.totalDesconto,2)),1)])])])])])])),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(Y),(0,a.createVNode)(K,{ref:"vendaModal",onExecutar:z.executar},null,8,["onExecutar"]),(0,a.createVNode)(ee,{ref:"modalHistoricoStatus"},null,512)])}]]);re()(L,"components",{QItem:H.Z,QItemSection:J.Z,QItemLabel:G.Z,QBadge:j.Z,QTooltip:X.Z,QBtn:W.Z,QMenu:Y.Z,QList:K.Z,QIcon:ee.Z,QToolbarTitle:oe.Z,QSeparator:te.Z}),re()(L,"directives",{ClosePopup:ae.Z})},23238:(e,o,t)=>{t.r(o),t.d(o,{default:()=>w});var a=t(34182);const i=(0,a.createElementVNode)("span",{class:"col-12 text-body1 text-dark"},"Período de Emissão",-1),r=(0,a.createElementVNode)("span",{class:"col-12 text-body1 text-dark"},"Período de Finalização",-1);var l=t(81206),d=t(28349),n=t(39697),s=t(35433),c=t(77418),m=t(88603),u=t(74363);const p={components:{lista:l.Z,VendaCard:d.Z,PromptContatoNovo:u.Z,VendaModal:n.Z},data:()=>({tabSelecionada:{valor:"Todas"},tabs:[{rotulo:"Aguardando Faturamento",value:"Aguardando Faturamento"},{rotulo:"Faturado",value:"Faturado"},{rotulo:"Orçamento",value:"Orçamento"},{rotulo:"Aguardando Liberação",value:"Aguardando Liberação"},{rotulo:"Não Aprovado",value:"Não Aprovado"},{rotulo:"Todas",value:"Todas"}],page:{digitacao:{current:1,min:0,max:0},finalizado:{current:1,min:0,max:0},ativa:"Digitação"},entregueInicio:new Date(new Date($utils.dataAtual()).toDateString()),entregueFim:new Date(new Date($utils.dataAtual()).toDateString()),status:[],operacoes:[],pageSize:10,grupos:[],buscaCampo:"",empresas:[],empresa:{},contatosModal:!1,vendedorModal:!1,digitadorModal:!1,filtro:{status:"",operacao:"",grupos:[],empresa:{id:""},cliente:{id:""},vendedor:{id:""},digitador:{id:""},periodo:{emissao:{ini:"",fim:""},finalizado:{ini:"",fim:""}}},paginacao:{atual:1,maximo:1,total:1,limite:25},dbContato:c.db.contato,documentos:null,showFilters:!1,itens:[],documentoItens:[],vendedorDigitadorSelecionado:null,vendedoresDigitadoresOpcoes:[],diretivaContatosAcessaTodosContatos:!1,showAllPreviewDetail:!1,lista:[]}),methods:{async filtrar(){this.documentos=await c.db.venda.leNew(),this.empresas=await c.db.empresa.le(),this.documentos.map((e=>{this.status.includes(e.status)||this.status.push(e.status),this.operacoes.includes(e.operacao)||this.operacoes.push(e.operacao)}));let e=[];try{const o=await c.db.venda.leRefatorado({filtros:{periodoEmissao:{ini:this.filtro.periodo.emissao.ini,fim:this.filtro.periodo.emissao.fim},periodoFinalizado:{ini:this.filtro.periodo.finalizado.ini,fim:this.filtro.periodo.finalizado.fim},status:this.filtro.status,operacao:this.filtro.operacao,idEmpresa:this.filtro.empresa.id,idContato:this.filtro.cliente.id,idContatoVendedor:this.filtro.vendedor.id,idContatoDigitador:this.filtro.digitador.id},termoBusca:this.buscaCampo,limit:this.paginacao.limite,page:this.paginacao.atual,sort:""});e=o.data,this.paginacao.total=o.total,this.paginacao.maximo=o.totalPages;let t=[];for(const o of e){const e=await c.db.documentoItem.leNew({idDocumento:o.id});t=[...t,...e.filter((e=>e.idItem))]}let a=[];for(const e of t)if(e.idItem&&!a.filter((o=>o.id===e.idItem)).length){const o=await c.db.item.leNew({id:e.idItem});a.push(o)}this.documentos=e}catch(e){this.$q.notify("Erro ao filtrar")}},aoSelecionarEmpresa(){this.filtro.empresa=this.empresas.filter((e=>e.id===this.empresa.id))[0]},aoSelecionarCliente(e,o){e&&(this.filtro.cliente=(0,s.clonarV2)(o),this.contatosModal=!1)},adicionarVenda(){this.$refs.modalVenda.mostrar()},async buscar(){let e=await c.db.venda.leNew(),o=[];for(const t of e){const e=await c.db.documentoItem.leNew({idDocumento:t.id});o=[...o,...e.filter((e=>e.idItem))]}let t=[],a={};for(const e of o)if(e.idItem&&!t.filter((o=>o.id===e.idItem)).length){const o=await c.db.item.leNew({id:e.idItem});t.push(o)}const i=[(0,s.removerAcentos)(this.buscaCampo)];let r=e.filter((e=>{if(!e.numero)return!1;const o=String(e.numero);for(const e of i){const t=new RegExp(e,"gi");if(o.match(t))return!0}})),l=[],d=o.filter((e=>{if(!e.idItem&&!e.descricaoItem)return!1;const o=(0,s.removerAcentos)(e.descricaoItem);for(const t of i){const a=new RegExp(t,"gi");if(o.match(a))return l.push(e.id),!0}}));a=t.filter((e=>{const o=e.marca||"",t=e.referencia||"",a=e.codigoItem?String(e.codigoItem):"",r=e.codigoBarras||"",l=(0,s.removerAcentos)(o+t+a+r);for(const e of i){const o=new RegExp(e,"gi");if(l.match(o))return!0}}));for(const e of r){const t=o.filter((o=>{if(o.idItem&&o.idDocumento===e.id&&!l.includes(o.id))return l.push(o.id),!0}));d=[...d,...t]}for(const e of a){const t=o.filter((o=>{if(o.idItem===e.id&&!l.includes(o.id))return l.push(o.id),!0}));d=[...d,...t]}d=d.filter((o=>{let a=(0,s.clonarV2)(i),r=e.filter((e=>e.id===o.idDocumento)),l=t.filter((e=>e.id===o.idItem));r=r.length?r[0]:{},l=l.length?l[0]:{};let d=r.numero?String(r.numero):"";if(d+=o.descricaoItem||"",d+=l.marca||"",d+=l.referencia||"",d+=l.codigoItem?String(l.codigoItem):"",d+=l.codigoBarras||"",d)for(const e of i){const o=new RegExp(e,"gi");d.match(o)&&(a=a.filter((o=>o!==e)))}if(!a.length)return!0}));let n=[];r=[],a={};for(const o of d)if(n.includes(o.idDocumento)||(n.push(o.idDocumento),r=[...r,...e.filter((e=>e.id===o.idDocumento))]),!a[o.idItem]){const e=t.filter((e=>e.id===o.idItem));e.length&&(a[o.idItem]=e[0])}e=(0,m.orderBy)(r,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"]),this.documentos=r.reduce(((e,o)=>(e[o.id]||(e[o.id]=o),e)),{}),this.itens=a,this.documentosItens=(0,m.orderBy)(d,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"])},async abrirEdicao(e){console.log(e);let o=await c.db.venda.leCompleto({codigoDocumento:e.codigoDocumento});console.log({leCompleto:o})},filtraDebounce(){(0,m.debounce)(this.refazFiltro,700)()},refazFiltro(){s.gconsole.log("FunilVendas","refazFiltro()",this.fraseFiltro,this.empresaSelecionada);const e=(0,s.removerAcentos)((this.fraseFiltro||"").toUpperCase()).split(" ").filter((e=>""!==e)),o={};for(const t in this.listas)for(const a of this.listas[t]){const t=(0,s.removerAcentos)((a.id||"").toUpperCase()+(a.nomeCliente||"").toUpperCase()+(a.nomeDigitador||"").toUpperCase()+(a.nomeVendedor||"").toUpperCase()+" "+String(a.numeroVenda||"")+" ");let i=!0;for(const o of e)i=isNaN(Number(o))?i&&t.includes(o):i&&t.includes(" "+o+" ");this.empresaSelecionada&&(i=i&&this.empresaSelecionada===a.codigoEmpresa),this.vendedorDigitadorSelecionado&&(i=i&&(this.vendedorDigitadorSelecionado.value===a.codigoContatoDigitador||this.vendedorDigitadorSelecionado.value===a.codigoContatoVendedor)),a.mostra=i,a.mostra&&(o[a.crmFunilStatus]=(o[a.crmFunilStatus]||0)+(a.totalDocumento||0))}this.total=o},async atualizar(){try{$q.loading.show();let e="";"Todas"!==this.tabSelecionada.valor&&(e=this.tabSelecionada.valor),null!==this.vendedorDigitadorSelecionado&&(this.filtro.vendedor.id=this.vendedorDigitadorSelecionado.value),this.filtro.status=e,await this.filtrar()}catch(e){$q.notifyError("Erro iniciar",e)}finally{$q.loading.hide()}},abrirTodosPreview(){this.showAllPreviewDetail=!this.showAllPreviewDetail;for(let e of this.documentos)this.$refs[e.id].detalhesVisivel=this.showAllPreviewDetail}},watch:{},created(){s.gconsole.log("FunilVendas","created()"),$db.permissao.objeto("Diretiva_RelatorioVenda_VerTodos").then((e=>{this.diretivaContatosAcessaTodosContatos=e,this.diretivaContatosAcessaTodosContatos&&(this.vendedoresDigitadoresOpcoes=[],$db.crm.leOnlineVendedoresDigitadores({entregueInicio:this.entregueInicio,entregueFim:this.entregueFim}).then((e=>{e.forEach((e=>{e.codigo&&this.vendedoresDigitadoresOpcoes.push({label:e.nome,value:e.codigo})}))})))})),this.atualizar()},refazFiltro(){$utils.gconsole.log("FunilVendas","refazFiltro()",this.fraseFiltro,this.empresaSelecionada);const e=$utils.removerAcentos((this.fraseFiltro||"").toUpperCase()).split(" ").filter((e=>""!==e)),o={};for(const t in this.listas)for(const a of this.listas[t]){const t=$utils.removerAcentos((a.id||"").toUpperCase()+(a.nomeCliente||"").toUpperCase()+(a.nomeDigitador||"").toUpperCase()+(a.nomeVendedor||"").toUpperCase()+" "+String(a.numeroVenda||"")+" ");let i=!0;for(const o of e)i=isNaN(Number(o))?i&&t.includes(o):i&&t.includes(" "+o+" ");this.empresaSelecionada&&(i=i&&this.empresaSelecionada.value===a.codigoEmpresa),this.vendedorDigitadorSelecionado&&(i=i&&(this.vendedorDigitadorSelecionado.value===a.codigoContatoDigitador||this.vendedorDigitadorSelecionado.value===a.codigoContatoVendedor)),a.mostra=i,a.mostra&&(o[a.crmFunilStatus]=(o[a.crmFunilStatus]||0)+(a.totalDocumento||0))}const t={};for(const e in this.listas)this.tamanhoLista[e]=10,t[e]=this.listas[e].filter((e=>e.mostra)).slice(0,this.tamanhoLista[e]),document.getElementById(e);this.listasFiltradas=t,this.$nextTick((()=>{for(const e in this.listasFiltradas)document.getElementById(e).removeEventListener("scroll",this.scrollHandler),document.getElementById(e).addEventListener("scroll",this.scrollHandler)})),this.total=o}};var f=t(74260),h=t(67280),v=t(40320),V=t(25901),g=t(7518),C=t.n(g);const w=(0,f.Z)(p,[["render",function(e,o,t,l,d,n){const s=(0,a.resolveComponent)("q-chips-input"),c=(0,a.resolveComponent)("campo"),m=(0,a.resolveComponent)("q-select"),u=(0,a.resolveComponent)("row"),p=(0,a.resolveComponent)("venda-card"),f=(0,a.resolveComponent)("q-list"),h=(0,a.resolveComponent)("lista"),v=(0,a.resolveComponent)("prompt-contato-novo"),V=(0,a.resolveComponent)("VendaModal");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",null,[(0,a.createVNode)(h,{titulo:"Vendas",onCriar_click:n.adicionarVenda,onCheckBoxGeral_click:e.checkBoxGeral_click,showAdd:"false",icone:"mdi-cart-arrow-up",showToolbar:"false",onFiltro_change:n.atualizar,onLimparFiltros_click:e.limparFiltros_click,onAbrirTodosPreview:n.abrirTodosPreview,onExportarXLSX_click:e.exportarXLSX_click,onRemoverTodos:e.removerTodos,onRestaurarTodos:e.restaurarTodos,tabSelecionada:d.tabSelecionada,tabs:d.tabs,lista:d.lista,listaLayout:e.listaLayout,paginacao:d.paginacao,filtros:d.filtro,opcoesMarca:e.opcoesMarca,opcoesGrupo:e.opcoesGrupo,opcoesSubGrupo:e.opcoesSubGrupo,opcoesTipo:e.opcoesTipo,exportarXLSXVisible:!1,permissaoFicha:!1,buscaCampo:d.buscaCampo,"onUpdate:buscaCampo":o[10]||(o[10]=e=>d.buscaCampo=e),checkboxModel:e.checkboxModel,"onUpdate:checkboxModel":o[11]||(o[11]=o=>e.checkboxModel=o)},{filtroCampos:(0,a.withCtx)((()=>[(0,a.createVNode)(s,{modelValue:d.filtro.grupos,"onUpdate:modelValue":o[0]||(o[0]=e=>d.filtro.grupos=e),color:"tertiary",class:"col-12",placeholder:"Filtre por Produto, Marca, Número..."},null,8,["modelValue","placeholder"]),(0,a.createVNode)(c,{tipo:"seletor",dense:"",modelValue:d.empresa.id,"onUpdate:modelValue":[o[1]||(o[1]=e=>d.empresa.id=e),n.aoSelecionarEmpresa],options:d.empresas.map((e=>({label:e.nome,value:e.id}))),clearable:"",rotulo:"Por empresa"},null,8,["modelValue","options","onUpdate:modelValue"]),(0,a.createVNode)(c,{tipo:"seletor",dense:"",modelValue:d.filtro.operacao,"onUpdate:modelValue":o[2]||(o[2]=e=>d.filtro.operacao=e),options:d.operacoes.map((e=>({label:e,value:e}))),clearable:"",rotulo:"Operação"},null,8,["modelValue","options"]),(0,a.createVNode)(c,{rotulo:"Cliente",tipo:"texto",before:[{icon:"search"}],modelValue:d.filtro.cliente.nome,"onUpdate:modelValue":[o[3]||(o[3]=e=>d.filtro.cliente.nome=e),n.aoSelecionarCliente],onClick:o[4]||(o[4]=e=>d.contatosModal=!0),dense:""},null,8,["modelValue","onUpdate:modelValue"]),d.diretivaContatosAcessaTodosContatos?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,modelValue:d.vendedorDigitadorSelecionado,"onUpdate:modelValue":[o[5]||(o[5]=e=>d.vendedorDigitadorSelecionado=e),n.atualizar],options:d.vendedoresDigitadoresOpcoes,clearable:"",label:"Vendedor / Digitador"},null,8,["modelValue","options","onUpdate:modelValue"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(u,{class:"q-col-gutter-md q-mt-md"},{default:(0,a.withCtx)((()=>[i,(0,a.createVNode)(c,{modelValue:d.filtro.periodo.emissao.ini,"onUpdate:modelValue":o[6]||(o[6]=e=>d.filtro.periodo.emissao.ini=e),tipo:"data",class:"no-shadow full-width",rotulo:"De",col:"12",after:[{icon:"mdi-close-circle",handler(){d.filtro.periodo.emissao.ini=""}}],dense:""},null,8,["modelValue","after"]),(0,a.createVNode)(c,{modelValue:d.filtro.periodo.emissao.fim,"onUpdate:modelValue":o[7]||(o[7]=e=>d.filtro.periodo.emissao.fim=e),tipo:"data",class:"no-shadow full-width",rotulo:"até",col:"12",after:[{icon:"mdi-close-circle",handler(){d.filtro.periodo.emissao.fim=""}}],dense:""},null,8,["modelValue","after"])])),_:1}),(0,a.createVNode)(u,{class:"q-col-gutter-md q-mt-md"},{default:(0,a.withCtx)((()=>[r,(0,a.createVNode)(c,{modelValue:d.filtro.periodo.finalizado.ini,"onUpdate:modelValue":o[8]||(o[8]=e=>d.filtro.periodo.finalizado.ini=e),tipo:"data",class:"no-shadow full-width",rotulo:"De",col:"12",after:[{icon:"mdi-close-circle",handler(){d.filtro.periodo.finalizado.ini=""}}],dense:""},null,8,["modelValue","after"]),(0,a.createVNode)(c,{modelValue:d.filtro.periodo.finalizado.fim,"onUpdate:modelValue":o[9]||(o[9]=e=>d.filtro.periodo.finalizado.fim=e),tipo:"data",class:"no-shadow full-width",rotulo:"até",col:"12",after:[{icon:"mdi-close-circle",handler(){d.filtro.periodo.finalizado.fim=""}}],dense:""},null,8,["modelValue","after"])])),_:1})])),itemLista:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{class:"rounded-borders"},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(d.documentos,(e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e.id,class:"itemHover fullWidth q-px-sm"},[(0,a.createVNode)(p,{id:e.id,ref:e.id,class:"q-mb-md"},null,8,["id"])])))),128))])),_:1})])),_:1},8,["onCriar_click","onCheckBoxGeral_click","onFiltro_change","onLimparFiltros_click","onAbrirTodosPreview","onExportarXLSX_click","onRemoverTodos","onRestaurarTodos","tabSelecionada","tabs","lista","listaLayout","paginacao","filtros","opcoesMarca","opcoesGrupo","opcoesSubGrupo","opcoesTipo","buscaCampo","checkboxModel"])]),(0,a.createVNode)(v,{modelValue:d.contatosModal,"onUpdate:modelValue":o[12]||(o[12]=e=>d.contatosModal=e),filtro:{ativo:!0},onSelecionar:n.aoSelecionarCliente},null,8,["modelValue","onSelecionar"]),(0,a.createVNode)(v,{modelValue:d.vendedorModal,"onUpdate:modelValue":o[13]||(o[13]=e=>d.vendedorModal=e),filtro:{ativo:!0,vendedores:!0},onSelecionar:e.aoSelecionarVendedor},null,8,["modelValue","onSelecionar"]),(0,a.createVNode)(v,{modelValue:d.digitadorModal,"onUpdate:modelValue":o[14]||(o[14]=e=>d.digitadorModal=e),filtro:{ativo:!0},onSelecionar:e.aoSelecionarDigitador},null,8,["modelValue","onSelecionar"]),(0,a.createVNode)(V,{ref:"modalVenda",onExecutar:e.executar},null,8,["onExecutar"])],64)}]]);C()(p,"components",{QChip:h.Z,QSelect:v.Z,QList:V.Z})},62913:(e,o,t)=>{t.r(o),t.d(o,{default:()=>P});var a=t(34182);const i={class:"row no-wrap q-pa-md"},r={class:"column"},l=(0,a.createElementVNode)("div",{class:"text-h6 q-mb-md"},"Sincronismo RoutEasy",-1),d=(0,a.createTextVNode)("Enviar"),n=(0,a.createTextVNode)("Acessar Painel"),s={class:"column items-center",style:{"margin-bottom":"0px"}},c=(0,a.createElementVNode)("div",{class:"text-h6 q-mb-md"},"Importar Roterização",-1),m={class:"q-mt-sm"},u=(0,a.createElementVNode)("span",{class:"col-12 text-body1 text-dark"},"Faturado em",-1),p=(0,a.createElementVNode)("span",{class:"col-12 text-body1 text-dark"},null,-1),f=(0,a.createElementVNode)("span",{class:"col-12 text-body1 text-dark"},"Período de Emissão",-1),h=(0,a.createElementVNode)("span",{class:"col-12 text-body1 text-dark"},"Período de Finalização",-1),v=["onClick"];var V=t(81206),g=t(28349),C=(t(39697),t(30052)),w=t.n(C),N=t(54726),x=t(84830),b=t.n(x);const y={alterados:0,arquivo:null,cor:"text-negative",corFinal:"",erro:"",erros:0,incluidos:0,listaErros:[],mensagem:"",mensagemFinal:"",modalResultado:!1},k={components:{lista:V.Z,VendaCard:g.Z},data(){const e=new Date(new Date($utils.dataAtual()).toDateString());return{tabSelecionada:{valor:"Faturado"},importar:$utils.clonarV2(y),opcoesStatusEnvio:[{rotulo:"Todos"},{rotulo:"Enviados"},{rotulo:"Não Enviados"}],opcoesStatus:[{rotulo:"Faturado",valor:"Faturado"},{rotulo:"Em Separação",valor:"Em Separação"},{rotulo:"Aguardando Separação",valor:"Aguardando Separação"},{rotulo:"Orçamento",valor:"Orçamento"},{rotulo:"Aguardando Estoque",valor:"Aguardando Estoque"},{rotulo:"Não Aprovado",valor:"Não Aprovado"}],tabs:[{rotulo:"Faturado",value:"Faturado"}],page:{digitacao:{current:1,min:0,max:0},finalizado:{current:1,min:0,max:0},ativa:"Digitação"},entregueInicio:new Date(new Date($utils.dataAtual()).toDateString()),entregueFim:new Date(new Date($utils.dataAtual()).toDateString()),status:[],operacoes:[],pageSize:10,grupos:[],buscaCampo:"",empresas:[],empresa:{},contatosModal:!1,vendedorModal:!1,digitadorModal:!1,filtro:{statusEnvio:"Todos",valorTotal:0,status:"Faturado",operacao:"",grupos:[],empresa:{id:""},cliente:{id:"",nome:""},vendedor:{id:""},digitador:{id:""},periodo:{faturado:{ini:e,fim:e},emissao:{ini:"",fim:""},finalizado:{ini:"",fim:""}}},paginacao:{atual:1,maximo:1,total:1,limite:25},dbContato:$db.contato,documentos:null,showFilters:!1,itens:[],documentoItens:[],vendedorDigitadorSelecionado:null,vendedoresDigitadoresOpcoes:[],diretivaContatosAcessaTodosContatos:!1,showAllPreviewDetail:!1,lista:[]}},methods:{async atualizar(){try{$q.loading.show(),null!==this.vendedorDigitadorSelecionado&&(this.filtro.vendedor.id=this.vendedorDigitadorSelecionado.value),this.empresas=await $db.empresa.le();let e=[];const o=await $db.venda.leRefatorado({filtros:{faturado:{ini:this.filtro.periodo.faturado.ini,fim:this.filtro.periodo.faturado.fim},periodoEmissao:{ini:this.filtro.periodo.emissao.ini,fim:this.filtro.periodo.emissao.fim},periodoFinalizado:{ini:this.filtro.periodo.finalizado.ini,fim:this.filtro.periodo.finalizado.fim},status:this.filtro.status,valorTotal:this.filtro.valorTotal,cliente:this.filtro.cliente.nome,operacao:this.filtro.operacao,idEmpresa:this.filtro.empresa.id,idContato:this.filtro.cliente.id,idContatoVendedor:this.filtro.vendedor.id,idContatoDigitador:this.filtro.digitador.id,statusEnvio:this.filtro.statusEnvio},termoBusca:this.buscaCampo,limit:this.paginacao.limite,page:this.paginacao.atual,sort:""});e=o.data,this.paginacao.total=o.total,this.paginacao.maximo=o.totalPages,this.documentos=e}catch(e){console.log(e),this.$q.notifyError("Erro ao filtrar")}finally{$q.loading.hide()}},limparFiltros_click(){},async resetarEnvio(e){$q.dialog({message:"Deseja resetar o envio desta venda?",title:"Atenção!",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Resetar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk((async()=>{const o=e.id;e.rotaJson="",e.rotaStatus="",e.rotaNome="";const t=(await $erp().documento.where({id:o}).toArray())[0],a=$utils.clonarV2(t);a.rotaJson="",a.rotaStatus="",a.rotaNome="",await $db.documento.grava({atual:a,original:t})}))},async sendRouteEasyAll(){$q.loading.show();try{let e=await $db.venda.leRefatorado({filtros:{faturado:{ini:this.filtro.periodo.faturado.ini,fim:this.filtro.periodo.faturado.fim},periodoEmissao:{ini:this.filtro.periodo.emissao.ini,fim:this.filtro.periodo.emissao.fim},periodoFinalizado:{ini:this.filtro.periodo.finalizado.ini,fim:this.filtro.periodo.finalizado.fim},status:this.filtro.status,valorTotal:this.filtro.valorTotal,cliente:this.filtro.cliente.nome,operacao:this.filtro.operacao,idEmpresa:this.filtro.empresa.id,idContato:this.filtro.cliente.id,idContatoVendedor:this.filtro.vendedor.id,idContatoDigitador:this.filtro.digitador.id},termoBusca:this.buscaCampo,limit:this.paginacao.total,page:this.paginacao.atual,sort:""});await this.sendRouteEasy(e),$q.notify({message:"Sincronismo efetuado com sucesso!",type:"positive"})}catch(e){console.log(e)}finally{$q.loading.hide()}},async sendRouteEasy(e){$q.loading.show();let o=e.data,t={deliveries:[]};try{for(let e=0;e<o.length;e++){const a=o[e],i=await $db.contatoEndereco.le({idContato:a.idContato});if(0===i.length){let e=`Não foi possivel envia venda #ID[${a.id}], pois não foi vinculado um endereço.`;$q.notify(e),console.log(e)}if(a&&a.idContato&&i.length>0){let e=await $db.contato.le({id:a.idContato}),o=await $db.contatoTelefone.le({idContato:e.id}),r=await $db.documentoFiscalEletronico.le({idDocumento:a.idFatura});$utils.dataAtual();const l=i[0],d=await this.calcularPesoECubicoTotal(a.id);let n=d.pesoTotal||0,s=d.metroCubicoTotal||0,c=r.length>0?r[0].nNF:"",m=($filters.numero(a.totalDocumento,2),parseInt(a.totalDocumento)),u={code:a.idContato,name:a.descricaoContato,site:a.numeroDocumentoEmpresa,additional_info_2:a.numeroDocumentoEmpresa,order_number:a.numero+" "+a.numeroDocumentoEmpresa,invoice_number:c,loads:[n,s,m],email:e.email||"",customer_profile:e.id,phone:o.length>0?o[0].telefone:"",address:{route:l.logradouro,street_number:l.numero?l.numero:"",neighborhood:l.bairro,city:l.municipio,state:l.uf,postal_code:l.cep,country:l.pais}};t.deliveries.push(u)}}if(t.deliveries.length>0){const e=await w()({method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},baseURL:"https://company.routeasy.com.br",url:"/group?api_key=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYxNDIwYWQ2YzRiNTYzMWEyMmQwYTZhZSIsInRpbWVzdGFtcCI6MTYzMjQ5NTY1ODE1OH0.Nodh7i5OjMak8PQaavO8yComhN6BJa7bPs37SKfe4rE",validateStatus:e=>e>=200&&e<=500,timeout:3e4,data:t});for(const t of e.data.deliveries){const e=o.find((e=>e.numeroDocumentoEmpresa===t.order_number.split(" ")[1]&&e.numero===parseInt(t.order_number.split(" ")[0])));if(!e){$q.notify(`Venda Nº ${t.order_number} / ${t.site} não encontrada!`);continue}const a=(await $erp().documento.where({id:e.id}).toArray())[0],i=$utils.clonarV2(a);i.rotaJson=JSON.stringify({envio:t}),i.rotaStatus="Enviado";let r=$utils.dataAtual().split("T")[0].split("-");i.rotaNome=`Rota do dia ${r[2]}/${r[1]}/${r[0]}`,await $db.documento.grava({atual:i,original:a}),this.$refs[i.id]&&this.$refs[i.id].atualizar()}}else $q.notify("Rota(s) já enviadas ou nao tem informações suficientes.")}catch(e){$q.notify(e.message),console.log("[ERROR][SINCRONSMO][ROUTEASY] => ",e)}finally{if(t.deliveries.length>0){let e=t.deliveries.length>1?"s":"";$q.notify({message:`(${t.deliveries.length}) Rota${e} enviada${e} com sucesso!`,type:"positive"})}$q.loading.hide()}},async getGeoCordenadas(e){const o=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${e.municipio}+${e.uf}+${e.logradouro}+${e.cep}&key=AIzaSyDXlwwrHCnEP50L1rFQvrYq9XAzpU_hZvA`,{method:"GET"});return(await o.json()).results[0].geometry},async calcularPesoECubicoTotal(e){if(!e)return!1;const o={};let t=0,a=0,i=0,r=0,l=0;const d=await $erp().documentoItem.where({idDocumento:e}).toArray();for(const e of d)if(-1===e.operacaoFator){if(e.idItem&&!o[e.idItem]){const t=await $erp().item.get(e.idItem);t&&(o[e.idItem]=t)}t+=(o[e.idItem].peso||0)*(e.quantidade||0),a+=(o[e.idItem].pesoBruto||0)*(e.quantidade||0),r=(o[e.idItem].altura||0)*(o[e.idItem].largura||0)*o[e.idItem].comprimento||0,l=e.quantidade||0,i+=r>0?r*l:0}return t=$utils.arredondar(t,4),a=$utils.arredondar(a,4),i=$utils.arredondar(i,4),{pesoTotal:t,pesoBrutoTotal:a,metroCubicoTotal:i}},async importarPlanilhaRetorno(e){try{const o=e=>new Promise(((o,t)=>{const a=new FileReader;a.readAsBinaryString(e),a.onload=()=>o(a.result),a.onerror=e=>t(e)})),t=await o(e[0]);let a=b().read(t,{type:"binary"}),i=b().utils.sheet_to_json(a.Sheets[Object.keys(a.Sheets)[0]],{header:1});for(let e=1;e<i.length;e++){const o=i[e],t=i[0];t[0]="Nome Rota";const a=$utils.convertArrToObj(t,o);if(o[29]&&o[29].length>1){console.log("numero pedido => ",o[29].replace("Pedido ",""));try{const e=o[29].replace("Pedido ","").split(" "),t=parseInt(e[0]),i=e[1];if(t>1){const e=(await $erp().documento.where({tipo:"Venda"}).filter((e=>e.numero===t&&e.numeroDocumentoEmpresa===i)).toArray())[0],r={...e},l=$utils.clonarV2(e);l.rotaJson=JSON.stringify({...JSON.parse(l.rotaJson),recebido:JSON.stringify(a)}),l.rotaNome=o[0],l.rotaSequencia=o[4],await $db.documento.grava({original:r,atual:l})}}catch(e){console.log(`[ERROR][IMPORTACAO] => ${e.message}`,e)}}}await this.atualizar(),this.$q.notify({type:"positive",message:"Importação realizada com sucesso"})}catch(e){e.name&&"ErroValidacao"===e.name?this.$q.notifyError(e.message,e):this.$q.notifyError("Ocorreu erro ao importar roterização xlsx",e)}},acessarPainel(){window.open("https://company.routeasy.com.br/#!/routings/create","_blank").focus()},montarObjImportacaoRE(e,o){let t={};for(let a=1;a<e.length;a++){const i=$utils.removerCaracteresEspeciais(e[a]).split(" ");for(let e=0;e<i.length;e++)i[e]=i[e].charAt(0).toUpperCase()+i[e].slice(1);t[i.join("")]=o[a]}return t},aoSelecionarEmpresa(){},aoSelecionarStatusEnvio(){},aoSelecionarCliente(e,o){e&&(this.filtro.cliente=$utils.clonarV2(o),this.contatosModal=!1)},adicionarVenda(){this.$refs.modalVenda.mostrar()},abrirTodosPreview(){this.showAllPreviewDetail=!this.showAllPreviewDetail;for(let e of this.documentos)this.$refs[e.id].detalhesVisivel=this.showAllPreviewDetail},debug(e){console.log(e)},downloadJsonDeliveries(e){let o="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),t=document.createElement("a"),a=N.ZP.formatDate(new Date(this.filtro.periodo.finalizado.ini)).split("T")[0].split("-"),i=`Rotas_do_dia_${a[2]}/${a[1]}/${a[0]}.json`;t.setAttribute("href",o),t.setAttribute("download",i),document.body.appendChild(t),t.click(),t.remove()},delay:(e,o)=>new Promise((function(t){setTimeout((function(){t(o)}),e)}))},created(){this.atualizar()},mounted(){}};var E=t(74260),D=t(54707),_=t(25901),S=t(77953),q=t(60880),F=t(68900),$=t(83831),T=t(56673),I=t(67280),B=t(40320),A=t(98586),z=t(7518),O=t.n(z);const P=(0,E.Z)(k,[["render",function(e,o,t,V,g,C){const w=(0,a.resolveComponent)("q-icon"),N=(0,a.resolveComponent)("q-item-section"),x=(0,a.resolveComponent)("q-item"),b=(0,a.resolveComponent)("q-list"),y=(0,a.resolveComponent)("q-separator"),k=(0,a.resolveComponent)("q-uploader"),E=(0,a.resolveComponent)("q-menu"),D=(0,a.resolveComponent)("q-chips-input"),_=(0,a.resolveComponent)("campo"),S=(0,a.resolveComponent)("row"),q=(0,a.resolveComponent)("venda-card"),F=(0,a.resolveComponent)("lista"),$=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(F,{titulo:"Vendas",onCriar_click:C.adicionarVenda,icone:"edit_road",onFiltro_change:C.atualizar,onLimparFiltros_click:C.limparFiltros_click,onAbrirTodosPreview:C.abrirTodosPreview,tabSelecionada:g.tabSelecionada,tabs:g.tabs,lista:g.lista,paginacao:g.paginacao,permissaoExtrasV2:!0,permissaoExtras:!1,disableRemove:!0,permissaoNovo:!1,filtros:g.filtro,exportarXLSXVisible:!1,permissaoFicha:!1,buscaCampo:g.buscaCampo,"onUpdate:buscaCampo":o[14]||(o[14]=e=>g.buscaCampo=e)},{menuExtras:(0,a.withCtx)((()=>[(0,a.createVNode)(E,null,{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("div",r,[l,(0,a.createVNode)(b,{link:"","no-border":"",separator:""},{default:(0,a.withCtx)((()=>["function"==typeof C.sendRouteEasyAll?(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)(x,{key:0,clickable:"",onClick:o[0]||(o[0]=e=>C.sendRouteEasyAll())},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(w,{name:"upgrade"})])),_:1}),(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[d])),_:1})])),_:1},512)),[[$]]):(0,a.createCommentVNode)("",!0),"function"==typeof C.acessarPainel?(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)(x,{key:1,clickable:"",onClick:o[1]||(o[1]=e=>C.acessarPainel())},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(w,{name:"insights"})])),_:1}),(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[n])),_:1})])),_:1},512)),[[$]]):(0,a.createCommentVNode)("",!0)])),_:1})]),(0,a.createVNode)(y,{vertical:"",inset:"",class:"q-mx-lg"}),(0,a.createElementVNode)("div",s,[c,(0,a.createElementVNode)("div",m,[(0,a.createVNode)(k,{style:{width:"100%"},label:"Selecione o arquivo (.xlsx)","hide-upload-btn":"","auto-upload":"",factory:C.importarPlanilhaRetorno},null,8,["factory"])])])])])),_:1})])),filtroCampos:(0,a.withCtx)((()=>[(0,a.createVNode)(D,{modelValue:g.filtro.grupos,"onUpdate:modelValue":o[2]||(o[2]=e=>g.filtro.grupos=e),color:"tertiary",class:"col-12",placeholder:"Filtre por Produto, Marca, Número..."},null,8,["modelValue","placeholder"]),(0,a.createVNode)(_,{tipo:"seletor",dense:"",modelValue:g.filtro.empresa.id,"onUpdate:modelValue":[o[3]||(o[3]=e=>g.filtro.empresa.id=e),C.aoSelecionarEmpresa],options:g.empresas.map((e=>({label:e.nome,value:e.idContato}))),clearable:"",rotulo:"Por empresa"},null,8,["modelValue","options","onUpdate:modelValue"]),(0,a.createVNode)(_,{tipo:"seletor",dense:"",modelValue:g.filtro.operacao,"onUpdate:modelValue":o[4]||(o[4]=e=>g.filtro.operacao=e),options:g.operacoes.map((e=>({label:e,value:e}))),clearable:"",rotulo:"Operação"},null,8,["modelValue","options"]),(0,a.createVNode)(_,{rotulo:"Cliente",tipo:"texto",before:[{icon:"search"}],modelValue:g.filtro.cliente.nome,"onUpdate:modelValue":o[5]||(o[5]=e=>g.filtro.cliente.nome=e),dense:""},null,8,["modelValue"]),(0,a.createVNode)(_,{rotulo:"Valor Total",tipo:"decimal",before:[{icon:"money"}],modelValue:g.filtro.valorTotal,"onUpdate:modelValue":o[6]||(o[6]=e=>g.filtro.valorTotal=e),dense:""},null,8,["modelValue"]),(0,a.createVNode)(S,{class:"q-col-gutter-md q-mt-md"},{default:(0,a.withCtx)((()=>[u,(0,a.createVNode)(_,{modelValue:g.filtro.periodo.faturado.ini,"onUpdate:modelValue":o[7]||(o[7]=e=>g.filtro.periodo.faturado.ini=e),tipo:"data",class:"no-shadow full-width",rotulo:"De",col:"12",after:[{icon:"mdi-close-circle",handler(){g.filtro.periodo.faturado.ini=""}}],dense:""},null,8,["modelValue","after"]),(0,a.createVNode)(_,{modelValue:g.filtro.periodo.faturado.fim,"onUpdate:modelValue":o[8]||(o[8]=e=>g.filtro.periodo.faturado.fim=e),tipo:"data",class:"no-shadow full-width",rotulo:"até",col:"12",after:[{icon:"mdi-close-circle",handler(){g.filtro.periodo.faturado.fim=""}}],dense:""},null,8,["modelValue","after"])])),_:1}),(0,a.createVNode)(S,{class:"q-col-gutter-md q-mt-md"},{default:(0,a.withCtx)((()=>[p,(0,a.createVNode)(_,{tipo:"seletor",dense:"",modelValue:g.filtro.statusEnvio,"onUpdate:modelValue":[o[9]||(o[9]=e=>g.filtro.statusEnvio=e),C.aoSelecionarStatusEnvio],options:g.opcoesStatusEnvio.map((e=>({label:e.rotulo,value:e.rotulo}))),clearable:"",rotulo:"Status Envio"},null,8,["modelValue","options","onUpdate:modelValue"])])),_:1}),(0,a.createVNode)(S,{class:"q-col-gutter-md q-mt-md"},{default:(0,a.withCtx)((()=>[f,(0,a.createVNode)(_,{modelValue:g.filtro.periodo.emissao.ini,"onUpdate:modelValue":o[10]||(o[10]=e=>g.filtro.periodo.emissao.ini=e),tipo:"data",class:"no-shadow full-width",rotulo:"De",col:"12",after:[{icon:"mdi-close-circle",handler(){g.filtro.periodo.emissao.ini=""}}],dense:""},null,8,["modelValue","after"]),(0,a.createVNode)(_,{modelValue:g.filtro.periodo.emissao.fim,"onUpdate:modelValue":o[11]||(o[11]=e=>g.filtro.periodo.emissao.fim=e),tipo:"data",class:"no-shadow full-width",rotulo:"até",col:"12",after:[{icon:"mdi-close-circle",handler(){g.filtro.periodo.emissao.fim=""}}],dense:""},null,8,["modelValue","after"])])),_:1}),(0,a.createVNode)(S,{class:"q-col-gutter-md q-mt-md"},{default:(0,a.withCtx)((()=>[h,(0,a.createVNode)(_,{modelValue:g.filtro.periodo.finalizado.ini,"onUpdate:modelValue":o[12]||(o[12]=e=>g.filtro.periodo.finalizado.ini=e),tipo:"data",class:"no-shadow full-width",rotulo:"De",col:"12",after:[{icon:"mdi-close-circle",handler(){g.filtro.periodo.finalizado.ini=""}}],dense:""},null,8,["modelValue","after"]),(0,a.createVNode)(_,{modelValue:g.filtro.periodo.finalizado.fim,"onUpdate:modelValue":o[13]||(o[13]=e=>g.filtro.periodo.finalizado.fim=e),tipo:"data",class:"no-shadow full-width",rotulo:"até",col:"12",after:[{icon:"mdi-close-circle",handler(){g.filtro.periodo.finalizado.fim=""}}],dense:""},null,8,["modelValue","after"])])),_:1})])),itemLista:(0,a.withCtx)((()=>[(0,a.createVNode)(b,{class:"rounded-borders"},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(g.documentos,(e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e.id,class:"itemHover fullWidth q-px-sm",onClick:o=>C.debug(e)},[(0,a.createVNode)(q,{sendRouteEasy:C.sendRouteEasy,resetarEnvio:C.resetarEnvio,fatura:e.fatura,id:e.id,ref:e.id,class:"q-mb-md"},null,8,["sendRouteEasy","resetarEnvio","fatura","id"])],8,v)))),128))])),_:1})])),_:1},8,["onCriar_click","onFiltro_change","onLimparFiltros_click","onAbrirTodosPreview","tabSelecionada","tabs","lista","paginacao","filtros","buscaCampo"])])}]]);O()(k,"components",{QMenu:D.Z,QList:_.Z,QItem:S.Z,QItemSection:q.Z,QIcon:F.Z,QSeparator:$.Z,QUploader:T.Z,QChip:I.Z,QSelect:B.Z}),O()(k,"directives",{ClosePopup:A.Z})}}]);