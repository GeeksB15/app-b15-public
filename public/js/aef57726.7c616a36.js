(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["aef57726"],{"427f":function(t,e,a){},"4c39":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-modal",{attrs:{"content-css":{minWidth:"30vw"}},model:{value:t.modal.visivel,callback:function(e){t.$set(t.modal,"visivel",e)},expression:"modal.visivel"}},[a("q-modal-layout",[a("q-toolbar",{attrs:{slot:"header",color:"negative"},slot:"header"},[a("q-toolbar-title",[t._v("Confirmar exclus√£o")]),a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{dense:"",flat:"",icon:"close",round:""}})],1),a("div",{staticClass:"row layout-padding"},[t._v("\n        Deseja mesmo excluir o item?\n      ")]),a("q-toolbar",{attrs:{slot:"footer",color:"light"},slot:"footer"},[a("q-toolbar-title",[a("div",{staticClass:"row justify-end"},[a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{flat:"",label:"Cancelar",color:"primary"}}),a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{flat:"",label:"Confirmar",color:"primary"},nativeOn:{click:function(e){t.$emit("excluir")}}})],1)])],1)],1)],1)],1)},i=[];o._withStripped=!0;var n={data:function(){return{modal:{visivel:!1}}}},s=n,r=(a("7b59b"),a("2877")),c=Object(r["a"])(s,o,i,!1,null,null,null);c.options.__file="ModalExcluir.vue";e["a"]=c.exports},"557e":function(t,e,a){},"7b59b":function(t,e,a){"use strict";var o=a("557e"),i=a.n(o);i.a},8780:function(t,e,a){"use strict";var o=a("427f"),i=a.n(o);i.a},eee9:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{staticClass:"Lista",attrs:{view:"hHh LpR lFr"}},[a("barra-topo"),a("q-page-container",[a("q-page",[t.list?a("div",[a("q-toolbar",{staticClass:"q-py-sm",attrs:{color:"primary"}},[a("q-toolbar-title",[a("q-search",{ref:"buscaCampo",staticStyle:{"max-width":"990px",margin:"0 auto"},attrs:{color:"none",inverted:"",placeholder:"Buscar"},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.buscar(e):null},input:t.limparBusca},model:{value:t.buscaCampo,callback:function(e){t.buscaCampo=e},expression:"buscaCampo"}})],1),a("q-btn",{staticClass:"hideonmobile",attrs:{flat:"",dense:"",icon:"add",round:""},on:{click:t.adicionarContrato}},[a("q-tooltip",[t._v("Criar")])],1),a("q-btn",{staticClass:"no-shadow q-px-xs",attrs:{icon:"mdi-filter",flat:"",dense:"",round:""},on:{click:t.abrirFiltro}})],1),a("q-tabs",{attrs:{color:"transparent","text-color":"primary"},model:{value:t.tabsModel,callback:function(e){t.tabsModel=e},expression:"tabsModel"}},[a("q-tab",{attrs:{slot:"title",name:"ativos",label:"Ativos",default:""},nativeOn:{click:function(e){t.getPage("Ativo")}},slot:"title"}),a("q-tab",{attrs:{slot:"title",name:"cancelados",label:"Cancelados"},nativeOn:{click:function(e){t.getPage("Cancelado")}},slot:"title"}),a("q-tab-pane",{staticClass:"q-pa-none",staticStyle:{"border-top":"1px solid #e0e0e0"},attrs:{name:"ativos"}},[t._l(t.documentos,function(e){return"Ativo"===e.status?a("q-list",{key:e.id,staticClass:"q-py-none qListaItems"},[a("q-item",{staticClass:"itemLista"},[a("q-item-side",{nativeOn:{click:function(e){t.showsectionm=!t.showsectionm}}},[t._v("\n                    "+t._s(e.codigoDocumento)+"\n                  ")]),a("q-item-main",{staticClass:"hideondesktop",attrs:{label:e.descricaoContato},nativeOn:{click:function(e){t.showsectionm=!t.showsectionm}}},[a("q-item-tile",{attrs:{stamp:""}},[t._v(t._s(e.numeroVolumeTransporte))]),a("badge",{staticClass:"q-mr-sm",attrs:{escuro:"",cor:"positive "}},[t._v(t._s(e.status))])],1),a("q-item-main",{staticClass:"hideonmobile",nativeOn:{click:function(e){t.showsectionm=!t.showsectionm}}},[a("q-item-tile",[t._v(t._s(e.descricaoContato))])],1),a("q-item-main",{staticClass:"hideonmobile",nativeOn:{click:function(e){t.showsectionm=!t.showsectionm}}},[a("q-item-tile",{attrs:{stamp:""}},[t._v(t._s(e.numeroVolumeTransporte))])],1),a("q-item-main",{staticClass:"hideonmobile",nativeOn:{click:function(e){t.showsectionm=!t.showsectionm}}},[a("q-item-tile",{attrs:{stamp:""}},[t._v(t._s(t._f("data")(e.dataHoraEmissao)))])],1),a("q-item-main",{staticClass:"hideonmobile"},[a("badge",{staticClass:"q-mr-sm",attrs:{escuro:"",cor:"positive"}},[t._v("\n                      "+t._s(e.status)+"\n                    ")])],1),a("q-item-side",{attrs:{right:""}},[a("q-btn",{staticClass:"buttons",attrs:{color:"tertiary",size:"md",icon:e.showPreviewDetail?"keyboard_arrow_up":"keyboard_arrow_down",flat:"",dense:"",round:""},nativeOn:{click:function(a){t.showDetails(e)}}}),a("q-btn",{staticClass:"buttons",attrs:{color:"tertiary",size:"md",icon:"edit",flat:"",dense:"",round:""},nativeOn:{click:function(a){t.editar(e.id)}}}),a("q-btn",{staticClass:"buttons",attrs:{color:"tertiary",size:"md",icon:"delete",flat:"",dense:"",round:""},nativeOn:{click:function(a){t.excluir(e.id)}}}),a("q-btn",{staticClass:"morevert",attrs:{flat:"",dense:"",icon:"more_vert",round:"",size:"md"}},[a("q-popover",[a("q-list",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"q-py-none",attrs:{link:"","no-border":"",separator:""}},[a("q-item",[a("q-item-side",{attrs:{icon:"edit"},on:{click:function(a){t.editar(e.id)}}}),a("q-item-main",{attrs:{label:"Editar"},nativeOn:{click:function(a){t.editar(e.id)}}})],1)],1)],1)],1)],1)],1),e.showPreviewDetail?a("q-item",{staticClass:" q-pa-md"},[a("q-item-main",{attrs:{label:"Itens"}},t._l(e.documentoItens,function(e){return a("div",{key:e.id},[a("q-item-tile",{staticClass:"items-center",attrs:{stamp:""}},[a("span",[t._v(" "+t._s(e.quantidade)+" "+t._s(e.unidade)+" - "+t._s(e.descricaoItem)+" ")]),a("badge",{staticClass:"q-mx-sm",attrs:{escuro:"",cor:"primary"}},[t._v("\n                          "+t._s(e.tipoItem)+"\n                        ")])],1)],1)}))],1):t._e(),a("q-item-separator")],1):t._e()}),a("q-pagination",{staticClass:"justify-center q-mb-sm",attrs:{input:"",color:"dark",min:t.page.ativo.min,max:t.page.ativo.max},on:{input:function(e){t.filtrar(t.page.ativo.current)}},model:{value:t.page.ativo.current,callback:function(e){t.$set(t.page.ativo,"current",e)},expression:"page.ativo.current"}})],2),a("q-tab-pane",{staticClass:"q-pa-none",staticStyle:{"border-top":"1px solid #e0e0e0"},attrs:{name:"cancelados"}},[t._l(t.documentos,function(e){return"Cancelado"===e.status?a("q-list",{key:e.id,staticClass:"q-py-none qListaItems"},[a("q-item",{staticClass:"itemLista"},[a("q-item-side",{nativeOn:{click:function(e){t.showsectionm=!t.showsectionm}}},[t._v("\n                    "+t._s(e.codigoDocumento)+"\n                  ")]),a("q-item-main",{staticClass:"hideondesktop",attrs:{label:e.descricaoContato},nativeOn:{click:function(e){t.showsectionm=!t.showsectionm}}},[a("q-item-tile",{attrs:{stamp:""}},[t._v(t._s(e.numeroVolumeTransporte))]),a("q-item-tile",{attrs:{stamp:""}},[t._v(t._s(t._f("data")(e.dataHoraEmissao)))]),a("q-item-tile",{attrs:{stamp:""}},[t._v(t._s(t._f("data")(e.dataHoracancelado)))]),a("badge",{staticClass:"q-mr-sm",attrs:{escuro:"",cor:"negative"}},[t._v(t._s(e.status))])],1),a("q-item-main",{staticClass:"hideonmobile",nativeOn:{click:function(e){t.showsectionm=!t.showsectionm}}},[a("q-item-tile",[t._v(t._s(e.descricaoContato))])],1),a("q-item-main",{staticClass:"hideonmobile",nativeOn:{click:function(e){t.showsectionm=!t.showsectionm}}},[a("q-item-tile",{attrs:{stamp:""}},[t._v(t._s(e.numeroVolumeTransporte))]),a("q-item-tile",{attrs:{stamp:""}},[t._v(t._s(t._f("data")(e.dataHoraEmissao)))]),a("q-item-tile",{attrs:{stamp:""}},[t._v(t._s(t._f("data")(e.dataHoracancelado)))])],1),a("q-item-main",{staticClass:"hideonmobile"},[a("badge",{staticClass:"q-mr-sm",attrs:{escuro:"",cor:"negative"}},[t._v("\n                      "+t._s(e.status)+"\n                    ")])],1),a("q-item-side",{attrs:{right:""}},[a("q-btn",{staticClass:"buttons",attrs:{color:"tertiary",size:"md",icon:e.showPreviewDetail?"keyboard_arrow_up":"keyboard_arrow_down",flat:"",dense:"",round:""},nativeOn:{click:function(a){t.showDetails(e)}}}),a("q-btn",{staticClass:"buttons",attrs:{color:"tertiary",size:"md",icon:"edit",flat:"",dense:"",round:""},nativeOn:{click:function(a){t.editar(e.id)}}}),a("q-btn",{staticClass:"buttons",attrs:{color:"tertiary",size:"md",icon:"delete",flat:"",dense:"",round:""}}),a("q-btn",{staticClass:"morevert",attrs:{flat:"",dense:"",icon:"more_vert",round:"",size:"md"}},[a("q-popover",[a("q-list",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],staticClass:"q-py-none",attrs:{link:"","no-border":"",separator:""}},[a("q-item",{nativeOn:{click:function(a){t.editar(e.id)}}},[a("q-item-side",{attrs:{icon:"edit"}}),a("q-item-main",{attrs:{label:"Editar"}})],1)],1)],1)],1)],1)],1),e.showPreviewDetail?a("q-item",{staticClass:" q-pa-md"},[a("q-item-main",{attrs:{label:"Itens"}},t._l(e.documentoItens,function(e){return a("div",{key:e.id},[a("q-item-tile",{staticClass:"items-center",attrs:{stamp:""}},[a("span",[t._v(" "+t._s(e.quantidade)+" "+t._s(e.unidade)+" - "+t._s(e.descricaoItem)+" ")]),a("badge",{staticClass:"q-mx-sm",attrs:{escuro:"",cor:"primary"}},[t._v("\n                          "+t._s(e.tipoItem)+"\n                        ")])],1)],1)}))],1):t._e(),a("q-item-separator")],1):t._e()}),a("q-pagination",{staticClass:"justify-center q-mb-sm",attrs:{input:"",color:"dark",min:t.page.cancelado.min,max:t.page.cancelado.max},on:{input:function(e){t.filtrar(t.page.cancelado.current)}},model:{value:t.page.cancelado.current,callback:function(e){t.$set(t.page.cancelado,"current",e)},expression:"page.cancelado.current"}})],2)],1)],1):t._e(),a("div",{staticClass:"q-pb-md"},[a("q-btn",{staticClass:"fixed hideondesktop",staticStyle:{right:"18px",bottom:"18px"},attrs:{round:"",color:"primary",icon:"add",size:"lg"},on:{click:t.adicionarContrato}})],1)])],1),a("q-layout-drawer",{style:t.showFilters?{opacity:1}:{opacity:0},attrs:{side:t.left?"left":"right",id:"mydrawer","content-class":"mydrawerFL"},model:{value:t.showFilters,callback:function(e){t.showFilters=e},expression:"showFilters"}},[a("q-toolbar",{attrs:{color:"white","text-color":"faded"}},[a("q-icon",{attrs:{name:"mdi-filter",color:"faded"}}),a("q-toolbar-title",{staticClass:"q-subheading"},[t._v("Filtrar")]),a("q-btn",{attrs:{dense:"",flat:"",icon:"close",round:""},on:{click:function(e){t.showFilters=!t.showFilters}}})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 q-px-sm"},[a("q-select",{staticClass:"q-mx-sm",attrs:{options:t.filtro.empresas.options,clearable:"",placeholder:"Por empresa"},nativeOn:{click:function(e){return t.empresaOpcoesCarregar(e)}},model:{value:t.filtro.empresas.selected,callback:function(e){t.$set(t.filtro.empresas,"selected",e)},expression:"filtro.empresas.selected"}})],1),a("div",{staticClass:"col-12 row q-px-md q-mt-lg"},[a("h1",{staticClass:"col-12 q-body-2 text-dark"},[t._v("Per√≠odo de Emiss√£o")]),a("div",{staticClass:"col-6 "},[a("campo",{staticClass:"no-shadow full-width",attrs:{tipo:"data",rotulo:"De",after:[{icon:"mdi-close-circle",handler:function(){t.filtro.periodo.emissao.ini=""}}]},model:{value:t.filtro.periodo.emissao.ini,callback:function(e){t.$set(t.filtro.periodo.emissao,"ini",e)},expression:"filtro.periodo.emissao.ini"}})],1),a("div",{staticClass:"col-6 "},[a("campo",{staticClass:"no-shadow full-width",attrs:{tipo:"data",rotulo:"at√©",after:[{icon:"mdi-close-circle",handler:function(){t.filtro.periodo.emissao.fim=""}}]},model:{value:t.filtro.periodo.emissao.fim,callback:function(e){t.$set(t.filtro.periodo.emissao,"fim",e)},expression:"filtro.periodo.emissao.fim"}})],1)]),a("div",{staticClass:"col-12 row q-px-md q-mt-lg"},[a("h1",{staticClass:"col-12 q-body-2 text-dark"},[t._v("Dia de Vencimento")]),a("div",{staticClass:"col-6"},[a("campo",{staticClass:"no-shadow full-width",attrs:{tipo:"numero",rotulo:"De",after:[{icon:"mdi-close-circle",handler:function(){t.filtro.periodo.cancelado.ini=""}}]},model:{value:t.filtro.periodo.cancelado.ini,callback:function(e){t.$set(t.filtro.periodo.cancelado,"ini",e)},expression:"filtro.periodo.cancelado.ini"}})],1),a("div",{staticClass:"col-6 "},[a("campo",{staticClass:"no-shadow full-width",attrs:{tipo:"numero",rotulo:"at√©",after:[{icon:"mdi-close-circle",handler:function(){t.filtro.periodo.cancelado.fim=""}}]},model:{value:t.filtro.periodo.cancelado.fim,callback:function(e){t.$set(t.filtro.periodo.cancelado,"fim",e)},expression:"filtro.periodo.cancelado.fim"}})],1)]),a("div",{staticClass:"col-12 row q-px-md q-mt-lg"},[a("campo",{attrs:{opcoes:{max:30,min:1},rotulo:"Quantidade por p√°gina",tipo:"quantidade"},model:{value:t.pageSize,callback:function(e){t.pageSize=e},expression:"pageSize"}})],1),a("div",{staticClass:"col-12 row q-px-md q-mt-lg"},[a("q-btn",{staticClass:"col-12 ",attrs:{color:"primary",label:"Aplicar"},on:{click:function(e){t.filtrar(1)}}})],1)])],1),a("ModalExcluir",{ref:"modalExcluir",on:{excluir:t.excluirDocumento}}),a("Contrato",{ref:"contrato",on:{atualizar:t.atualizar}})],1)},i=[];o._withStripped=!0;var n=a("448a"),s=a.n(n),r=a("3156"),c=a.n(r),l=(a("ac4d"),a("8a81"),a("ac6a"),a("96cf"),a("c973")),d=a.n(l),m=a("8149"),u=a("a0fd"),p=a("01f0"),f=a("4c39"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-modal",{attrs:{maximized:""},on:{show:t.mostrar,hide:t.fechar},model:{value:t.visibilidade.modal,callback:function(e){t.$set(t.visibilidade,"modal",e)},expression:"visibilidade.modal"}},[a("q-modal-layout",{staticClass:"bg-grey-4"},[a("q-toolbar",{attrs:{slot:"header"},slot:"header"},[a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{dense:"",flat:"",icon:"arrow_back",round:""}}),a("q-toolbar-title",[t._v("Contrato")]),a("q-btn",{staticClass:"q-ml-sm no-shadow",attrs:{color:"white","text-color":"primary",label:"Salvar"},on:{click:function(e){t.gravar(!1)}}})],1),a("div",{staticClass:"u-container q-py-sm"},[a("q-toolbar",{staticClass:"q-pa-none q-ma-none q-mb-md ",staticStyle:{"min-height":"auto"},attrs:{color:"none","text-color":"black"}},[a("q-toolbar-title",{staticClass:"text-black q-px-none q-body-1 "},[t._v("Emiss√£o: "+t._s(t._f("data")(t.documento.dataHoraEmissao))+"\n          "),t.documento.dataHoraFinalizado?a("span",[t._v("Cancelamento: "+t._s(t._f("data")(t.documento.dataHoraFinalizado)))]):t._e()]),"Ativo"===t.documento.status?a("badge",{staticClass:"q-mx-sm ",attrs:{cor:"positive",icone:"flag",escuro:""}},[t._v("\n          "+t._s(t.documento.status)+"\n        ")]):t._e(),"Cancelado"===t.documento.status?a("badge",{staticClass:"q-mx-xs ",attrs:{cor:"negative",icone:"flag",escuro:""}},[t._v("\n          "+t._s(t.documento.status)+"\n        ")]):t._e(),t.documento.numero?a("badge",{staticClass:"q-mx-xs ",attrs:{cor:"faded",escuro:"",icone:"playlist_add_check"}},[t._v("\n          #"+t._s(t.documento.numero)+"\n          "),t.documento.codigoDocumento?a("q-tooltip",[t._v("C√≥digo: "+t._s(t.documento.codigoDocumento))]):t._e()],1):t._e(),t.documento.numero?a("q-btn",{staticClass:"q-ml-xs",attrs:{color:"primary",icon:"print",flat:"",dense:"",round:""}}):t._e()],1),a("q-card",{staticClass:"bg-white q-pa-md  q-mt-md no-shadow"},[a("form",{ref:"form"},[a("div",{staticClass:"row gutter-sm"},[a("div",{staticClass:"col-12 col-md-4"},[a("avatar",{staticClass:"q-mr-sm",staticStyle:{float:"left"},attrs:{imagem:"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQZH7c1xxmppduvnIzq7oevpcDCK3nDoGgqjR6-yZ7L7kHCKDeq",rotulo:"avatar",tamanho:"30"}}),a("campo",{attrs:{placeholder:"Emitente",tipo:"seletor",opcoes:t.empresas.map(function(t){return{rotulo:t.nome,valor:t.id}}),disabled:"Cancelado"===t.documento.status,somenteLeitura:"Cancelado"===t.documento.status},on:{input:t.aoSelecionarEmitente},model:{value:t.emitente.id,callback:function(e){t.$set(t.emitente,"id",e)},expression:"emitente.id"}})],1),a("div",{staticClass:"col-12 col-md-4"},[a("avatar",{staticClass:"q-mr-sm",staticStyle:{float:"left"},attrs:{imagem:"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQZH7c1xxmppduvnIzq7oevpcDCK3nDoGgqjR6-yZ7L7kHCKDeq",rotulo:"avatar",tamanho:"30"}}),a("campo",{attrs:{placeholder:"Cliente",tipo:"texto",after:[{icon:"edit",handler:function(){t.contatosModal=!0}}],disabled:"Cancelado"===t.documento.status,somenteLeitura:"Cancelado"===t.documento.status},on:{input:t.aoSelecionarCliente},nativeOn:{click:function(e){t.contatosModal="Cancelado"!==t.documento.status}},model:{value:t.cliente.nome,callback:function(e){t.$set(t.cliente,"nome",e)},expression:"cliente.nome"}})],1),a("campo",{staticClass:"col-12 col-md-4 ",attrs:{opcoes:{minimumValue:1,maximumValue:28},placeholder:"Dia Vencimento",tipo:"numero"},on:{blur:t.validaDia},model:{value:t.diaVencimento,callback:function(e){t.diaVencimento=e},expression:"diaVencimento"}})],1)])]),a("q-card",{staticClass:"bg-white q-pa-md  q-mt-md no-shadow"},[a("q-toolbar",{staticClass:"q-pa-none q-ma-none q-mb-md",staticStyle:{"min-height":"auto"},attrs:{color:"none","text-color":"black"}},[a("p",{staticClass:"q-item-label q-mb-none",staticStyle:{color:"#0c0c0c"}},[a("q-icon",{staticClass:"q-mr-md",staticStyle:{color:"#737373"},attrs:{name:"shopping_cart",size:"24px"}}),t._v(" Itens\n          ")],1),a("q-toolbar-title",{staticClass:"q-pa-none q-ma-none",staticStyle:{height:"0 !important","min-height":"auto"}}),"Cancelado"!==t.documento.status?a("q-btn",{attrs:{color:"positive",flat:"",dense:"",icon:"add",round:"",size:"md"},on:{click:function(e){t.abrirModal()}}},[a("q-tooltip",[t._v("Adicionar Item")])],1):t._e()],1),a("q-list",{staticClass:"col-12 no-border q-mx-none q-pa-none"},[a("q-item",{staticClass:"q-pa-none"},[a("q-item-main",[a("q-item-tile",{attrs:{sublabel:""}},[a("div",{staticClass:"row text-weight-bold text-left justify-around"},[a("div",{staticClass:"col-2 col-lg-1"},[t._v("C√≥digo")]),a("div",{staticClass:"col-10 col-lg-3 "},[t._v("Descri√ß√£o Item")]),a("div",{staticClass:"col-3 col-lg-2 text-right"},[t._v("Quantidade")]),a("div",{staticClass:"col-3 col-lg-2 text-right"},[t._v("Valor Item")]),a("div",{staticClass:"col-3 col-lg-2 text-right"},[t._v("Total")]),a("div",{staticClass:"col-3 col-lg"})])]),a("q-item-separator",{staticClass:"q-my-xs"}),t._l(t.documentoItens,function(e,o){return a("div",{key:o},[a("q-item-tile",{attrs:{sublabel:""}},[a("div",{staticClass:"row text-left justify-around"},[a("div",{staticClass:"col-2 col-lg-1 "},[t._v("\n                      "+t._s(e.codigoItem||"-")+"\n                    ")]),a("div",{staticClass:"col-10 col-lg-3 "},[t._v("\n                      "+t._s(e.descricaoItem||"-")+"\n                    ")]),a("div",{staticClass:"col-3 col-lg-2 text-right"},[t._v("\n                      "+t._s(e.quantidade||"-")+" "+t._s(e.unidade||"-")+"\n                    ")]),a("div",{staticClass:"col-3 col-lg-2 text-right"},[t._v(t._s(t._f("numero")(e.valorItem,2)))]),a("div",{staticClass:"col-3 col-lg-2 text-right"},[t._v(t._s(t._f("numero")(e.total,2)))]),a("div",{staticClass:"col-3 col-lg text-right"},[a("q-btn",{attrs:{flat:"",dense:"",icon:"edit",round:"",size:"md"},on:{click:function(a){t.abrirModal(e.idItem)}}},[a("q-tooltip",[t._v("Editar")])],1),a("q-btn",{attrs:{flat:"",dense:"",icon:"delete",round:"",size:"md"},on:{click:function(a){t.excluirItem(e.id)}}},[a("q-tooltip",[t._v("Excluir")])],1)],1)])]),a("q-item-separator",{staticClass:"q-my-xs"}),a("q-item-tile",{attrs:{sublabel:""}})],1)})],2)],1),a("q-item-tile",{attrs:{sublabel:""}},[a("div",{staticClass:"row text-weight-bold text-left justify-around"},[a("div",{staticClass:"col-2 col-lg-1 q-pr-md "}),a("div",{staticClass:"col-10 col-lg-3 "}),a("div",{staticClass:"col-3 col-lg-2 text-right"}),a("div",{staticClass:"col-3 col-lg-2 text-right "}),a("div",{staticClass:"col-3 col-lg-2 text-right"},[t._v(t._s(t._f("numero")(t.totalItens,2)))]),a("div",{staticClass:"col-3 col-lg"})])]),a("q-item",{staticClass:"text-center"},[a("q-btn",{staticClass:"q-mx-auto",attrs:{color:"positive",icon:"add",label:"Adicionar item",outline:"",size:"xs"},on:{click:function(e){t.abrirModal()}}})],1)],1)],1),a("prompt-item-novo",{ref:"promptItem",attrs:{filtro:{ativo:!0},habilitarQuantidade:!0},on:{selecionarItens:t.selecionarItens},model:{value:t.itensModal,callback:function(e){t.itensModal=e},expression:" itensModal"}}),a("prompt-contato-novo",{attrs:{filtro:{ativo:!0}},on:{selecionar:t.aoSelecionarCliente},model:{value:t.contatosModal,callback:function(e){t.contatosModal=e},expression:"contatosModal"}})],1),t.documento.numero?a("q-toolbar",{staticClass:"footer",staticStyle:{background:"#eeeeee !important"},attrs:{slot:"footer"},slot:"footer"},[a("q-toolbar-title",{staticClass:"text-right"},["Ativo"===t.documento.status?a("q-btn",{staticClass:"q-mx-md",attrs:{color:"negative",flat:"",label:"Cancelar"},on:{click:t.cancelar}}):t._e(),"Cancelado"===t.documento.status?a("q-btn",{attrs:{color:"primary",label:"Ativar"},on:{click:t.ativar}}):t._e()],1)],1):t._e()],1)],1)},v=[];h._withStripped=!0;a("7514");var b=a("3e8a"),q=a("ed08"),C=a("88db"),g=a("3c82"),x=a("41ff"),w=a("df3a"),_={components:{Campo:C["a"],PromptItemNovo:g["a"],Avatar:w["a"],PromptContatoNovo:x["a"]},data:function(){return{cliente:{},emitente:{},diaVencimento:"",documentoAnterior:{},documentoItensAnterior:[],documento:{id:Object(q["uuid"])(),dataHoraEmissao:Object(q["dataAtual"])(),numero:"",descricaoContato:"",idContato:"",descricaoEmpresa:"",idEmpresa:"",numeroVolumeTransporte:"",status:"Ativo",tipo:"Contrato"},documentoItens:[],totalItens:0,visibilidade:{modal:!1},itensModal:!1,carregando:!0,contatosModal:!1,emitenteModal:!1,empresas:[]}},methods:{atualizar:function(){var t=d()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=16;break}return t.next=3,m["a"].contrato.le({id:e});case 3:return this.documentoAnterior=t.sent,this.documento=Object(q["clonarV2"])(this.documentoAnterior),t.next=7,m["a"].itemManipulacao.leItens({idDocumento:e});case 7:this.documentoItensAnterior=t.sent,this.documentoItens=Object(q["clonarV2"])(this.documentoItensAnterior),this.cliente.id=this.documento.idContato,this.cliente.nome=this.documento.descricaoContato,this.emitente.id=this.documento.idEmpresa,this.emitente.nome=this.documento.descricaoEmpresa,this.diaVencimento=this.documento.numeroVolumeTransporte,t.next=17;break;case 16:this.limparCampos();case 17:return t.next=19,m["a"].itemBusca.filtrar(null,{},0);case 19:return this.itens=t.sent,t.next=22,m["a"].empresa.le();case 22:this.empresas=t.sent,this.somarValorTotal();case 24:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),mostrar:function(){var t=d()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(q["dormir"])(500);case 2:this.carregando=!1;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),fechar:function(){this.carregando=!0},limparCampos:function(){this.documentoAnterior={},this.documento={id:Object(q["uuid"])(),dataHoraEmissao:Object(q["dataAtual"])(),numero:"",descricaoContato:"",idContato:"",descricaoEmpresa:"",idEmpresa:"",numeroVolumeTransporte:"",status:"Ativo",tipo:"Contrato"},this.documentoItensAnterior=[],this.documentoItens=[],this.cliente.id="",this.cliente.nome="",this.emitente.id="",this.emitente.nome="",this.diaVencimento=""},abrirModal:function(){var t=d()(regeneratorRuntime.mark(function t(){var e,a,o,i,n,s,r,c,l,d=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=d.length>0&&void 0!==d[0]?d[0]:"",a={},o=[],o=e?this.documentoItens.filter(function(t){return t.idItem===e}):this.documentoItens,i=!0,n=!1,s=void 0,t.prev=7,r=o[Symbol.iterator]();case 9:if(i=(c=r.next()).done){t.next=22;break}return l=c.value,t.next=13,Object(b["a"])().item.get(l.idItem);case 13:if(t.t0=t.sent,t.t0){t.next=16;break}t.t0={};case 16:t.t1=t.t0,t.t2=l.quantidade,a[l.idItem]={item:t.t1,quantidade:t.t2};case 19:i=!0,t.next=9;break;case 22:t.next=28;break;case 24:t.prev=24,t.t3=t["catch"](7),n=!0,s=t.t3;case 28:t.prev=28,t.prev=29,i||null==r.return||r.return();case 31:if(t.prev=31,!n){t.next=34;break}throw s;case 34:return t.finish(31);case 35:return t.finish(28);case 36:this.$refs.promptItem.itensSelecionados=a,this.$refs.promptItem.termo=e,this.$refs.promptItem.atualizar(),this.itensModal=!0;case 40:case"end":return t.stop()}},t,this,[[7,24,28,36],[29,,31,35]])}));return function(){return t.apply(this,arguments)}}(),aoSelecionarCliente:function(t,e){this.cliente=Object(q["clonarV2"])(e),this.contatosModal=!1,this.documento.idContato=this.cliente.id,this.documento.descricaoContato=this.cliente.nome},aoSelecionarEmitente:function(){var t=this;this.emitente=this.empresas.filter(function(e){return e.id===t.emitente.id})[0],this.contatosModal=!1,this.documento.idEmpresa=this.emitente.id,this.documento.descricaoEmpresa=this.emitente.nome},aoSelecionarVencimento:function(){this.documento.numeroVolumeTransporte=this.diaVencimento},selecionarItens:function(t){var e=this,a=function(a){var o=t[a].item||{},i=t[a].quantidade||0,n=e.documentoItens.find(function(t){return t.idItem===a});n?(n.quantidade=i,n.quantidadeRealizado=i,n.total=Object(q["arredondar"])(i*o.valorVenda)):e.documentoItens.push({dataHoraEmissao:Object(q["dataAtual"])(),descricaoItem:o.descricao,id:Object(q["uuid"])(),idDocumento:e.documento.id,idItem:o.id,operacao:"-",quantidade:i,unidade:o.unidade,quantidadeRealizado:i,tipoItem:o.tipo,total:Object(q["arredondar"])(i*o.valorVenda),valorItem:o.valorVenda})};for(var o in t)a(o);this.somarValorTotal()},somarValorTotal:function(){this.totalItens=this.documentoItens.reduce(function(t,e){return t+e.total},0)},excluirItem:function(t){this.documentoItens=this.documentoItens.filter(function(e){return e.id!==t}),this.somarValorTotal()},validaDia:function(){this.diaVencimento<1?(this.$q.notifyAlert("O dia deve ser um valor entre 1 e 28"),this.diaVencimento=1):this.diaVencimento>28?(this.$q.notifyAlert("O dia deve ser um valor entre 1 e 28"),this.diaVencimento=28):this.aoSelecionarVencimento()},gravar:function(){var t=d()(regeneratorRuntime.mark(function t(){var e,a=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=a.length>0&&void 0!==a[0]&&a[0],this.cliente.id){t.next=4;break}return this.$q.notifyAlert("Selecione um Cliente"),t.abrupt("return");case 4:if(this.emitente.id){t.next=7;break}return this.$q.notifyAlert("Selecione um Emitente"),t.abrupt("return");case 7:if(this.diaVencimento){t.next=10;break}return this.$q.notifyAlert("Selecione um dia de Vencimento"),t.abrupt("return");case 10:if(this.totalItens){t.next=13;break}return this.$q.notifyAlert("Adicione alguns itens ao contrato"),t.abrupt("return");case 13:return t.prev=13,t.next=16,m["a"].contrato.grava({documentoAnterior:this.documentoAnterior,documento:this.documento,documentoItensAnterior:this.documentoItensAnterior,documentoItens:this.documentoItens});case 16:this.visibilidade.modal=e,this.atualizar(this.documento.id),this.$emit("atualizar"),t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](13),this.$q.notifyError("Erro ao salvar",t.t0);case 24:case"end":return t.stop()}},t,this,[[13,21]])}));return function(){return t.apply(this,arguments)}}(),cancelar:function(){this.documento.status="Cancelado",this.documento.dataHoraFinalizado=Object(q["dataAtual"])(),this.gravar(!1)},ativar:function(){this.documento.status="Ativo",this.documento.dataHoraFinalizado="",this.gravar(!0)}},created:function(){var t=d()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("created");case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},k=_,y=a("2877"),I=Object(y["a"])(k,h,v,!1,null,null,null);I.options.__file="Contrato.vue";var z=I.exports,O={components:{BarraTopo:p["a"],Badge:u["a"],ModalExcluir:f["a"],Contrato:z},data:function(){return{confirm:!1,currentId:null,documentos:[],documentoItens:null,showsectionm:!1,tabsModel:"aberto",page:{ativo:{current:1,min:1,max:1},cancelado:{current:1,min:1,max:1},ativa:"Ativo"},pageSize:10,buscaCampo:"",checkboxModel:[],carregando:!1,contatosEmpresa:[],dados:{},erroEmpresas:!1,erroPeriodo:!1,filtro:{empresas:{selected:"",options:[]},periodo:{emissao:{ini:"",fim:""},cancelado:{ini:"",fim:""}}},showingHelp:!1,showFilters:!1,showList:!1,gantt:!1,kanban:!1,ganttL:!1,kanbanL:!1,section:!1,list:!0,left:!1}},methods:{adicionarContrato:function(){var t=d()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.contrato.atualizar();case 2:this.$refs.contrato.visibilidade.modal=!0;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),buscar:function(){var t=d()(regeneratorRuntime.mark(function t(){var e,a,o,i,n,r,l,d,u,p,f,h,v,b,q,C,g,x,w,_,k,y,I,z,O,A;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(""===this.buscaCampo){t.next=101;break}return e=[],a=[],t.next=5,m["a"].itemBusca.filtrar(this.buscaCampo,{},0);case 5:if(o=t.sent,!o){t.next=65;break}i=!0,n=!1,r=void 0,t.prev=10,l=o[Symbol.iterator]();case 12:if(i=(d=l.next()).done){t.next=21;break}return u=d.value,t.next=16,m["a"].contrato.leItens({idItem:u.id});case 16:p=t.sent,e.push(p);case 18:i=!0,t.next=12;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t["catch"](10),n=!0,r=t.t0;case 27:t.prev=27,t.prev=28,i||null==l.return||l.return();case 30:if(t.prev=30,!n){t.next=33;break}throw r;case 33:return t.finish(30);case 34:return t.finish(27);case 35:e=e.flat(),console.log({documentosItem:e}),f=!0,h=!1,v=void 0,t.prev=40,b=e[Symbol.iterator]();case 42:if(f=(q=b.next()).done){t.next=51;break}return C=q.value,t.next=46,m["a"].contrato.le({id:C.idDocumento});case 46:g=t.sent,a.push(c()({},g));case 48:f=!0,t.next=42;break;case 51:t.next=57;break;case 53:t.prev=53,t.t1=t["catch"](40),h=!0,v=t.t1;case 57:t.prev=57,t.prev=58,f||null==b.return||b.return();case 60:if(t.prev=60,!h){t.next=63;break}throw v;case 63:return t.finish(60);case 64:return t.finish(57);case 65:return console.log({documentosFiltrados:a}),t.next=68,m["a"].contatoBusca.filtrar(this.buscaCampo,{},0);case 68:if(x=t.sent,!x){t.next=98;break}w=!0,_=!1,k=void 0,t.prev=73,y=x[Symbol.iterator]();case 75:if(w=(I=y.next()).done){t.next=84;break}return O=I.value,t.next=79,m["a"].contrato.le({idContato:O.id});case 79:A=t.sent,(z=a).push.apply(z,s()(A[0]));case 81:w=!0,t.next=75;break;case 84:t.next=90;break;case 86:t.prev=86,t.t2=t["catch"](73),_=!0,k=t.t2;case 90:t.prev=90,t.prev=91,w||null==y.return||y.return();case 93:if(t.prev=93,!_){t.next=96;break}throw k;case 96:return t.finish(93);case 97:return t.finish(90);case 98:a=a.flat(),this.documentos=a.map(function(t){return c()({},t,{showPreviewDetail:!1,documentoItens:[]})}),console.log(a,this.documentos);case 101:case"end":return t.stop()}},t,this,[[10,23,27,35],[28,,30,34],[40,53,57,65],[58,,60,64],[73,86,90,98],[91,,93,97]])}));return function(){return t.apply(this,arguments)}}(),limparBusca:function(){this.buscaCampo||this.atualizar()},abrirFiltro:function(){!0===this.section||!0===this.kanban||!0===this.gantt?this.left=!0:this.left=!1,this.showFilters=!this.showFilters},getPage:function(t){this.page.ativa=t,this.filtrar()},editar:function(){var t=d()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.contrato.atualizar(e);case 2:this.$refs.contrato.visibilidade.modal=!0;case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),excluir:function(t){this.currentId=t,this.$refs.modalExcluir.modal.visivel=!0},excluirDocumento:function(){var t=d()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].contrato.remove(this.currentId);case 2:this.atualizar();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),showDetails:function(){var t=d()(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].contrato.leItens({idDocumento:e.id});case 2:a=t.sent,e.documentoItens=a,e.showPreviewDetail=!e.showPreviewDetail;case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),atualizar:function(){var t=d()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].contrato.le();case 2:e=t.sent,this.documentos=e[0].map(function(t){return c()({},t,{showPreviewDetail:!1,documentoItens:[]})});case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),filtrar:function(){var t=d()(regeneratorRuntime.mark(function t(){var e,a,o,i,n=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:1,this.buscaCampo="",a=(e-1)*this.pageSize,t.next=5,m["a"].contrato.le({periodoEmissao:{ini:this.filtro.periodo.emissao.ini,fim:this.filtro.periodo.emissao.fim},diaVencimento:{ini:this.filtro.periodo.cancelado.ini,fim:this.filtro.periodo.cancelado.fim},status:this.page.ativa,idEmpresa:this.filtro.empresas.selected,offset:a,limit:this.pageSize});case 5:o=t.sent,this.documentos=o[0].map(function(t){return c()({},t,{showPreviewDetail:!1,documentoItens:[]})}),i=o[1],this.page.ativo.max=Math.ceil(i/this.pageSize),this.page.cancelado.max=Math.ceil(i/this.pageSize);case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),empresaOpcoesCarregar:function(){var t=d()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["a"].empresa.le();case 2:t.t0=function(t){return{label:t.nome,value:t.id}},this.filtro.empresas.options=t.sent.map(t.t0);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},created:function(){this.atualizar()}},A=O,E=(a("8780"),Object(y["a"])(A,o,i,!1,null,"12347765",null));E.options.__file="ContratosLista.vue";e["default"]=E.exports}}]);