(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["0ece9972"],{"0e70":function(t,e,a){"use strict";a("28a5"),a("3b2b"),a("6762"),a("2fdb"),a("6b54"),a("f559");var r=a("7330"),i=a("ee34"),n=a("b5ae"),o={executa:function(t){var e={};for(var a in t)e[a]=o.geraTags(t[a],a);return e},geraTags:function(t,e){var a={},r=!1;for(var i in t)i.startsWith("_")||(i.startsWith("lista")?a["$each"]=o.geraTags(t[i],e+"."+i):"visivel"===i||"valor_escolha"===i||(a[i]=o.geraTags(t[i],e+"."+i)),r=!0);return r||(a={c:o.consiste(e)}),a},formataNumero:function(t,e){var a=t;if("number"===typeof t){var r=t.toFixed(e),i=t.toString();a=r.length>i.length?r:i}return a},mensagemPorTipo:function(t,e,a,r,n,o,s){var c="";return c="cEAN"===e||"cEANTrib"===e?"Deve conter 8, 12, 13 ou 14 digitos ou o texto SEM GTIN":"TCnpj"===a?"Deve conter 14 digitos":"TCnpjOpc"===a?"Deve conter 14 digitos ou em branco":"TCpf"===a?"Deve conter 11 digitos":"TIeDestNaoIsento"===a?"Deve conter de 2 a 14 digitos":"TIeDest"===a||"TIe"===a?"Deve conter de 2 a 14 digitos ou o texto ISENTO":"TSerie"===a?"Deve conter de 1 a 3 digitos":"TDec_0302a04Max100"===a?"Deve ser um número de 0 a 100 com até 4 decimais":a.startsWith("TDec_0302a04")?"Deve ser um número de 0 a 999 com até 4 decimais":i["a"].tiposNumero.includes(r)?o||0!==t?o&&0===t?"":0===n?"Número inválido":"Deve ser um valor com até "+n+" casas decimais":"Campo obrigatório":"Conteúdo inválido",c},consisteCampo:function(t,e,a){var r="string"===typeof t?t.length:null!=t?t.toString().length:0,n=e._minLength||0,s=e._maxLength||0,c=e._opcional||!1,l=e._pattern||null,u=e._type||"",f=e._tipo||"",m=parseInt(e._decimals||"0"),d="",p=!1;if(l){var v=t;i["a"].tiposNumero.includes(f)&&(v=o.formataNumero(t,m)),"data"===f?v=i["a"].formatarDataNFeSemHoras(t):"dataHora"===f&&(v=i["a"].formatarDataNFe(t));var h=new RegExp("^("+l+")$");p=h.test(v)}return d=c&&0===r?"":c||0!==r||p?r<n?"Tamanho mínimo de "+n+" caracteres":0!==s&&r>s?"Tamanho máximo de "+s+" caracteres":null===l||""===l||p?"":o.mensagemPorTipo(t,a,u,f,m,c,l):"Campo obrigatório",d},consiste:function(t){return n["helpers"].withParams({type:"contains",value:t},function(e){var a,i,n=t.split("."),s=this,c=r["a"];for(var l in n)a=n[l],l===n.length-1?i=a+"_erro":s="lista"===a?s[0]:s[a],c=c[a];var u=o.consisteCampo(e,c,a);return s[a]===e&&(s[i]=u),""===u})}};e["a"]=o},"39c1":function(t,e,a){"use strict";var r=a("5fc9"),i=a.n(r);i.a},"3b2b":function(t,e,a){var r=a("7726"),i=a("5dbc"),n=a("86cc").f,o=a("9093").f,s=a("aae3"),c=a("0bfb"),l=r.RegExp,u=l,f=l.prototype,m=/a/g,d=/a/g,p=new l(m)!==m;if(a("9e1e")&&(!p||a("79e5")(function(){return d[a("2b4c")("match")]=!1,l(m)!=m||l(d)==d||"/a/i"!=l(m,"i")}))){l=function(t,e){var a=this instanceof l,r=s(t),n=void 0===e;return!a&&r&&t.constructor===l&&n?t:i(p?new u(r&&!n?t.source:t,e):u((r=t instanceof l)?t.source:t,r&&n?c.call(t):e),a?this:f,l)};for(var v=function(t){t in l||n(l,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},h=o(u),g=0;h.length>g;)v(h[g++]);f.constructor=l,l.prototype=f,a("2aba")(r,"RegExp",l)}a("7a56")("RegExp")},"3c10":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"text-left q-mt-lg"},[a("div",{attrs:{row:""}},[a("q-btn",{staticClass:"q-ma-sm no-shadow",attrs:{color:"primary",icon:"healing",label:"Inutilização de número NFe/NFCe"},on:{click:t.abrirModalInutilizacao}})],1)]),a("NFeInutilizacao",{ref:"modalNFeInutilizacao"})],1)},i=[];r._withStripped=!0;var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-modal",{attrs:{"content-css":{width:"100vw",maxWidth:"768px"}},model:{value:t.modalInutilizacao,callback:function(e){t.modalInutilizacao=e},expression:"modalInutilizacao"}},[a("q-modal-layout",[a("q-toolbar",{attrs:{slot:"header"},slot:"header"},[a("q-toolbar-title",[t._v("Inutilização de número NFe/NFCe")])],1),a("form",{on:{submit:function(e){return e.preventDefault(),t.inutilizarNota(e)}}},[a("div",{staticClass:"layout-padding"},[a("div",{staticClass:"row gutter-x-sm"},[a("campo",{staticClass:"col-12",attrs:{value:t.descricaoEmpresa,before:[{icon:"search",handler:t.abrirModalInutilizacaoEmpresas}],rotulo:"Empresa","somente-leitura":""}}),a("campo",{staticClass:"col-md-3",attrs:{dica:t.metadados.infInut.mod._doc,opcoes:t.metadados.infInut.mod._enumeration,"rotulo-fixo":t.metadados.infInut.mod._titulo,tipo:"seletor"},model:{value:t.infInut.mod,callback:function(e){t.$set(t.infInut,"mod",e)},expression:"infInut.mod"}}),a("campo",{staticClass:"col-md-3",attrs:{dica:t.metadados.infInut.serie._doc,rotulo:t.metadados.infInut.serie._titulo,tipo:"texto"},model:{value:t.infInut.serie,callback:function(e){t.$set(t.infInut,"serie","string"===typeof e?e.trim():e)},expression:"infInut.serie"}}),a("campo",{staticClass:"col-md-3",attrs:{dica:t.metadados.infInut.nNFIni._doc,rotulo:t.metadados.infInut.nNFIni._titulo,tipo:"texto"},model:{value:t.infInut.nNFIni,callback:function(e){t.$set(t.infInut,"nNFIni","string"===typeof e?e.trim():e)},expression:"infInut.nNFIni"}}),a("campo",{staticClass:"col-md-3",attrs:{dica:t.metadados.infInut.nNFFin._doc,rotulo:t.metadados.infInut.nNFFin._titulo,tipo:"texto"},model:{value:t.infInut.nNFFin,callback:function(e){t.$set(t.infInut,"nNFFin","string"===typeof e?e.trim():e)},expression:"infInut.nNFFin"}}),a("campo",{staticClass:"col-md-12",attrs:{dica:t.metadados.infInut.xJust._doc,rotulo:t.metadados.infInut.xJust._titulo,tipo:"textoArea"},model:{value:t.infInut.xJust,callback:function(e){t.$set(t.infInut,"xJust","string"===typeof e?e.trim():e)},expression:"infInut.xJust"}})],1)]),a("q-toolbar",{attrs:{slot:"footer",color:"light"},slot:"footer"},[a("q-toolbar-title",[a("div",{staticClass:"row justify-end"},[a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{flat:"",color:"primary",label:"Cancelar"}}),a("q-btn",{attrs:{flat:"",color:"primary",type:"submit",label:"Inutilizar"}})],1)])],1)],1)],1)],1),a("prompt-contato-novo",{attrs:{filtro:{ativo:!0,empresas:!0}},on:{selecionar:t.selecionarEmpresaInutilizacao},model:{value:t.modalInutilizacaoEmpresas,callback:function(e){t.modalInutilizacaoEmpresas=e},expression:"modalInutilizacaoEmpresas"}})],1)},o=[];n._withStripped=!0;a("7514"),a("28a5");var s=a("448a"),c=a.n(s),l=(a("96cf"),a("c973")),u=a.n(l),f=a("88db"),m=a("41ff"),d=a("f94a"),p=a("f487"),v=a("da3f"),h=a("7330"),g=a("c1df"),I=a.n(g),b=a("a9a0"),N=a("895f"),x=a("8149"),C=a("ed08"),_={components:{Campo:f["a"],PromptContatoNovo:m["a"]},data:function(){return{descricaoEmpresa:"",metadados:h["a"],modalInutilizacao:!1,modalInutilizacaoEmpresas:!1,infInut:p["a"].executa(h["a"].infInut,{})}},methods:{abrirModalInutilizacao:function(){var t=u()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return C["gconsole"].log("ConfiguracoesDocumentosFiscais","abrirModalInutilizacao"),t.t0=p["a"],t.t1=h["a"].infInut,t.next=5,x["a"].configuracoes.leValorNumerico("nfce.homologacao");case 5:if(t.t2=t.sent,1!==t.t2){t.next=10;break}t.t3="2",t.next=11;break;case 10:t.t3="1";case 11:return t.t4=t.t3,t.t5=I()().format("YY"),t.t6=String,t.next=16,x["a"].configuracoes.leValorNumerico("nfce.padrao.serie",1);case 16:t.t7=t.sent,t.t8=(0,t.t6)(t.t7),t.t9={tpAmb:t.t4,mod:"",cUF:"",ano:t.t5,CNPJ:"",serie:t.t8,nNFIni:"",nNFFin:"",xJust:"Ocorreu uma falha que pulou a sequência de numeração"},this.infInut=t.t0.executa.call(t.t0,t.t1,t.t9),this.descricaoEmpresa="",this.modalInutilizacao=!0;case 22:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),abrirModalInutilizacaoEmpresas:function(){this.modalInutilizacaoEmpresas=!0},inutilizarNota:function(){var t=u()(regeneratorRuntime.mark(function t(){var e,a,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e="Erro na inutilização",t.prev=1,C["gconsole"].log("ConfiguracoesDocumentosFiscais","inutilizarNota",this.infInut),Object(C["verificarErro"])(!this.infInut.CNPJ||!this.infInut.cUF,"Empresa não selecionada"),Object(C["verificarErro"])(!this.infInut.mod,"Modelo não preenchido"),Object(C["verificarErro"])(!this.infInut.serie,"Serie não preenchida"),Object(C["verificarErro"])(!this.infInut.nNFIni,"Número inicial não preenchido"),Object(C["verificarErro"])(!this.infInut.xJust,"Justificativa não preenchida"),this.infInut.nNFFin||(this.infInut.nNFFin=this.infInut.nNFIni),a=d["a"].executa(h["a"].infInut,this.infInut),!d["a"].erros.length){t.next=13;break}return C["eventos"].$emit("mostrarModalAlerta",{titulo:"Erro de validação",erros:d["a"].erros}),t.abrupt("return");case 13:return b["a"].show({spinner:N["a"],spinnerColor:"amber",message:"Selecionando Certificado e Trasmitindo Inutilização"}),e="Ocorreu um erro ao Transmitir",t.next=17,v["a"].inutilizar(h["a"],a,this.idEmpresa);case 17:if(r=t.sent,"Erro"!==r.status){t.next=23;break}return C["gconsole"].log("ConfiguracoesDocumentosFiscais",r),i=c()((r.mensagem||"").split("\n")).concat(c()((r.complemento||"").split("\n"))),C["eventos"].$emit("mostrarModalAlerta",{titulo:r.status,erros:i}),t.abrupt("return");case 23:this.$q.notifyPositive(r.mensagem),this.modalInutilizacao=!1,t.next=30;break;case 27:t.prev=27,t.t0=t["catch"](1),this.$q.notifyError(e,t.t0);case 30:return t.prev=30,b["a"].hide(),t.finish(30);case 33:case"end":return t.stop()}},t,this,[[1,27,30,33]])}));return function(){return t.apply(this,arguments)}}(),selecionarEmpresaInutilizacao:function(){var t=u()(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,x["a"].contato.le({id:e});case 5:return a=t.sent,this.idEmpresa=e,Object(C["verificarErro"])(!a||!a.id,"Não foi possível recuperar os dados da empresa."),Object(C["verificarErro"])(!a.numeroDocumentoNacional,"Empresa emitente sem CNPJ cadastrado"),t.next=11,x["a"].contatoEndereco.le({idContato:e});case 11:a.enderecos=t.sent,Object(C["verificarErro"])(!a.enderecos||0===a.enderecos.length,"Não foi possível recuperar o endereço da empresa emitente"),a.enderecoPrincipal=a.enderecos.find(function(t){return"Principal"===t.grupo}),a.enderecoPrincipal||(a.enderecoPrincipal=a.enderecos[0]||{}),Object(C["verificarErro"])(!a.enderecoPrincipal.uf,"Empresa emitente sem UF cadastrado"),this.descricaoEmpresa=a.nome||"",this.infInut.cUF=String(C["mapearEstadoCodigo"][(a.enderecoPrincipal.uf||"").trim()]),this.infInut.CNPJ=Object(C["filtrarDigitos"])(a.numeroDocumentoNacional),t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](0),this.$q.notifyError("Erro ao selecionar a empresa.",t.t0);case 24:case"end":return t.stop()}},t,this,[[0,21]])}));return function(e){return t.apply(this,arguments)}}()}},F=_,E=(a("9a19"),a("2877")),z=Object(E["a"])(F,n,o,!1,null,null,null);z.options.__file="NFeInutilizacao.vue";var w=z.exports,T={components:{NFeInutilizacao:w},data:function(){return{}},methods:{abrirModalInutilizacao:function(){this.$refs.modalNFeInutilizacao.abrirModalInutilizacao()},abrirModalIbpt:function(){C["gconsole"].log("ConfiguracoesDocumentosFiscais","abrirModalIbpt")}}},y=T,D=(a("39c1"),Object(E["a"])(y,r,i,!1,null,null,null));D.options.__file="ConfiguracoesDocumentosFiscais.vue";e["default"]=D.exports},"58ad":function(t,e,a){},"5fc9":function(t,e,a){},"895f":function(t,e,a){"use strict";var r=a("0b3d");e["a"]={name:"QSpinnerGears",mixins:[r["a"]],render:function(t){return t("svg",{staticClass:"q-spinner",class:this.classes,attrs:{width:this.size,height:this.size,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{transform:"translate(-20,-20)"}},[t("path",{attrs:{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"}})])]),t("g",{attrs:{transform:"translate(20,20) rotate(15 50 50)"}},[t("path",{attrs:{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"}},[t("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"}})])])])}}},"9a19":function(t,e,a){"use strict";var r=a("58ad"),i=a.n(r);i.a},f487:function(t,e,a){"use strict";a("f559");e["a"]={executa:function(t,e,a){return this.geraTags(t,e,a)},geraTags:function(t,e,a){var r={},i=!1;for(var n in t)if(!n.startsWith("_")){if(n.startsWith("lista"))return this.geraLista(t[n],e,a);"visivel"===n?r[n]=null!=e&&n in e&&e[n]:"valor_escolha"===n?null!=e&&n in e?r[n]=e[n]:(r[n]=this.primeiraEscolha(t),"ICMS00"===r[n]&&(r[n]="")):r[n]=null!=e&&n in e?this.geraTags(t[n],e[n],a):this.geraTags(t[n],null,a),"NFCe"!==a&&(r[n+"_erro"]=""),i=!0}return i||(r=null==e?t._valorInic:"data"===t._tipo&&10===e.length?e+"T00:00:00":e),r},geraLista:function(t,e,a){var r=[];for(var i in e)r.push(this.geraTags(t,e[i],a));return r},primeiraEscolha:function(t){if(t._opcional)return"Não se aplica";for(var e in t)if(!e.startsWith("_")&&"valor_escolha"!==e)return e;return""}}},f94a:function(t,e,a){"use strict";a("6762"),a("2fdb"),a("ac6a"),a("cadf"),a("456d"),a("f559");var r=a("0e70"),i=a("ee34"),n=a("ed08");e["a"]={erros:null,executa:function(t,e){var a=Object(n["logarIni"])("compactarValidarNFe");try{return this.erros=[],this.gerarTags(t,e,"infNFe")}catch(t){throw console.error("Erro no compactarValidarNFe\n",t),t}finally{Object(n["logarFim"])(a)}},gerarTags:function(t,e,a){var r={};if(e=e||{},t.visivel){if(!e.visivel)return r;r.visivel=!0}for(var i in t)if(!i.startsWith("_")&&"visivel"!==i){var n=e[i],o=t[i];if(i.startsWith("opcional")){var s=this.gerarTags(o,n,a+"."+i);s.visivel&&(r[i]=s)}else if(i.startsWith("escolhas")){var c=(n||{}).valor_escolha||"";if(c in o){var l=this.gerarCampo(o[c],n,c,a+"."+c);null===l||l.constructor===Object&&0===Object.keys(l).length||(r[i]={valor_escolha:c},r[i][c]=l)}}else{var u=this.gerarCampo(o,e,i,a+"."+i);null!==u&&(r[i]=u)}}return r},gerarCampo:function(t,e,a,n){var o=(e||{})[a],s=r["a"].consisteCampo(o,t,a);if(s&&this.erros.push("Erro: "+s+". Campo: "+t._titulo+" ("+n+")"),i["a"].tiposNumero.includes(t._tipo)){if(o)return o;if(!t._opcional)return 0}else if("dataHora"===t._tipo){if(o)return i["a"].formatarDataNFe(o);if(!t._opcional)return""}else if("data"===t._tipo){if(o)return i["a"].formatarDataNFeSemHoras(o);if(!t._opcional)return""}else if("lista"in t){if(o&&o.constructor===Array&&o.length>0)return this.gerarLista(t.lista,o,n+"."+a);if(!t._opcional)return[]}else if(null===o||void 0===o){if(!t._opcional)return null}else if(o.constructor===String){if(o)return o;if(!t._opcional)return""}else{var c=this.gerarTags(t,o,n);if(null!=o&&Object.keys(c).length>0&&!1!==o.visivel)return c;if(!t._opcional)return{}}return null},gerarLista:function(t,e,a){var r=[];for(var i in e)r.push(this.gerarTags(t,e[i],a+"["+i+"]"));return r}}}}]);