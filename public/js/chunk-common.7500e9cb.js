"use strict";(globalThis.webpackChunkb15=globalThis.webpackChunkb15||[]).push([[64],{97675:(e,t,a)=>{a.d(t,{Z:()=>ue});var o=a(34182);const d={class:"col-auto q-pl-none items-center"},r={class:"col"},i={class:"col-auto"},l={class:"col"},n={class:"col"},s=(0,o.createTextVNode)(" Finalizado "),c=(0,o.createTextVNode)(" Emissão "),m={class:"col"},u=(0,o.createTextVNode)(" Vendedor(a) "),v=(0,o.createTextVNode)(" Finalizado "),p=(0,o.createTextVNode)(" Emissão "),h=(0,o.createTextVNode)(" Vendedor(a) "),V=(0,o.createTextVNode)("Valor total"),x=(0,o.createTextVNode)("NFe de Saída/Venda"),f=(0,o.createTextVNode)("NFe de Entrada/Devolução"),C=(0,o.createTextVNode)("NFe de Remessa"),N=(0,o.createTextVNode)("Migrar para nova fatura"),k=(0,o.createTextVNode)("Histórico do Status"),w=(0,o.createTextVNode)("Resetar Envio"),g={class:"col-12 col-md-4"},y=(0,o.createTextVNode)(" OS "),_=(0,o.createTextVNode)("OS "),b={class:"col-12 col-md-4"},E={class:"q-px-sm"},D={key:0,class:"q-mt-sm"},B={style:{display:"block"}},T=(0,o.createElementVNode)("br",null,null,-1),F={class:"round-borders"},S={class:"col-12 col-md-4"},q={key:0,class:"q-px-sm"},I=(0,o.createTextVNode)(" Faturamento "),$={class:"q-mt-sm"},z={style:{display:"block"}},A={key:1,class:"q-px-sm text-right"},O={class:"q-mt-none text-right"},H=(0,o.createElementVNode)("small",{class:"q-mr-xs"},"Desconto",-1),Z={class:"text-subtitle1"};var M=a(33337),P=(a(91330),a(72407)),Q=a(77810),R=a(19306),L=a(26200),G=a(77418),J=a(84645),U=a(88603);a(65278);const W={alterados:0,arquivo:null,cor:"text-negative",corFinal:"",erro:"",erros:0,incluidos:0,listaErros:[],mensagem:"",mensagemFinal:"",modalResultado:!1},j={components:{Avatar:M.Z,Badge:P.Z,DocumentosFiscais:Q.Z,VendaModal:L.Z,ModalHistoricoStatus:R.Z},computed:{config:()=>G.db.configuracoes.valores,podeMigrarFatura(){return!["Aguardando Estoque","Aguardando Financeiro","Aguardando Aprovação","Aguardando Pagamento","Cancelado","Não Aprovado","Orçamento","Faturado"].includes(this.dados.venda.status)}},data:()=>({importar:$utils.clonarV2(W),dbUsuario:G.db.usuario,dados:{venda:{}},contatos:{},faturasAbertas:[],detalhesVisivel:!1,visibilidade:{botao:{editar:!1,remover:!1}},modalDevolucaoGarantia:{visivel:!1,item:{},orcamento:{}},sistemaPai:"",configImpressaoOrcamento:[],configImpressaoEnvelope:[]}),emits:["executar"],methods:{irParaAtendimentoFatura(e){this.$router.push({name:"AtendimentoFatura",params:{id:e}})},async migrarFatura(e){try{await this.$q.dialog({message:"Esta ação irá migrar esta venda para outra fatura.",noRefocus:!0,preventClose:!0,title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-primary",textColor:"white",flat:!0}})}catch(e){return}e||(e=G.db.fatura.criar(this.dados.venda),await G.db.fatura.grava({fatura:e})),e.id?(await G.db.venda.grava({venda:{id:this.dados.venda.id,idFatura:e.id},vendaOriginal:this.dados.venda}),localStorage.setItem("idFatura",e.id),this.dados.venda.idContato&&(this.$emit("executar","atualizar"),this.irParaAtendimentoFatura(this.dados.venda.idContato))):this.$q.notify("Não foi possível realizar a operação")},alternarDetalhes(){this.detalhesVisivel=!this.detalhesVisivel},async atualizar(){const e=await G.db.venda.leCompleto(this.id);if(e.venda.rotaJson&&e.venda.rotaJson.length>3&&(e.rotaJson=JSON.parse(e.venda.rotaJson)),this.fatura&&(e.fatura=this.fatura),e.carrinho.sort(((e,t)=>new Date(e.dataHoraEmissao)<new Date(t.dataHoraEmissao)?-1:1)),e.oss.sort(((e,t)=>new Date(e.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1)),e.customs.sort(((e,t)=>new Date(e.documento.dataHoraEmissao)<new Date(t.documento.dataHoraEmissao)?-1:1)),(e.venda||{}).idContato&&(e.venda||{}).idEmpresa){let t=[];t=await G.db.fatura.obterAbertas(e.venda.idContato,e.venda.idEmpresa),this.faturasAbertas=t.sort(((e,t)=>!e.numero||e.numero<t.numero?-1:1))}const t={};if(e.venda.idContato){const a=e.venda.idContato;t[a]||(t[a]=await G.db.contato.le({id:a}))}if(e.venda.idContatoVendedor){const a=e.venda.idContatoVendedor;t[a]||(t[a]=await G.db.contato.le({id:a}))}this.configuraImpressaoEnvelope(e.venda.idEmpresa),this.configuraImpressaoOrcamento(e.venda.idEmpresa),this.contatos=t,this.dados=e,await this.$nextTick(),e.venda.id===localStorage.getItem("idVenda")&&(this.$refs.vendaModal.mostrar({id:e.venda.id}),localStorage.removeItem("idVenda"))},async configuraImpressaoEnvelope(e){const t=await G.db.configuracoes.porNome("impressao.envelope",e);this.configImpressaoEnvelope=[...t.length?t.map((e=>({texto:"Imprimir Envelope",...e}))):[{valor:"envelope",texto:"Imprimir Envelope"},{valor:"envelopeMini",texto:"Imprimir Envelope Mini"}]]},async configuraImpressaoOrcamento(e){const t=await G.db.configuracoes.porNome("impressao.venda",e);this.configImpressaoOrcamento=[...t.length?t.map((e=>({texto:"Imprimir Orçamento",...e}))):[{valor:"invoice",texto:"Orçamento/Venda (Invoice)"},"optisoul"===this.sistemaPai?{valor:"orcamento",texto:"Orçamento (Antigo)"}:{}]]},copiarUid(){const e=this.$refs.uid;e.type="text";try{e.select(),document.execCommand("copy"),this.$q.notify({message:"UID copiado para a área de transferência.",type:"info"})}catch(e){this.$q.notify("Erro ao copiar.")}e.type="hidden",window.getSelection().removeAllRanges()},descricaoEnvelope(e){let t="";for(const a of this.dados.itensEnvelopes)a.idDocumentoAdicional===e&&a.descricaoItem.trim()&&(t+=a.descricaoItem.trim()+" | ");return t.slice(0,-3)},async devolucaoGarantia(e){let t=await G.db.documento.le({idContato:G.db.contato.selecionado.id,tipo:"Venda",status:"Orçamento"});t=(0,U.orderBy)(t,"dataHoraEmissao","desc"),t.length?this.modalDevolucaoGarantia={visivel:!0,item:e,orcamento:t[0]}:this.$q.notify({message:"Crie um orçamento para inclusão de devolução/garantia.",type:"info"})},editar(){this.$router.replace({params:{id:this.dados.venda.id}}).finally((()=>{this.$refs.vendaModal.mostrar({id:this.dados.venda.id})}))},executar(e){switch(e){case"atualizar":this.atualizar();break;case"cancelar":case"finalizar":case"reprovar":this.$emit("executar","atualizar");break;case"retornarOrcamento":this.$emit("executar",e)}},async finalizaDevolucaoGarantia(e,t,a){const o=(0,J.clonar)(e);"devolucao"===t&&(o.operacao="Devolução de Venda"),"garantia"===t&&(o.operacao="Garantia de Venda",o.motivo=a),o.idDocumentoItemVenda=o.id,o.idDocumentoVenda=o.idDocumento,o.id=(0,J.uuid)(),o.idDocumento=this.modalDevolucaoGarantia.orcamento.id,o.status="Orçamento",o.operacaoFator=1,o.codigoCfop=20,o.idCfop=(await G.db.cfop.le({codigoCfop:20}))[0].id,o.dataHoraEmissao=(0,J.dataAtual)(),o.dataHoraFinalizado="",o.subTotal=-1*o.subTotal,o.total=-1*o.total,o.valorItem=-1*o.valorItem,o.descontoSubTotal=0,delete o.codigoCfop,delete o.codigoDocumento,delete o.codigoDocumentoItem,delete o.codigoItem,delete o.codigoPlanoContaDestino,delete o.codigoPlanoContaEstoque,await G.db.documentoItem.grava({atual:o}),this.$q.notify({message:"Item adicionado ao orçamento.",type:"positive"}),localStorage.setItem("idVenda",this.modalDevolucaoGarantia.orcamento.id),this.$emit("executar","atualizar")},async remover(){this.$q.dialog({message:"Esta ação irá remover esta venda da fatura",title:"Tem certeza?",cancel:{label:"Cancelar",push:!0,color:"tertiary",flat:!0},ok:{label:"Continuar",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk((async()=>{let e=(0,J.clonar)(this.dados.venda);this.dados.venda.idFatura="",await G.db.venda.grava({venda:this.dados.venda,vendaOriginal:e}),this.$emit("executar","remover")}))}},props:{id:{required:!0,type:String},sendRouteEasy:{required:!1,type:Function},sendRouteEasyAll:{required:!1,type:Function},fatura:{required:!1,type:Object},resetarEnvio:{required:!1,type:Function}},watch:{async dados(e){this.visibilidade.botao.editar=!1,this.visibilidade.botao.remover=!1,(await $db.contato.ler({filtros:{ativo:!0,empresas:!0}})).data.find((t=>t.id===e.venda.idEmpresa))&&(e.venda.idFatura&&this.faturasAbertas.find((t=>t.id===e.venda.idFatura))&&(this.visibilidade.botao.remover=await $db.permissao.objeto("Diretiva_Vendas_RemoverVendaFatura")),e.venda.idFatura&&this.faturasAbertas.find((t=>t.id===e.venda.idFatura))&&(this.visibilidade.botao.remover=!0),["Cancelado","Não Aprovado"].includes(e.venda.status)||e.venda.idFatura||(this.visibilidade.botao.editar=!0))}},mounted(){this.sistemaPai=(0,J.sistemaPai)(),this.atualizar()}};var K=a(74260),X=a(77953),Y=a(60880),ee=a(31106),te=a(76106),ae=a(4957),oe=a(37617),de=a(54707),re=a(25901),ie=a(68900),le=a(48761),ne=a(83831),se=a(98586),ce=a(7518),me=a.n(ce);const ue=(0,K.Z)(j,[["render",function(e,t,a,M,P,Q){const R=(0,o.resolveComponent)("badge"),L=(0,o.resolveComponent)("q-item-section"),G=(0,o.resolveComponent)("avatar"),J=(0,o.resolveComponent)("q-item-label"),U=(0,o.resolveComponent)("q-badge"),W=(0,o.resolveComponent)("row"),j=(0,o.resolveComponent)("q-tooltip"),K=(0,o.resolveComponent)("q-btn"),X=(0,o.resolveComponent)("q-icon"),Y=(0,o.resolveComponent)("q-item"),ee=(0,o.resolveComponent)("q-list"),te=(0,o.resolveComponent)("q-menu"),ae=(0,o.resolveComponent)("q-toolbar-title"),oe=(0,o.resolveComponent)("documentos-fiscais"),de=(0,o.resolveComponent)("q-separator"),re=(0,o.resolveComponent)("VendaModal"),ie=(0,o.resolveComponent)("modal-historico-status"),le=(0,o.resolveDirective)("close-popup");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[P.dados.venda.id?((0,o.openBlock)(),(0,o.createBlock)(Y,{key:0,id:"VendaCard","manual-focus":"",clickable:"",class:"items-center d-flex q-pa-xs"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{avatar:"",center:"",class:"mw100 hideonmobile",onClick:Q.editar},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(R,{class:"q-mr-sm",escuro:"",cor:"positive",onClick:Q.copiarUid},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)(" #"+(0,o.toDisplayString)(parseInt(P.dados.venda.numero)||(P.dados.venda.id||"").slice(-6))+" ",1),(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"hidden","onUpdate:modelValue":t[0]||(t[0]=e=>P.dados.venda.id=e),ref:"uid"},null,512),[[o.vModelText,P.dados.venda.id]])])),_:1},8,["onClick"])])),_:1},8,["onClick"]),(0,o.createVNode)(L,{onClick:Q.editar},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(W,{class:"items-center"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",d,[(0,o.createVNode)(G,{imagem:(P.contatos[P.dados.venda.idContato]||{}).imagem,rotulo:P.dados.venda.descricaoContato,tamanho:"40",style:{float:"left"}},null,8,["imagem","rotulo"])]),(0,o.createElementVNode)("div",r,[(0,o.createVNode)(J,{class:"text-tertiary text-weight-bold"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(P.dados.venda.descricaoContato),1)])),_:1}),(0,o.createVNode)(W,{class:"hideondesktop items-center q-my-sm"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",i,[(0,o.createVNode)(R,{class:"q-mr-sm",escuro:"",cor:"positive",onClick:Q.copiarUid},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)(" #"+(0,o.toDisplayString)(parseInt(P.dados.venda.numero)||(P.dados.venda.id||"").slice(-6))+" ",1),(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"hidden","onUpdate:modelValue":t[1]||(t[1]=e=>P.dados.venda.id=e),ref:"uid"},null,512),[[o.vModelText,P.dados.venda.id]])])),_:1},8,["onClick"])]),(0,o.createElementVNode)("div",l,[(0,o.createVNode)(U,{color:"tertiary"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(P.dados.venda.status),1)])),_:1})])])),_:1}),(0,o.createVNode)(W,{class:"hideondesktop items-center q-my-sm"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",n,[P.dados.venda.dataHoraFinalizado?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createTextVNode)((0,o.toDisplayString)(e.$filters.data(P.dados.venda.dataHoraFinalizado))+" ",1),(0,o.createVNode)(j,null,{default:(0,o.withCtx)((()=>[s])),_:1})],64)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createTextVNode)((0,o.toDisplayString)(e.$filters.data(P.dados.venda.dataHoraEmissao))+" ",1),(0,o.createVNode)(j,null,{default:(0,o.withCtx)((()=>[c])),_:1})],64))]),(0,o.createElementVNode)("div",m,[(0,o.createTextVNode)((0,o.toDisplayString)((P.contatos[P.dados.venda.idContatoVendedor]||{}).apelido)+" ",1),(0,o.createVNode)(j,null,{default:(0,o.withCtx)((()=>[u])),_:1})])])),_:1})])])),_:1})])),_:1},8,["onClick"]),(0,o.createVNode)(L,{onClick:Q.editar,class:"hideonmobile"},{default:(0,o.withCtx)((()=>[P.dados.venda.dataHoraFinalizado?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.createTextVNode)((0,o.toDisplayString)(e.$filters.data(P.dados.venda.dataHoraFinalizado))+" ",1),(0,o.createVNode)(j,null,{default:(0,o.withCtx)((()=>[v])),_:1})],64)):((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createTextVNode)((0,o.toDisplayString)(e.$filters.data(P.dados.venda.dataHoraEmissao))+" ",1),(0,o.createVNode)(j,null,{default:(0,o.withCtx)((()=>[p])),_:1})],64))])),_:1},8,["onClick"]),(0,o.createVNode)(L,{onClick:Q.editar,class:"hideonmobile"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)((P.contatos[P.dados.venda.idContatoVendedor]||{}).apelido)+" ",1),(0,o.createVNode)(j,null,{default:(0,o.withCtx)((()=>[h])),_:1})])),_:1},8,["onClick"]),(0,o.createVNode)(L,{avatar:"",class:"mw240 hideonmobile"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(U,{color:"tertiary"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(P.dados.venda.status),1)])),_:1}),P.dados.venda.rotaStatus?((0,o.openBlock)(),(0,o.createBlock)(U,{key:0,color:"secondary",style:{"margin-top":"5px"}},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(P.dados.venda.rotaStatus),1)])),_:1})):(0,o.createCommentVNode)("",!0)])),_:1}),(0,o.createVNode)(L,{onClick:Q.editar,avatar:"",class:"mw100"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(J,{caption:"",class:"text-right text-tertiary text-weight-bold"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$filters.numero(P.dados.venda.totalDocumento,2))+" ",1),(0,o.createVNode)(j,null,{default:(0,o.withCtx)((()=>[V])),_:1})])),_:1})])),_:1},8,["onClick"]),(0,o.createVNode)(L,{side:"",top:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(W,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(K,{rounded:"",dense:"",flat:"",icon:P.detalhesVisivel?"keyboard_arrow_up":"keyboard_arrow_down",size:"md",unelevated:"",class:"hideonmobile q-mx-xs",color:"tertiary",style:{float:"right"},onClick:Q.alternarDetalhes},null,8,["icon","onClick"]),P.visibilidade.botao.remover?((0,o.openBlock)(),(0,o.createBlock)(K,{key:0,rounded:"",dense:"",flat:"",icon:"clear",color:"tertiary",unelevated:"",class:"hideonmobile q-mx-xs",size:"md",onClick:Q.remover,style:{float:"right"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(j,{anchor:"top left",self:"bottom start"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)(" Remover da fatura #"+(0,o.toDisplayString)(parseInt(P.dados.venda.numero)||(P.dados.venda.id||"").slice(-6)),1)])),_:1})])),_:1},8,["onClick"])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(K,{rounded:"",dense:"",flat:"",icon:"edit",color:"primary",unelevated:"",class:"hideonmobile q-mx-xs",size:"md",onClick:Q.editar,style:{float:"right"}},null,8,["onClick"]),(0,o.createVNode)(K,{rounded:"",dense:"",flat:"",icon:"print",color:"primary",unelevated:"",class:"hideonmobile q-mx-xs",size:"md",style:{float:"right"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(te,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(ee,{link:"",separator:""},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(P.configImpressaoOrcamento.filter((e=>e.valor)),(t=>((0,o.openBlock)(),(0,o.createBlock)(Y,{clickable:"",key:t.valor,onClick:a=>e.$imprimir(t.valor,{id:(P.dados.venda||{}).id||"0",Oculto:"0"})},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{avatar:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(X,{name:"print"})])),_:1}),(0,o.createVNode)(L,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(J,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t.texto),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),"optisoul"===P.sistemaPai?((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,{key:0},(0,o.renderList)(P.configImpressaoEnvelope,(t=>((0,o.openBlock)(),(0,o.createBlock)(Y,{clickable:"",key:t.valor,onClick:a=>e.$imprimir(t.valor,(P.dados.venda||{}).id||"0")},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{avatar:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(X,{name:"print"})])),_:1}),(0,o.createVNode)(L,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(J,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t.texto),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)):(0,o.createCommentVNode)("",!0)])),_:1})])),_:1})])),_:1}),(0,o.createVNode)(K,{rounded:"",dense:"",flat:"",icon:"more_vert",color:"tertiary",unelevated:"",class:"q-mx-xs",size:"md",style:{float:"right"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(te,null,{default:(0,o.withCtx)((()=>[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(ee,{link:"",separator:""},{default:(0,o.withCtx)((()=>[e.$utils.mapearStatus(P.dados.venda).permiteNota?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:0},[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(Y,{clickable:"",onClick:t[2]||(t[2]=t=>e.emitirNFeV2({idVenda:P.dados.venda.id},1,"Venda"))},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{avatar:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(X,{name:"account_balance"})])),_:1}),(0,o.createVNode)(L,null,{default:(0,o.withCtx)((()=>[x])),_:1})])),_:1})),[[le]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(Y,{clickable:"",onClick:t[3]||(t[3]=t=>e.emitirNFeV2({idVenda:P.dados.venda.id},0,"Devolução"))},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{avatar:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(X,{name:"account_balance"})])),_:1}),(0,o.createVNode)(L,null,{default:(0,o.withCtx)((()=>[f])),_:1})])),_:1})),[[le]]),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(Y,{clickable:"",onClick:t[4]||(t[4]=t=>e.emitirNFeV2({idVenda:P.dados.venda.id},1,"Remessa"))},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{avatar:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(X,{name:"account_balance"})])),_:1}),(0,o.createVNode)(L,null,{default:(0,o.withCtx)((()=>[C])),_:1})])),_:1})),[[le]])],64)):(0,o.createCommentVNode)("",!0),Q.podeMigrarFatura?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(P.faturasAbertas.filter((e=>e.id!==P.dados.venda.idFatura)),(e=>(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(Y,{key:e.id,onClick:t=>Q.migrarFatura(e)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{avatar:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(X,{name:"mdi-folder-move"})])),_:1}),(0,o.createVNode)(L,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)("Migrar para fatura #"+(e.numero||e.id.slice(-6))),1)])),_:2},1024)])),_:2},1032,["onClick"])),[[le]]))),128)),(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(Y,{onClick:t[5]||(t[5]=e=>Q.migrarFatura())},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{avatar:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(X,{name:"mdi-folder-move"})])),_:1}),(0,o.createVNode)(L,null,{default:(0,o.withCtx)((()=>[N])),_:1})])),_:1})),[[le]])],64)):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(Y,{clickable:"",onClick:t[6]||(t[6]=t=>e.$refs.modalHistoricoStatus.mostrar({idDocumento:P.dados.venda.id}))},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{avatar:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(X,{name:"history"})])),_:1}),(0,o.createVNode)(L,null,{default:(0,o.withCtx)((()=>[k])),_:1})])),_:1}),a.resetarEnvio&&P.dados.venda.rotaJson&&P.dados.venda.rotaJson.length>0?((0,o.openBlock)(),(0,o.createBlock)(Y,{key:2,clickable:"",onClick:t[7]||(t[7]=e=>a.resetarEnvio(P.dados.venda))},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{avatar:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(X,{name:"restart_alt"})])),_:1}),(0,o.createVNode)(L,null,{default:(0,o.withCtx)((()=>[w])),_:1})])),_:1})):(0,o.createCommentVNode)("",!0)])),_:1})),[[le]])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):(0,o.createCommentVNode)("",!0),P.detalhesVisivel?((0,o.openBlock)(),(0,o.createBlock)(W,{key:1,class:"q-col-gutter-md q-py-md"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",g,[P.detalhesVisivel?((0,o.openBlock)(),(0,o.createBlock)(ee,{key:0},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(P.dados.carrinho,(t=>((0,o.openBlock)(),(0,o.createBlock)(Y,{class:"fullWidth",key:t.id},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{avatar:"",class:"w120"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(J,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t.quantidade)+"x",1)])),_:2},1024)])),_:2},1024),(0,o.createVNode)(L,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(J,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t.descricaoItem),1)])),_:2},1024)])),_:2},1024),(0,o.createVNode)(L,{side:"",top:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(J,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$filters.numero(t.total,2)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(P.dados.customs,(t=>((0,o.openBlock)(),(0,o.createBlock)(Y,{class:"fullWidth",key:t.documento.id},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{avatar:"",class:"w120"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(J,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t.documento.numero)+"x ",1)])),_:2},1024)])),_:2},1024),(0,o.createVNode)(L,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(J,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t.documento.descricao),1)])),_:2},1024)])),_:2},1024),(0,o.createVNode)(L,{side:"",top:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(J,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$filters.numero(t.documento.totalDocumento,2)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(P.dados.oss,(t=>((0,o.openBlock)(),(0,o.createBlock)(Y,{class:"fullWidth",key:t.documento.id},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{avatar:"",class:"w120"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(J,null,{default:(0,o.withCtx)((()=>["Orçamento"!==t.documento.status?((0,o.openBlock)(),(0,o.createBlock)(R,{key:0,class:"q-mx-sm",escuro:"",cor:"grey-5",denso:"",round:""},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t.documento.status)+" ",1),(0,o.createVNode)(j,null,{default:(0,o.withCtx)((()=>[y])),_:1})])),_:2},1024)):((0,o.openBlock)(),(0,o.createBlock)(R,{key:1},{default:(0,o.withCtx)((()=>[_])),_:1}))])),_:2},1024)])),_:2},1024),(0,o.createVNode)(L,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(J,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t.documento.descricao),1)])),_:2},1024)])),_:2},1024),(0,o.createVNode)(L,{right:"",top:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(J,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$filters.numero(t.documento.totalDocumento,2)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(P.dados.envelopes,(t=>((0,o.openBlock)(),(0,o.createBlock)(Y,{class:"fullWidth",key:t.id},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{avatar:"",class:"w120"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(R,{class:"q-mx-sm",escuro:"",cor:"grey-5",denso:"",round:""},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)(" #"+(0,o.toDisplayString)(parseInt(t.numero)||(t.id||"").slice(-6))+" ",1),(0,o.createVNode)(j,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t.tipo)+" - "+(0,o.toDisplayString)(t.descricaoContato),1)])),_:2},1024)])),_:2},1024),"Orçamento"!==t.status?((0,o.openBlock)(),(0,o.createBlock)(R,{key:0,class:"q-mx-sm",escuro:"",cor:"grey-5",denso:"",round:""},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t.status),1)])),_:2},1024)):(0,o.createCommentVNode)("",!0)])),_:2},1024),(0,o.createVNode)(L,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(J,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(Q.descricaoEnvelope(t.id)),1)])),_:2},1024)])),_:2},1024),(0,o.createVNode)(L,{right:"",top:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(J,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.$filters.numero(t.totalDocumento,2)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",b,[(0,o.createElementVNode)("div",E,[(0,o.createVNode)(ae,{class:"q-mx-none q-mt-sm q-px-none"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(X,{name:"business"}),(0,o.createTextVNode)(" "+(0,o.toDisplayString)(P.dados.venda.descricaoEmpresa),1)])),_:1}),P.dados.venda.observacao?((0,o.openBlock)(),(0,o.createElementBlock)("p",D,[(0,o.createElementVNode)("small",B,[(0,o.createTextVNode)((0,o.toDisplayString)(P.dados.venda.observacao)+" ",1),T,(0,o.createTextVNode)(" "+(0,o.toDisplayString)(P.dados.venda.observacaoInterna),1)])])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",F,[(0,o.createVNode)(oe,{idVenda:P.dados.venda.id},null,8,["idVenda"])])])]),(0,o.createElementVNode)("div",S,[P.dados.venda.observacaoFaturamento?((0,o.openBlock)(),(0,o.createElementBlock)("div",q,[(0,o.createVNode)(ae,{class:"q-mx-none q-mt-sm q-px-none"},{default:(0,o.withCtx)((()=>[I])),_:1}),(0,o.createElementVNode)("p",$,[(0,o.createElementVNode)("small",z,(0,o.toDisplayString)(P.dados.venda.observacaoFaturamento),1)])])):(0,o.createCommentVNode)("",!0),P.dados.venda.totalDesconto?((0,o.openBlock)(),(0,o.createElementBlock)("div",A,[(0,o.createElementVNode)("dl",O,[(0,o.createElementVNode)("dd",null,[H,(0,o.createElementVNode)("span",Z,[(0,o.createElementVNode)("strong",null,(0,o.toDisplayString)(e.$filters.numero(P.dados.venda.totalDesconto,2)),1)])])])])):(0,o.createCommentVNode)("",!0)])])),_:1})):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(de),(0,o.createVNode)(re,{ref:"vendaModal",onExecutar:Q.executar},null,8,["onExecutar"]),(0,o.createVNode)(ie,{ref:"modalHistoricoStatus"},null,512)],64)}]]);me()(j,"components",{QItem:X.Z,QItemSection:Y.Z,QItemLabel:ee.Z,QBadge:te.Z,QTooltip:ae.Z,QBtn:oe.Z,QMenu:de.Z,QList:re.Z,QIcon:ie.Z,QToolbarTitle:le.Z,QSeparator:ne.Z}),me()(j,"directives",{ClosePopup:se.Z})}}]);