"use strict";(self.webpackChunkb15=self.webpackChunkb15||[]).push([[919],{26221:(e,t,o)=>{o.r(t),o.d(t,{default:()=>te});var a=o(34182);const l=(0,a.createTextVNode)("Combinar"),i=["onClick"],r=["onClick"],c={class:"col-12"},s=(0,a.createTextVNode)("#0001"),n=(0,a.createTextVNode)("22/01/2021 "),d=(0,a.createTextVNode)("Data de Vendimento"),m=(0,a.createTextVNode)(" R$100,00 "),u=(0,a.createTextVNode)("Valor"),p={class:"text-tertiary q-col-gutter-xs"},h=(0,a.createTextVNode)(" Códico de Barras "),V=(0,a.createTextVNode)(" Boleto "),C=(0,a.createTextVNode)("NFSe"),f=(0,a.createTextVNode)(" Boleto "),v=(0,a.createTextVNode)("NFSe"),x={key:0,class:"q-pa-md showPreviewDetail"},N={class:"col-12 q-mb-md"},w=(0,a.createTextVNode)("52x - Descrição do item "),k={class:"col-12 col-md-3"},g=(0,a.createTextVNode)("22/01/2021 "),y=(0,a.createTextVNode)("Data de Emissão"),b={class:"col-12 col-md-3"},_=(0,a.createTextVNode)("22/01/2021 "),q=(0,a.createTextVNode)("Data de Vendimento"),I={class:"col-12 col-md"},B=(0,a.createElementVNode)("small",null,"Descontos",-1),E=(0,a.createTextVNode)(" R$100,00 "),T=(0,a.createTextVNode)("Valor"),S={key:1,class:"row q-px-md q-pb-md showPreviewDetail"};var D=o(39675),$=o(80105),L=o(15358),z=o(72407),M=o(80201),A=o(84830),Z=o.n(A);const F={components:{lista:D.Z,modalContatoFicha:$.Z,Avatar:L.Z,Badge:z.Z,ModalCombinarContato:M.Z},data:()=>({lista:[],listaOriginal:[],listaLayout:{},modalCombinarContatos:!1,modalImportar:!1,campos:{nome:"",apelido:"",numeroDocumentoNacional:"",telefone:"",cep:"",numero:""},paginacao:{atual:1,maximo:1,total:1,limite:25},showFilters:!1,filtros:{nome:null,apelido:null,numeroDocumentoNacional:null,telefone:null,cidade:null,uf:null,grupo:null,segmento:null,estoque:null,vendedor:null},buscaCampo:"",opcoesVendedores:[],opcoesSegmento:[],tabSelecionada:{valor:"Ativos"},tabs:[{rotulo:"Ativos",value:"Ativos"},{rotulo:"Excluídos",value:"Excluidos"},{rotulo:"Todos",value:"Todos"}],showAllPreviewDetail:!1,checkboxModel:!1}),methods:{async atualizar(){try{$q.loading.show();const e=this.paginacao.limite,t=this.paginacao.atual,o="nome",a=$utils.eliminarVazios(this.filtros);delete a.ativo,"Ativos"===this.tabSelecionada.valor&&(a.ativo=!0),"Excluidos"===this.tabSelecionada.valor&&(a.ativo=!1);let l={};this.buscaCampo?l.data=await $db.contatoBusca.filtrar(this.buscaCampo,{ativo:a.ativo}):l=await $db.contato.leRefatorado({filtros:a,limit:e,page:t,sort:o}),l.total||(l.total=l.total=l.data.length),l.totalPages||(l.totalPages=1),this.listaLayout={};for(let e of l.data){const t=await $db.contato.leCompletoV3(e.id);t.detalhes=!1,t.remover=!1,t.ende=$db.contato.contatoBase().endereco[0],this.listaLayout[e.id]=t}this.listaOriginal=$utils.clonarV2(l.data),this.lista=l.data,this.paginacao.total=l.total,this.paginacao.maximo=l.totalPages}catch(e){$q.notifyError("Erro iniciar",e)}finally{$q.loading.hide()}},async removerItem(e){$q.dialog({cancel:{label:"Não",push:!0,color:"tertiary",flat:!0},title:"Remover",message:"Ao continuar você irá remover este item.",ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk((async()=>{try{$q.loading.show();const t=$utils.clonar(e);e.ativo=!1,await $db.item.grava({atual:e,original:t}),$q.notifyPositive("O produto foi excluído com sucesso.")}catch(e){$q.notifyError("Ocorreu um erro ao remover produto",e)}finally{$q.loading.hide()}}))},async duplicarItem(e){try{const t=await $db.item.duplica(e.id);this.filtros.codIdRef=t.id,await this.atualizar(),this.$q.notifyPositive("O produto foi duplicado com sucesso.")}catch(e){this.$q.notifyError("Ocorreu erro ao duplicar Produto",e)}},async abrirItem(e){this.$refs.modalFicha.show({id:e})},async restaurarItem(e){$q.dialog({title:"Restaurar item",message:"Deseja restaurar este item?",cancel:{label:"Não",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk((async()=>{try{$q.loading.show();let t=$utils.clonarV2(e);e.ativo=!0,await $db.item.grava({atual:e,original:t}),$q.notifyPositive("O produto foi restaurado com sucesso.")}catch(e){$q.notifyError("Ocorreu um erro ao remover produto",e)}finally{$q.loading.hide()}}))},contatoCriarPorModal_click(){this.$refs.modalFicha.show({id:""})},limparFiltros_click(){this.filtros={tab:"Ativos",nome:null,apelido:null,numeroDocumentoNacional:null,telefone:null,cidade:null,uf:null,grupo:null,segmento:null,estoque:null,vendedor:null},this.atualizar()},async leOpcoesVendedores(){const e=await $db.contatoBusca.filtrar("",{ativo:!0,vendedores:!0});e.sort(((e,t)=>{const o=$utils.removerAcentos(e.nome||""),a=$utils.removerAcentos(t.nome||"");return o.toLowerCase()>a.toLowerCase()?1:-1})),this.opcoesVendedores=e},async leOpcoesSegmento(){this.opcoesSegmento=(await $db.contato.leValoresUnicos("segmento","")).map((e=>({rotulo:e,valor:e})))},async itemCriarPorModal_click(){const e=await this.$refs.modalItemCriar.show();e.id&&(this.filtros.codIdRef=e.id,await this.atualizar(),this.abrirEdicaoCompleta(e.id))},async buscarItem(){const e=await $g.promptItem.show({filtro:{ativo:!0}});e.acao&&Object.keys(e.itensSelecionados)[0]&&this.abrirItem(Object.keys(e.itensSelecionados)[0])},checkBoxGeral_click(){for(let e of this.lista)this.listaLayout[e.id].remover=this.checkboxModel},async removerTodos(){$q.dialog({title:"Remover Contatos",message:"Deseja remover todos os contatos selecionados?",cancel:{label:"Não",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk((async()=>{for(let e of this.lista)if(this.listaLayout[e.id].remover){let t=$utils.clonarV2(e);e.ativo=!1;try{await $db.contato.gravar({original:{contato:t},atual:{contato:e}})}catch(e){$q.notify("Houve um erro ao remover os contatos. Tente novamente")}}}))},async restaurarTodos(){$q.dialog({title:"Restaurar itens",message:"Deseja restaurar todos os itens selecionados?",cancel:{label:"Não",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).onOk((async()=>{for(let e of this.lista)if(this.listaLayout[e.id].remover){let t=$utils.clonarV2(e);e.ativo=!0;try{await $db.contato.gravar({original:{contato:t},atual:{contato:e}})}catch(e){$q.notify("Houve um erro ao restaurar os itens. Tente novamente")}}}))},async abrirDetalhesItem(e,t){this.listaLayout[e.id].detalhes=t||!this.listaLayout[e.id].detalhes,this.listaLayout[e.id].detalhes&&await $db.contato.leCompleto(e.id)},abrirTodosPreview(){this.showAllPreviewDetail=!this.showAllPreviewDetail,this.lista.forEach((e=>{this.abrirDetalhesItem(e,this.showAllPreviewDetail)}))},editarMarca_click(){this.$refs.modalEditarMarca.visivel=!0},async adicionarItem(){if(this.campos.descricao.length<2)return void $q.notifyError("favor preencher a descrição do item");let e={};try{this.completarCodigoBarras(),e={...$db.item.vazio,id:$utils.uuid(),ativo:!0,tipo:this.campos.tipo,marca:this.campos.marca,descricao:this.campos.descricao,referencia:this.campos.referencia,valorVenda:this.campos.valorVenda,codigoBarras:this.campos.codigoBarras,valorCustoReposicao:this.campos.valorCustoReposicao},$q.loading.show(),await $db.item.grava({atual:e}),this.filtros.codIdRef=e.id,this.atualizar(),$q.notifyPositive("Os dados do produto foram salvos com sucesso."),this.campos={ativo:!0,codigoBarras:"",descricao:"",marca:"",referencia:"",tipo:"Produto",valorCustoReposicao:0,valorVenda:0}}catch(e){$q.notifyError("Ocorreu um erro ao salvar",e)}finally{$q.loading.hide()}},abrirEdicaoCompleta(e){$q.dialog({title:"Item Cadastrado!",message:"Deseja abrir a edição completa?",persistent:"Sim",cancel:{label:"Não",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk((()=>{this.abrirItem(e)}))},async exportarXLSX_click(){try{$q.loading.show();const e=$utils.eliminarVazios(this.filtros);delete e.ativo,"Ativos"===this.tabSelecionada.valor&&(e.ativo=!0),"Excluidos"===this.tabSelecionada.valaor&&(e.ativo=!1);const t=await $db.contato.leRefatorado({filtros:e,limit:999999,page:1,sort:"descricao"}),o=Z().utils.book_new(),a=Z().utils.json_to_sheet(t.data,{header:Object.keys(t.data[0])});Z().utils.book_append_sheet(o,a,"contatos"),Z().writeFile(o,"contatos.xlsx")}catch(e){$q.notifyError("Erro iniciar",e)}finally{$q.loading.hide()}},salvarItem(e){let t=this.listaItensOriginal.filter((t=>t.id===e.id))[0],o=$utils.clonarV2(e);try{$db.item.gravaItem({original:t,atual:o}),this.$q.notifyPositive("Item alterado com sucesso")}catch(e){console.log(e),this.$q.notifyError("Ocorreu um erro ao alterar o item"),this.atualizar()}},criarMarca(){$q.dialog({title:"Cadastrar marca",prompt:{model:"",isValid:e=>e.length<=50,type:"text",class:"bg-light"},cancel:{label:"Não",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-primary",textColor:"white",flat:!0}}).onOk((e=>{try{if(!e)return void alert("Favor preencher");if(e.length>50)return void alert("Máximo 50 caracteres");if(this.opcoesMarca.find((t=>t.rotulo.toUpperCase()===e.toUpperCase())))return void alert("Nome já existente");this.campos.marca=e,$q.notifyPositive("Marca criada com sucesso.")}catch(e){$q.notifyError("Ocorreu um erro ao criar marca",e)}}))}},async mounted(){this.atualizar()}};var P=o(74260),U=o(77953),Q=o(60880),R=o(68900),O=o(37617),H=o(25901),G=o(46924),X=o(31106),j=o(4957),J=o(54707),W=o(83831),K=o(98586),Y=o(7518),ee=o.n(Y);const te=(0,P.Z)(F,[["render",function(e,t,o,D,$,L){const z=(0,a.resolveComponent)("q-icon"),M=(0,a.resolveComponent)("q-item-section"),A=(0,a.resolveComponent)("q-item"),Z=(0,a.resolveComponent)("campo"),F=(0,a.resolveComponent)("q-checkbox"),P=(0,a.resolveComponent)("badge"),U=(0,a.resolveComponent)("row"),Q=(0,a.resolveComponent)("avatar"),R=(0,a.resolveComponent)("q-item-label"),O=(0,a.resolveComponent)("q-tooltip"),H=(0,a.resolveComponent)("q-btn"),G=(0,a.resolveComponent)("q-list"),X=(0,a.resolveComponent)("q-menu"),j=(0,a.resolveComponent)("Br"),J=(0,a.resolveComponent)("q-separator"),W=(0,a.resolveComponent)("lista"),K=(0,a.resolveComponent)("modalContatoFicha"),Y=(0,a.resolveComponent)("modalCombinarContato"),ee=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(W,{titulo:"Fatura",onCriar_click:L.contatoCriarPorModal_click,onCheckBoxGeral_click:L.checkBoxGeral_click,icone:"attach_money",onFiltro_change:L.atualizar,onLimparFiltros_click:L.limparFiltros_click,onAbrirTodosPreview:L.abrirTodosPreview,onExportarXLSX_click:L.exportarXLSX_click,onRemoverTodos:L.removerTodos,onRestaurarTodos:L.restaurarTodos,tabSelecionada:$.tabSelecionada,tabs:$.tabs,lista:$.lista,listaLayout:$.listaLayout,paginacao:$.paginacao,filtros:$.filtros,buscaCampo:$.buscaCampo,"onUpdate:buscaCampo":t[12]||(t[12]=e=>$.buscaCampo=e),checkboxModel:$.checkboxModel,"onUpdate:checkboxModel":t[13]||(t[13]=e=>$.checkboxModel=e)},{menuExtras:(0,a.withCtx)((()=>[(0,a.createVNode)(A,{clickable:"",onClick:t[0]||(t[0]=()=>{this.modalCombinarContatos=!0})},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(M,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(z,{name:"compare_arrows",size:"sm"})])),_:1}),(0,a.createVNode)(M,null,{default:(0,a.withCtx)((()=>[l])),_:1})])),_:1})])),filtroCampos:(0,a.withCtx)((()=>[(0,a.createVNode)(Z,{modelValue:$.filtros.nome,"onUpdate:modelValue":t[1]||(t[1]=e=>$.filtros.nome=e),rotulo:"Nome/Razão",dense:""},null,8,["modelValue"]),(0,a.createVNode)(Z,{modelValue:$.filtros.apelido,"onUpdate:modelValue":t[2]||(t[2]=e=>$.filtros.apelido=e),rotulo:"Apelido/Fantasia",dense:""},null,8,["modelValue"]),(0,a.createVNode)(Z,{modelValue:$.filtros.numeroDocumentoNacional,"onUpdate:modelValue":t[3]||(t[3]=e=>$.filtros.numeroDocumentoNacional=e),rotulo:"CPF/CNPJ",dense:""},null,8,["modelValue"]),(0,a.createVNode)(Z,{modelValue:$.filtros.telefone,"onUpdate:modelValue":t[4]||(t[4]=e=>$.filtros.telefone=e),rotulo:"Telefone",dense:""},null,8,["modelValue"]),(0,a.createVNode)(Z,{modelValue:$.filtros.cidade,"onUpdate:modelValue":t[5]||(t[5]=e=>$.filtros.cidade=e),rotulo:"Cidade",dense:""},null,8,["modelValue"]),(0,a.createVNode)(Z,{modelValue:$.filtros.uf,"onUpdate:modelValue":t[6]||(t[6]=e=>$.filtros.uf=e),rotulo:"Estado",dense:""},null,8,["modelValue"]),(0,a.createVNode)(Z,{modelValue:$.filtros.grupo,"onUpdate:modelValue":t[7]||(t[7]=e=>$.filtros.grupo=e),rotulo:"Grupo",dense:""},null,8,["modelValue"]),(0,a.createVNode)(Z,{modelValue:$.filtros.segmento,"onUpdate:modelValue":t[8]||(t[8]=e=>$.filtros.segmento=e),rotulo:"Segmento/Profissão",tipo:"seletor",opcoes:$.opcoesSegmento,dense:"",onClick:L.leOpcoesSegmento},null,8,["modelValue","opcoes","onClick"]),(0,a.createVNode)(Z,{modelValue:$.filtros.vendedor,"onUpdate:modelValue":t[9]||(t[9]=e=>$.filtros.vendedor=e),rotulo:"Vendedor",tipo:"seletor",opcoes:$.opcoesSegmento,filter:"",dense:"","option-value":"id","option-label":"apelido",onClick:L.leOpcoesVendedores},null,8,["modelValue","opcoes","onClick"]),(0,a.createVNode)(Z,{modelValue:$.paginacao.limite,"onUpdate:modelValue":t[10]||(t[10]=e=>$.paginacao.limite=e),min:"1",rotulo:"Quantidade por página",tipo:"quantidade",dense:""},null,8,["modelValue"])])),itemLista:(0,a.withCtx)((()=>[(0,a.createVNode)(G,{class:"rounded-borders"},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)($.lista,(e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e,class:"itemHover fullWidth"},[(0,a.createVNode)(A,{"manual-focus":"",clickable:"",class:"items-center d-flex q-pa-xs"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(M,{avatar:"",center:"",class:"mw120 hideonmobile"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,{class:"items-center"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(F,{modelValue:$.listaLayout[e.id].remover,"onUpdate:modelValue":t=>$.listaLayout[e.id].remover=t},null,8,["modelValue","onUpdate:modelValue"]),(0,a.createVNode)(P,{class:"q-mr-sm",escuro:"",cor:"positive"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" #"+(0,a.toDisplayString)((e.codigoContato||0).toString().padStart(4,"0")),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(M,{clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,{class:"items-center q-col-gutter-x-sm"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(F,{modelValue:$.checkboxModel,"onUpdate:modelValue":t[11]||(t[11]=e=>$.checkboxModel=e),class:"q-ma-none q-pa-none hideondesktop"},null,8,["modelValue"]),(0,a.createElementVNode)("div",{class:"col-auto q-pl-none items-center",onClick:t=>L.abrirItem(e.id)},[(0,a.createVNode)(Q,{imagem:e.photo,tamanho:"40",rotulo:e.nome,style:{display:"flex","align-self":"center"}},null,8,["imagem","rotulo"])],8,i),(0,a.createElementVNode)("div",{class:"col",onClick:t=>L.abrirItem(e.id)},[(0,a.createVNode)(R,{class:"text-tertiary text-weight-bold"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.apelido),1)])),_:2},1024),(0,a.createVNode)(R,{caption:"",class:"text-tertiary"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.nome),1)])),_:2},1024),(0,a.createVNode)(U,{class:"hideondesktop items-center q-my-sm"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",c,[(0,a.createVNode)(P,{class:"q-mr-sm",escuro:"",cor:"positive"},{default:(0,a.withCtx)((()=>[s])),_:1})])])),_:1})],8,r)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(M,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(R,{class:"text-tertiary"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(z,{class:"text-tertiary",name:"today"}),(0,a.createVNode)(R,null,{default:(0,a.withCtx)((()=>[n])),_:1}),(0,a.createVNode)(O,null,{default:(0,a.withCtx)((()=>[d])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.createVNode)(M,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(R,{class:"text-tertiary"},{default:(0,a.withCtx)((()=>[m,(0,a.createVNode)(O,null,{default:(0,a.withCtx)((()=>[u])),_:1})])),_:1})])),_:1}),(0,a.createVNode)(M,{side:"",top:""},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",p,[(0,a.createVNode)(H,{color:"tertiary",size:"md",icon:$.listaLayout[e.id].detalhes?"keyboard_arrow_up":"keyboard_arrow_down",flat:"",dense:"",round:"",class:"buttons hideonmobile",onClick:t=>L.abrirDetalhesItem(e)},null,8,["icon","onClick"]),(0,a.createVNode)(H,{color:"tertiary",size:"md",icon:"mdi-barcode-scan",flat:"",dense:"",round:"",class:"buttons hideonmobile"}),(0,a.createVNode)(H,{dense:"",flat:"",icon:"more_vert",round:"",size:"md"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(X,null,{default:(0,a.withCtx)((()=>[(0,a.withDirectives)((0,a.createVNode)(G,{link:"","no-border":"",separator:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(A,{class:"hideondesktop",clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(M,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(z,{name:"mdi-barcode-scan"})])),_:1}),(0,a.createVNode)(M,null,{default:(0,a.withCtx)((()=>[h])),_:1})])),_:1}),(0,a.createVNode)(A,{clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(M,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(z,{name:"print"})])),_:1}),(0,a.createVNode)(M,null,{default:(0,a.withCtx)((()=>[V])),_:1})])),_:1}),(0,a.createVNode)(A,{clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(M,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(z,{name:"print"})])),_:1}),(0,a.createVNode)(M,null,{default:(0,a.withCtx)((()=>[C])),_:1})])),_:1}),(0,a.createVNode)(A,{clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(M,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(z,{name:"download"})])),_:1}),(0,a.createVNode)(M,null,{default:(0,a.withCtx)((()=>[f])),_:1})])),_:1}),(0,a.createVNode)(A,{clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(M,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(z,{name:"mdi-file-replace-outline"})])),_:1}),(0,a.createVNode)(M,null,{default:(0,a.withCtx)((()=>[v])),_:1})])),_:1})])),_:1},512),[[ee]])])),_:1})])),_:1})])])),_:2},1024)])),_:2},1024),$.listaLayout[e.id].detalhes?((0,a.openBlock)(),(0,a.createElementBlock)("div",x,[(0,a.createVNode)(U,{class:"q-col-gutter-md text-tertiary"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",N,[(0,a.createVNode)(R,null,{default:(0,a.withCtx)((()=>[w])),_:1})])])),_:1}),(0,a.createVNode)(U,{class:"q-col-gutter-md text-tertiary"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",k,[(0,a.createVNode)(R,{class:"text-tertiary"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(z,{class:"text-tertiary",name:"today"}),(0,a.createVNode)(R,null,{default:(0,a.withCtx)((()=>[g])),_:1}),(0,a.createVNode)(O,null,{default:(0,a.withCtx)((()=>[y])),_:1})])),_:1})])),_:1})]),(0,a.createElementVNode)("div",b,[(0,a.createVNode)(R,{class:"text-tertiary"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(z,{class:"text-tertiary",name:"today"}),(0,a.createVNode)(R,null,{default:(0,a.withCtx)((()=>[_])),_:1}),(0,a.createVNode)(O,null,{default:(0,a.withCtx)((()=>[q])),_:1})])),_:1})])),_:1})]),(0,a.createElementVNode)("div",I,[(0,a.createVNode)(R,{class:"text-tertiary text-right"},{default:(0,a.withCtx)((()=>[B,(0,a.createVNode)(j),E,(0,a.createVNode)(O,null,{default:(0,a.withCtx)((()=>[T])),_:1})])),_:1})])])),_:1})])):(0,a.createCommentVNode)("",!0),$.listaLayout[e.id].detalhes?((0,a.openBlock)(),(0,a.createElementBlock)("div",S,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.tags,(e=>((0,a.openBlock)(),(0,a.createBlock)(P,{class:"q-mr-sm",escuro:"",cor:"primary",key:e},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e),1)])),_:2},1024)))),128))])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(J)])))),128))])),_:1})])),_:1},8,["onCriar_click","onCheckBoxGeral_click","onFiltro_change","onLimparFiltros_click","onAbrirTodosPreview","onExportarXLSX_click","onRemoverTodos","onRestaurarTodos","tabSelecionada","tabs","lista","listaLayout","paginacao","filtros","buscaCampo","checkboxModel"]),(0,a.createVNode)(K,{ref:"modalFicha"},null,512),(0,a.createVNode)(Y,{modelValue:$.modalCombinarContatos,"onUpdate:modelValue":t[14]||(t[14]=e=>$.modalCombinarContatos=e)},null,8,["modelValue"])],64)}]]);ee()(F,"components",{QItem:U.Z,QItemSection:Q.Z,QIcon:R.Z,QBtn:O.Z,QList:H.Z,QCheckbox:G.Z,QItemLabel:X.Z,QTooltip:j.Z,QMenu:J.Z,QSeparator:W.Z}),ee()(F,"directives",{ClosePopup:K.Z})},20482:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Re});var a=o(34182);const l={class:"row items-center"},i=["onClick"],r={key:0,class:"col-12"},c=(0,a.createTextVNode)("Data Emissão"),s={key:1,class:"col-12"},n=(0,a.createTextVNode)("Data Finalização"),d=(0,a.createTextVNode)("Data Emissão"),m=(0,a.createTextVNode)("Data Finalização"),u=(0,a.createTextVNode)("Valor do Contrato"),p={class:"text-tertiary q-col-gutter-xs"},h=(0,a.createTextVNode)(" Remover"),V=(0,a.createTextVNode)("Restaurar"),C=(0,a.createTextVNode)("Duplicar Produto/Serviço"),f=(0,a.createTextVNode)(" Estoque "),v=(0,a.createTextVNode)(" Fornecedor: "),x={class:"col-12 col-lg"},N={style:{"white-space":"pre-line"}},w=["onClick"],k={key:0,class:"col-10 col-lg"},g={key:1,class:"col-12 col-lg"},y={key:2,class:"col-10 col-lg"},b={key:3,class:"col-12 col-lg-auto q-pt-md",style:{"min-width":"115px !important"}};var _=o(36940),q=o(39675),I=o(72407);o(28910);const B=(0,a.createTextVNode)("Contrato"),E={key:0},T={key:3},S={ref:"form"},D={class:"col-12 col-md"},$={class:"col-auto"},L={class:"col"},z={class:"col-12 col-md"},M={class:"col-auto"},A={class:"col"},Z={class:"col-12 col-md"},F=(0,a.createTextVNode)(" Produtos e Serviços "),P=(0,a.createTextVNode)("Adicionar Item"),U=(0,a.createElementVNode)("div",{class:"col-2 col-md"},"Código",-1),Q=(0,a.createElementVNode)("div",{class:"col-10 col-md-4"},"Descrição",-1),R=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Quantidade",-1),O=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Valor",-1),H=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},"Total",-1),G=(0,a.createElementVNode)("div",{class:"col-6 col-md-1 text-right"},"Ações",-1),X={class:"col-2 col-md"},j={class:"col-10 col-md-4"},J={class:"col-6 col-md text-right row"},W={class:"col-2"},K={class:"col-6 col-md text-right"},Y={class:"col-6 col-md text-right"},ee={class:"col-6 col-md-1 text-right"},te=(0,a.createTextVNode)("Editar"),oe=(0,a.createTextVNode)("Excluir"),ae=(0,a.createElementVNode)("div",{class:"col-2 col-md"},null,-1),le=(0,a.createElementVNode)("div",{class:"col-10 col-md-4"},null,-1),ie=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},null,-1),re=(0,a.createElementVNode)("div",{class:"col-6 col-md text-right"},null,-1),ce={class:"col-6 col-md text-right"},se=(0,a.createElementVNode)("div",{class:"col-6 col-md-1 text-right"}," ",-1);var ne=o(48409),de=o(58294),me=o(26891),ue=o(30462),pe=o(60357),he=o(15358);const Ve={components:{Badge:I.Z,Campo:me.Z,PromptItemV2:ue.Z,Avatar:he.Z,PromptContatoNovo:pe.Z},data:()=>({cliente:{},emitente:{},diaVencimento:"",documentoAnterior:{},documentoItensAnterior:[],documento:{id:(0,de.uuid)(),dataHoraEmissao:(0,de.dataAtual)(),numero:"",descricaoContato:"",idContato:"",descricaoEmpresa:"",idEmpresa:"",numeroVolumeTransporte:"",status:"Ativo",tipo:"Contrato"},documentoItens:[],totalItens:0,visibilidade:{modal:!1},itensModal:!1,carregando:!0,contatosModal:!1,emitenteModal:!1,empresas:[],configImpressaoContrato:[]}),emits:["atualizar"],methods:{async atualizar(e){e?(this.documentoAnterior=await _.db.contrato.le({id:e}),this.documento=(0,de.clonarV2)(this.documentoAnterior),this.documentoItensAnterior=await _.db.itemManipulacao.leItens({idDocumento:e}),this.documentoItens=(0,de.clonarV2)(this.documentoItensAnterior),this.cliente.id=this.documento.idContato,this.cliente.nome=this.documento.descricaoContato,this.emitente.id=this.documento.idEmpresa,this.emitente.nome=this.documento.descricaoEmpresa,this.diaVencimento=this.documento.numeroVolumeTransporte):(this.limparCampos(),this.emitenteModal=!0);const t=await _.db.item.ler();this.itens=t.data,this.empresas=await _.db.empresa.le(),this.somarValorTotal(),this.configuraImpressaoContrato(this.documento.idEmpresa)},async mostrar(){await(0,de.dormir)(500),this.carregando=!1},async configuraImpressaoContrato(e){const t=await _.db.configuracoes.porNome("impressao.contrato",e);this.configImpressaoContrato=t},fechar(){this.carregando=!0},limparCampos(){this.documentoAnterior={},this.documento={id:(0,de.uuid)(),dataHoraEmissao:(0,de.dataAtual)(),numero:"",descricaoContato:"",idContato:"",descricaoEmpresa:"",idEmpresa:"",numeroVolumeTransporte:"",status:"Ativo",tipo:"Contrato"},this.documentoItensAnterior=[],this.documentoItens=[],this.cliente.id="",this.cliente.nome="",this.emitente.id="",this.emitente.nome="",this.diaVencimento=""},async abrirModal(e=""){let t={},o=[];o=e?this.documentoItens.filter((t=>t.idItem===e)):this.documentoItens;for(const e of o)t[e.idItem]={item:await(0,ne.X)().item.get(e.idItem)||{},quantidade:e.quantidade};this.$refs.promptItem.itensSelecionados=t,this.$refs.promptItem.termo=e,this.$refs.promptItem.atualizar(),this.itensModal=!0},recalcularTotal(e){e.subTotal=(0,de.arredondar)(e.quantidade*e.valorItem),e.total=(0,de.arredondar)(e.quantidade*e.valorItem),this.somarValorTotal()},aoSelecionarCliente(e,t){this.cliente=(0,de.clonarV2)(t),this.contatosModal=!1,this.documento.idContato=this.cliente.id,this.documento.descricaoContato=this.cliente.nome},async selecionarEmitente(e,t){e?(this.emitente=(0,de.clonarV2)(t),this.emitenteModal=!1,this.documento.idEmpresa=this.emitente.id,this.documento.descricaoEmpresa=this.emitente.nome):this.emitenteModal=!1},aoSelecionarVencimento(){this.documento.numeroVolumeTransporte=this.diaVencimento},selecionarItens:function(e){for(const t in e){const o=e[t].item||{},a=e[t].quantidade||0;let l=this.documentoItens.find((e=>e.idItem===t));l?(l.quantidade=a,l.quantidadeRealizado=a,l.total=(0,de.arredondar)(a*o.valorVenda)):this.documentoItens.push({dataHoraEmissao:(0,de.dataAtual)(),descricaoItem:o.descricao,id:(0,de.uuid)(),idDocumento:this.documento.id,idItem:o.id,operacao:"-",quantidade:a,unidade:o.unidade,quantidadeRealizado:a,tipoItem:o.tipo,total:(0,de.arredondar)(a*o.valorVenda),valorItem:o.valorVenda})}this.somarValorTotal()},somarValorTotal(){this.totalItens=this.documentoItens.reduce(((e,t)=>e+t.total),0)},excluirItem(e){this.documentoItens=this.documentoItens.filter((t=>t.id!==e)),this.somarValorTotal()},validaDia(){if(this.diaVencimento<1||this.diaVencimento>28)return this.$q.notifyAlert("O dia deve ser um valor entre 1 e 28"),void(this.diaVencimento="");this.aoSelecionarVencimento()},async gravar(e=!1){if(this.cliente.id)if(this.emitente.id)if(this.diaVencimento)if(this.totalItens)try{await _.db.contrato.grava({documentoAnterior:this.documentoAnterior,documento:this.documento,documentoItensAnterior:this.documentoItensAnterior,documentoItens:this.documentoItens}),this.visibilidade.modal=e,this.atualizar(this.documento.id),this.$emit("atualizar")}catch(e){this.$q.notifyError("Erro ao salvar",e)}else this.$q.notifyAlert("Adicione alguns itens ao contrato");else this.$q.notifyAlert("Selecione um dia de Vencimento");else this.$q.notifyAlert("Selecione um Emitente");else this.$q.notifyAlert("Selecione um Cliente")},cancelar(){this.documento.status="Cancelado",this.documento.dataHoraFinalizado=(0,de.dataAtual)(),this.gravar(!1)},ativar(){this.documento.status="Ativo",this.documento.dataHoraFinalizado="",this.gravar(!0)}},async created(){console.log("created")}};var Ce=o(74260),fe=o(39341),ve=o(63626),xe=o(7112),Ne=o(54553),we=o(47266),ke=o(37617),ge=o(48761),ye=o(24515),be=o(4957),_e=o(54707),qe=o(25901),Ie=o(77953),Be=o(60880),Ee=o(31106),Te=o(83054),Se=o(68900),De=o(83831),$e=o(83671),Le=o(98586),ze=o(7518),Me=o.n(ze);const Ae=(0,Ce.Z)(Ve,[["render",function(e,t,o,l,i,r){const c=(0,a.resolveComponent)("q-btn"),s=(0,a.resolveComponent)("q-toolbar-title"),n=(0,a.resolveComponent)("q-toolbar"),d=(0,a.resolveComponent)("q-header"),m=(0,a.resolveComponent)("badge"),u=(0,a.resolveComponent)("q-tooltip"),p=(0,a.resolveComponent)("q-item-section"),h=(0,a.resolveComponent)("q-item-label"),V=(0,a.resolveComponent)("q-item"),C=(0,a.resolveComponent)("q-list"),f=(0,a.resolveComponent)("q-menu"),v=(0,a.resolveComponent)("avatar"),x=(0,a.resolveComponent)("campo"),N=(0,a.resolveComponent)("row"),w=(0,a.resolveComponent)("q-card"),k=(0,a.resolveComponent)("q-icon"),g=(0,a.resolveComponent)("q-separator"),y=(0,a.resolveComponent)("PromptItemV2"),b=(0,a.resolveComponent)("prompt-contato-novo"),_=(0,a.resolveComponent)("q-page"),q=(0,a.resolveComponent)("q-footer"),I=(0,a.resolveComponent)("q-page-container"),ne=(0,a.resolveComponent)("q-layout"),de=(0,a.resolveComponent)("q-dialog"),me=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createBlock)(de,{modelValue:i.visibilidade.modal,"onUpdate:modelValue":t[11]||(t[11]=e=>i.visibilidade.modal=e),maximized:"",onShow:r.mostrar,onHide:r.fechar},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(ne,{class:"bg-light",container:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(I,{class:"u-container"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[(0,a.withDirectives)((0,a.createVNode)(c,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[me]]),(0,a.createVNode)(s,null,{default:(0,a.withCtx)((()=>[B])),_:1}),(0,a.createVNode)(c,{class:"no-shadow",unelevated:"",color:"white","text-color":"primary",label:"Salvar",onClick:t[0]||(t[0]=e=>r.gravar(!1))})])),_:1})])),_:1}),(0,a.createVNode)(_,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{class:"q-pa-none q-ma-none q-my-md",color:"none","text-color":"black",style:{"min-height":"auto"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,{class:"text-black q-px-none text-body2"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("Emissão: "+(0,a.toDisplayString)(e.$filters.data(i.documento.dataHoraEmissao))+" ",1),i.documento.dataHoraFinalizado?((0,a.openBlock)(),(0,a.createElementBlock)("span",E,"Cancelamento: "+(0,a.toDisplayString)(e.$filters.data(i.documento.dataHoraFinalizado)),1)):(0,a.createCommentVNode)("",!0)])),_:1}),"Ativo"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,cor:"positive",class:"q-mx-sm",icone:"flag",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.documento.status),1)])),_:1})):(0,a.createCommentVNode)("",!0),"Cancelado"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(m,{key:1,cor:"negative",class:"q-mx-xs",icone:"flag",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.documento.status),1)])),_:1})):(0,a.createCommentVNode)("",!0),i.documento.numero?((0,a.openBlock)(),(0,a.createBlock)(m,{key:2,cor:"tertiary",escuro:"",icone:"playlist_add_check",class:"q-mx-xs"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" #"+(0,a.toDisplayString)(i.documento.numero)+" ",1),i.documento.codigoDocumento?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("Código: "+(0,a.toDisplayString)(i.documento.codigoDocumento),1)])),_:1})):(0,a.createCommentVNode)("",!0)])),_:1})):(0,a.createCommentVNode)("",!0),i.documento.numero?((0,a.openBlock)(),(0,a.createElementBlock)("div",T,[i.configImpressaoContrato.length>1?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,class:"q-ml-xs",color:"primary",icon:"print",flat:"",dense:"",round:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{self:"top middle",anchor:"bottom middle"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,{link:"",separator:""},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(i.configImpressaoContrato.filter((e=>e.valor)),(t=>((0,a.openBlock)(),(0,a.createBlock)(V,{key:t.valor,onClick:o=>e.$imprimir(t.valor,{id:(i.documento||{}).id||"0",Oculto:"0"})},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,{icon:"print"}),(0,a.createVNode)(h,{label:t.texto},null,8,["label"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})):((0,a.openBlock)(),(0,a.createBlock)(c,{key:1,class:"q-ml-xs",color:"primary",icon:"print",flat:"",dense:"",round:"",onClick:t[1]||(t[1]=t=>e.$imprimir(i.configImpressaoContrato[0].valor,{id:(i.documento||{}).id||"0",Oculto:"0"}))}))])):(0,a.createCommentVNode)("",!0)])),_:1}),(0,a.createVNode)(w,{class:"bg-white q-pa-md q-mt-md no-shadow"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("form",S,[(0,a.createVNode)(N,{class:"q-col-gutter-sm"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",D,[(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",$,[(0,a.createVNode)(v,{imagem:i.emitente.imagem,rotulo:i.emitente.nome,tamanho:"30",style:{float:"left"},class:"q-mr-sm"},null,8,["imagem","rotulo"])]),(0,a.createElementVNode)("div",L,[(0,a.createVNode)(x,{rotulo:"Emitente",tipo:"texto",class:"col-10",modelValue:i.emitente.nome,"onUpdate:modelValue":t[2]||(t[2]=e=>i.emitente.nome=e),disable:""},null,8,["modelValue"])])])),_:1})]),(0,a.createElementVNode)("div",z,[(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",M,[(0,a.createVNode)(v,{imagem:i.cliente.imagem,rotulo:i.cliente.nome,tamanho:"30",style:{float:"left"},class:"q-mr-sm"},null,8,["imagem","rotulo"])]),(0,a.createElementVNode)("div",A,[(0,a.createVNode)(x,{placeholder:"Cliente",rotulo:"Cliente",tipo:"texto",after:[{icon:"edit",handler(){i.contatosModal=!0}}],modelValue:i.cliente.nome,"onUpdate:modelValue":[t[3]||(t[3]=e=>i.cliente.nome=e),r.aoSelecionarCliente],onClick:t[4]||(t[4]=e=>i.contatosModal="Cancelado"!==i.documento.status),disabled:"Cancelado"===i.documento.status,somenteLeitura:"Cancelado"===i.documento.status},null,8,["after","modelValue","onUpdate:modelValue","disabled","somenteLeitura"])])])),_:1})]),(0,a.createElementVNode)("div",Z,[(0,a.createVNode)(x,{class:"col-12 col-md",rotulo:"Dia de Vencimento",modelValue:i.diaVencimento,"onUpdate:modelValue":t[5]||(t[5]=e=>i.diaVencimento=e),opcoes:{minimumValue:1,maximumValue:28},placeholder:"Dia Vencimento",tipo:"numero",onBlur:r.validaDia,erroRotulo:"Dia entre 1 e 28",erro:i.diaVencimento>28||i.diaVencimento<1},null,8,["modelValue","onBlur","erro"])])])),_:1})],512)])),_:1}),(0,a.createVNode)(w,{class:"bg-white q-pa-md q-mt-md no-shadow"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{class:"q-pa-none q-ma-none q-mb-md",color:"none","text-color":"black",style:{"min-height":"auto"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(k,{name:"shopping_cart",size:"24px",style:{color:"#737373"}}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)((()=>[F])),_:1}),"Cancelado"!==i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,color:"positive",flat:"",dense:"",icon:"add",round:"",size:"md",onClick:t[6]||(t[6]=e=>r.abrirModal())},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)((()=>[P])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0)])),_:1}),(0,a.createVNode)(C,{class:"col-12 no-border q-mx-none q-pa-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,{class:"q-pa-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,{class:"q-col-gutter-md text-weight-bold text-left justify-around"},{default:(0,a.withCtx)((()=>[U,Q,R,O,H,G])),_:1})])),_:1}),(0,a.createVNode)(g,{class:"q-my-xs"}),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(i.documentoItens,((t,o)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:o},[(0,a.createVNode)(h,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,{class:"q-col-gutter-md text-weight-bold text-left justify-around"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",X,(0,a.toDisplayString)(t.codigoItem||"-"),1),(0,a.createElementVNode)("div",j,(0,a.toDisplayString)(t.descricaoItem||"-"),1),(0,a.createElementVNode)("div",J,[(0,a.createVNode)(x,{class:"col-10",modelValue:t.quantidade,"onUpdate:modelValue":e=>t.quantidade=e,tipo:"decimal",decimals:"4",onBlur:e=>r.recalcularTotal(t)},null,8,["modelValue","onUpdate:modelValue","onBlur"]),(0,a.createElementVNode)("span",W,(0,a.toDisplayString)(t.unidade||"-"),1)]),(0,a.createElementVNode)("div",K,[(0,a.createVNode)(x,{class:"col-10",modelValue:t.valorItem,"onUpdate:modelValue":e=>t.valorItem=e,tipo:"decimal",decimals:"4",onBlur:e=>r.recalcularTotal(t)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),(0,a.createElementVNode)("div",Y,(0,a.toDisplayString)(e.$filters.numero(t.total,2)),1),(0,a.createElementVNode)("div",ee,[(0,a.createVNode)(c,{flat:"",dense:"",icon:"edit",round:"",size:"md",onClick:e=>r.abrirModal(t.idItem)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)((()=>[te])),_:1})])),_:2},1032,["onClick"]),(0,a.createVNode)(c,{flat:"",dense:"",icon:"delete",round:"",size:"md",onClick:e=>r.excluirItem(t.id)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)((()=>[oe])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024),(0,a.createVNode)(g,{class:"q-my-xs"})],64)))),128))])),_:1})])),_:1}),(0,a.createVNode)(V,{class:"q-px-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,{class:"q-col-gutter-md text-weight-bold text-left justify-around"},{default:(0,a.withCtx)((()=>[ae,le,ie,re,(0,a.createElementVNode)("div",ce,(0,a.toDisplayString)(e.$filters.numero(i.totalItens,2)),1),se])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.createVNode)(V,{class:"q-px-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,{class:"text-center"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{color:"positive",icon:"add",class:"q-mx-auto",label:"Adicionar item",outline:"",size:"xs",onClick:t[7]||(t[7]=e=>r.abrirModal())})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.createVNode)(y,{modelValue:i.itensModal,"onUpdate:modelValue":t[8]||(t[8]=e=>i.itensModal=e),filtro:{ativo:!0,idEmpresa:i.documento.idEmpresa},onSelecionarItens:r.selecionarItens,habilitarQuantidade:!0,ref:"promptItem"},null,8,["modelValue","filtro","onSelecionarItens"]),(0,a.createVNode)(b,{modelValue:i.contatosModal,"onUpdate:modelValue":t[9]||(t[9]=e=>i.contatosModal=e),filtro:{ativo:!0},placeholder:"Seleciona o Cliente",onSelecionar:r.aoSelecionarCliente},null,8,["modelValue","onSelecionar"]),(0,a.createVNode)(b,{modelValue:i.emitenteModal,"onUpdate:modelValue":t[10]||(t[10]=e=>i.emitenteModal=e),filtro:{ativo:!0,empresas:!0},placeholder:"Seleciona a empresa emitente",onSelecionar:r.selecionarEmitente},null,8,["modelValue","onSelecionar"])])),_:1}),(0,a.createVNode)(q,null,{default:(0,a.withCtx)((()=>[i.documento.numero?((0,a.openBlock)(),(0,a.createBlock)(n,{key:0,class:"footer",style:{background:"#eeeeee !important"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,{class:"text-right"},{default:(0,a.withCtx)((()=>["Ativo"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,class:"q-mx-md",color:"negative",flat:"",label:"Cancelar",onClick:r.cancelar},null,8,["onClick"])):(0,a.createCommentVNode)("",!0),"Cancelado"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(c,{key:1,color:"primary",label:"Ativar",unelevated:"",onClick:r.ativar},null,8,["onClick"])):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","onShow","onHide"])}]]);Me()(Ve,"components",{QDialog:fe.Z,QLayout:ve.Z,QPageContainer:xe.Z,QHeader:Ne.Z,QToolbar:we.Z,QBtn:ke.Z,QToolbarTitle:ge.Z,QPage:ye.Z,QTooltip:be.Z,QMenu:_e.Z,QList:qe.Z,QItem:Ie.Z,QItemSection:Be.Z,QItemLabel:Ee.Z,QCard:Te.Z,QIcon:Se.Z,QSeparator:De.Z,QFooter:$e.Z}),Me()(Ve,"directives",{ClosePopup:Le.Z});const Ze={components:{lista:q.Z,Badge:I.Z,ContratoModal:Ae},data:()=>({paginacao:{atual:1,minimo:1,maximo:1,total:1,limite:25},filtros:{tab:"Ativo",empresa:{selecionada:"",opcoes:[]},periodo:{emissao:{ini:"",fim:""},finalizado:{ini:"",fim:""}}},documentos:[],tabs:[{rotulo:"Ativos",value:"Ativo"},{rotulo:"Cancelados",value:"Cancelado"},{rotulo:"Todos",value:"Todos"}],checkboxModel:!1,showAllPreviewDetail:!1,listaItensLayout:{},showFilters:!1,filtrosDrawer:{ativo:null,descricaoAplicacao:null,codIdRef:null,codigoBarras:null,marca:null,fornecedor:null,grupo:null,subGrupo:null,estoque:null,tipo:null,codigoCompra:null},buscaCampo:"",opcoesMarca:[],opcoesGrupo:[],opcoesSubGrupo:[],opcoesTipo:["Produto"]}),methods:{async criarContrato(){this.$refs.contratoModal.visibilidade.modal=!0,await this.$refs.contratoModal.atualizar()},selecionarTodosXCheckBox(){for(let e of this.listaItens)this.listaItensLayout[e.id].remover=this.checkboxModel},trocarTab(e){this.paginacao.atual=1,this.filtros.tab=e,this.atualizar()},async cancelarTodosContratos(){},async ativarTodosContratos(){},gerarListaItensLayout(e){console.log({lista:e});for(let t of e)this.listaItensLayout[t.id]={detalhes:!1,remover:!1};this.documentos=(0,de.clonarV2)(e)},async abrirItem(e){this.$refs.contratoModal.visibilidade=!0,await this.$refs.contratoModal.atualizar(e)},abrirTodosPreview(){if(this.showAllPreviewDetail=!this.showAllPreviewDetail,this.showAllPreviewDetail)for(let e in this.documentos)this.documentos[e].showPreviewDetail=!0;else for(let e in this.documentos)this.documentos[e].showPreviewDetail=!1},async adicionarContrato(){this.$refs.contrato.visibilidade.modal=!0,await this.$refs.contrato.atualizar()},async buscar(){if(""!==this.buscaCampo){let e=[],t=[],o=(await _.db.item.ler({filtros:{termoBusca:this.buscaCampo}})).data;if(o){for(let t of o){let o=await _.db.contrato.leItens({idItem:t.id});e.push(o)}e=e.flat(),console.log({documentosItem:e});for(let o of e){let e=await _.db.contrato.le({id:o.idDocumento});t.push({...e})}}console.log({documentosFiltrados:t});let a=await _.db.contatoBusca.filtrar(this.buscaCampo,{},0);if(a)for(let e of a){let o=await _.db.contrato.le({idContato:e.id});t.push(...o[0])}t=t.flat(),this.documentos=t.map((e=>({...e,showPreviewDetail:!1,documentoItens:[]}))),console.log(t,this.documentos)}},limparBusca(){this.buscaCampo||this.atualizar()},abrirFiltro(){!0===this.section||!0===this.kanban||!0===this.gantt?this.left=!0:this.left=!1,this.showFilters=!this.showFilters},getPage(e){this.page.ativa=e,this.filtrar()},async editar(e){await this.$refs.contrato.atualizar(e),this.$refs.contrato.visibilidade.modal=!0},async excluir(e){await this.$q.dialog({message:"Deseja mesmo cancelar esse Constrato?",title:"Cancelar Contrato?",cancel:{label:"Não",push:!0,color:"tertiary",flat:!0},ok:{label:"Sim",push:!0,class:"bg-negative",textColor:"white",flat:!0}}).then((async()=>{let t=(0,de.clonarV2)(e);t.status="Cancelado",t.dataHoraFinalizado=(0,de.dataAtual)(),console.log({documentoOriginal:e,documentoAtualizado:t}),await _.db.contrato.grava({documentoAnterior:e,documento:t}),this.atualizar()}))},async showDetails(e){let t=await _.db.contrato.leItens({idDocumento:e.id});e.documentoItens=t,e.showPreviewDetail=!e.showPreviewDetail},async atualizar(){try{this.$q.loading.show();const e=this.paginacao.limite,t=this.paginacao.atual,o="descricao";let a="";"Ativo"===this.filtros.tab?a="Ativo":"Cancelado"===this.filtros.tab&&(a="Cancelado");let l=this.filtros.empresa.selecionada.value||"";this.filtros.idEmpresa=l;let i={};if(this.buscaCampo);else{let l=this.$utils.eliminarVazios(this.filtros);l.status=a,i=await this.filtrarCampos(l,e,t,o)}this.gerarListaItensLayout(i.data),this.paginacao.total=i.total,this.paginacao.maximo=i.totalPages}catch(e){this.$q.notifyError("Erro iniciar",e)}finally{this.$q.loading.hide()}},filtrarCampos:async(e,t,o,a)=>_.db.contrato.leRefatorado({filtros:e,limit:t,page:o,sort:a}),async filtrar(e=1){this.buscaCampo="";const t=(e-1)*this.pageSize;let o=await _.db.contrato.le({periodoEmissao:{ini:this.filtro.periodo.emissao.ini,fim:this.filtro.periodo.emissao.fim},diaVencimento:{ini:this.filtro.periodo.cancelado.ini,fim:this.filtro.periodo.cancelado.fim},status:this.page.ativa,idEmpresa:this.filtro.empresas.selected,offset:t,limit:this.pageSize});this.documentos=o[0].map((e=>({...e,showPreviewDetail:!1,documentoItens:[]})));let a=o[1];this.page.ativo.max=Math.ceil(a/this.pageSize),this.page.cancelado.max=Math.ceil(a/this.pageSize)},async empresaOpcoesCarregar(){this.filtro.empresas.options=(await _.db.empresa.le()).map((e=>({label:e.nome,value:e.idContato})))}},created(){this.atualizar()}};var Fe=o(46924),Pe=o(15031),Ue=o(81312),Qe=o(95277);const Re=(0,Ce.Z)(Ze,[["render",function(e,t,o,_,q,I){const B=(0,a.resolveComponent)("campo"),E=(0,a.resolveComponent)("q-checkbox"),T=(0,a.resolveComponent)("badge"),S=(0,a.resolveComponent)("q-item-section"),D=(0,a.resolveComponent)("q-item-label"),$=(0,a.resolveComponent)("q-icon"),L=(0,a.resolveComponent)("q-tooltip"),z=(0,a.resolveComponent)("row"),M=(0,a.resolveComponent)("q-btn"),A=(0,a.resolveComponent)("q-item"),Z=(0,a.resolveComponent)("q-list"),F=(0,a.resolveComponent)("q-menu"),P=(0,a.resolveComponent)("q-toggle"),U=(0,a.resolveComponent)("q-field"),Q=(0,a.resolveComponent)("q-separator"),R=(0,a.resolveComponent)("lista"),O=(0,a.resolveComponent)("ContratoModal"),H=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(R,{titulo:"Contratos",onCriar_click:I.criarContrato,showAdd:"false",onCheckBoxGeral_click:e.checkBoxGeral_click,onFiltro_change:I.atualizar,onLimparFiltros_click:e.limparFiltros_click,icone:"gavel",onAbrirTodosPreview:I.abrirTodosPreview,onExportarXLSX_click:e.exportarXLSX_click,onRemoverTodos:e.removerTodos,onRestaurarTodos:e.restaurarTodos,tabSelecionada:e.tabSelecionada,tabs:q.tabs,lista:e.lista,listaLayout:e.listaLayout,paginacao:q.paginacao,filtros:q.filtros,opcoesMarca:q.opcoesMarca,opcoesGrupo:q.opcoesGrupo,opcoesSubGrupo:q.opcoesSubGrupo,opcoesTipo:q.opcoesTipo,buscaCampo:q.buscaCampo,"onUpdate:buscaCampo":t[3]||(t[3]=e=>q.buscaCampo=e),checkboxModel:q.checkboxModel,"onUpdate:checkboxModel":t[4]||(t[4]=e=>q.checkboxModel=e)},{filtroCampos:(0,a.withCtx)((()=>[(0,a.createVNode)(B,{modelValue:q.filtrosDrawer.descricaoAplicacao,"onUpdate:modelValue":t[0]||(t[0]=e=>q.filtrosDrawer.descricaoAplicacao=e),rotulo:"Descrição/Aplicação",dense:""},null,8,["modelValue"]),(0,a.createVNode)(B,{modelValue:q.filtrosDrawer.codIdRef,"onUpdate:modelValue":t[1]||(t[1]=e=>q.filtrosDrawer.codIdRef=e),rotulo:"Código/ID/Referência",dense:""},null,8,["modelValue"]),(0,a.createVNode)(B,{modelValue:q.filtrosDrawer.codigoBarras,"onUpdate:modelValue":t[2]||(t[2]=e=>q.filtrosDrawer.codigoBarras=e),rotulo:"Cód. Barras",dense:""},null,8,["modelValue"])])),itemLista:(0,a.withCtx)((()=>[(0,a.createVNode)(Z,{class:"rounded-borders"},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(q.documentos,(t=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:t.id},[(0,a.createVNode)(A,{clickable:"",class:"items-center d-flex q-pa-xs"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(S,{avatar:"",center:"",class:"mw120 hideonmobile"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",l,[(0,a.createVNode)(E,{modelValue:q.listaItensLayout[t.id].remover,"onUpdate:modelValue":e=>q.listaItensLayout[t.id].remover=e},null,8,["modelValue","onUpdate:modelValue"]),"Cancelado"===t.status?((0,a.openBlock)(),(0,a.createBlock)(T,{key:0,class:"q-mr-sm hideonmobile",cor:"tertiary",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" #"+(0,a.toDisplayString)((t.codigoDocumento||0).toString().padStart(3,"0")),1)])),_:2},1024)):((0,a.openBlock)(),(0,a.createBlock)(T,{key:1,class:"q-mr-sm hideonmobile",cor:"positive",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" #"+(0,a.toDisplayString)((t.codigoDocumento||0).toString().padStart(3,"0")),1)])),_:2},1024))])])),_:2},1024),(0,a.createVNode)(S,{clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(z,{class:"items-center q-col-gutter-x-sm"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(E,{modelValue:q.listaItensLayout[t.id].remover,"onUpdate:modelValue":e=>q.listaItensLayout[t.id].remover=e,class:"q-ma-none q-pa-none hideondesktop"},null,8,["modelValue","onUpdate:modelValue"]),(0,a.createElementVNode)("div",{class:"col",onClick:e=>I.abrirItem(t.id)},[t.descricaoContato?((0,a.openBlock)(),(0,a.createBlock)(D,{key:0,class:"text-tertiary text-weight-bold"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.descricaoContato),1)])),_:2},1024)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(z,{class:"hideondesktop items-center q-my-sm"},{default:(0,a.withCtx)((()=>[t.dataHoraEmissao?((0,a.openBlock)(),(0,a.createElementBlock)("div",r,[(0,a.createVNode)(z,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)($,{class:"text-tertiary",name:"today"}),(0,a.createVNode)(D,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.data(t.dataHoraEmissao)),1)])),_:2},1024),(0,a.createVNode)(L,null,{default:(0,a.withCtx)((()=>[c])),_:1})])),_:2},1024)])):(0,a.createCommentVNode)("",!0),t.dataHoraFinalizado?((0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createVNode)(z,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)($,{class:"text-tertiary",name:"today"}),(0,a.createVNode)(D,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.data(t.dataHoraFinalizado)),1)])),_:2},1024),(0,a.createVNode)(L,null,{default:(0,a.withCtx)((()=>[n])),_:1})])),_:2},1024)])):(0,a.createCommentVNode)("",!0)])),_:2},1024)],8,i)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(S,{onClick:e=>I.abrirItem(t.id),class:"hideonmobile"},{default:(0,a.withCtx)((()=>[t.dataHoraEmissao?((0,a.openBlock)(),(0,a.createBlock)(z,{key:0},{default:(0,a.withCtx)((()=>[(0,a.createVNode)($,{class:"text-tertiary",name:"today"}),(0,a.createVNode)(D,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.data(t.dataHoraEmissao)),1)])),_:2},1024),(0,a.createVNode)(L,null,{default:(0,a.withCtx)((()=>[d])),_:1})])),_:2},1024)):(0,a.createCommentVNode)("",!0)])),_:2},1032,["onClick"]),(0,a.createVNode)(S,{onClick:e=>I.abrirItem(t.id),class:"hideonmobile"},{default:(0,a.withCtx)((()=>[t.dataHoraFinalizado?((0,a.openBlock)(),(0,a.createBlock)(z,{key:0},{default:(0,a.withCtx)((()=>[(0,a.createVNode)($,{class:"text-tertiary",name:"today"}),(0,a.createVNode)(D,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.data(t.dataHoraFinalizado)),1)])),_:2},1024),(0,a.createVNode)(L,null,{default:(0,a.withCtx)((()=>[m])),_:1})])),_:2},1024)):(0,a.createCommentVNode)("",!0)])),_:2},1032,["onClick"]),(0,a.createVNode)(S,{onClick:e=>I.abrirItem(t.id)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(D,{caption:"",class:"text-right text-tertiary"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$filters.numero(t.totalContrato,2))+" ",1),(0,a.createVNode)(L,null,{default:(0,a.withCtx)((()=>[u])),_:1})])),_:2},1024)])),_:2},1032,["onClick"]),(0,a.createVNode)(S,{side:"",top:""},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",p,[(0,a.createVNode)(M,{icon:q.listaItensLayout[t.id].detalhes?"keyboard_arrow_up":"keyboard_arrow_down",class:"buttons",color:"tertiary",dense:"",flat:"",round:"",size:"md",onClick:e=>I.showDetails(t)},null,8,["icon","onClick"]),(0,a.createVNode)(M,{class:"buttons",color:"primary",dense:"",flat:"",icon:"edit",round:"",size:"md",onClick:e=>I.abrirItem(t.id)},null,8,["onClick"]),(0,a.createVNode)(M,{dense:"",flat:"",icon:"more_vert",round:"",size:"md"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(F,null,{default:(0,a.withCtx)((()=>[(0,a.withDirectives)((0,a.createVNode)(Z,{class:"q-py-none",link:"","no-border":"",separator:""},{default:(0,a.withCtx)((()=>["Excluidos"!==q.filtros.tab?((0,a.openBlock)(),(0,a.createBlock)(A,{key:0,onClick:o=>e.removerItem(t)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(S,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)($,{name:"delete"})])),_:1}),(0,a.createVNode)(S,null,{default:(0,a.withCtx)((()=>[h])),_:1})])),_:2},1032,["onClick"])):(0,a.createCommentVNode)("",!0),"Excluidos"===q.filtros.tab?((0,a.openBlock)(),(0,a.createBlock)(A,{key:1,onClick:o=>e.restaurarItem(t)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(S,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)($,{name:"restore_from_trash"})])),_:1}),(0,a.createVNode)(S,null,{default:(0,a.withCtx)((()=>[V])),_:1})])),_:2},1032,["onClick"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(A,{onClick:o=>e.duplicarItem(t.id)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(S,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)($,{name:"control_point_duplicate"})])),_:1}),(0,a.createVNode)(S,null,{default:(0,a.withCtx)((()=>[C])),_:1})])),_:2},1032,["onClick"])])),_:2},1536),[[H]])])),_:2},1024)])),_:2},1024)])])),_:2},1024)])),_:2},1024),q.listaItensLayout[t.id].detalhes?((0,a.openBlock)(),(0,a.createBlock)(A,{key:0,class:"collumnOnMobile q-px-md q-py-xs",onClick:e=>I.abrirItem(t.id)},{default:(0,a.withCtx)((()=>[t.grupo?((0,a.openBlock)(),(0,a.createBlock)(S,{key:0,class:"row full-width"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(D,{caption:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.grupo),1)])),_:2},1024),(0,a.createVNode)(D,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.subGrupo),1)])),_:2},1024)])),_:2},1024)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(S,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,{class:"q-mr-sm",cor:"primary",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.tipo),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(S,null,{default:(0,a.withCtx)((()=>[t.quantidadeDisponivel?((0,a.openBlock)(),(0,a.createBlock)(D,{key:0,stamp:""},{default:(0,a.withCtx)((()=>[f,(0,a.createElementVNode)("strong",null,(0,a.toDisplayString)(t.quantidadeDisponivel),1),(0,a.createVNode)(T,{class:"q-ml-sm",cor:"tertiary",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.unidade),1)])),_:2},1024)])),_:2},1024)):(0,a.createCommentVNode)("",!0)])),_:2},1024),(0,a.createVNode)(S,null,{default:(0,a.withCtx)((()=>[q.listaItensLayout[t.id].fornecedor?((0,a.openBlock)(),(0,a.createBlock)(D,{key:0,stamp:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)($,{class:"q-mr-xs",name:"business"}),v,((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(q.listaItensLayout[t.id].fornecedor,(e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e.idContato},(0,a.toDisplayString)(e.contato.nome),1)))),128))])),_:2},1024)):(0,a.createCommentVNode)("",!0)])),_:2},1024),(0,a.createElementVNode)("div",x,[t.codigoBarras?((0,a.openBlock)(),(0,a.createBlock)(S,{key:0,stamp:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)($,{class:"q-mr-xs",name:"mdi-barcode"}),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(t.codigoBarras),1)])),_:2},1024)):(0,a.createCommentVNode)("",!0),t.address?((0,a.openBlock)(),(0,a.createBlock)(S,{key:1,stamp:""},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("span",N,(0,a.toDisplayString)(t.address),1)])),_:2},1024)):(0,a.createCommentVNode)("",!0)])])),_:2},1032,["onClick"])):(0,a.createCommentVNode)("",!0),q.listaItensLayout[t.id].detalhes?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:1,class:"row q-col-gutter-x-md q-pa-md pointer",onClick:e=>I.abrirItem(t.id)},[(0,a.createVNode)(U,{class:"col-2 col-lg-auto"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{modelValue:q.listaItensLayout[t.id].utilizaComposicaoValorReposicaoInvertido,"onUpdate:modelValue":e=>q.listaItensLayout[t.id].utilizaComposicaoValorReposicaoInvertido=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),e.permissaoFicha?((0,a.openBlock)(),(0,a.createElementBlock)("div",k,[(0,a.createVNode)(B,(0,a.mergeProps)({modelValue:t.valorCustoReposicao,"onUpdate:modelValue":e=>t.valorCustoReposicao=e},e.meta.valorCustoReposicao,{ajuda:q.listaItensLayout[t.id].utilizaComposicaoValorReposicaoInvertido?"":"Total da composição",disable:!q.listaItensLayout[t.id].utilizaComposicaoValorReposicaoInvertido,readonly:!q.listaItensLayout[t.id].utilizaComposicaoValorReposicaoInvertido,class:"no-shadow full-width"}),null,16,["modelValue","onUpdate:modelValue","ajuda","disable","readonly"])])):(0,a.createCommentVNode)("",!0),e.permissaoFicha?((0,a.openBlock)(),(0,a.createElementBlock)("div",g,[(0,a.createVNode)(B,(0,a.mergeProps)({modelValue:q.listaItensLayout[t.id].percentualMarkup,"onUpdate:modelValue":e=>q.listaItensLayout[t.id].percentualMarkup=e},e.meta.percentualMarkup,{disable:q.listaItensLayout[t.id].utilizaMarkupInvertido,readonly:q.listaItensLayout[t.id].utilizaMarkupInvertido,class:"no-shadow full-width",decimals:"2",rotulo:"Lucro",tipo:"decimal"}),null,16,["modelValue","onUpdate:modelValue","disable","readonly"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(U,{class:"col-2 col-lg-auto"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,{modelValue:q.listaItensLayout[t.id].utilizaMarkupInvertido,"onUpdate:modelValue":e=>q.listaItensLayout[t.id].utilizaMarkupInvertido=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),e.permissaoFicha?((0,a.openBlock)(),(0,a.createElementBlock)("div",y,[(0,a.createVNode)(B,(0,a.mergeProps)({modelValue:t.valorVenda,"onUpdate:modelValue":e=>t.valorVenda=e},e.meta.valorVenda,{disable:!q.listaItensLayout[t.id].utilizaMarkupInvertido,readonly:!q.listaItensLayout[t.id].utilizaMarkupInvertido,class:"no-shadow full-width"}),null,16,["modelValue","onUpdate:modelValue","disable","readonly"])])):(0,a.createCommentVNode)("",!0),e.permissaoFicha?((0,a.openBlock)(),(0,a.createElementBlock)("div",b,[(0,a.createVNode)(M,{class:"full-width no-shadow",color:"primary",label:"Salvar",size:"sm",onClick:o=>e.salvarItem(t)},null,8,["onClick"])])):(0,a.createCommentVNode)("",!0)],8,w)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(Q)],64)))),128))])),_:1})])),_:1},8,["onCriar_click","onCheckBoxGeral_click","onFiltro_change","onLimparFiltros_click","onAbrirTodosPreview","onExportarXLSX_click","onRemoverTodos","onRestaurarTodos","tabSelecionada","tabs","lista","listaLayout","paginacao","filtros","opcoesMarca","opcoesGrupo","opcoesSubGrupo","opcoesTipo","buscaCampo","checkboxModel"]),(0,a.createVNode)(O,{ref:"contratoModal",onAtualizar:I.atualizar},null,8,["onAtualizar"])],64)}],["__scopeId","data-v-18cde87a"]]);Me()(Ze,"components",{QList:qe.Z,QItem:Ie.Z,QItemSection:Be.Z,QCheckbox:Fe.Z,QItemLabel:Ee.Z,QIcon:Se.Z,QTooltip:be.Z,QBtn:ke.Z,QMenu:_e.Z,QField:Pe.Z,QToggle:Ue.Z,QSeparator:De.Z,QDrawer:Qe.Z}),Me()(Ze,"directives",{ClosePopup:Le.Z})}}]);