(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["353f5320"],{"0148":function(t,e,a){},"7cef":function(t,e,a){"use strict";a("6b54"),a("8615"),a("ac6a"),a("cadf"),a("456d");var r=a("b17c"),o=a.n(r),i=a("448a"),n=a.n(i),s=a("3156"),c=a.n(s),l=a("62c5"),d=a.n(l),u=a("a026"),m=a("e588"),p=a("3e8a"),v=a("ed08"),h={BrowserQRCodeSvgWriter:m["BrowserQRCodeSvgWriter"],JsBarcode:d.a,agrupar:v["agrupar"],arredondar:v["arredondar"],dataAtual:v["dataAtual"],dormir:v["dormir"],erp:p["a"],fbarcode:v["fbarcode"],gconsole:v["gconsole"],mostrarErro:v["mostrarErro"],somar:v["somar"],sql:v["executarSqlProtegido"],unicos:v["unicos"],uuid:v["uuid"],verificarErro:v["verificarErro"]};e["a"]={props:{contexto:{default:function(){return{}},type:Object},estilo:{default:"",type:String},template:{default:"",type:String},script:{default:"{}",type:String}},render:function(t){return""===this.template?t("div"):t("iframe",{on:{load:this.carregarComponente},style:{border:"0",display:"block",height:"100%",width:"100%"}})},watch:{contexto:function(){this.carregarComponente()},estilo:function(){this.carregarComponente()},script:function(){this.carregarComponente()},template:function(){this.carregarComponente()}},methods:{carregarComponente:function(t){var e=this.$el||t.target;if(e){var a=null;try{h=c()({},h,this.contexto);var r=this.template.trim(),i=o()(Function,n()(Object.keys(h)).concat(["return ".concat(this.script.trim())])).apply(void 0,n()(Object.values(h)));a=u["default"].component("Espectador",c()({template:r},i))}catch(t){a=u["default"].component("Erro",{template:'<pre :style="style">'.concat(t.toString(),"</pre>"),computed:{style:function(){return{backgroundColor:"MistyRose",color:"DarkRed",height:"100%",margin:"0",padding:"20px"}}}})}var s=e.contentDocument.body;while(s.firstChild)s.removeChild(s.firstChild);var l=document.createElement("div");s.appendChild(l);var d=document.createElement("style");d.innerHTML=this.estilo.trim(),s.appendChild(d);var m=new u["default"]({name:"quadroVue",render:function(t){return t(a)}});m.$mount(l)}}}}},"9e2c":function(t,e,a){"use strict";var r=a("0148"),o=a.n(r);o.a},"9fe7":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{staticClass:"Editor"},[a("q-layout-header",[a("q-toolbar",{attrs:{color:"dark"}},[a("q-btn",{attrs:{dense:"",flat:"",icon:"chevron_left",round:""},on:{click:t.fechar}}),a("q-toolbar-title",{nativeOn:{click:function(e){return t.abrirConfiguracoes(e)}}},[t._v("\n        "+t._s(t.campos.nomeObjeto||"Editor")+"\n        "),t.existeObjeto?a("badge",{staticClass:"Editor-id",attrs:{cor:"grey-10"}},[t._v(t._s(t.campos.codigoObjeto))]):t.temId&&!t.existeObjeto?a("badge",{staticClass:"Editor-id",attrs:{cor:"negative"}},[t._v("Rascunho")]):t._e(),t.campos.nomeObjeto?a("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[t._v("Editor")]):t._e()],1),t.modoDiff?a("q-btn",{staticClass:"q-mr-sm",attrs:{color:"negative",icon:"close",label:"Fechar Diff"},on:{click:t.fecharDiff}}):t._e(),a("q-btn-group",{staticClass:"q-mr-sm"},[t.atualizarAutomaticamente?t._e():a("q-btn",{attrs:{color:"blue",icon:"play_arrow",label:"Atualizar"},on:{click:t.atualizar}}),t.existeObjeto&&t.id?a("q-btn",{attrs:{color:"blue-5",icon:"remove_red_eye",target:"_blank",to:t.rotaImprimir}}):t._e()],1),a("q-btn",{staticClass:"q-ml-sm",attrs:{color:"white",label:"Novo",icon:"add","text-color":"dark"},on:{click:t.incluir}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{color:"white",label:"Abrir",icon:"search","text-color":"dark"},on:{click:t.abrirModalBuscar}}),a(t.existeObjeto?"q-btn-dropdown":"q-btn",{tag:"component",staticClass:"q-ml-md",attrs:{color:"yellow",disabled:t.salvando,icon:"save",label:t.salvando?"Salvando...":"Salvar",split:"","text-color":"dark"},on:{click:t.salvar}},[t.existeObjeto?a("q-list",{attrs:{link:""}},[a("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],nativeOn:{click:function(e){return t.abrirModalHistorico(e)}}},[a("q-item-side",{attrs:{icon:"history"}}),a("q-item-main",{attrs:{label:"Histórico"}})],1),a("q-item",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],nativeOn:{click:function(e){return t.abrirModalPublicar(e)}}},[a("q-item-side",{attrs:{icon:"publish"}}),a("q-item-main",{attrs:{label:"Publicar"}})],1)],1):t._e()],1)],1)],1),a("q-page-container",[a("div",{staticClass:"Editor-codigo u-alturaConteudo row"},[a("div",{staticClass:"u-alturaConteudo bg-dark text-white col col-lg-6",attrs:{id:"editor"}},[a("q-list",{staticClass:"q-pb-none",attrs:{"no-border":""}},[a("q-collapsible",{staticClass:"Editor-editorItem",attrs:{group:"editor",icon:"settings",label:"Configurações"},model:{value:t.areaConfiguracoes,callback:function(e){t.areaConfiguracoes=e},expression:"areaConfiguracoes"}},[a("div",{staticClass:"bg-grey-10 q-pb-md q-pt-sm q-px-md"},[a("campo",{ref:"campoNomeObjeto",attrs:{dark:"",rotulo:"Identificador"},model:{value:t.campos.nomeObjeto,callback:function(e){t.$set(t.campos,"nomeObjeto",e)},expression:"campos.nomeObjeto"}}),a("campo",{attrs:{dark:"",rotulo:"Descrição"},model:{value:t.campos.descricao,callback:function(e){t.$set(t.campos,"descricao",e)},expression:"campos.descricao"}}),a("campo",{attrs:{dark:"",ajuda:t.parametroBase64,rotulo:"Parâmetro",tipo:"textoArea"},model:{value:t.componente.parametro,callback:function(e){t.$set(t.componente,"parametro",e)},expression:"componente.parametro"}}),a("q-toggle",{staticClass:"q-mt-lg",attrs:{label:"Atualizar pré-visualização ao digitar?"},model:{value:t.atualizarAutomaticamente,callback:function(e){t.atualizarAutomaticamente=e},expression:"atualizarAutomaticamente"}}),a("q-list",{staticClass:"q-mt-lg q-pa-none",attrs:{dark:"",separator:""}},[a("q-collapsible",{attrs:{group:"configuracoes",label:"Atalhos da ferramenta"}},[a("table",{staticClass:"TabelaEscura q-caption q-mb-md q-mx-md"},[a("thead",[a("tr",[a("th",[t._v("Atalho")]),a("th",[t._v("Windows")]),a("th",[t._v("Linux")]),a("th",[t._v("macOS")])])]),a("tbody",[a("tr",[a("td",[t._v("Abrir documento")]),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("O")])]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("O")])])]),a("tr",[a("td",[t._v("Salvar documento")]),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("S")])]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("S")])])]),a("tr",[a("td",[t._v("Atualizar componente")]),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("ENTER")])]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("ENTER")])])])])])]),a("q-collapsible",{attrs:{group:"configuracoes",label:"Atalhos do editor"}},[a("table",{staticClass:"TabelaEscura q-caption q-mb-md q-mx-md"},[a("thead",[a("tr",[a("th",[t._v("Atalho")]),a("th",[t._v("Windows")]),a("th",[t._v("Linux")]),a("th",[t._v("macOS")])])]),a("tbody",[a("tr",[a("td",[t._v("Paleta de comandos")]),a("td",{staticClass:"text-center",attrs:{colspan:"3"}},[a("kbd",[t._v("F1")])])]),a("tr",[a("td",[t._v("Colapsar tudo")]),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("K")]),t._v(" | "),a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("0")])]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("K")]),t._v(" | "),a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("0")])])]),a("tr",[a("td",[t._v("Comentar")]),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("/")])]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("/")])])]),a("tr",[a("td",[t._v("Expandir tudo")]),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("K")]),t._v(" | "),a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("J")])]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("K")]),t._v(" | "),a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("J")])])]),a("tr",[a("td",[t._v("Formatar seleção")]),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("K")]),t._v(" | "),a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("F")])]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("K")]),t._v(" | "),a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("F")])])]),a("tr",[a("td",[t._v("Formatar tudo")]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("SHIFT")]),t._v(" + "),a("kbd",[t._v("F")])]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("SHIFT")]),t._v(" + "),a("kbd",[t._v("F")])]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("SHIFT")]),t._v(" + "),a("kbd",[t._v("F")])])]),a("tr",[a("td",[t._v("Localizar")]),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("F")])]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("F")])])]),a("tr",[a("td",[t._v("Múltiplos cursores")]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("ALT")]),t._v(" + "),a("kbd",[t._v("SHIFT")]),t._v(" + "),a("kbd",[t._v("↑↓")])]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("SHIFT")]),t._v(" + "),a("kbd",[t._v("↑↓")])]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("SHIFT")]),t._v(" + "),a("kbd",[t._v("↑↓")])])]),a("tr",[a("td",[t._v("Selecionar tudo")]),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("A")])]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("A")])])]),a("tr",[a("td",[t._v("Substituir")]),a("td",{staticClass:"text-center",attrs:{colspan:"2"}},[a("kbd",[t._v("CTRL")]),t._v(" + "),a("kbd",[t._v("H")])]),a("td",{staticClass:"text-center"},[a("kbd",[t._v("⌘")]),t._v(" + "),a("kbd",[t._v("H")])])])])])])],1)],1)]),a("q-collapsible",{staticClass:"Editor-editorItem",attrs:{group:"editor",icon:"dashboard",label:"Template (HTML)"}},[a("monaco-editor",{key:t.chaveDiff,staticClass:"Editor-editor",attrs:{language:"html",diffEditor:t.modoDiff,original:t.componenteDiff.template,options:t.editorOptions,theme:"vs-dark"},on:{editorDidMount:t.aoIniciarEditor,change:t.alterarConteudo},model:{value:t.componente.template,callback:function(e){t.$set(t.componente,"template",e)},expression:"componente.template"}})],1),a("q-collapsible",{staticClass:"Editor-editorItem",attrs:{group:"editor",icon:"code",label:"JavaScript (Vue)",opened:""}},[a("monaco-editor",{key:t.chaveDiff+1,staticClass:"Editor-editor",attrs:{language:"javascript",diffEditor:t.modoDiff,original:t.componenteDiff.script,options:t.editorOptions,theme:"vs-dark"},on:{editorDidMount:t.aoIniciarEditor,change:t.alterarConteudo},model:{value:t.componente.script,callback:function(e){t.$set(t.componente,"script",e)},expression:"componente.script"}})],1),a("q-collapsible",{staticClass:"Editor-editorItem",attrs:{group:"editor",icon:"format_paint",label:"Estilos (CSS)"}},[a("monaco-editor",{key:t.chaveDiff+2,staticClass:"Editor-editor",attrs:{language:"css",diffEditor:t.modoDiff,original:t.componenteDiff.estilo,options:t.editorOptions,theme:"vs-dark"},on:{editorDidMount:t.aoIniciarEditor,change:t.alterarConteudo},model:{value:t.componente.estilo,callback:function(e){t.$set(t.componente,"estilo",e)},expression:"componente.estilo"}})],1),a("q-collapsible",{staticClass:"Editor-editorItem",attrs:{group:"editor",icon:"speaker_notes",label:"Documentação (Markdown)"}},[a("monaco-editor",{staticClass:"Editor-editor",attrs:{language:"markdown",options:t.editorOptions,theme:"vs-dark"},on:{editorDidMount:t.aoIniciarEditor,change:t.alterarConteudo},model:{value:t.campos.documentacao,callback:function(e){t.$set(t.campos,"documentacao",e)},expression:"campos.documentacao"}})],1)],1)],1),a("div",{staticClass:"Editor-visualizador u-alturaConteudo col col-lg-6",attrs:{id:"visualizador"}},[a("visualizador",t._b({},"visualizador",t.visualizador,!1))],1)]),a("q-modal",{attrs:{"no-backdrop-dismiss":"","no-esc-dismiss":""},model:{value:t.modalBoasVindas,callback:function(e){t.modalBoasVindas=e},expression:"modalBoasVindas"}},[a("div",{staticClass:"layout-padding"},[a("h4",{staticClass:"q-mb-sm q-mt-none"},[t._v("Bem-vindo ao Editor.")]),a("p",[t._v("Através desta interface é possível criar ou editar objetos do sistema.")]),a("div",{staticClass:"q-mt-lg"},[a("q-btn",{attrs:{color:"primary",label:"Novo",icon:"add"},on:{click:t.incluir}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{color:"primary",label:"Abrir",icon:"search"},on:{click:t.abrirModalBuscar}})],1)])]),a("q-modal",{attrs:{"no-backdrop-dismiss":"","no-esc-dismiss":""},model:{value:t.modalPublicar,callback:function(e){t.modalPublicar=e},expression:"modalPublicar"}},[a("div",{staticClass:"layout-padding"},[a("h4",{staticClass:"q-mb-sm q-mt-none"},[t._v("Publicar")]),a("p",[t._v("Deixe uma mensagem para recordar o que há de novo nesta versão.")]),a("campo",{attrs:{rotulo:"Mensagem",placeholder:"Escreva a sua mensagem...",tipo:"textoArea"},model:{value:t.campoObservacao,callback:function(e){t.campoObservacao=e},expression:"campoObservacao"}}),a("div",{staticClass:"q-mt-lg"},[a("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{label:"Cancelar"}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{color:"primary",label:"Publicar",icon:"publish"},on:{click:t.publicar}})],1)],1),a("q-inner-loading",{attrs:{visible:t.modalPublicar&&t.publicando}},[a("q-spinner",{attrs:{size:"50px",color:"primary"}})],1)],1),a("prompt",{attrs:{prop:{dados:t.objetos,esquema:t.esquema,limite:1e3,titulo:"Buscar Objeto"}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.itens;return[a("q-list",{attrs:{link:"","no-border":"",separator:""}},t._l(r,function(e){return a("q-item",{key:e.id,nativeOn:{click:function(a){t.selecionarObjeto(e.id)}}},[a("q-item-main",[a("q-item-tile",[t._v(t._s(e.nomeObjeto))]),e.descricao?a("q-item-tile",{attrs:{sublabel:""}},[t._v(t._s(e.descricao))]):t._e()],1),a("q-item-side",[a("badge",{staticClass:"q-mt-md",attrs:{cor:"primary",escuro:""}},[t._v("#"+t._s(e.codigoObjeto))])],1)],1)}))]}}]),model:{value:t.modalBuscar,callback:function(e){t.modalBuscar=e},expression:"modalBuscar"}}),a("prompt",{attrs:{prop:{dados:t.versoes,titulo:"Histórico"}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.itens;return[a("q-list",{attrs:{link:"","no-border":"",separator:""}},t._l(r,function(e){return a("q-item",{key:e.id},[a("q-item-main",[e.obs?a("q-item-tile",[t._v(t._s(e.obs))]):t._e(),e.dataHora?a("q-item-tile",{staticClass:"q-caption"},[t._v(t._s(e.publicado?"Publicado":"Salvo")+" em "+t._s(t._f("dataHora")(e.dataHora)))]):t._e()],1),a("q-item-side",[e.usuario?a("badge",{staticClass:"q-mr-sm",attrs:{cor:e.idUsuario===t.usuario.id?"primary":"grey",denso:"",escuro:""}},[t._v(t._s(e.usuario))]):t._e(),a("badge",{attrs:{cor:e.publicado?"positive":"grey",denso:"",escuro:""}},[t._v(t._s(e.id))])],1),a("q-item-side",[a("q-btn",{staticClass:"q-px-sm q-mr-sm",attrs:{dense:"",label:"Comparar"},on:{click:function(a){t.compararVersao(e)}}}),a("q-btn",{staticClass:"q-px-sm",attrs:{color:"primary",dense:"",label:"Abrir"},on:{click:function(a){t.selecionarVersao(e.id)}}})],1)],1)}))]}}]),model:{value:t.modalHistorico,callback:function(e){t.modalHistorico=e},expression:"modalHistorico"}})],1)],1)},o=[];r._withStripped=!0;a("a481"),a("551c"),a("7514"),a("96cf");var i=a("c973"),n=a.n(i),s=a("3156"),c=a.n(s),l=a("77d5"),d=a("ed08"),u=window,m=u.document,p="addEventListener",v="removeEventListener",h="getBoundingClientRect",f="_a",b="_b",g="_c",_="horizontal",k=function(){return!1},C=u.attachEvent&&!u[p],y=["","-webkit-","-moz-","-o-"].filter(function(t){var e=m.createElement("div");return e.style.cssText="width:"+t+"calc(9px)",!!e.style.length}).shift()+"calc",x=function(t){return"string"===typeof t||t instanceof String},q=function(t){if(x(t)){var e=m.querySelector(t);if(!e)throw new Error("Selector "+t+" did not match a DOM element");return e}return t},O=function(t,e,a){var r=t[e];return void 0!==r?r:a},w=function(t,e,a,r){if(e){if("end"===r)return 0;if("center"===r)return t/2}else if(a){if("start"===r)return 0;if("center"===r)return t/2}return t},z=function(t,e){var a=m.createElement("div");return a.className="gutter gutter-"+e,a},S=function(t,e,a){var r={};return x(e)?r[t]=e:r[t]=C?e+"%":y+"("+e+"% - "+a+"px)",r},j=function(t,e){var a;return a={},a[t]=e+"px",a},E=function(t,e){void 0===e&&(e={});var a,r,o,i,n,s,c=t;Array.from&&(c=Array.from(c));var l=q(c[0]),d=l.parentNode,y=getComputedStyle?getComputedStyle(d):null,x=y?y.flexDirection:null,E=O(e,"sizes")||c.map(function(){return 100/c.length}),D=O(e,"minSize",100),R=Array.isArray(D)?D:c.map(function(){return D}),T=O(e,"expandToMin",!1),A=O(e,"gutterSize",10),M=O(e,"gutterAlign","center"),P=O(e,"snapOffset",30),$=O(e,"dragInterval",1),B=O(e,"direction",_),H=O(e,"cursor",B===_?"col-resize":"row-resize"),L=O(e,"gutter",z),I=O(e,"elementStyle",S),F=O(e,"gutterStyle",j);function N(t,e,r,o){var i=I(a,e,r,o);Object.keys(i).forEach(function(e){t.style[e]=i[e]})}function V(t,e,r){var o=F(a,e,r);Object.keys(o).forEach(function(e){t.style[e]=o[e]})}function U(){return s.map(function(t){return t.size})}function K(t){return"touches"in t?t.touches[0][r]:t[r]}function J(t){var e=s[this.a],a=s[this.b],r=e.size+a.size;e.size=t/this.size*r,a.size=r-t/this.size*r,N(e.element,e.size,this[b],e.i),N(a.element,a.size,this[g],a.i)}function W(t){var a,r=s[this.a],o=s[this.b];this.dragging&&(a=K(t)-this.start+(this[b]-this.dragOffset),$>1&&(a=Math.round(a/$)*$),a<=r.minSize+P+this[b]?a=r.minSize+this[b]:a>=this.size-(o.minSize+P+this[g])&&(a=this.size-(o.minSize+this[g])),J.call(this,a),O(e,"onDrag",k)())}function Q(){var t=s[this.a].element,e=s[this.b].element,r=t[h](),n=e[h]();this.size=r[a]+n[a]+this[b]+this[g],this.start=r[o],this.end=r[i]}function X(t){if(!getComputedStyle)return null;var e=getComputedStyle(t);if(!e)return null;var a=t[n];return 0===a?null:(a-=B===_?parseFloat(e.paddingLeft)+parseFloat(e.paddingRight):parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),a)}function Y(t){var e=X(d);if(null===e)return t;if(R.reduce(function(t,e){return t+e},0)>e)return t;var a=0,r=[],o=t.map(function(o,i){var n=e*o/100,s=w(A,0===i,i===t.length-1,M),c=R[i]+s;return n<c?(a+=c-n,r.push(0),c):(r.push(n-c),n)});return 0===a?t:o.map(function(t,o){var i=t;if(a>0&&r[o]-a>0){var n=Math.min(a,r[o]-a);a-=n,i=t-n}return i/e*100})}function G(){var t=this,a=s[t.a].element,r=s[t.b].element;t.dragging&&O(e,"onDragEnd",k)(U()),t.dragging=!1,u[v]("mouseup",t.stop),u[v]("touchend",t.stop),u[v]("touchcancel",t.stop),u[v]("mousemove",t.move),u[v]("touchmove",t.move),t.stop=null,t.move=null,a[v]("selectstart",k),a[v]("dragstart",k),r[v]("selectstart",k),r[v]("dragstart",k),a.style.userSelect="",a.style.webkitUserSelect="",a.style.MozUserSelect="",a.style.pointerEvents="",r.style.userSelect="",r.style.webkitUserSelect="",r.style.MozUserSelect="",r.style.pointerEvents="",t.gutter.style.cursor="",t.parent.style.cursor="",m.body.style.cursor=""}function Z(t){if(!("button"in t&&0!==t.button)){var a=this,r=s[a.a].element,o=s[a.b].element;a.dragging||O(e,"onDragStart",k)(U()),t.preventDefault(),a.dragging=!0,a.move=W.bind(a),a.stop=G.bind(a),u[p]("mouseup",a.stop),u[p]("touchend",a.stop),u[p]("touchcancel",a.stop),u[p]("mousemove",a.move),u[p]("touchmove",a.move),r[p]("selectstart",k),r[p]("dragstart",k),o[p]("selectstart",k),o[p]("dragstart",k),r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.MozUserSelect="none",r.style.pointerEvents="none",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none",o.style.pointerEvents="none",a.gutter.style.cursor=H,a.parent.style.cursor=H,m.body.style.cursor=H,Q.call(a),a.dragOffset=K(t)-a.end}}B===_?(a="width",r="clientX",o="left",i="right",n="clientWidth"):"vertical"===B&&(a="height",r="clientY",o="top",i="bottom",n="clientHeight"),E=Y(E);var tt=[];function et(t){var e=t.i===tt.length,a=e?tt[t.i-1]:tt[t.i];Q.call(a);var r=e?a.size-t.minSize-a[g]:t.minSize+a[b];J.call(a,r)}function at(t){var e=Y(t);e.forEach(function(t,a){if(a>0){var r=tt[a-1],o=s[r.a],i=s[r.b];o.size=e[a-1],i.size=t,N(o.element,o.size,r[b],o.i),N(i.element,i.size,r[g],i.i)}})}function rt(t,e){tt.forEach(function(r){if(!0!==e?r.parent.removeChild(r.gutter):(r.gutter[v]("mousedown",r[f]),r.gutter[v]("touchstart",r[f])),!0!==t){var o=I(a,r.a.size,r[b]);Object.keys(o).forEach(function(t){s[r.a].element.style[t]="",s[r.b].element.style[t]=""})}})}return s=c.map(function(t,e){var a,r={element:q(t),size:E[e],minSize:R[e],i:e};if(e>0&&(a={a:e-1,b:e,dragging:!1,direction:B,parent:d},a[b]=w(A,e-1===0,!1,M),a[g]=w(A,!1,e===c.length-1,M),"row-reverse"===x||"column-reverse"===x)){var o=a.a;a.a=a.b,a.b=o}if(!C&&e>0){var i=L(e,B,r.element);V(i,A,e),a[f]=Z.bind(a),i[p]("mousedown",a[f]),i[p]("touchstart",a[f]),d.insertBefore(i,r.element),a.gutter=i}return N(r.element,r.size,w(A,0===e,e===c.length-1,M),e),e>0&&tt.push(a),r}),s.forEach(function(t){var e=t.element[h]()[a];e<t.minSize&&(T?et(t):t.minSize=e)}),C?{setSizes:at,destroy:rt}:{setSizes:at,getSizes:U,collapse:function(t){et(s[t])},destroy:rt,parent:d,pairs:tt}},D=E,R=a("059c"),T=a("2ef0"),A=a("a0fd"),M=a("88db"),P=a("7979"),$=a("7cef"),B={components:{Badge:A["a"],Campo:M["a"],MonacoEditor:R["a"],Prompt:P["a"],Visualizador:$["a"]},data:function(){return{alterarConteudo:null,alterouConteudo:!1,areaConfiguracoes:!0,atualizarAutomaticamente:!!parseInt(localStorage["editorAtualizar"]),campoObservacao:"",campos:{codigoObjeto:"",descricao:"",documentacao:"",nomeObjeto:""},componente:{parametro:"",estilo:"",script:"",template:""},componenteCache:{},componenteDiff:{},chaveDiff:0,esquema:[{prioridade:.8,rotulo:"Descrição",tipo:"texto",valor:"descricao"},{prioridade:.8,rotulo:"Nome do Objeto",tipo:"texto",valor:"nomeObjeto"}],modalBoasVindas:!1,modalBuscar:!1,modalHistorico:!1,modalPublicar:!1,modoDiff:!1,objetos:[],versoes:[],publicando:!1,salvando:!1}},computed:{editorOptions:function(){return{automaticLayout:!0,lineNumbersMinChars:2}},existeObjeto:function(){return this.temId&&"0"!==this.id},id:function(){return this.$route.params.id},temId:function(){return void 0!==this.id},parametroBase64:function(){return d["base64"].encodeToUrl(this.componente.parametro||"")},rotaImprimir:function(){return{name:"Imprimir",params:{nome:this.campos.nomeObjeto||"x",parametro:this.parametroBase64||void 0}}},usuario:function(){try{return JSON.parse(localStorage.usuario)}catch(t){return{}}},versao:function(){return this.$route.params.versao},visualizador:function(){return c()({},this.componenteCache,{contexto:{parametro:this.atualizarAutomaticamente?this.componente.parametro:this.componenteCache.parametro}})}},methods:{abrirConfiguracoes:function(){this.areaConfiguracoes=!0},abrirModalBuscar:function(){var t=n()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.carregarObjetos();case 2:this.modalBuscar=!0;case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),abrirModalHistorico:function(){this.carregarVersoes(),this.modalHistorico=!0},abrirModalPublicar:function(){this.modalPublicar=!0},aoIniciarEditor:function(t){var e=this;t.onKeyDown(function(t){var a=t.browserEvent||{};(a.ctrlKey||a.metaKey)&&13===a.which&&(t.stopPropagation(),e.atualizar())})},atualizar:function(){if(this.atualizarAutomaticamente)return null;this.componenteCache=Object(d["clonar"])(this.componente),this.atualizado=!0},atualizarComponente:function(t){"string"===typeof t&&(t=JSON.parse(atob(t))),this.componente.parametro=t.parametro||"",this.componente.estilo=t.estilo||"",this.componente.script=t.script||"",this.componente.template=t.template||"",this.componenteCache=Object(d["clonar"])(this.componente),this.alterouConteudo=!1},carregarObjetos:function(){var t=n()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["a"].objeto.leOnline({colunas:"id codigoObjeto codigoPersonalizado descricao documentacao nomeObjeto tipo",filtros:{tipo:"vue"}});case 3:return this.objetos=t.sent,t.abrupt("return",this.objetos);case 7:throw t.prev=7,t.t0=t["catch"](0),this.$q.notify("Não foi possível obter a lista de objetos."),t.t0;case 11:case"end":return t.stop()}},t,this,[[0,7]])}));return function(){return t.apply(this,arguments)}}(),carregarObjeto:function(t){try{var e=this.objetos.find(function(e){return e.id===t});if(!e)return this.incluir(),this.$q.notify("Objeto inexistente.");this.campos.codigoObjeto=e.codigoObjeto,this.campos.nomeObjeto=e.nomeObjeto,this.campos.descricao=e.descricao,this.campos.documentacao=e.documentacao||"",this.atualizarComponente(e.codigoPersonalizado),this.abrirConfiguracoes(),this.fecharDiff()}catch(t){throw this.$q.notify("Não foi possível carregar o objeto."),t}},carregarVersao:function(t){var e=this.versoes.find(function(e){return e.id===t});this.campos.documentacao=e.documentacao||"",this.atualizarComponente(e.codigoPersonalizado),this.fecharDiff()},carregarVersoes:function(){var t=n()(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["a"].objetoVersao.leOnline({colunas:"id idObjeto idUsuario codigoPersonalizado dataHora obs publicado usuario",filtros:{idObjeto:this.id}});case 3:return this.versoes=t.sent,t.abrupt("return",this.versoes);case 7:throw t.prev=7,t.t0=t["catch"](0),this.$q.notify("Não foi possível obter a lista de versões."),t.t0;case 11:case"end":return t.stop()}},t,this,[[0,7]])}));return function(){return t.apply(this,arguments)}}(),compararVersao:function(t){this.componenteDiff=JSON.parse(atob(t.codigoPersonalizado)),this.modoDiff=!0,this.chaveDiff++,this.fecharModalHistorico()},confirmarSaida:function(){var t=n()(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,a){if(!e.alterouConteudo)return t();e.$q.dialog({cancel:"Cancelar",color:"negative",message:"Parece que existem modificações que não foram salvas. Deseja continuar?",ok:"Sair sem salvar",title:"Sair sem salvar?"}).then(function(){return t()}).catch(function(t){})}));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),fecharDiff:function(){this.modoDiff&&(this.modoDiff=!1,this.chaveDiff++)},fecharModalBuscar:function(){this.modalBuscar=!1},fecharModalHistorico:function(){this.modalHistorico=!1},publicar:function(){var t=n()(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.publicando=!0,t.prev=1,t.next=4,this.gravar(this.id,!0,this.campoObservacao);case 4:e=t.sent,this.$q.notifyPositive("Publicado!"),this.campoObservacao="",this.modalPublicar=!1,this.$router.push({params:{versao:e}}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),this.$q.notifyError("Erro ao publicar.");case 14:return t.prev=14,this.publicando=!1,t.finish(14);case 17:case"end":return t.stop()}},t,this,[[1,11,14,17]])}));return function(){return t.apply(this,arguments)}}(),redefinirCampos:function(){this.campos.codigoObjeto="",this.campos.descricao="",this.campos.nomeObjeto=""},redefinirComponente:function(){this.componente.parametro="{}",this.componente.estilo=".foo {\n  color: green;\n}",this.componente.script="{\n  data: () => ({\n    bar: ''\n  })\n}",this.componente.template='<div class="foo">\n  {{ bar }}\n</div>',this.componenteCache=Object(d["clonar"])(this.componente),this.alterouConteudo=!1},fechar:function(){history.back()},incluir:function(){var t=this;this.confirmarSaida().then(function(){0!==t.id&&"0"!==t.id||(t.redefinirCampos(),t.redefinirComponente()),t.$router.push({params:{id:"0",versao:void 0}})})},gravar:function(){var t=n()(regeneratorRuntime.mark(function t(e,a,r){var o,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(o=Object(d["uuid"])(),i=btoa(JSON.stringify(this.componente)),!a&&this.existeObjeto){t.next=5;break}return t.next=5,l["a"].objeto.grava(c()({},this.campos,{id:e,tipo:"vue",codigoPersonalizado:i}));case 5:return n={id:o,idObjeto:e,idUsuario:this.usuario.id,codigoPersonalizado:i,dataHora:Object(d["sqlData"])(new Date).replace(/'/g,""),documentacao:this.campos.documentacao||"",publicado:a?1:0,usuario:this.usuario.nome},r&&(n.obs=r),t.next=9,l["a"].objetoVersao.grava(n);case 9:return t.abrupt("return",o);case 10:case"end":return t.stop()}},t,this)}));return function(e,a,r){return t.apply(this,arguments)}}(),salvar:function(){var t=n()(regeneratorRuntime.mark(function t(){var e,a,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(""!==this.campos.nomeObjeto){t.next=5;break}return this.$q.notify("O identificador é obrigatório."),this.abrirConfiguracoes(),setTimeout(function(){return r.$refs.campoNomeObjeto.focus()},1),t.abrupt("return",!1);case 5:return this.salvando=!0,t.prev=6,this.$q.loading.show(),e=this.existeObjeto?this.id:Object(d["uuid"])(),t.next=11,this.gravar(e);case 11:a=t.sent,this.alterouConteudo=!1,this.$router.push({params:{id:e,versao:a}}),this.$q.notifyPositive("Salvo com sucesso!"),t.next=21;break;case 17:throw t.prev=17,t.t0=t["catch"](6),this.$q.notify("Erro ao salvar."),t.t0;case 21:return t.prev=21,this.salvando=!1,this.$q.loading.hide(),t.finish(21);case 25:case"end":return t.stop()}},t,this,[[6,17,21,25]])}));return function(){return t.apply(this,arguments)}}(),selecionarObjeto:function(t){var e=this;this.fecharModalBuscar(),this.confirmarSaida().then(function(){return e.$router.push({params:{id:t,versao:void 0}})})},selecionarVersao:function(t){var e=this;this.fecharModalHistorico(),this.confirmarSaida().then(function(){e.carregarVersao(t),e.$router.push({params:{versao:t}})})},teclas:function(t){if(t&&(t.ctrlKey||t.metaKey))switch(t.which){case 13:t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),this.atualizar();break;case 79:t.preventDefault(),this.abrirModalBuscar();break;case 83:t.preventDefault(),this.salvar();break}}},created:function(){var t=n()(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.redefinirComponente(),!this.existeObjeto){t.next=16;break}return this.$q.loading.show(),t.prev=3,t.next=6,this.carregarObjetos();case 6:if(this.carregarObjeto(this.id),!this.versao){t.next=11;break}return t.next=10,this.carregarVersoes();case 10:this.carregarVersao(this.versao);case 11:return t.prev=11,this.$q.loading.hide(),t.finish(11);case 14:t.next=17;break;case 16:this.temId||(this.modalBoasVindas=!0);case 17:document.addEventListener("keydown",this.teclas),this.alterarConteudo=Object(T["debounce"])(function(){e.alterouConteudo=!0,e.atualizarAutomaticamente&&(e.componenteCache=Object(d["clonar"])(e.componente))},500);case 19:case"end":return t.stop()}},t,this,[[3,,11,14]])}));return function(){return t.apply(this,arguments)}}(),mounted:function(){this.divisor=new D(["#editor","#visualizador"],{minSize:[300,20]})},beforeDestroy:function(){document.removeEventListener("keydown",this.teclas),this.divisor&&this.divisor.destroy()},watch:{id:function(){var t=n()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e||"0"===e){t.next=6;break}return t.next=3,this.carregarObjetos();case 3:this.carregarObjeto(e),t.next=8;break;case 6:this.redefinirCampos(),this.redefinirComponente();case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),atualizarAutomaticamente:function(t){t||(this.componenteCache=Object(d["clonar"])(this.componente)),localStorage.setItem("editorAtualizar",t?1:0)}}},H=B,L=(a("9e2c"),a("2877")),I=Object(L["a"])(H,r,o,!1,null,null,null);I.options.__file="Editor.vue";e["default"]=I.exports}}]);