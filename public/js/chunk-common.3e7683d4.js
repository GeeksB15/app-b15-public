"use strict";(globalThis.webpackChunkb15=globalThis.webpackChunkb15||[]).push([[64],{69145:(e,a,o)=>{o(34182);const t={data:()=>({modal:{visivel:!1}}),emits:["excluir"]};o(74260);var l=o(39341),i=o(63626),r=o(54553),n=o(47266),d=o(48761),s=o(37617),c=o(83671),m=o(98586),u=o(7518),p=o.n(u);p()(t,"components",{QDialog:l.Z,QLayout:i.Z,QHeader:r.Z,QToolbar:n.Z,QToolbarTitle:d.Z,QBtn:s.Z,QFooter:c.Z}),p()(t,"directives",{ClosePopup:m.Z})},54144:(e,a,o)=>{o.d(a,{Z:()=>_});var t=o(34182);const l={class:"col"},i={class:"col"},r={class:"col"},n={class:"col"},d={class:"col"},s={class:"col"},c={class:"col"},m={class:"col"},u={class:"col"},p={class:"col"},h=(0,t.createElementVNode)("span",{class:"text-tertiary"},null,-1),V=(0,t.createElementVNode)("span",{class:"text-positive float-right"},null,-1),v={data:()=>({apontamento:{dataIni:new Date,dataFim:$utils.dataAtual(),equipamento:null,operador:null,quantidade:0,peso:0},dataIni:new Date,dataFim:new Date,horaIni:new Date,horaFim:new Date,operadores:null,equipamentos:null,calcularPesoQtd:!0,descricaoOperador:"",visivel:!1,item:{peso:6,quantidade:1}}),emits:["incluirApontamento"],computed:{},methods:{async show(){await this.carregarEquipamentos(),await this.carregarOperadores(),this.visivel=!0},async carregarEquipamentos(){console.log("carregar equipamentos");let e=await $db.item.leRefatorado({filtros:{tipo:"Equipamento"}});this.equipamentos=e.data.map((e=>({rotulo:e.descricao,valor:e.id})))},async carregarOperadores(){console.log("carregar operadores");let e=await $db.contato.leRefatorado({filtros:{}});this.operadores=e.data.map((e=>({rotulo:e.nome,valor:e.id})))},selecionarOperador(e,a){this.apontamento.operador=this.operadores},async concluir(){"string"==typeof this.dataIni&&(this.dataIni=new Date(this.dataIni)),"string"==typeof this.dataFim&&(this.dataFim=new Date(this.dataFim)),this.dataIni=new Date(this.dataIni),this.dataFim=new Date(this.dataFim);let e=this.dataIni.getFullYear()+"-"+("0"+(this.dataIni.getMonth()+1)).slice(-2)+"-"+("0"+this.dataIni.getDate()).slice(-2),a=this.dataFim.getFullYear()+"-"+("0"+(this.dataFim.getMonth()+1)).slice(-2)+"-"+("0"+this.dataFim.getDate()).slice(-2);return e+="T"+this.horaIni+":00",a+="T"+this.horaFim+":00",this.apontamento.dataIni=new Date(e),this.apontamento.dataFim=new Date(a),isNaN(this.apontamento.dataIni.getTime())?(this.$q.notifyError("Data e horario de inicio invalido"),!1):isNaN(this.apontamento.dataFim.getTime())?(this.$q.notifyError("Data e horario de fim invalido"),!1):(this.$emit("incluirApontamento",this.apontamento),void this.fechar())},fechar(e){e&&e.stopPropagation(),this.$emit("update:modelValue",!1),this.apontamento={dataIni:new Date,dataFim:$utils.dataAtual(),equipamento:null,operador:null,quantidade:0,peso:0},this.dataIni=new Date,this.horaIni=new Date,this.horaFim=new Date,this.dataFim=new Date,this.dataFim=new Date,this.visivel=!1},calcularPeso(){this.calcularPesoQtd&&(this.apontamento.peso=this.apontamento.quantidade*this.item.peso)},calcularQuantidade(){this.calcularPesoQtd&&(this.apontamento.quantidade=this.apontamento.peso/this.item.peso)},async btSelecionarOperador_click(){const e=await $g.promptContato.show({filtro:{ativo:!0,operadores:!0},placeholder:"Selecione o operador"});$lodash.get(e,"id")&&(this.apontamento.operador=e.id,this.descricaoOperador=e.apelido||"")},operadorLimpar(){this.contato.idContatoOperador="",this.descricaoOperador=""}}};var w=o(74260),C=o(39341),N=o(63626),g=o(54553),q=o(47266),f=o(37617),F=o(48761),Q=o(7112),D=o(24515),b=o(83054),I=o(40320),k=o(68900),E=o(83671),Z=o(7518),x=o.n(Z);const _=(0,w.Z)(v,[["render",function(e,a,o,v,w,C){const N=(0,t.resolveComponent)("q-btn"),g=(0,t.resolveComponent)("q-toolbar-title"),q=(0,t.resolveComponent)("q-toolbar"),f=(0,t.resolveComponent)("q-header"),F=(0,t.resolveComponent)("campo"),Q=(0,t.resolveComponent)("row"),D=(0,t.resolveComponent)("q-icon"),b=(0,t.resolveComponent)("q-select"),I=(0,t.resolveComponent)("q-card"),k=(0,t.resolveComponent)("q-page"),E=(0,t.resolveComponent)("q-page-container"),Z=(0,t.resolveComponent)("q-footer"),x=(0,t.resolveComponent)("q-layout"),_=(0,t.resolveComponent)("q-dialog");return(0,t.openBlock)(),(0,t.createBlock)(_,{modelValue:w.visivel,"onUpdate:modelValue":a[11]||(a[11]=e=>w.visivel=e),persistent:"",maximized:"",onKeyup:(0,t.withKeys)(C.fechar,["esc"])},{default:(0,t.withCtx)((()=>[(0,t.createVNode)(x,{class:"bg-white",container:""},{default:(0,t.withCtx)((()=>[(0,t.createVNode)(f,null,{default:(0,t.withCtx)((()=>[(0,t.createVNode)(q,null,{default:(0,t.withCtx)((()=>[(0,t.createVNode)(N,{dense:"",flat:"",icon:"arrow_back",round:"",onClick:C.fechar},null,8,["onClick"]),(0,t.createVNode)(g,null,{default:(0,t.withCtx)((()=>[(0,t.createTextVNode)(" Produção de Item ")])),_:1})])),_:1})])),_:1}),(0,t.createVNode)(E,null,{default:(0,t.withCtx)((()=>[(0,t.createVNode)(k,null,{default:(0,t.withCtx)((()=>[(0,t.createElementVNode)("div",l,[(0,t.createVNode)(I,{class:"q-pa-sm q-ml-sm no-shadow"},{default:(0,t.withCtx)((()=>[(0,t.createVNode)(Q,{class:"items-center q-col-gutter-md"},{default:(0,t.withCtx)((()=>[(0,t.createElementVNode)("div",i,[(0,t.createElementVNode)("div",r,[(0,t.createVNode)(F,{class:"col-md-6",modelValue:w.dataIni,"onUpdate:modelValue":a[0]||(a[0]=e=>w.dataIni=e),tipo:"data",format:"DD/MM/YYYY",rotulo:"Inicio da Produção"},null,8,["modelValue"])]),(0,t.createElementVNode)("div",n,[(0,t.createVNode)(F,{class:"col-6",modelValue:w.horaIni,"onUpdate:modelValue":a[1]||(a[1]=e=>w.horaIni=e),tipo:"hora",format:"HH:mm:ss",rotulo:"Inicio da Produção"},null,8,["modelValue"])])]),(0,t.createElementVNode)("div",d,[(0,t.createElementVNode)("div",s,[(0,t.createVNode)(F,{class:"col-md-6",modelValue:w.dataFim,"onUpdate:modelValue":a[2]||(a[2]=e=>w.dataFim=e),tipo:"data",format:"DD/MM/YYYY",rotulo:"Fim da Produção"},null,8,["modelValue"])]),(0,t.createElementVNode)("div",c,[(0,t.createVNode)(F,{class:"col-6",modelValue:w.horaFim,"onUpdate:modelValue":a[3]||(a[3]=e=>w.horaFim=e),tipo:"hora",format:"HH:mm:ss",rotulo:"Fim da Produção"},null,8,["modelValue"])])])])),_:1}),(0,t.createVNode)(Q,{class:"items-center q-col-gutter-md"},{default:(0,t.withCtx)((()=>[(0,t.createElementVNode)("div",{class:"col",onClick:a[5]||(a[5]=(...e)=>C.carregarEquipamentos&&C.carregarEquipamentos(...e))},[(0,t.createVNode)(F,{modelValue:w.apontamento.equipamento,"onUpdate:modelValue":a[4]||(a[4]=e=>w.apontamento.equipamento=e),opcoes:w.equipamentos,tipo:"seletor",rotulo:"Equipamento"},null,8,["modelValue","opcoes"])]),(0,t.createElementVNode)("div",{class:"col",onClick:a[7]||(a[7]=(...e)=>C.carregarOperadores&&C.carregarOperadores(...e))},[(0,t.createVNode)(b,{dense:"",rounded:"",modelValue:w.descricaoOperador,"onUpdate:modelValue":a[6]||(a[6]=e=>w.descricaoOperador=e),label:"Operador",options:["a","b"],disable:e.podeAlterarOperador,onFilter:C.btSelecionarOperador_click,class:"col-12 col-sm-4"},{append:(0,t.withCtx)((()=>[""!==w.descricaoOperador?((0,t.openBlock)(),(0,t.createBlock)(D,{key:0,name:"close",onClick:(0,t.withModifiers)(C.operadorLimpar,["stop"]),class:"cursor-pointer"},null,8,["onClick"])):(0,t.createCommentVNode)("",!0),(0,t.createVNode)(D,{name:"search",onClick:(0,t.withModifiers)(C.btSelecionarOperador_click,["stop"]),class:"cursor-pointer"},null,8,["onClick"])])),_:1},8,["modelValue","disable","onFilter"])])])),_:1}),(0,t.createVNode)(Q,{class:"items-center q-col-gutter-md"},{default:(0,t.withCtx)((()=>[(0,t.createElementVNode)("div",m,[(0,t.createVNode)(F,{modelValue:w.apontamento.quantidade,"onUpdate:modelValue":a[8]||(a[8]=e=>w.apontamento.quantidade=e),tipo:"quantidade",onBlur:C.calcularPeso,rotulo:"Quantidade produzida"},null,8,["modelValue","onBlur"])]),(0,t.createElementVNode)("div",u,[(0,t.createVNode)(F,{modelValue:w.calcularPesoQtd,"onUpdate:modelValue":a[9]||(a[9]=e=>w.calcularPesoQtd=e),tipo:"logico",rotulo:"Calcular Quantidade X Peso"},null,8,["modelValue"])]),(0,t.createElementVNode)("div",p,[(0,t.createVNode)(F,{modelValue:w.apontamento.peso,"onUpdate:modelValue":a[10]||(a[10]=e=>w.apontamento.peso=e),tipo:"decimal",onBlur:C.calcularQuantidade,rotulo:"Peso em quilos"},null,8,["modelValue","onBlur"])])])),_:1})])),_:1})])])),_:1})])),_:1}),(0,t.createVNode)(Z,{class:"bg-light"},{default:(0,t.withCtx)((()=>[(0,t.createVNode)(q,null,{default:(0,t.withCtx)((()=>[(0,t.createVNode)(g,null,{default:(0,t.withCtx)((()=>[h,V])),_:1}),(0,t.createVNode)(N,{class:"q-ml-sm no-shadow float-right",color:"primary",label:"Concluir",onClick:C.concluir,unelevated:""},null,8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","onKeyup"])}]]);x()(v,"components",{QDialog:C.Z,QLayout:N.Z,QHeader:g.Z,QToolbar:q.Z,QBtn:f.Z,QToolbarTitle:F.Z,QPageContainer:Q.Z,QPage:D.Z,QCard:b.Z,QSelect:I.Z,QIcon:k.Z,QFooter:E.Z})}}]);