(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["92134270"],{"49ff":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-layout",{staticClass:"FunilVendas q-px-md"},[o("barra-topo"),o("q-page-container",[o("q-page",[o("q-toolbar",{staticClass:"q-py-sm q-my-sm",attrs:{color:"none"}},[o("q-toolbar-title",[e._v("Funil de Vendas")]),o("q-btn",{staticClass:" no-shadow u-semClique",attrs:{icon:"mdi-filter",round:"",color:"primary",inverted:""},on:{click:function(t){e.showfilters=!e.showfilters}}})],1),o("q-layout-drawer",{staticStyle:{"z-index":"20"},attrs:{overlay:"",side:"right"},model:{value:e.showfilters,callback:function(t){e.showfilters=t},expression:"showfilters"}},[o("q-toolbar",{attrs:{color:"white","text-color":"faded"}},[o("q-icon",{attrs:{name:"mdi-filter",color:"faded"}}),o("q-toolbar-title",[e._v(" Filtrar")]),o("q-btn",{attrs:{dense:"",flat:"",icon:"close",round:""},on:{click:function(t){e.showfilters=!e.showfilters}}})],1),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 row q-px-md q-mt-lg"},[o("q-chips-input",{staticClass:"col-12",attrs:{color:"faded",placeholder:"Filtre por Produto, Marca, Número..."},model:{value:e.filtro.grupos,callback:function(t){e.$set(e.filtro,"grupos",t)},expression:"filtro.grupos"}}),o("q-select",{staticClass:"q-my-sm col-12",attrs:{options:e.empresas.map(function(e){return{label:e.nome,value:e.id}}),clearable:"",placeholder:"Por empresa"},on:{input:e.aoSelecionarEmpresa},model:{value:e.empresa.id,callback:function(t){e.$set(e.empresa,"id",t)},expression:"empresa.id"}}),o("campo",{staticClass:"col-12",attrs:{rotulo:"Cliente",tipo:"texto",before:[{icon:"search"}]},on:{input:e.aoSelecionarCliente},nativeOn:{click:function(t){e.contatosModal=!0}},model:{value:e.filtro.cliente.nome,callback:function(t){e.$set(e.filtro.cliente,"nome",t)},expression:"filtro.cliente.nome"}}),o("campo",{staticClass:"col-12",attrs:{rotulo:"Vendedor",tipo:"texto",before:[{icon:"search"}]},on:{input:e.aoSelecionarVendedor},nativeOn:{click:function(t){e.vendedorModal=!0}},model:{value:e.filtro.vendedor.nome,callback:function(t){e.$set(e.filtro.vendedor,"nome",t)},expression:"filtro.vendedor.nome"}}),o("campo",{staticClass:"col-12",attrs:{rotulo:"Digitador",tipo:"texto",before:[{icon:"search"}]},on:{input:e.aoSelecionarDigitador},nativeOn:{click:function(t){e.digitadorModal=!0}},model:{value:e.filtro.digitador.nome,callback:function(t){e.$set(e.filtro.digitador,"nome",t)},expression:"filtro.digitador.nome"}}),o("div",{staticClass:"col-12 row q-mt-sm"},[o("span",{staticClass:"col-12 q-body-2 text-dark"},[e._v("Período de Emissão")]),o("div",{staticClass:"col-6 "},[o("campo",{staticClass:"no-shadow full-width",attrs:{tipo:"data",rotulo:"De",after:[{icon:"mdi-close-circle",handler:function(){e.filtro.periodo.emissao.ini=""}}]},model:{value:e.filtro.periodo.emissao.ini,callback:function(t){e.$set(e.filtro.periodo.emissao,"ini",t)},expression:"filtro.periodo.emissao.ini"}})],1),o("div",{staticClass:"col-6 "},[o("campo",{staticClass:"no-shadow full-width",attrs:{tipo:"data",rotulo:"até",after:[{icon:"mdi-close-circle",handler:function(){e.filtro.periodo.emissao.fim=""}}]},model:{value:e.filtro.periodo.emissao.fim,callback:function(t){e.$set(e.filtro.periodo.emissao,"fim",t)},expression:"filtro.periodo.emissao.fim"}})],1)]),o("div",{staticClass:"col-12 row q-mt-sm"},[o("span",{staticClass:"col-12 q-body-2 text-dark"},[e._v("Período de Finalização")]),o("div",{staticClass:"col-6"},[o("campo",{staticClass:"no-shadow full-width",attrs:{tipo:"data",rotulo:"De",after:[{icon:"mdi-close-circle",handler:function(){e.filtro.periodo.finalizado.ini=""}}]},model:{value:e.filtro.periodo.finalizado.ini,callback:function(t){e.$set(e.filtro.periodo.finalizado,"ini",t)},expression:"filtro.periodo.finalizado.ini"}})],1),o("div",{staticClass:"col-6 "},[o("campo",{staticClass:"no-shadow full-width",attrs:{tipo:"data",rotulo:"até",after:[{icon:"mdi-close-circle",handler:function(){e.filtro.periodo.finalizado.fim=""}}]},model:{value:e.filtro.periodo.finalizado.fim,callback:function(t){e.$set(e.filtro.periodo.finalizado,"fim",t)},expression:"filtro.periodo.finalizado.fim"}})],1)]),o("campo",{attrs:{opcoes:{max:30,min:1},rotulo:"Quantidade por página",tipo:"quantidade"},model:{value:e.pageSize,callback:function(t){e.pageSize=t},expression:"pageSize"}}),o("q-btn",{staticClass:"col-12 ",attrs:{color:"primary",label:"Aplicar"},on:{click:e.filtrar}})],1)])],1),e._l(e.documentos,function(e){return o("div",{key:e.id},[o("venda-card",{staticClass:"q-mb-md",attrs:{id:e.id}})],1)}),o("prompt-contato-novo",{attrs:{filtro:{ativo:!0}},on:{selecionar:e.aoSelecionarCliente},model:{value:e.contatosModal,callback:function(t){e.contatosModal=t},expression:"contatosModal"}}),o("prompt-contato-novo",{attrs:{filtro:{ativo:!0,vendedores:!0}},on:{selecionar:e.aoSelecionarVendedor},model:{value:e.vendedorModal,callback:function(t){e.vendedorModal=t},expression:"vendedorModal"}}),o("prompt-contato-novo",{attrs:{filtro:{ativo:!0}},on:{selecionar:e.aoSelecionarDigitador},model:{value:e.digitadorModal,callback:function(t){e.digitadorModal=t},expression:"digitadorModal"}})],2)],1)],1)},r=[];i._withStripped=!0;o("c5f6"),o("28a5"),o("2fdb"),o("6762");var a=o("448a"),n=o.n(a),s=(o("4917"),o("3b2b"),o("ac4d"),o("8a81"),o("ac6a"),o("96cf"),o("c973")),l=o.n(s),c=o("01f0"),d=o("1fe0c"),u=o("ed08"),f=o("8149"),m=o("2ef0"),p=o("41ff"),v={components:{BarraTopo:c["a"],VendaCard:d["a"],PromptContatoNovo:p["a"]},data:function(){return{page:{digitacao:{current:1,min:0,max:0},finalizado:{current:1,min:0,max:0},ativa:"Digitação"},pageSize:10,grupos:[],buscaCampo:"",empresas:[],empresa:{},contatosModal:!1,vendedorModal:!1,digitadorModal:!1,filtro:{grupos:[],empresa:{id:""},cliente:{id:""},vendedor:{id:""},digitador:{id:""},periodo:{emissao:{ini:"",fim:""},finalizado:{ini:"",fim:""}}},dbContato:f["a"].contato,documentos:null,showfilters:!0,itens:[],documentoItens:[]}},methods:{atualizar:function(){var e=l()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.filtrar();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),filtrar:function(){var e=l()(regeneratorRuntime.mark(function e(){var t,o,i,r,a,s,l,c,d,p,v,h,g,b,x,w,y,k,C,S,z,q,I,F,V,D,M,O,j,E,R,$,_,N,H,B,A,P;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].venda.leNew({periodoEmissao:{ini:this.filtro.periodo.emissao.ini,fim:this.filtro.periodo.emissao.fim},periodoFinalizado:{ini:this.filtro.periodo.finalizado.ini,fim:this.filtro.periodo.finalizado.fim},idEmpresa:this.filtro.empresa.id,idContato:this.filtro.cliente.id,idContatoVendedor:this.filtro.vendedor.id,idContatoDigitador:this.filtro.digitador.id});case 2:t=e.sent,this.documentos=t,o=[],i=!0,r=!1,a=void 0,e.prev=8,s=t[Symbol.iterator]();case 10:if(i=(l=s.next()).done){e.next=19;break}return c=l.value,e.next=14,f["a"].documentoItem.leNew({idDocumento:c.id});case 14:d=e.sent,o=n()(o).concat(n()(d.filter(function(e){return e.idItem})));case 16:i=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e["catch"](8),r=!0,a=e.t0;case 25:e.prev=25,e.prev=26,i||null==s.return||s.return();case 28:if(e.prev=28,!r){e.next=31;break}throw a;case 31:return e.finish(28);case 32:return e.finish(25);case 33:p=[],v={},h=regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=o[g],!t.idItem||p.filter(function(e){return e.id===t.idItem}).length){e.next=6;break}return e.next=4,f["a"].item.leNew({id:t.idItem});case 4:i=e.sent,p.push(i);case 6:case"end":return e.stop()}},e)}),g=0;case 37:if(!(g<o.length)){e.next=42;break}return e.delegateYield(h(),"t1",39);case 39:g++,e.next=37;break;case 42:if(this.filtro.grupos.length){e.next=50;break}for(t=Object(m["orderBy"])(t,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"]),this.documentos=t.reduce(function(e,t){return e[t.id]||(e[t.id]=t),e},{}),b=function(){var e=o[x];if(!v[e.idItem]){var t=p.filter(function(t){return t.id===e.idItem});t.length&&(v[e.idItem]=t[0])}},x=0;x<o.length;x++)b();return this.itens=v,this.documentosItens=Object(m["orderBy"])(o,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"]),e.abrupt("return");case 50:for(w=Object(u["clonarV2"])(this.filtro.grupos).map(function(e){return Object(u["removerAcentos"])(e)}),y=t.filter(function(e){if(!e.numero)return!1;var t=String(e.numero),o=!0,i=!1,r=void 0;try{for(var a,n=w[Symbol.iterator]();!(o=(a=n.next()).done);o=!0){var s=a.value,l=new RegExp(s,"gi");if(t.match(l))return!0}}catch(e){i=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw r}}}),k=[],C=o.filter(function(e){if(!e.idItem&&!e.descricaoItem)return!1;var t=Object(u["removerAcentos"])(e.descricaoItem),o=!0,i=!1,r=void 0;try{for(var a,n=w[Symbol.iterator]();!(o=(a=n.next()).done);o=!0){var s=a.value,l=new RegExp(s,"gi");if(t.match(l))return k.push(e.id),!0}}catch(e){i=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw r}}}),v=p.filter(function(e){var t=e.marca||"",o=e.referencia||"",i=e.codigoItem?String(e.codigoItem):"",r=e.codigoBarras||"",a=Object(u["removerAcentos"])(t+o+i+r),n=!0,s=!1,l=void 0;try{for(var c,d=w[Symbol.iterator]();!(n=(c=d.next()).done);n=!0){var f=c.value,m=new RegExp(f,"gi");if(a.match(m))return!0}}catch(e){s=!0,l=e}finally{try{n||null==d.return||d.return()}finally{if(s)throw l}}}),S=!0,z=!1,q=void 0,e.prev=58,I=function(){var e=V.value,t=o.filter(function(t){if(t.idItem&&t.idDocumento===e.id&&!k.includes(t.id))return k.push(t.id),!0});C=n()(C).concat(n()(t))},F=y[Symbol.iterator]();!(S=(V=F.next()).done);S=!0)I();e.next=67;break;case 63:e.prev=63,e.t2=e["catch"](58),z=!0,q=e.t2;case 67:e.prev=67,e.prev=68,S||null==F.return||F.return();case 70:if(e.prev=70,!z){e.next=73;break}throw q;case 73:return e.finish(70);case 74:return e.finish(67);case 75:for(D=!0,M=!1,O=void 0,e.prev=78,j=function(){var e=R.value,t=o.filter(function(t){if(t.idItem===e.id&&!k.includes(t.id))return k.push(t.id),!0});C=n()(C).concat(n()(t))},E=v[Symbol.iterator]();!(D=(R=E.next()).done);D=!0)j();e.next=87;break;case 83:e.prev=83,e.t3=e["catch"](78),M=!0,O=e.t3;case 87:e.prev=87,e.prev=88,D||null==E.return||E.return();case 90:if(e.prev=90,!M){e.next=93;break}throw O;case 93:return e.finish(90);case 94:return e.finish(87);case 95:for(C=C.filter(function(e){var o=Object(u["clonarV2"])(w),i=t.filter(function(t){return t.id===e.idDocumento}),r=p.filter(function(t){return t.id===e.idItem});i=i.length?i[0]:{},r=r.length?r[0]:{};var a=i.numero?String(i.numero):"";if(a+=e.descricaoItem||"",a+=r.marca||"",a+=r.referencia||"",a+=r.codigoItem?String(r.codigoItem):"",a+=r.codigoBarras||"",a){var n=!0,s=!1,l=void 0;try{for(var c,d=function(){var e=c.value,t=new RegExp(e,"gi");a.match(t)&&(o=o.filter(function(t){return t!==e}))},f=w[Symbol.iterator]();!(n=(c=f.next()).done);n=!0)d()}catch(e){s=!0,l=e}finally{try{n||null==f.return||f.return()}finally{if(s)throw l}}}if(!o.length)return!0}),$=[],y=[],v={},_=!0,N=!1,H=void 0,e.prev=102,B=function(){var e=P.value;if($.includes(e.idDocumento)||($.push(e.idDocumento),y=n()(y).concat(n()(t.filter(function(t){return t.id===e.idDocumento})))),!v[e.idItem]){var o=p.filter(function(t){return t.id===e.idItem});o.length&&(v[e.idItem]=o[0])}},A=C[Symbol.iterator]();!(_=(P=A.next()).done);_=!0)B();e.next=111;break;case 107:e.prev=107,e.t4=e["catch"](102),N=!0,H=e.t4;case 111:e.prev=111,e.prev=112,_||null==A.return||A.return();case 114:if(e.prev=114,!N){e.next=117;break}throw H;case 117:return e.finish(114);case 118:return e.finish(111);case 119:t=Object(m["orderBy"])(y,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"]),this.documentos=y.reduce(function(e,t){return e[t.id]||(e[t.id]=t),e},{}),this.itens=v,this.documentosItens=Object(m["orderBy"])(C,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"]);case 123:case"end":return e.stop()}},e,this,[[8,21,25,33],[26,,28,32],[58,63,67,75],[68,,70,74],[78,83,87,95],[88,,90,94],[102,107,111,119],[112,,114,118]])}));return function(){return e.apply(this,arguments)}}(),aoSelecionarEmpresa:function(){var e=this;this.filtro.empresa=this.empresas.filter(function(t){return t.id===e.empresa.id})[0]},aoSelecionarCliente:function(e,t){this.filtro.cliente=Object(u["clonarV2"])(t),this.contatosModal=!1},aoSelecionarVendedor:function(e,t){this.filtro.vendedor=Object(u["clonarV2"])(t),this.vendedorModal=!1},aoSelecionarDigitador:function(e,t){this.filtro.digitador=Object(u["clonarV2"])(t),this.digitadorModal=!1},abrirEdicao:function(){var e=l()(regeneratorRuntime.mark(function e(t){var o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,f["a"].venda.leCompleto({codigoDocumento:t.codigoDocumento});case 3:o=e.sent,console.log({leCompleto:o});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),filtraDebounce:function(){Object(m["debounce"])(this.refazFiltro,700)()},refazFiltro:function(){u["gconsole"].log("FunilVendas","refazFiltro()",this.fraseFiltro,this.empresaSelecionada);var e=Object(u["removerAcentos"])((this.fraseFiltro||"").toUpperCase()).split(" ").filter(function(e){return""!==e}),t={};for(var o in this.listas){var i=!0,r=!1,a=void 0;try{for(var n,s=this.listas[o][Symbol.iterator]();!(i=(n=s.next()).done);i=!0){var l=n.value,c=Object(u["removerAcentos"])((l.id||"").toUpperCase()+(l.nomeCliente||"").toUpperCase()+(l.nomeDigitador||"").toUpperCase()+(l.nomeVendedor||"").toUpperCase()+" "+String(l.numeroVenda||"")+" "),d=!0,f=!0,m=!1,p=void 0;try{for(var v,h=e[Symbol.iterator]();!(f=(v=h.next()).done);f=!0){var g=v.value;d=isNaN(Number(g))?d&&c.includes(g):d&&c.includes(" "+g+" ")}}catch(e){m=!0,p=e}finally{try{f||null==h.return||h.return()}finally{if(m)throw p}}this.empresaSelecionada&&(d=d&&this.empresaSelecionada===l.codigoEmpresa),l.mostra=d,l.mostra&&(t[l.crmFunilStatus]=(t[l.crmFunilStatus]||0)+(l.totalDocumento||0))}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}this.total=t},atualiza:function(){var e=l()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].venda.leNew();case 2:return this.documentos=e.sent,e.next=5,f["a"].empresa.le();case 5:this.empresas=e.sent,console.log(this.documentos);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},watch:{entregueInicio:function(){u["gconsole"].log("FunilVendas","entregueInicio"),this.atualiza()},entregueFim:function(){u["gconsole"].log("FunilVendas","entregueFim"),this.atualiza()}},created:function(){u["gconsole"].log("FunilVendas","created()"),this.atualiza()}},h=v,g=(o("aa23"),o("2877")),b=Object(g["a"])(h,i,r,!1,null,"ca82bc86",null);b.options.__file="VendasLista.vue";t["default"]=b.exports},"4a93":function(e,t,o){},aa23:function(e,t,o){"use strict";var i=o("4a93"),r=o.n(i);r.a}}]);