(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["e577f5b8"],{"063d":function(a,t,e){"use strict";var r=e("d656"),o=e.n(r);o.a},2808:function(a,t,e){},"504c":function(a,t,e){var r=e("9e1e"),o=e("0d58"),n=e("6821"),s=e("52a7").f;a.exports=function(a){return function(t){var e,i=n(t),c=o(i),l=c.length,d=0,p=[];while(l>d)e=c[d++],r&&!s.call(i,e)||p.push(a?[e,i[e]]:i[e]);return p}}},8615:function(a,t,e){var r=e("5ca1"),o=e("504c")(!1);r(r.S,"Object",{values:function(a){return o(a)}})},"895f":function(a,t,e){"use strict";var r=e("0b3d");t["a"]={name:"QSpinnerGears",mixins:[r["a"]],render:function(a){return a("svg",{staticClass:"q-spinner",class:this.classes,attrs:{width:this.size,height:this.size,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"}},[a("g",{attrs:{transform:"translate(-20,-20)"}},[a("path",{attrs:{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"}},[a("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"}})])]),a("g",{attrs:{transform:"translate(20,20) rotate(15 50 50)"}},[a("path",{attrs:{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"}},[a("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"}})])])])}}},abdf:function(a,t,e){"use strict";e.r(t);var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("div",{staticClass:"text-left q-mt-lg"},[e("div",{attrs:{row:""}},[e("q-btn",{staticClass:"q-ma-sm no-shadow",attrs:{color:"primary",icon:"control_point",label:"Gerar SPED fiscal"},on:{click:a.abrirModalSped}})],1)]),e("q-card",{staticClass:"bg-white no-shadow"},[e("q-table",{attrs:{title:"Histórico de arquivos Sped",data:a.tabelaSped,columns:a.colunasSped,"row-key":"id"},scopedSlots:a._u([{key:"body",fn:function(t){return e("q-tr",{attrs:{props:t}},[e("q-td",{key:"dataHoraSolicitacao",attrs:{props:t}},["Arquivo gerado"===t.row.situacao?e("q-btn",{staticClass:"no-shadow",attrs:{color:"faded",size:"md",icon:"cloud_download",round:"",flat:""},on:{click:function(e){a.downloadSped(t.row.id)}}},[e("q-tooltip",[a._v("Download")])],1):e("q-btn",{staticClass:"no-shadow",attrs:{color:"faded",size:"md",icon:"refresh",round:"",flat:""},on:{click:a.atualizar}},[e("q-tooltip",[a._v("Atualizar")])],1),a._v("\n          "+a._s(a._f("dataHora")(t.row.dataHoraSolicitacao))+"\n        ")],1),e("q-td",{key:"situacao",attrs:{props:t}},[a._v(a._s(t.row.situacao))]),e("q-td",{key:"cnpj",attrs:{props:t}},[a._v(a._s(t.row.cnpj))]),e("q-td",{key:"dataInicio",attrs:{props:t}},[a._v(a._s(a._f("data")(t.row.dataInicio)))]),e("q-td",{key:"dataFim",attrs:{props:t}},[a._v(a._s(a._f("data")(t.row.dataFim)))]),e("q-td",{key:"dataInventario",attrs:{props:t}},[a._v(a._s(a._f("data")(t.row.dataInventario)))])],1)}}])})],1),e("sped",{ref:"modalSped"})],1)},o=[];r._withStripped=!0;e("96cf");var n=e("c973"),s=e.n(n),i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("q-modal",{attrs:{"content-css":{width:"100vw",maxWidth:"768px"}},model:{value:a.modalSped,callback:function(t){a.modalSped=t},expression:"modalSped"}},[e("q-modal-layout",[e("q-toolbar",{attrs:{slot:"header"},slot:"header"},[e("q-toolbar-title",[a._v("SPED")])],1),e("form",{on:{submit:function(t){return t.preventDefault(),a.gerarSped(t)}}},[e("div",{staticClass:"layout-padding"},[e("div",{staticClass:"row gutter-x-sm"},[e("div",{staticClass:"col-12 q-mt-xm text-h2 text-weight-bold"},[a._v("Dados para geração do SPED fiscal")]),e("campo",{staticClass:"col-12",attrs:{value:a.descricaoEmpresa,before:[{icon:"search",handler:a.abrirmodalSpedEmpresas}],rotulo:"Empresa",erro:!!a.spedErros.empresa,"erro-rotulo":a.spedErros.empresa,"somente-leitura":""}}),e("campo",{staticClass:"col-12 col-md-6",attrs:{rotulo:"Data início",erro:!!a.spedErros.dataInicio,"erro-rotulo":a.spedErros.dataInicio,tipo:"data"},model:{value:a.sped.dataInicio,callback:function(t){a.$set(a.sped,"dataInicio",t)},expression:"sped.dataInicio"}}),e("campo",{staticClass:"col-12 col-md-6",attrs:{rotulo:"Data final",erro:!!a.spedErros.dataFim,"erro-rotulo":a.spedErros.dataFim,tipo:"data"},model:{value:a.sped.dataFim,callback:function(t){a.$set(a.sped,"dataFim",t)},expression:"sped.dataFim"}}),e("campo",{staticClass:"col-12 col-md-6",attrs:{rotulo:"Data inventário",erro:!!a.spedErros.dataInventario,"erro-rotulo":a.spedErros.dataInventario,tipo:"data"},model:{value:a.sped.dataInventario,callback:function(t){a.$set(a.sped,"dataInventario",t)},expression:"sped.dataInventario"}})],1)]),e("q-toolbar",{attrs:{slot:"footer",color:"light"},slot:"footer"},[e("q-toolbar-title",[e("div",{staticClass:"row justify-end"},[e("q-btn",{directives:[{name:"close-overlay",rawName:"v-close-overlay"}],attrs:{flat:"",color:"primary",label:"Cancelar"}}),e("q-btn",{attrs:{flat:"",color:"primary",type:"submit",label:"Gerar"}})],1)])],1)],1)],1)],1),e("prompt-contato-novo",{attrs:{filtro:{ativo:!0,empresas:!0}},on:{selecionar:a.selecionarEmpresa},model:{value:a.modalSpedEmpresas,callback:function(t){a.modalSpedEmpresas=t},expression:"modalSpedEmpresas"}})],1)},c=[];i._withStripped=!0;e("ac6a"),e("cadf"),e("8615");var l=e("88db"),d=e("41ff"),p=e("a9a0"),u=e("895f"),m=e("8149"),f=e("ed08"),v={components:{Campo:l["a"],PromptContatoNovo:d["a"]},data:function(){return{descricaoEmpresa:"",modalSped:!1,modalSpedEmpresas:!1,sped:{},spedErros:{empresa:"",dataInicio:"",dataFim:"",dataInventario:""}}},methods:{abrirModalSped:function(){f["gconsole"].log("Sped","abrirModalSped"),this.modalSped=!0,this.sped={},this.spedErros={empresa:"",dataInicio:"",dataFim:"",dataInventario:""},this.descricaoEmpresa=""},abrirmodalSpedEmpresas:function(){this.modalSpedEmpresas=!0},validarSped:function(){return this.spedErros={empresa:this.sped.empresa?"":"Preenchimento obrigatório",dataInicio:this.sped.dataInicio?"":"Preenchimento obrigatório",dataFim:this.sped.dataFim?"":"Preenchimento obrigatório",dataInventario:this.sped.dataInventario?"":"Preenchimento obrigatório"},Object.values(this.spedErros).reduce(function(a,t){return a&&!t},!0)},gerarSped:function(){var a=s()(regeneratorRuntime.mark(function a(){var t;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,f["gconsole"].log("Sped","gerarSped",this.sped),this.validarSped()){a.next=4;break}return a.abrupt("return");case 4:return p["a"].show({spinner:u["a"],spinnerColor:"amber",message:"Gerando arquivo de SPED"}),a.next=7,Object(f["executarApi"])("sped",this.sped);case 7:return t=a.sent,Object(f["verificarErro"])(!t.sucesso,t.mensagem||"Erro na geração do sped"),f["gconsole"].log("Sped","gerarSped: ".concat(t.mensagem,"\n arquivo: ").concat(t.nomeArquivo)),a.next=12,Object(f["dormir"])(2e3);case 12:this.$q.notifyPositive(t.mensagem),this.modalSped=!1,this.$parent.atualizar(),a.next=20;break;case 17:a.prev=17,a.t0=a["catch"](0),this.$q.notifyError("Erro na geração do sped",a.t0);case 20:return a.prev=20,p["a"].hide(),a.finish(20);case 23:case"end":return a.stop()}},a,this,[[0,17,20,23]])}));return function(){return a.apply(this,arguments)}}(),selecionarEmpresa:function(){var a=s()(regeneratorRuntime.mark(function a(t){var e;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,t){a.next=3;break}return a.abrupt("return");case 3:return a.next=5,m["a"].empresa.le({idContato:t});case 5:e=a.sent,Object(f["verificarErro"])(!e.length||!e[0].id,"Não foi possível recuperar os dados da empresa."),this.descricaoEmpresa=e[0].nome||"",this.sped.empresa=e[0].codigoEmpresa,this.sped.cnpj=e[0].numeroDocumentoNacional,a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](0),this.$q.notifyError("Erro ao selecionar a empresa.",a.t0);case 15:case"end":return a.stop()}},a,this,[[0,12]])}));return function(t){return a.apply(this,arguments)}}()}},h=v,b=(e("063d"),e("2877")),g=Object(b["a"])(h,i,c,!1,null,null,null);g.options.__file="Sped.vue";var S=g.exports,w={components:{Sped:S},computed:{colunasSped:function(){return[{align:"left",name:"dataHoraSolicitacao",field:"dataHoraSolicitacao",label:"Data Solicitação",sortable:!0,format:this.$filters.dataHora},{align:"left",name:"situacao",field:"situacao",label:"Situacao",sortable:!0},{align:"center",name:"cnpj",field:"cnpj",label:"Empresa",sortable:!0},{align:"left",name:"dataInicio",field:"dataInicio",label:"Data Início",sortable:!0,format:this.$filters.data},{align:"left",name:"dataFim",field:"dataFim",label:"Data Fim",sortable:!0,format:this.$filters.data},{align:"left",name:"dataInventario",field:"dataInventario",label:"Data Inventário",sortable:!0,format:this.$filters.data}]}},data:function(){return{tabelaSped:[]}},methods:{abrirModalSped:function(){this.$refs.modalSped.abrirModalSped()},atualizar:function(){var a=s()(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return f["gconsole"].log("ConfiguracoesSped","atualizar()"),a.prev=1,a.next=4,m["a"].spedArquivo.leOnline();case 4:this.tabelaSped=a.sent,a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](1),this.$q.notifyError("Erro na consulta dos arquivos Sped",a.t0);case 10:case"end":return a.stop()}},a,this,[[1,7]])}));return function(){return a.apply(this,arguments)}}(),downloadSped:function(){var a=s()(regeneratorRuntime.mark(function a(t){var e,r;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return e=function(a,t){var e=document.createElement("a");e.setAttribute("href","data:attachment/text;charset=utf-8,"+encodeURIComponent(t)),e.setAttribute("download",a),e.click()},f["gconsole"].log("ConfiguracoesSped","downloadSped",t),a.prev=2,a.next=5,m["a"].spedArquivo.baixaConteudoOnline(t);case 5:r=a.sent,f["gconsole"].log("ConfiguracoesSped","downloadSped\n arquivo: ".concat(r[0].nome,"\n tamanho: ").concat(r[0].arquivo.length," kb")),Object(f["verificarErro"])(!r||!r.length||!r[0].nome||!r[0].arquivo,"Arquivo Sped não encontrado"),e(r[0].nome,r[0].arquivo),a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](2),this.$q.notifyError("Erro na consulta do arquivo Sped",a.t0);case 14:case"end":return a.stop()}},a,this,[[2,11]])}));return function(t){return a.apply(this,arguments)}}()},created:function(){f["gconsole"].log("ConfiguracoesSped","created()"),this.atualizar()}},E=w,q=(e("e559"),Object(b["a"])(E,r,o,!1,null,null,null));q.options.__file="ConfiguracoesSped.vue";t["default"]=q.exports},d656:function(a,t,e){},e559:function(a,t,e){"use strict";var r=e("2808"),o=e.n(r);o.a}}]);