(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["a21593d0"],{"0e70":function(e,o,a){"use strict";a("28a5"),a("3b2b"),a("6762"),a("2fdb"),a("6b54"),a("f559");var t=a("7330"),r=a("ee34"),n=a("b5ae"),i={executa:function(e){var o={};for(var a in e)o[a]=i.geraTags(e[a],a);return o},geraTags:function(e,o){var a={},t=!1;for(var r in e)r.startsWith("_")||(r.startsWith("lista")?a["$each"]=i.geraTags(e[r],o+"."+r):"visivel"===r||"valor_escolha"===r||(a[r]=i.geraTags(e[r],o+"."+r)),t=!0);return t||(a={c:i.consiste(o)}),a},formataNumero:function(e,o){var a=e;if("number"===typeof e){var t=e.toFixed(o),r=e.toString();a=t.length>r.length?t:r}return a},mensagemPorTipo:function(e,o,a,t,n,i,c){var s="";return s="cEAN"===o||"cEANTrib"===o?"Deve conter 8, 12, 13 ou 14 digitos ou o texto SEM GTIN":"TCnpj"===a?"Deve conter 14 digitos":"TCnpjOpc"===a?"Deve conter 14 digitos ou em branco":"TCpf"===a?"Deve conter 11 digitos":"TIeDestNaoIsento"===a?"Deve conter de 2 a 14 digitos":"TIeDest"===a||"TIe"===a?"Deve conter de 2 a 14 digitos ou o texto ISENTO":"TSerie"===a?"Deve conter de 1 a 3 digitos":"TDec_0302a04Max100"===a?"Deve ser um número de 0 a 100 com até 4 decimais":a.startsWith("TDec_0302a04")?"Deve ser um número de 0 a 999 com até 4 decimais":r["a"].tiposNumero.includes(t)?i||0!==e?i&&0===e?"":0===n?"Número inválido":"Deve ser um valor com até "+n+" casas decimais":"Campo obrigatório":"Conteúdo inválido",s},consisteCampo:function(e,o,a){var t="string"===typeof e?e.length:null!=e?e.toString().length:0,n=o._minLength||0,c=o._maxLength||0,s=o._opcional||!1,l=o._pattern||null,u=o._type||"",m=o._tipo||"",p=parseInt(o._decimals||"0"),d="",v=!1;if(l){var C=e;r["a"].tiposNumero.includes(m)&&(C=i.formataNumero(e,p)),"data"===m?C=r["a"].formatarDataNFeSemHoras(e):"dataHora"===m&&(C=r["a"].formatarDataNFe(e));var f=new RegExp("^("+l+")$");v=f.test(C)}return d=s&&0===t?"":s||0!==t||v?t<n?"Tamanho mínimo de "+n+" caracteres":0!==c&&t>c?"Tamanho máximo de "+c+" caracteres":null===l||""===l||v?"":i.mensagemPorTipo(e,a,u,m,p,s,l):"Campo obrigatório",d},consiste:function(e){return n["helpers"].withParams({type:"contains",value:e},function(o){var a,r,n=e.split("."),c=this,s=t["a"];for(var l in n)a=n[l],l===n.length-1?r=a+"_erro":c="lista"===a?c[0]:c[a],s=s[a];var u=i.consisteCampo(o,s,a);return c[a]===o&&(c[r]=u),""===u})}};o["a"]=i},"1b38":function(e,o,a){"use strict";var t=a("448a"),r=a.n(t),n=(a("6762"),a("2fdb"),a("96cf"),a("c973")),i=a.n(n),c=a("ee34"),s=a("8149"),l=a("3e8a"),u=a("ed08");function m(){return m=i()(regeneratorRuntime.mark(function e(o){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return u["gconsole"].log("gerarJsonBaseD","obterFatura"),e.next=3,Object(l["a"])().documento.get(o.idDocumento);case 3:return o.documentoFatura=e.sent,Object(u["verificarErro"])(!o.documentoFatura,"Não foi possível carregar a fatura/venda"),Object(u["verificarErro"])(!["Fatura","Venda"].includes(o.documentoFatura.tipo),"Fatura/venda não encontrada"),e.next=8,Object(l["a"])().documento.where("idDocumentoAdicional").equals(o.idDocumento).toArray();case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0=[];case 11:return o.documentosAdicionais=e.t0,e.next=14,Object(l["a"])().documento.where("idFatura").equals(o.idDocumento).toArray();case 14:if(e.t1=e.sent,e.t1){e.next=17;break}e.t1=[];case 17:if(o.documentosVendas=e.t1,o.idsDocumentos=[o.idDocumento].concat(r()(o.documentosAdicionais.map(function(e){return e.id})),r()(o.documentosVendas.map(function(e){return e.id}))),u["gconsole"].log("gerarJsonBaseD",{documentoFatura:o.documentoFatura,documentosAdicionais:o.documentosAdicionais,documentosVendas:o.documentosVendas}),o.totalDesconto=Object(u["arredondar"])((o.documentoFatura.totalDesconto||0)+Object(u["somar"])(o.documentosVendas,"totalDesconto")),o.totalFrete=Object(u["arredondar"])(Object(u["somar"])(o.documentosVendas,"valorFrete")),o.infNFe.ide.natOp=o.outrosNFe.operacao?o.outrosNFe.operacao:"4"===o.infNFe.ide.finNFe?"Devolução":"Venda","NFCe"!==this.tipo){e.next=38;break}return o.infNFe.infAdic.visivel=!0,e.t2=u["removerCaracteresEspeciais"],e.next=28,s["a"].configuracoes.leValorComFiltroEmpresa("cupom.mensagem",o.documentoFatura.idEmpresa,"Obrigado e Volte Sempre!");case 28:return e.t3=e.sent,o.infNFe.infAdic.infCpl=(0,e.t2)(e.t3),e.next=32,s["a"].configuracoes.leValorNumerico("nfce.offline");case 32:if(e.t4=e.sent,1!==e.t4){e.next=38;break}o.infNFe.ide.tpEmis="9",o.infNFe.ide.opcional.visivel=!0,o.infNFe.ide.opcional.dhCont=c["a"].formatarDataNFe(new Date),o.infNFe.ide.opcional.xJust="Internet indisponivel";case 38:o.outrosNFe.idDocumento=o.idDocumento;case 39:case"end":return e.stop()}},e,this)})),m.apply(this,arguments)}o["a"]=function(e){return m.apply(this,arguments)}},"39fb":function(e,o,a){"use strict";a("96cf");var t=a("c973"),r=a.n(t),n=a("8149"),i=a("ed08");function c(){return c=r()(regeneratorRuntime.mark(function e(o){var a,t,r,c,s,l,u,m,p,d,v,C,f;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=o.infNFe,t=o.det,r=o.descricaoProduto,c=o.item,s=o.documentoItem,l=o.cfop,u=o.empresa,m=o.destinatario,a.ide.idDest=a.emit.enderEmit.UF!==a.dest.enderDest.UF&&a.emit.enderEmit.UF&&a.dest.enderDest.UF&&"65"!==!a.ide.mod?"EX"===a.dest.enderDest.UF?"3":"2":"1",p=Object(i["filtrarDigitos"])((s||{}).ncm||""),p=8===p.length?p:Object(i["filtrarDigitos"])((c||{}).ncm||""),d={emitente:{regime:a.emit.CRT,uf:a.emit.enderEmit.UF,tributacaoSetor:u.tributacaoSetor,tributacao:u.tributacao},destinatario:{regime:"SimplesNacional"===m.regime?"1":"Normal"===m.regime?"3":void 0,uf:a.dest.enderDest.UF,pessoa:{CPF:"PF",CNPJ:"PJ",idEstrangeiro:"Estrangeiro"}[a.dest.escolhas.valor_escolha]||void 0,tributacaoSetor:m.tributacaoSetor,tributacao:m.tributacao,indicadorIE:a.dest.indIEDest,consumidor:"0"===a.ide.indFinal?"N":"1"===a.ide.indFinal?"S":void 0,destino:a.ide.idDest},ncm:p,cfop:String(l||""),cest:(s||{}).cest||c.cest,origemMercadoria:String(c.codigoOrigem||""),produto:c.descricao},e.next=7,n["a"].configuracaoImposto.pesquisa(d);case 7:v=e.sent,i["gconsole"].log("gerarJsonBaseD",{impostoConfiguracao:v}),Object(i["verificarErro"])(!v||!v.ordem||!v.saida,"".concat(r," sem configuração de imposto. Verifique a configuração do imposto para ").concat(JSON.stringify(d)||"",".")),C=t.prod,f=t.imposto,C.CFOP=v.entrada.cfop,f.noXml_orig=v.entrada.origemMercadoria,f.noXml_CST=f.noXml_CSOSN=v.saida.cstCsosn,f.noXml_pICMS=v.saida.pICMS||0,f.noXml_pRedBC=v.saida.pRedBC||0,f.noXml_pFCP=v.saida.pFCP||0,f.noXml_CSTPis=v.saida.pisCst,f.noXml_pPIS=v.saida.pPIS||0,f.noXml_CSTCofins=v.saida.cofinsCst,f.noXml_pCOFINS=v.saida.pCOFINS||0,v.entrada.cest&&(C.opcional.visivel=!0,C.opcional.CEST=Object(i["filtrarDigitos"])(v.entrada.cest)),v.saida.ipiVisivel&&(f.noXml_CSTIpi="1"===a.ide.tpNF?v.saida.ipiCstEntrada:v.saida.ipiCstSaida,f.noXml_pIPI=v.saida.pIPI||0,f.noXml_cEnqIpi=v.saida.ipiCEnq||0);case 24:case"end":return e.stop()}},e)})),c.apply(this,arguments)}o["a"]=function(e){return c.apply(this,arguments)}},"3b2b":function(e,o,a){var t=a("7726"),r=a("5dbc"),n=a("86cc").f,i=a("9093").f,c=a("aae3"),s=a("0bfb"),l=t.RegExp,u=l,m=l.prototype,p=/a/g,d=/a/g,v=new l(p)!==p;if(a("9e1e")&&(!v||a("79e5")(function(){return d[a("2b4c")("match")]=!1,l(p)!=p||l(d)==d||"/a/i"!=l(p,"i")}))){l=function(e,o){var a=this instanceof l,t=c(e),n=void 0===o;return!a&&t&&e.constructor===l&&n?e:r(v?new u(t&&!n?e.source:e,o):u((t=e instanceof l)?e.source:e,t&&n?s.call(e):o),a?this:m,l)};for(var C=function(e){e in l||n(l,e,{configurable:!0,get:function(){return u[e]},set:function(o){u[e]=o}})},f=i(u),h=0;f.length>h;)C(f[h++]);m.constructor=l,l.prototype=m,a("2aba")(t,"RegExp",l)}a("7a56")("RegExp")},"4c8e":function(e,o,a){"use strict";a("96cf");var t=a("c973"),r=a.n(t),n=a("8149");function i(){return i=r()(regeneratorRuntime.mark(function e(o,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=String,e.next=3,n["a"].configuracoes.leValorNumericoComFiltroEmpresa(this.serie,a,1);case 3:return e.t1=e.sent,o.ide.serie=(0,e.t0)(e.t1),e.t2=String,e.next=8,n["a"].documentoFiscalEletronico.proximoNumero(o.ide.tpAmb,"CPF"===o.emit.escolhas.valor_escolha?o.emit.escolhas.CPF:o.emit.escolhas.CNPJ,o.ide.mod,o.ide.serie,a);case 8:e.t3=e.sent,o.ide.nNF=(0,e.t2)(e.t3);case 10:case"end":return e.stop()}},e,this)})),i.apply(this,arguments)}o["a"]=function(e,o){return i.apply(this,arguments)}},"74a5":function(e,o,a){"use strict";a("c5f6"),a("f559"),a("f576"),a("6762"),a("2fdb"),a("ac4d"),a("8a81"),a("ac6a"),a("96cf");var t=a("c973"),r=a.n(t),n=a("f487"),i=a("7330"),c=a("8149"),s=a("3e8a"),l=a("ed08");function u(){return u=r()(regeneratorRuntime.mark(function e(o){var a,t,r,u,m,p,d,v,C,f,h,I,S,b,g=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return l["gconsole"].log("gerarJsonBaseD","obterItens"),e.next=3,Object(s["a"])().documentoItem.where("idDocumento").anyOf(o.idsDocumentos).sortBy("dataHoraEmissao");case 3:return a=e.sent,Object(l["verificarErro"])(!a,"Não foi possível carregar os produtos"),l["gconsole"].log("gerarJsonBaseD","documentosItens",a),e.next=8,c["a"].configuracoes.leValorNumericoComFiltroEmpresa(this.usadesconto,o.outrosNFe.idContatoEmitente,1);case 8:return t=e.sent,e.next=11,c["a"].configuracoes.leValorNumerico("imposto.versao");case 11:r=e.sent,u=[],m=!0,p=!1,d=void 0,e.prev=16,v=regeneratorRuntime.mark(function e(){var c,m,p,d,v,C,h,I,S,b,P,F,T,N,_,O;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(c=f.value,m=Object(l["arredondar"])(c.total||0),0!==Object(l["arredondar"])(m)&&c.idItem){e.next=4;break}return e.abrupt("return","continue");case 4:if(!["Serviço"].includes(c.tipoItem)){e.next=7;break}return o.totalServicos+=m,e.abrupt("return","continue");case 7:if("4"!==o.infNFe.ide.finNFe){e.next=13;break}if(m<0){e.next=11;break}return o.totalDevolucao+=m,e.abrupt("return","continue");case 11:e.next=16;break;case 13:if(!(m<0)){e.next=16;break}return o.totalDevolucao+=m,e.abrupt("return","continue");case 16:if(p=Object(l["arredondar"])(c.quantidade||1,4),d=Object(l["arredondar"])(c.valorItem||0,4),v=Object(l["arredondar"])(c.descontoItem||0,4),C=Object(l["arredondar"])((c.descontoTotalRateado||0)+(c.descontoFaturaRateado||0),4),l["gconsole"].log("gerarJsonBaseD",{quantidade:p,valorUnitarioItem:d,descontoUnitarioItem:v,descontoRateadoItem:C,valorUnitarioItemComDesconto:d-v-C/p,valorUnitarioItemComDescontoA:Object(l["arredondar"])(d-v-C/p,4),totalItem:m,tipoItem:c.tipoItem,idItem:c.idItem,descricaoItem:c.descricaoItem}),Object(l["verificarErro"])(m!==Object(l["arredondar"])(p*d-v*p),"Valor total do item '".concat(c.descricaoItem||"","' não corresponde ao valor unitário vezes a quantidade")),!["TLOE","TLOD"].includes(c.tipoItem)){e.next=24;break}return e.abrupt("return","continue");case 24:if(!["LOE","LOD"].includes(c.tipoItem)){e.next=46;break}for(h=a.filter(function(e){return["TLOE","TLOD"].includes(e.tipoItem)&&e.idDocumentoItemPai===c.id}),l["gconsole"].log("gerarJsonBaseD","tratamentos",h),I=!0,S=!1,b=void 0,e.prev=30,P=h[Symbol.iterator]();!(I=(F=P.next()).done);I=!0)T=F.value,v+=Object(l["arredondar"])(T.descontoItem||0,4),C+=Object(l["arredondar"])((T.descontoTotalRateado||0)+(T.descontoFaturaRateado||0),4),d=Object(l["arredondar"])(d+T.valorItem||0,4),m+=T.total||0;e.next=38;break;case 34:e.prev=34,e.t0=e["catch"](30),S=!0,b=e.t0;case 38:e.prev=38,e.prev=39,I||null==P.return||P.return();case 41:if(e.prev=41,!S){e.next=44;break}throw b;case 44:return e.finish(41);case 45:return e.finish(38);case 46:return N=Object(l["arredondar"])(v*p+C),0===t&&(d=Object(l["arredondar"])(d-v-C/p,4),N=0),o.totalProdutos+=m,o.documentoItem=c,e.next=52,Object(s["a"])().item.get(c.idItem);case 52:if(o.item=e.sent,Object(l["verificarErro"])(!o.item,"Não foi possível carregar o cadastro do produto"),o.det=n["a"].executa(i["a"].infNFe.det.lista,{},g.tipo),_=o.det.prod,O=String(o.item.codigoBarras||"").padStart(13,"0"),O.startsWith("999")&&(O="SEM GTIN"),_.cProd=String(o.item.referencia||o.item.codigoItem||"0").trim(),_.cEAN=O,_.xProd=Object(l["removerCaracteresEspeciais"])(c.descricaoItem).substr(0,120),_.NCM=String(o.item.ncm||""),_.uCom=String(o.item.unidade||"UN"),_.qCom=p||0,_.vUnCom=d||0,_.vDesc=N||0,"4"===o.infNFe.ide.finNFe&&(_.vUnCom=-_.vUnCom,_.vDesc=-_.vDesc),_.noXml_id=c.idItem,o.pesoItens=Object(l["arredondar"])((o.pesoItens||0)+Number(o.item.peso||0)*Number(p||1),3),2!==r){e.next=74;break}return e.next=72,g.obterConfiguracaoImpostoV2(o);case 72:e.next=76;break;case 74:return e.next=76,g.obterConfiguracaoImposto(o);case 76:u.push(o.det);case 77:case"end":return e.stop()}},e,null,[[30,34,38,46],[39,,41,45]])}),C=a[Symbol.iterator]();case 19:if(m=(f=C.next()).done){e.next=27;break}return e.delegateYield(v(),"t0",21);case 21:if(h=e.t0,"continue"!==h){e.next=24;break}return e.abrupt("continue",24);case 24:m=!0,e.next=19;break;case 27:e.next=33;break;case 29:e.prev=29,e.t1=e["catch"](16),p=!0,d=e.t1;case 33:e.prev=33,e.prev=34,m||null==C.return||C.return();case 36:if(e.prev=36,!p){e.next=39;break}throw d;case 39:return e.finish(36);case 40:return e.finish(33);case 41:if("4"!==o.infNFe.ide.finNFe){e.next=45;break}Object(l["verificarErro"])(0===u.length,"Não há produtos para devolução"),e.next=55;break;case 45:if(Object(l["verificarErro"])(0===u.length,"Não há produtos vendidos"),"Remessa"===o.outrosNFe.operacao){e.next=55;break}I=0;case 48:if(!(I<u.length)){e.next=55;break}return S=u[I],e.next=52,this.obterAliquotasTributosIbpt(o,S);case 52:I++,e.next=48;break;case 55:o.pesoItens>0&&"9"!==o.infNFe.transp.modFrete&&(b=n["a"].executa(i["a"].infNFe.transp.vol.lista,{},this.tipo),b.pesoL=o.pesoItens,b.pesoB=o.pesoItens,o.infNFe.transp.vol.push(b)),l["gconsole"].log("gerarJsonBaseD","itens",u),o.infNFe.det=u;case 58:case"end":return e.stop()}},e,this,[[16,29,33,41],[34,,36,40]])})),u.apply(this,arguments)}o["a"]=function(e){return u.apply(this,arguments)}},"895f":function(e,o,a){"use strict";var t=a("0b3d");o["a"]={name:"QSpinnerGears",mixins:[t["a"]],render:function(e){return e("svg",{staticClass:"q-spinner",class:this.classes,attrs:{width:this.size,height:this.size,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"}},[e("g",{attrs:{transform:"translate(-20,-20)"}},[e("path",{attrs:{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"}},[e("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"}})])]),e("g",{attrs:{transform:"translate(20,20) rotate(15 50 50)"}},[e("path",{attrs:{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"}},[e("animateTransform",{attrs:{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"}})])])])}}},b40e:function(e,o,a){"use strict";a("6762"),a("2fdb"),a("7514"),a("ac4d"),a("8a81"),a("ac6a"),a("96cf");var t=a("c973"),r=a.n(t),n=a("f487"),i=a("7330"),c=a("3e8a"),s=a("ed08");function l(){return l=r()(regeneratorRuntime.mark(function e(o){var a,t,r,l,u,m,p,d,v,C,f,h,I,S,b,g,P=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s["gconsole"].log("gerarJsonBaseD","obterFormasPagamento"),e.next=3,Object(c["a"])().documentoCondicaoPagamento.where({idDocumento:o.idDocumento}).toArray();case 3:if(o.documentosPagamento=e.sent,0!==o.documentosPagamento.length||"Venda"!==o.documentoFatura.tipo){e.next=14;break}return Object(s["verificarErro"])(!o.documentoFatura.idFatura,"A venda não tem pagamento e não pertence a uma fatura"),e.next=8,Object(c["a"])().documento.get(o.documentoFatura.idFatura);case 8:return a=e.sent,Object(s["verificarErro"])(!a,"Não foi possível carregar a fatura da venda"),e.next=12,Object(c["a"])().documentoCondicaoPagamento.where({idDocumento:a.id}).toArray();case 12:o.documentosPagamento=e.sent,o.vendaSemPagamento=!0;case 14:Object(s["verificarErro"])(!o.documentosPagamento.length&&!o.vendaSemPagamento,"Não há pagamentos"),s["gconsole"].log("gerarJsonBaseD","documentosPagamento",o.documentosPagamento),t=[],r=!0,l=!1,u=void 0,e.prev=20,m=regeneratorRuntime.mark(function e(){var a,r,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=d.value,e.next=3,P.obterMeioPagamento(o,a.idFormaPagamento);case 3:r=e.sent,c=t.find(function(e){return e.tPag===r&&e.card.cAut===a.autorizacao}),c?c.vPag=Object(s["arredondar"])(c.vPag+a.valor):(c=n["a"].executa(i["a"].infNFe.pag.detPag.lista,{},P.tipo),c.tPag=r,c.vPag=Object(s["arredondar"])(a.valor),["03","04"].includes(r)&&(c.card.visivel=!0,c.card.tpIntegra="2",c.card.cAut=a.autorizacao),t.push(c));case 6:case"end":return e.stop()}},e)}),p=o.documentosPagamento[Symbol.iterator]();case 23:if(r=(d=p.next()).done){e.next=28;break}return e.delegateYield(m(),"t0",25);case 25:r=!0,e.next=23;break;case 28:e.next=34;break;case 30:e.prev=30,e.t1=e["catch"](20),l=!0,u=e.t1;case 34:e.prev=34,e.prev=35,r||null==p.return||p.return();case 37:if(e.prev=37,!l){e.next=40;break}throw u;case 40:return e.finish(37);case 41:return e.finish(34);case 42:return Object(s["verificarErro"])(0===t.length&&!o.vendaSemPagamento,"Não há pagamentos"),o.totalProdutos=Object(s["arredondar"])(o.totalProdutos),e.next=46,Object(c["a"])().financeiroTitulo.where({idFatura:o.idDocumento}).toArray();case 46:if(v=e.sent,C=Object(s["arredondar"])(Object(s["somar"])(t,"vPag")),f=Object(s["arredondar"])(Object(s["somar"])(v,"valorTotal")+o.totalServicos),h=Object(s["arredondar"])(o.totalProdutos+o.totalFrete+o.totalDevolucao-o.totalDesconto),s["gconsole"].log("gerarJsonBaseD","\n    totalPagamentos: ".concat(C,"\n    totalProdutos: ").concat(o.totalProdutos,"\n    totalServicos: ").concat(o.totalServicos,"\n    totalFrete: ").concat(o.totalFrete,"\n    totalDesconto: ").concat(o.totalDesconto,"\n    totalDevolucao: ").concat(o.totalDevolucao,"\n    totalPagamentosCarnesServicos: ").concat(f,"\n    totalPagamentosNota: ").concat(h)),"Venda"!==o.documentoFatura.tipo&&Object(s["verificarErro"])(Math.abs(C-f-h)>.02,"O valor dos pagamentos difere do somatório (produtos, serviços, frete, carnês, (-)devoluções e (-)descontos"),C>0&&C!==h){for(I=0;I<t.length;I++)S=t[I],S.vPag=Object(s["arredondar"])(S.vPag*h/C);b=Object(s["arredondar"])(Object(s["somar"])(t,"vPag")),t[0].vPag+=h-b}g=Object(s["arredondar"])(-o.totalDevolucao),g>0&&o.totalProdutos>0&&t.push({tPag:"99",vPag:g}),o.infNFe.pag.detPag=t;case 56:case"end":return e.stop()}},e,null,[[20,30,34,42],[35,,37,41]])})),l.apply(this,arguments)}o["a"]=function(e){return l.apply(this,arguments)}},d0d3:function(e,o,a){"use strict";a("c5f6"),a("96cf");var t=a("c973"),r=a.n(t),n=a("3e8a"),i=a("ed08");function c(){return c=r()(regeneratorRuntime.mark(function e(o){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i["gconsole"].log("gerarJsonBaseD","obterConfiguracaoImposto"),o.descricaoProduto="Produto '".concat(o.documentoItem.descricaoItem||"","'"),Object(i["verificarErro"])(!o.item.ncm,"".concat(o.descricaoProduto," sem cadastro de NCM")),!o.outrosNFe.cfop){e.next=10;break}return e.next=6,Object(n["a"])().cfop.where({cfop:Number(o.outrosNFe.cfop)}).first();case 6:a=e.sent,Object(i["verificarErro"])(!a,"CFOP inválido"),e.next=15;break;case 10:return Object(i["verificarErro"])(!o.documentoItem.idCfop,"".concat(o.descricaoProduto," sem CFOP definido")),e.next=13,Object(n["a"])().cfop.get(o.documentoItem.idCfop);case 13:a=e.sent,Object(i["verificarErro"])(!a,"".concat(o.descricaoProduto," com CFOP inválido"));case 15:return o.cfop=a.cfop,e.next=18,this.gerarConfiguracaoImposto(o);case 18:case"end":return e.stop()}},e,this)})),c.apply(this,arguments)}o["a"]=function(e){return c.apply(this,arguments)}},e2f4:function(e,o,a){"use strict";a("ac4d"),a("8a81"),a("ac6a"),a("96cf");var t=a("c973"),r=a.n(t),n=a("ed08");function i(){return i=r()(regeneratorRuntime.mark(function e(o){var a,t,r,i,c,s,l,u,m,p,d,v,C,f,h,I;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n["gconsole"].log("gerarJsonBaseD","obterFrete",o.totalFrete),!(o.totalFrete>0)){e.next=43;break}for(a=0,t=!0,r=!1,i=void 0,e.prev=6,c=o.infNFe.det[Symbol.iterator]();!(t=(s=c.next()).done);t=!0)l=s.value,u=l.prod,a+=u.qCom*u.vUnCom-u.vDesc;e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](6),r=!0,i=e.t0;case 14:e.prev=14,e.prev=15,t||null==c.return||c.return();case 17:if(e.prev=17,!r){e.next=20;break}throw i;case 20:return e.finish(17);case 21:return e.finish(14);case 22:for(m=0,p=!0,d=!1,v=void 0,e.prev=26,C=o.infNFe.det[Symbol.iterator]();!(p=(f=C.next()).done);p=!0)h=f.value,I=h.prod,I.vFrete=Object(n["arredondar"])((I.qCom*I.vUnCom-I.vDesc)*o.totalFrete/a),m+=I.vFrete;e.next=34;break;case 30:e.prev=30,e.t1=e["catch"](26),d=!0,v=e.t1;case 34:e.prev=34,e.prev=35,p||null==C.return||C.return();case 37:if(e.prev=37,!d){e.next=40;break}throw v;case 40:return e.finish(37);case 41:return e.finish(34);case 42:o.infNFe.det[0].prod.vFrete+=Object(n["arredondar"])(o.totalFrete-m);case 43:case"end":return e.stop()}},e,null,[[6,10,14,22],[15,,17,21],[26,30,34,42],[35,,37,41]])})),i.apply(this,arguments)}o["a"]=function(e){return i.apply(this,arguments)}},f47a:function(e,o,a){"use strict";a("7514"),a("aef6"),a("6762"),a("2fdb"),a("c5f6");var t=a("ed08"),r=a("f487"),n=a("7330");o["a"]={calculaTotais:function(e,o,a){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.metadados=a;var c={vBC:0,vBCST:0,vICMS:0,vICMSDeson:0,vFCPUFDest:null,vICMSUFDest:null,vICMSUFRemet:null,vFCP:0,vST:0,vICMSST:null,vICMSSTRet:null,vFCPST:0,vFCPSTRet:0,vProd:0,vFrete:0,vSeg:0,vDesc:0,vII:0,vIPI:0,vIPIDevol:0,vPIS:0,vCOFINS:0,vOutro:0,vNF:0,noXml_vTribFed:0,noXml_vTribEst:0,noXml_vTribMun:0,vTotTrib:0};for(var s in e.det){var l=e.det[s];if(i&&(this.distribuiDadosICMS(l,e),this.distribuiDadosPIS(l),this.distribuiDadosCOFINS(l),this.distribuiDadosIPI(l)),o.automatico.dados_trib&&(l.prod.qTrib=l.prod.qCom,l.prod.uTrib=l.prod.uCom,l.prod.vUnTrib=l.prod.vUnCom,l.prod.cEANTrib=l.prod.cEAN),o.automatico.totais){var u=Object(t["arredondar"])(l.prod.qCom,4),m=Object(t["arredondar"])(l.prod.vUnCom,4),p=Object(t["arredondar"])(l.prod.qTrib,4),d=Object(t["arredondar"])(l.prod.vUnTrib,4),v=Object(t["arredondar"])(u*m,2),C=Object(t["arredondar"])(l.prod.vFrete,2),f=Object(t["arredondar"])(l.prod.vSeg,2),h=Object(t["arredondar"])(l.prod.vOutro,2),I=Object(t["arredondar"])(l.prod.vDesc,2),S=Object(t["arredondar"])(p*d+C+f+h-I,2);l.prod.vProd=Object(t["arredondar"])(v,2),"1"===l.prod.indTot&&(c.vProd+=v),c.vFrete+=C,c.vSeg+=f,c.vOutro+=h,c.vDesc+=I,this.calculaPIS_COFINS("PIS",l,o,c,S,u),this.calculaPIS_COFINS("COFINS",l,o,c,S,u),this.calculaICMS_ISSQN_IPI_II(l,o,c,S,u),this.calculaIBPT(l,o,c)}this.resumeDadosICMS(l)}if(o.automatico.totais){var b=e.total.ICMSTot;for(var g in c.vST=c.vICMSST+c.vST,c.vNF=c.vProd+c.vFrete+c.vSeg+c.vOutro+c.vST+c.vIPI-c.vDesc,c)null!=c[g]&&(b[g]=Object(t["arredondar"])(c[g],2));if(e.pag.detPag.length){if(1===e.pag.detPag.length){var P=e.pag.detPag[0];"90"===P.tPag?P.vPag=0:P.vPag=Object(t["arredondar"])(c.vNF)}}else{var F=r["a"].executa(n["a"].infNFe.pag.detPag.lista,{});F.tPag="99",F.vPag=Object(t["arredondar"])(c.vNF),e.pag.detPag.push(F)}}},calculaIBPT:function(e,o,a){var r=Number(e.prod.vProd)-Number(e.prod.vDesc);e.imposto.noXml_vTribFed=["1","6","7"].includes(e.imposto.noXml_orig)?Object(t["arredondar"])(Number(e.imposto.noXml_pTribImp)*r/100):Object(t["arredondar"])(Number(e.imposto.noXml_pTribFed)*r/100),a.noXml_vTribFed=Object(t["arredondar"])(a.noXml_vTribFed+e.imposto.noXml_vTribFed,2),e.imposto.noXml_vTribEst=Object(t["arredondar"])(Number(e.imposto.noXml_pTribEst)*r/100),a.noXml_vTribEst=Object(t["arredondar"])(a.noXml_vTribEst+e.imposto.noXml_vTribEst),e.imposto.noXml_vTribMun=Object(t["arredondar"])(Number(e.imposto.noXml_pTribMun)*r/100),a.noXml_vTribMun=Object(t["arredondar"])(a.noXml_vTribMun+e.imposto.noXml_vTribMun),e.imposto.vTotTrib=Object(t["arredondar"])(e.imposto.noXml_vTribFed+e.imposto.noXml_vTribEst+e.imposto.noXml_vTribMun),a.vTotTrib=Object(t["arredondar"])(a.vTotTrib+e.imposto.vTotTrib)},distribuiDadosICMS:function(e,o){var a=e.imposto.noXml_CSOSN||"",t=e.imposto.noXml_CST||"",r=e.imposto.escolhas.opcao1.ICMS.escolhas;if(a||t){e.imposto.escolhas.valor_escolha="opcao1";var n=this.metadados.infNFe.det.lista.imposto.escolhas.opcao1.ICMS.escolhas;for(var i in r)if("valor_escolha"!==i&&"ICMSPart"!==i&&"ICMSST"!==i&&!i.endsWith("_erro"))if("3"===o.emit.CRT){if("CST"in r[i]){var c=n[i].CST._enumeration,s=c.find(function(e){return e.valor===t});s&&(r.valor_escolha=i,r[i].CST=t)}}else if("CSOSN"in r[i]){var l=n[i].CSOSN._enumeration,u=l.find(function(e){return e.valor===a});u&&(r.valor_escolha=i,r[i].CSOSN=a)}}var m=r[r.valor_escolha];m&&"opcao1"===e.imposto.escolhas.valor_escolha&&(e.imposto.noXml_orig&&this.atualizaCampoRecursivo(m,"orig",e.imposto.noXml_orig),e.imposto.noXml_pICMS&&this.atualizaCampoRecursivo(m,"pICMS",e.imposto.noXml_pICMS),e.imposto.noXml_pRedBC&&this.atualizaCampoRecursivo(m,"pRedBC",e.imposto.noXml_pRedBC),e.imposto.noXml_pFCP&&this.atualizaCampoRecursivo(m,"pFCP",e.imposto.noXml_pFCP))},resumeDadosICMS:function(e){var o=e.imposto.escolhas;if("opcao1"===o.valor_escolha||!o.valor_escolha){o.valor_escolha="opcao1";var a=o.opcao1.ICMS.escolhas,t=a.valor_escolha,r=a[t];r&&("CST"in r?e.imposto.noXml_CST=r.CST:"CSOSN"in r&&(e.imposto.noXml_CSOSN=r.CSOSN),e.imposto.noXml_vBC=this.buscaRecursivo(r,"vBC"),e.imposto.noXml_pICMS=this.buscaRecursivo(r,"pICMS"),e.imposto.noXml_pRedBC=this.buscaRecursivo(r,"pRedBC"),e.imposto.noXml_vICMS=this.buscaRecursivo(r,"vICMS"),e.imposto.noXml_orig=this.buscaRecursivo(r,"orig"))}},distribuiDadosPIS:function(e){var o=e.imposto.noXml_CSTPis||"";if(o){var a=this.metadados.infNFe.det.lista.imposto.PIS.escolhas,t=e.imposto.PIS.escolhas;for(var r in t)if("valor_escolha"!==r&&!r.endsWith("_erro")&&"CST"in t[r]){var n=a[r].CST._enumeration,i=n.find(function(e){return e.valor===o});i&&(t.valor_escolha=r,t[r].CST=o)}var c=t[t.valor_escolha];c&&e.imposto.noXml_pPIS&&this.atualizaCampoRecursivo(c,"pPIS",e.imposto.noXml_pPIS)}},distribuiDadosCOFINS:function(e){var o=e.imposto.noXml_CSTCofins||"";if(o){var a=this.metadados.infNFe.det.lista.imposto.COFINS.escolhas,t=e.imposto.COFINS.escolhas;for(var r in t)if("valor_escolha"!==r&&!r.endsWith("_erro")&&"CST"in t[r]){var n=a[r].CST._enumeration,i=n.find(function(e){return e.valor===o});i&&(t.valor_escolha=r,t[r].CST=o)}var c=t[t.valor_escolha];c&&e.imposto.noXml_pCOFINS&&this.atualizaCampoRecursivo(c,"pCOFINS",e.imposto.noXml_pCOFINS)}},distribuiDadosIPI:function(e){var o=e.imposto.noXml_CSTIpi||"";if(o){e.imposto.escolhas.valor_escolha="opcao1";var a=e.imposto.escolhas.opcao1.IPI;a.visivel=!0,a.cEnq=e.imposto.noXml_cEnqIpi;var t=this.metadados.infNFe.det.lista.imposto.escolhas.opcao1.IPI.escolhas,r=t.IPITrib.CST._enumeration;r.find(function(e){return e.valor===o})?(a.escolhas.valor_escolha="IPITrib",a.escolhas.IPITrib.CST=o,a.escolhas.IPITrib.escolhas.valor_escolha="opcao1",a.escolhas.IPITrib.escolhas.opcao1.pIPI=e.imposto.noXml_pIPI||0):(a.escolhas.valor_escolha="IPINT",a.escolhas.IPINT.CST=o)}},calculaPIS_COFINS:function(e,o,a,t,r,n){var i=null;switch(o.imposto[e].escolhas.valor_escolha){case e+"Aliq":i=o.imposto[e].escolhas[e+"Aliq"],this.calculaImpostoPercentagem(e,i,"vBC","p"+e,i,"v"+e,t,a,r);break;case e+"Qtde":i=o.imposto[e].escolhas[e+"Qtde"],this.calculaImpostoQuantidade(e,i,"qBCProd","vAliqProd",i,"v"+e,t,a,n);break;case e+"NT":break;case e+"Outr":i=o.imposto[e].escolhas[e+"Outr"],"opcao1"===i.escolhas.valor_escolha?this.calculaImpostoPercentagem(e,i.escolhas.opcao1,"vBC","p"+e,i,"v"+e,t,a,r):"opcao2"===i.escolhas.valor_escolha&&this.calculaImpostoQuantidade(e,i.escolhas.opcao2,"qBCProd","vAliqProd",i,"v"+e,t,a,n);break}o.imposto[e+"ST"].visivel&&(i=o.imposto[e+"ST"],"opcao1"===i.escolhas.valor_escolha?this.calculaImpostoPercentagem(e,i.escolhas.opcao1,"vBC","p"+e,i,"v"+e,t,a,r):"opcao2"===i.escolhas.valor_escolha&&this.calculaImpostoQuantidade(e,i.escolhas.opcao2,"qBCProd","vAliqProd",i,"v"+e,t,a,n))},calculaICMS_ISSQN_IPI_II:function(e,o,a,t,r){switch(e.imposto.escolhas.valor_escolha){case"opcao1":this.calculaICMS(e.imposto.escolhas.opcao1.ICMS,o,a,t),this.calculaIPI(e.imposto.escolhas.opcao1.IPI,o,a,t,r),this.calculaII(e.imposto.escolhas.opcao1.II,o,a,t);break;case"opcao2":this.calculaISSQN(e.imposto.escolhas.opcao2.ISSQN,o,a,t),this.calculaIPI(e.imposto.escolhas.opcao2.IPI,o,a,t,r);break}},calculaIPI:function(e,o,a,t,r){var n=null;if(e.visivel)switch(e.escolhas.valor_escolha){case"IPITrib":n=e.escolhas.IPITrib,"opcao1"===n.escolhas.valor_escolha?this.calculaImpostoPercentagem("IPI",n.escolhas.opcao1,"vBC","pIPI",n,"vIPI",a,o,t):"opcao2"===n.escolhas.valor_escolha&&this.calculaImpostoQuantidade("IPI",n.escolhas.opcao2,"qUnid","vUnid",n,"vIPI",a,o,r);break;case"IPINT":n=e.escolhas.IPINT;break}},calculaII:function(e,o,a,t){e.visivel&&(a.vII+=Number(e.vII))},calculaISSQN:function(e,o,a,t){this.calculaImpostoPercentagem("ISSQN",e,"vBC","vAliq",e,"vISSQN",a,o,t)},calculaICMS:function(e,o,a,t){var r=null;switch(e.escolhas.valor_escolha){case"ICMS00":r=e.escolhas.ICMS00,o.automatico.calculaBC&&(r.modBC="3"),this.calculaImpostoPercentagem("ICMS",r,"vBC","pICMS",r,"vICMS",a,o,t),r.opcional.visivel&&this.calculaImpostoPercentagem("FCP",r.opcional,"vBCFCP","pFCP",r.opcional,"vFCP",a,o,t);break;case"ICMS10":r=e.escolhas.ICMS10,o.automatico.calculaBC&&(r.modBC="3"),this.calculaImpostoPercentagem("ICMS",r,"vBC","pICMS",r,"vICMS",a,o,t),r.opcional.visivel&&this.calculaImpostoPercentagem("FCP",r.opcional,"vBCFCP","pFCP",r.opcional,"vFCP",a,o,t),r.opcional2.visivel&&this.calculaImpostoPercentagem("FCPST",r.opcional2,"vBCFCPST","pFCPST",r.opcional,"vFCPST",a,o,t),this.calculaImpostoPercentagem("ICMSST",r,"vBCST","pICMSST",r,"vICMSST",a,o,t);break;case"ICMS20":r=e.escolhas.ICMS20,this.calculaImpostoPercentagemComReducaoBc("ICMS","vBC","pICMS","pRedBC","vICMS",r,a,o,t),r.opcional.visivel&&this.calculaImpostoPercentagem("FCP",r.opcional,"vBCFCP","pFCP",r.opcional,"vFCP",a,o,t);break;case"ICMS30":r=e.escolhas.ICMS30,this.calculaImpostoPercentagem("ICMSST",r,"vBCST","pICMSST",r,"vICMSST",a,o,t),r.opcional.visivel&&this.calculaImpostoPercentagem("FCPST",r.opcional,"vBCFCPST","pFCPST",r.opcional,"vFCPST",a,o,t);break;case"ICMS40":r=e.escolhas.ICMS40;break;case"ICMS51":r=e.escolhas.ICMS51,this.calculaImpostoPercentagemComReducaoBc("ICMS","vBC","pICMS","pRedBC","vICMS",r,a,o,t),r.opcional.visivel&&this.calculaImpostoPercentagem("FCP",r.opcional,"vBCFCP","pFCP",r.opcional,"vFCP",a,o,t);break;case"ICMS60":r=e.escolhas.ICMS60,r.opcional.visivel&&this.calculaImpostoPercentagem("ICMSSTRet",r.opcional,"vBCSTRet","pST",r.opcional,"vICMSSTRet",a,o,t),r.opcional2.visivel&&this.calculaImpostoPercentagem("FCPSTRet",r.opcional2,"vBCFCPSTRet","pFCPSTRet",r.opcional2,"vFCPSTRet",a,o,t);break;case"ICMS70":r=e.escolhas.ICMS70,this.calculaImpostoPercentagemComReducaoBc("ICMS","vBC","pICMS","pRedBC","vICMS",r,a,o,t),r.opcional.visivel&&this.calculaImpostoPercentagem("FCP",r.opcional,"vBCFCP","pFCP",r.opcional,"vFCP",a,o,t),r.opcional2.visivel&&this.calculaImpostoPercentagem("FCPST",r.opcional2,"vBCFCPST","pFCPST",r.opcional2,"vFCPST",a,o,t),this.calculaImpostoPercentagem("ICMSST",r,"vBCST","pICMSST",r,"vICMSST",a,o,t);break;case"ICMS90":r=e.escolhas.ICMS90,r.opcional.visivel&&(this.calculaImpostoPercentagemComReducaoBc("ICMS","vBC","pICMS","pRedBC","vICMS",r.opcional,a,o,t),r.opcional.opcional.visivel&&this.calculaImpostoPercentagem("FCP",r.opcional.opcional,"vBCFCP","pFCP",r.opcional.opcional,"vFCP",a,o,t)),r.opcional2.visivel&&(this.calculaImpostoPercentagem("ICMSST",r.opcional2,"vBCST","pICMSST",r.opcional2,"vICMSST",a,o,t),r.opcional2.opcional.visivel&&this.calculaImpostoPercentagem("FCPST",r.opcional2.opcional,"vBCFCPST","pFCPST",r.opcional2.opcional,"vFCPST",a,o,t));break;case"ICMSPart":r=e.escolhas.ICMSPart;break;case"ICMSST":r=e.escolhas.ICMSST;break;case"ICMSSN101":r=e.escolhas.ICMSSN101;break;case"ICMSSN102":r=e.escolhas.ICMSSN102;break;case"ICMSSN201":r=e.escolhas.ICMSSN201,this.calculaImpostoPercentagem("vICMSST",r,"vBCST","pICMSST",r,"vICMSST",a,o,t),r.opcional.visivel&&this.calculaImpostoPercentagem("vFCPST",r.opcional,"vBCFCPST","pFCPST",r.opcional,"vFCPST",a,o,t);break;case"ICMSSN202":r=e.escolhas.ICMSSN202,this.calculaImpostoPercentagem("ICMSST",r,"vBCST","pICMSST",r,"vICMSST",a,o,t),r.opcional.visivel&&this.calculaImpostoPercentagem("FCPST",r.opcional,"vBCFCPST","pFCPST",r.opcional,"vFCPST",a,o,t);break;case"ICMSSN500":r=e.escolhas.ICMSSN500,r.opcional.visivel&&this.calculaImpostoPercentagem("ICMSSTRet",r.opcional,"vBCSTRet","pST",r.opcional,"vICMSSTRet",a,o,t),r.opcional2.visivel&&this.calculaImpostoPercentagem("FCPSTRet",r.opcional2,"vBCFCPSTRet","pFCPSTRet",r.opcional2,"vFCPSTRet",a,o,t);break;case"ICMSSN900":r=e.escolhas.ICMSSN900,r.opcional.visivel&&this.calculaImpostoPercentagemComReducaoBc("ICMS","vBC","pICMS","pRedBC","vICMS",r.opcional,a,o,t),r.opcional2.visivel&&(this.calculaImpostoPercentagem("ICMSST",r.opcional2,"vBCST","pICMSST",r.opcional2,"vICMSST",a,o,t),r.opcional2.opcional.visivel&&this.calculaImpostoPercentagem("FCPST",r.opcional2.opcional,"vBCFCPST","pFCPST",r.opcional2.opcional,"vFCPST",a,o,t));break}},calculaImpostoPercentagem:function(e,o,a,t,r,n,i,c,s){a in o||console.error("totalEImpostos: Campo "+a+" não consta em objetoImposto "),t in o||console.error("totalEImpostos: Campo "+t+" não consta em objetoImposto "),n in r||console.error("totalEImpostos: Campo "+n+" não consta em objetoImposto "),n in i||console.error("totalEImpostos: Campo "+n+" não consta em total"),s=0!==s&&c.automatico.calculaBC?this.atualizaBC(o,a,c,s):Number(o[a]);var l=this.atualizaAliquota(o,t,c),u=this.atualizaValorImposto(r,n,s*l/100);i[n]+=u,"ICMS"!==e&&"ICMSST"!==e||(a in i||console.error("totalEImpostos: Campo "+a+" não consta em total"),i[a]+=s)},calculaImpostoPercentagemComReducaoBc:function(e,o,a,r,n,i,c,s,l){o in i||console.error("totalEImpostos: Campo "+o+" não consta em objetoImposto "),a in i||console.error("totalEImpostos: Campo "+a+" não consta em objetoImposto "),r in i||console.error("totalEImpostos: Campo "+r+" não consta em objetoImposto "),n in i||console.error("totalEImpostos: Campo "+n+" não consta em objetoImposto "),n in c||console.error("totalEImpostos: Campo "+n+" não consta em total");var u=Number(i[a]),m=Number(i[r]);0!==l&&s.automatico.calculaBC?(m&&u&&(l=Object(t["arredondar"])(l*m/u,2)),i[o]=l):l=Number(i[o]);var p=Object(t["arredondar"])(l*u/100,2);i[n]=p,c[n]+=p,"ICMS"!==e&&"ICMSST"!==e||(o in c||console.error("totalEImpostos: Campo "+o+" não consta em total"),c[o]+=l)},calculaImpostoQuantidade:function(e,o,a,t,r,n,i,c,s){a in o||console.log("Campo "+a+" não consta em objetoImposto "),t in o||console.log("Campo "+t+" não consta em objetoImposto "),n in r||console.log("Campo "+n+" não consta em objetoImposto "),n in i||console.log("Campo "+n+" não consta em total");var l=this.atualizaBCquantidade(o,a,s,c),u=this.atualizaAliquotaQuantidade(o,t,c),m=this.atualizaValorImposto(r,n,l*u);i[n]+=m},atualizaBC:function(e,o,a,r){return a.automatico.calculaBC?e[o]=Object(t["arredondar"])(r,2):r=Number(e[o]),r},atualizaAliquota:function(e,o,a){var t=0;return t=Number(e[o]),t},atualizaValorImposto:function(e,o,a){return e[o]=Object(t["arredondar"])(a,2),Object(t["arredondar"])(a,2)},atualizaBCquantidade:function(e,o,a,r){var n=0;return r.automatico.calculaBC?(n=a,e[o]=Object(t["arredondar"])(n,4)):n=Number(e[o]),n},atualizaAliquotaQuantidade:function(e,o,a){var t=0;return t=Number(e[o]),t},atualizaCampoRecursivo:function(e,o,a){for(var t in o in e&&(e[o]=a),e)e[t].constructor===Object&&this.atualizaCampoRecursivo(e[t],o,a)},buscaRecursivo:function(e,o){if(o in e)return e[o];for(var a in e)if(e[a].constructor===Object){var t=this.buscaRecursivo(e[a],o);if(t)return t}return 0}}},f487:function(e,o,a){"use strict";a("f559");o["a"]={executa:function(e,o,a){return this.geraTags(e,o,a)},geraTags:function(e,o,a){var t={},r=!1;for(var n in e)if(!n.startsWith("_")){if(n.startsWith("lista"))return this.geraLista(e[n],o,a);"visivel"===n?t[n]=null!=o&&n in o&&o[n]:"valor_escolha"===n?null!=o&&n in o?t[n]=o[n]:(t[n]=this.primeiraEscolha(e),"ICMS00"===t[n]&&(t[n]="")):t[n]=null!=o&&n in o?this.geraTags(e[n],o[n],a):this.geraTags(e[n],null,a),"NFCe"!==a&&(t[n+"_erro"]=""),r=!0}return r||(t=null==o?e._valorInic:"data"===e._tipo&&10===o.length?o+"T00:00:00":o),t},geraLista:function(e,o,a){var t=[];for(var r in o)t.push(this.geraTags(e,o[r],a));return t},primeiraEscolha:function(e){if(e._opcional)return"Não se aplica";for(var o in e)if(!o.startsWith("_")&&"valor_escolha"!==o)return o;return""}}},f94a:function(e,o,a){"use strict";a("6762"),a("2fdb"),a("ac6a"),a("cadf"),a("456d"),a("f559");var t=a("0e70"),r=a("ee34"),n=a("ed08");o["a"]={erros:null,executa:function(e,o){var a=Object(n["logarIni"])("compactarValidarNFe");try{return this.erros=[],this.gerarTags(e,o,"infNFe")}catch(e){throw console.error("Erro no compactarValidarNFe\n",e),e}finally{Object(n["logarFim"])(a)}},gerarTags:function(e,o,a){var t={};if(o=o||{},e.visivel){if(!o.visivel)return t;t.visivel=!0}for(var r in e)if(!r.startsWith("_")&&"visivel"!==r){var n=o[r],i=e[r];if(r.startsWith("opcional")){var c=this.gerarTags(i,n,a+"."+r);c.visivel&&(t[r]=c)}else if(r.startsWith("escolhas")){var s=(n||{}).valor_escolha||"";if(s in i){var l=this.gerarCampo(i[s],n,s,a+"."+s);null===l||l.constructor===Object&&0===Object.keys(l).length||(t[r]={valor_escolha:s},t[r][s]=l)}}else{var u=this.gerarCampo(i,o,r,a+"."+r);null!==u&&(t[r]=u)}}return t},gerarCampo:function(e,o,a,n){var i=(o||{})[a],c=t["a"].consisteCampo(i,e,a);if(c&&this.erros.push("Erro: "+c+". Campo: "+e._titulo+" ("+n+")"),r["a"].tiposNumero.includes(e._tipo)){if(i)return i;if(!e._opcional)return 0}else if("dataHora"===e._tipo){if(i)return r["a"].formatarDataNFe(i);if(!e._opcional)return""}else if("data"===e._tipo){if(i)return r["a"].formatarDataNFeSemHoras(i);if(!e._opcional)return""}else if("lista"in e){if(i&&i.constructor===Array&&i.length>0)return this.gerarLista(e.lista,i,n+"."+a);if(!e._opcional)return[]}else if(null===i||void 0===i){if(!e._opcional)return null}else if(i.constructor===String){if(i)return i;if(!e._opcional)return""}else{var s=this.gerarTags(e,i,n);if(null!=i&&Object.keys(s).length>0&&!1!==i.visivel)return s;if(!e._opcional)return{}}return null},gerarLista:function(e,o,a){var t=[];for(var r in o)t.push(this.gerarTags(e,o[r],a+"["+r+"]"));return t}}},fa57:function(e,o,a){"use strict";a("ac4d"),a("8a81"),a("ac6a"),a("28a5"),a("96cf");var t=a("c973"),r=a.n(t),n=a("f487"),i=a("7330"),c=a("8149"),s=a("ed08");function l(){return l=r()(regeneratorRuntime.mark(function e(o,a){var t,r,l,u,m,p,d,v,C;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].configuracoes.leValorComFiltroEmpresa("nfe.autorizadoDownloadXml",a);case 2:for(t=e.sent.split(" "),r=!0,l=!1,u=void 0,e.prev=6,m=t[Symbol.iterator]();!(r=(p=m.next()).done);r=!0)d=p.value,v=n["a"].executa(i["a"].infNFe.autXML.lista,{},this.tipo),C=Object(s["filtrarDigitos"])(d),14===C.length?(v.escolhas.valor_escolha="CNPJ",v.escolhas.CNPJ=C,o.autXML.push(v)):11===C.length&&(v.escolhas.valor_escolha="CPF",v.escolhas.CPF=C,o.autXML.push(v));e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](6),l=!0,u=e.t0;case 14:e.prev=14,e.prev=15,r||null==m.return||m.return();case 17:if(e.prev=17,!l){e.next=20;break}throw u;case 20:return e.finish(17);case 21:return e.finish(14);case 22:case"end":return e.stop()}},e,this,[[6,10,14,22],[15,,17,21]])})),l.apply(this,arguments)}o["a"]=function(e,o){return l.apply(this,arguments)}}}]);