(self.webpackChunkb15=self.webpackChunkb15||[]).push([[82],{85808:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>ho});var a=t(34182);const l={id:"itensManipulacao",class:"Lista",view:"hHh lpR fFf"},i=(0,a.createTextVNode)(" Manipulação Itens "),r=(0,a.createTextVNode)("Criar"),s={class:"row items-center"},d=(0,a.createTextVNode)("Data Emissão"),c={class:"text-tertiary q-gutter-xs"},n=(0,a.createTextVNode)(" Editar"),m=(0,a.createTextVNode)(" Origem "),u=(0,a.createTextVNode)(" Destino "),p={class:"q-pb-md"},h={class:"flex flex-center"},V=(0,a.createTextVNode)("Filtrar"),f={class:"row"},C={class:"col-12 row q-px-md q-mt-lg"},v=(0,a.createVNode)("strong",{class:"col-12 text-body1 text-dark"},"Período de Emissão",-1),g={class:"col-6 "},N={class:"col-6 "},x={class:"col-12 row q-px-md q-mt-lg"},w=(0,a.createVNode)("strong",{class:"col-12 text-body1 text-dark"},"Período de Finalização",-1),b={class:"col-6"},q={class:"col-6 "},y={class:"col-12 row q-px-md q-mt-lg"},k={class:"col-12 row q-px-md q-mt-lg"};var _=t(26891),I=t(72407);const D=(0,a.createTextVNode)("Confirmar exclusão"),z=(0,a.createVNode)("div",{class:"row layout-padding"}," Deseja mesmo excluir o item? ",-1),B={class:"row justify-end"},T={data:()=>({modal:{visivel:!1}}),emits:["excluir"]};var E=t(39341),Z=t(63626),Q=t(54553),F=t(47266),M=t(48761),S=t(76210),U=t(83671),$=t(98586),L=t(7518),A=t.n(L);T.render=function(e,o,t,l,i,r){const s=(0,a.resolveComponent)("q-toolbar-title"),d=(0,a.resolveComponent)("q-btn"),c=(0,a.resolveComponent)("q-toolbar"),n=(0,a.resolveComponent)("q-header"),m=(0,a.resolveComponent)("q-footer"),u=(0,a.resolveComponent)("q-layout"),p=(0,a.resolveComponent)("q-dialog"),h=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createBlock)("div",null,[(0,a.createVNode)(p,{modelValue:i.modal.visivel,"onUpdate:modelValue":o[2]||(o[2]=e=>i.modal.visivel=e),"content-css":{minWidth:"30vw"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{container:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{color:"negative"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)((()=>[D])),_:1}),(0,a.withDirectives)((0,a.createVNode)(d,{dense:"",flat:"",icon:"close",round:""},null,512),[[h]])])),_:1})])),_:1}),z,(0,a.createVNode)(m,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{color:"light"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)("div",B,[(0,a.withDirectives)((0,a.createVNode)(d,{flat:"",label:"Cancelar",color:"tertiary"},null,512),[[h]]),(0,a.withDirectives)((0,a.createVNode)(d,{unelevated:"",label:"Confirmar",color:"primary",onClick:o[1]||(o[1]=o=>e.$emit("excluir"))},null,512),[[h]])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])};const P=T;A()(T,"components",{QDialog:E.Z,QLayout:Z.Z,QHeader:Q.Z,QToolbar:F.Z,QToolbarTitle:M.Z,QBtn:S.Z,QFooter:U.Z}),A()(T,"directives",{ClosePopup:$.Z});const H=(0,a.createTextVNode)("Manipulação de Itens"),O={key:0},R={ref:"form"},j={class:"row q-col-gutter-sm "},W={class:"row q-col-gutter-sm q-mt-md "},X={class:"col-12 col-lg-6 q-pt-none"},G={class:"q-item-label q-mb-none",style:{color:"#0c0c0c"}},J=(0,a.createTextVNode)(" Origem "),K=(0,a.createTextVNode)("Adicionar Item"),Y=(0,a.createVNode)("div",{class:"row text-weight-bold text-left justify-around"},[(0,a.createVNode)("div",{class:"col-2 col-lg-1"},"Código"),(0,a.createVNode)("div",{class:"col-10 col-lg-3 "},"Descrição"),(0,a.createVNode)("div",{class:"col-3 col-lg-2 text-right"},"Quantidade"),(0,a.createVNode)("div",{class:"col-3 col-lg-2 text-right"},"Valor Item"),(0,a.createVNode)("div",{class:"col-3 col-lg-2 text-right"},"Total"),(0,a.createVNode)("div",{class:"col-3 col-lg-2"})],-1),ee={class:"row text-left justify-around"},oe={class:"col-2 col-lg-1 "},te={class:"col-10 col-lg-3 "},ae={class:"col-3 col-lg-2 text-right"},le={class:"col-3 col-lg-2 text-right"},ie={class:"col-3 col-lg-2 text-right"},re={key:0,class:"col-3 col-lg-2 text-right"},se=(0,a.createTextVNode)("Excluir"),de={class:"row text-weight-bold text-left justify-around"},ce=(0,a.createVNode)("div",{class:"col-2 col-lg-1 "},null,-1),ne=(0,a.createVNode)("div",{class:"col-10 col-lg-3 "},null,-1),me=(0,a.createVNode)("div",{class:"col-3 col-lg-2 text-right"},null,-1),ue=(0,a.createVNode)("div",{class:"col-3 col-lg-2 text-right "},null,-1),pe={class:"col-3 col-lg-2 text-right "},he=(0,a.createVNode)("div",{class:"col-3 col-lg-2"},null,-1),Ve={class:"col-12 col-lg-6 q-pt-none"},fe={class:"q-item-label q-mb-none",style:{color:"#0c0c0c"}},Ce=(0,a.createTextVNode)(" Destino "),ve=(0,a.createTextVNode)("Adicionar Item"),ge=(0,a.createVNode)("div",{class:"row text-weight-bold text-left justify-around"},[(0,a.createVNode)("div",{class:"col-2 col-lg-1"},"Código"),(0,a.createVNode)("div",{class:"col-10 col-lg-3 "},"Descrição"),(0,a.createVNode)("div",{class:"col-3 col-lg-2 text-right"},"Quantidade"),(0,a.createVNode)("div",{class:"col-3 col-lg-2 text-right"},"Valor Item"),(0,a.createVNode)("div",{class:"col-3 col-lg-2 text-right"},"Total"),(0,a.createVNode)("div",{class:"col-3 col-lg-2"})],-1),Ne={class:"row text-left justify-around"},xe={class:"col-2 col-lg-1 "},we={class:"col-10 col-lg-3 "},be={class:"col-3 col-lg-2 text-right"},qe={class:"col-3 col-lg-2 text-right"},ye={class:"col-3 col-lg-2 text-right"},ke={key:0,class:"col-3 col-lg-2 text-right"},_e=(0,a.createTextVNode)("Excluir"),Ie={class:"row text-weight-bold text-left justify-around"},De=(0,a.createVNode)("div",{class:"col-2 col-lg-1  "},null,-1),ze=(0,a.createVNode)("div",{class:"col-10 col-lg-3 "},null,-1),Be=(0,a.createVNode)("div",{class:"col-3 col-lg-2 text-right"},null,-1),Te=(0,a.createVNode)("div",{class:"col-3 col-lg-2 text-right "},null,-1),Ee={class:"col-3 col-lg-2 text-right "},Ze=(0,a.createVNode)("div",{class:"col-3 col-lg-2"},null,-1);var Qe=t(96986),Fe=t(59260),Me=t(60357);const Se=(0,a.createTextVNode)("Confirmar exclusão"),Ue=(0,a.createVNode)("div",{class:"row layout-padding"}," O item selecionado possue itens de composição, deseja preencher? ",-1),$e={class:"row justify-end"},Le={data:()=>({modal:{visivel:!1}}),emits:["adicionarComposicao"],render:function(e,o,t,l,i,r){const s=(0,a.resolveComponent)("q-toolbar-title"),d=(0,a.resolveComponent)("q-btn"),c=(0,a.resolveComponent)("q-toolbar"),n=(0,a.resolveComponent)("q-header"),m=(0,a.resolveComponent)("q-footer"),u=(0,a.resolveComponent)("q-layout"),p=(0,a.resolveComponent)("q-dialog"),h=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createBlock)("div",null,[(0,a.createVNode)(p,{modelValue:i.modal.visivel,"onUpdate:modelValue":o[2]||(o[2]=e=>i.modal.visivel=e),"content-css":{minWidth:"30vw"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{container:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)((()=>[Se])),_:1}),(0,a.withDirectives)((0,a.createVNode)(d,{dense:"",flat:"",icon:"close",round:""},null,512),[[h]])])),_:1})])),_:1}),Ue,(0,a.createVNode)(m,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{color:"light"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)("div",$e,[(0,a.withDirectives)((0,a.createVNode)(d,{flat:"",label:"Cancelar",color:"tertiary"},null,512),[[h]]),(0,a.withDirectives)((0,a.createVNode)(d,{unelevated:"",label:"Confirmar",color:"primary",onClick:o[1]||(o[1]=o=>e.$emit("adicionarComposicao"))},null,512),[[h]])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}},Ae=Le;A()(Le,"components",{QDialog:E.Z,QLayout:Z.Z,QHeader:Q.Z,QToolbar:F.Z,QToolbarTitle:M.Z,QBtn:S.Z,QFooter:U.Z}),A()(Le,"directives",{ClosePopup:$.Z});var Pe=t(11463),He=t(48409);const Oe={components:{Badge:I.Z,Campo:_.Z,PromptItemNovo:Fe.Z,ModalComposicao:Ae,PromptContatoNovo:Me.Z},data:()=>({modalContatoEmpresa:{visivel:!1,retorno:{},aguardarRetorno:!0},itens:[],confirm:!0,documentoAnterior:{},documentoItensAnterior:[],documento:{id:"",codigoDocumento:"",idEmpresa:"",codigoEmpresa:"",descricaoEmpresa:"",operacao:"Manipulacao",tipo:"Estoque",status:"",dataEmissao:(0,Qe.dataAtual)(),dataFinalizacao:""},documentoItens:[],campos:{empresa:{id:"",descricao:""}},adicionar:{modal:{name:"",value:!1}},itensComposicao:{},totalOrigem:0,totalDestino:0,carregando:!0,visibilidade:{modal:!1}}),emits:["atualizar","fechar"],methods:{async mostrar(){await(0,Qe.dormir)(500),this.carregando=!1},fechar(){this.carregando=!0},async atualizar(e){if(this.zerarCampos(),e)this.documentoAnterior=await Pe.db.itemManipulacao.le({id:e}),this.documento=(0,Qe.clonarV2)(this.documentoAnterior),this.documentoItensAnterior=await Pe.db.itemManipulacao.leItens({idDocumento:e}),this.documentoItens=(0,Qe.clonarV2)(this.documentoItensAnterior),this.campos.empresa.id=this.documentoAnterior.idEmpresa,this.campos.empresa.nome=this.documentoAnterior.descricaoEmpresa;else{let e=[],o=await Pe.db.contatoBusca.filtrar(null,{ativo:!0,empresas:!0},0);if(o.length&&await(0,He.X)().empresa.where("idContato").anyOf(o.map((e=>e.id))).each((o=>{e.push(o)})),!e.length)return void this.$q.notify({message:"Não há empresa configurada",timeout:0,type:"negative",closeBtn:!0});let t={};if(this.modalContatoEmpresa.retorno={},this.modalContatoEmpresa.aguardarRetorno=!0,e.length>1){if(this.modalContatoEmpresa.visivel=!0,await new Promise(((e,o)=>{const t=setInterval((()=>{this.modalContatoEmpresa.aguardarRetorno||(clearInterval(t),e())}),100)})),!this.modalContatoEmpresa.retorno.id)return this.$emit("fechar"),this.$q.notifyError("Empresa não selecionada."),void(this.visibilidade.modal=!1);t=this.modalContatoEmpresa.retorno}else t=e[0];this.empresa=t}this.somarValorTotal()},async salvar(e=!1){if(this.campos.empresa.id){try{await Pe.db.itemManipulacao.grava({documentoAnterior:this.documentoAnterior,documento:this.documento,documentoItensAnterior:this.documentoItensAnterior,documentoItens:this.documentoItens})}catch(e){this.$q.notifyError("Erro ao salvar",e)}this.visibilidade.modal=e,this.atualizar(this.documento.id),this.$emit("atualizar")}else this.$q.notifyAlert("Selecione uma empresa")},finalizar(){if(this.verificarTotal())if(this.campos.empresa.id){this.documento.status="Finalizado",this.documento.dataHoraFinalizado=(0,Qe.dataAtual)();for(let e of this.documentoItens)e.status="Finalizado",e.dataHoraFinalizado=(0,Qe.dataAtual)();this.salvar(!1)}else this.$q.notifyAlert("Selecione uma empresa")},reabrir(){try{this.documento.status="Digitação",this.documento.dataHoraFinalizado="";for(let e of this.documentoItens)e.status="Digitação",e.dataHoraFinalizado="";this.salvar(!0)}catch(e){this.$q.notifyError("Erro ao reabrir",e)}},async excluirItem(e){this.documentoItens=this.documentoItens.filter((o=>o.id!==e)),this.somarValorTotal()},recalcularTotal(e){e.subTotal=(0,Qe.arredondar)(e.quantidade*e.valorItem),e.total=(0,Qe.arredondar)(e.quantidade*e.valorItem),this.somarValorTotal()},recalcularQuantidade(e){e.quantidade=(0,Qe.arredondar)(e.subTotal/e.valorItem),e.total=e.subTotal,this.somarValorTotal()},zerarCampos(){this.empresa={},this.documentoAnterior={},this.documentoItensAnterior=[],this.documento={id:(0,Qe.uuid)(),idEmpresa:"",descricaoEmpresa:"",operacao:"Manipulação",tipo:"Estoque",status:"Digitação",dataHoraEmissao:(0,Qe.dataAtual)(),dataHoraFinalizado:""},this.documentoItens=[],this.totalOrigem=0,this.totalDestino=0,this.campos={empresa:{id:"",descricao:""},finalizado:!1}},async abrirModal(e,o=""){let t={},a=[];const l="Destino"===e?1:-1;a=o?this.documentoItens.filter((e=>e.idItem===o)):this.documentoItens.filter((e=>e.operacaoFator===l));for(const e of a)t[e.idItem]={item:await(0,He.X)().item.get(e.idItem)||{},quantidade:e.quantidade};this.$refs.promptItem.itensSelecionados=t,this.$refs.promptItem.termo=o,this.$refs.promptItem.atualizar(),this.adicionar.modal.value=!0,this.adicionar.modal.name=e},async selecionarEmpresa(e){if(this.modalContatoEmpresa.retorno={},!e)return void(this.modalContatoEmpresa.aguardarRetorno=!1);const o=await Pe.db.empresa.le({idContato:e});o.length&&(this.modalContatoEmpresa.retorno=o[0],this.campos.empresa=o[0]),this.modalContatoEmpresa.aguardarRetorno=!1,this.documento.idEmpresa=o[0].id,this.documento.descricaoEmpresa=o[0].nome},async selecionarItens(e){const o="Destino"===this.adicionar.modal.name?1:-1;for(const t in e){let a=await Pe.db.estoqueSaldoProdutoEmpresa.le({idEmpresa:this.campos.empresa.idContato,tipoEstoque:"Disponível",idItem:t});if(a=a[0],!a)return void this.$q.notifyError("Item não disponível no estoque");const l=e[t].item||{},i=e[t].quantidade||0,r=a.valorCustoMedio||l.valorCustoReposicao;let s=this.documentoItens.find((e=>e.idItem===t));s?(s.quantidade=i,s.quantidadeRealizado=i,s.subTotal=(0,Qe.arredondar)(i*r),s.total=(0,Qe.arredondar)(i*r)):this.documentoItens.push({dataHoraEmissao:(0,Qe.dataAtual)(),dataHoraFinalizado:"",descricaoItem:l.descricao,id:(0,Qe.uuid)(),idDocumento:this.documento.id,idItem:l.id,operacao:"Manipulação",operacaoFator:o,quantidade:i,quantidadeRealizado:i,status:"Digitação",tipoItem:l.tipoItem,subTotal:(0,Qe.arredondar)(i*r),total:(0,Qe.arredondar)(i*r),unidade:l.unidade,valorCustoMedio:a.valorCustoMedio,valorItem:r}),1===o&&await this.verificarComposicao(l.id,i)}this.somarValorTotal()},async verificarComposicao(e,o){let t=!1,a=[],l=await Pe.db.item.leCompleto({id:e});for(let e of l.atual.composicao)e.idItemUtilizado&&(e.quantidade=e.quantidade*o,a.push(e),t=!0);this.itensComposicao=a.reduce(((e,o)=>(e[o.idItemUtilizado]||(e[o.idItemUtilizado]=o),e)),{}),this.$refs.modalComposicao.modal.visivel=t},adicionarComposicao(){this.adicionar.modal.name="Origem",this.selecionarItens(this.itensComposicao)},somarValorTotal(){this.totalOrigem=this.documentoItens.filter((e=>-1===e.operacaoFator)).reduce(((e,o)=>e+o.total),0),this.totalDestino=this.documentoItens.filter((e=>1===e.operacaoFator)).reduce(((e,o)=>e+o.total),0),console.log(this.totalOrigem)},verificarTotal(){return 0===this.documentoItens.length&&0===this.totalDestino&&0===this.totalOrigem?(this.$q.notifyError("Selecione alguns itens na lista"),!1):this.totalOrigem===this.totalDestino||(this.$q.notifyError("Valores Totais de Origem e Destino devem ser iguais!"),!1)}}};var Re=t(7112),je=t(83054),We=t(31106),Xe=t(68900),Ge=t(4957),Je=t(25901),Ke=t(77953),Ye=t(83831);Oe.render=function(e,o,t,l,i,r){const s=(0,a.resolveComponent)("q-btn"),d=(0,a.resolveComponent)("q-toolbar-title"),c=(0,a.resolveComponent)("q-toolbar"),n=(0,a.resolveComponent)("q-header"),m=(0,a.resolveComponent)("badge"),u=(0,a.resolveComponent)("campo"),p=(0,a.resolveComponent)("q-card"),h=(0,a.resolveComponent)("q-icon"),V=(0,a.resolveComponent)("q-tooltip"),f=(0,a.resolveComponent)("q-item-label"),C=(0,a.resolveComponent)("q-separator"),v=(0,a.resolveComponent)("q-item"),g=(0,a.resolveComponent)("q-list"),N=(0,a.resolveComponent)("prompt-item-novo"),x=(0,a.resolveComponent)("prompt-contato-novo"),w=(0,a.resolveComponent)("ModalComposicao"),b=(0,a.resolveComponent)("q-page-container"),q=(0,a.resolveComponent)("q-footer"),y=(0,a.resolveComponent)("q-layout"),k=(0,a.resolveComponent)("q-dialog"),_=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createBlock)(k,{modelValue:i.visibilidade.modal,"onUpdate:modelValue":o[10]||(o[10]=e=>i.visibilidade.modal=e),maximized:"",onShow:r.mostrar,onHide:r.fechar},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(y,{container:"",class:"bg-grey-4"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.withDirectives)((0,a.createVNode)(s,{dense:"",flat:"",icon:"arrow_back",round:""},null,512),[[_]]),(0,a.createVNode)(d,null,{default:(0,a.withCtx)((()=>[H])),_:1}),(0,a.createVNode)(s,{class:"q-ml-sm no-shadow",color:"white","text-color":"primary",label:"Salvar",onClick:o[1]||(o[1]=e=>r.salvar(!1))})])),_:1})])),_:1}),(0,a.createVNode)(b,{class:"u-container q-py-sm"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{color:"none","text-color":"black"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{class:"text-black q-px-none text-body2 "},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("Emissão: "+(0,a.toDisplayString)(e.$filters.data(i.documento.dataHoraEmissao))+" ",1),i.documento.dataHoraFinalizado?((0,a.openBlock)(),(0,a.createBlock)("span",O,"Cancelamento: "+(0,a.toDisplayString)(e.$filters.data(i.documento.dataHoraFinalizado)),1)):(0,a.createCommentVNode)("",!0)])),_:1}),i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,cor:"positive",class:"q-mx-sm ",icone:"flag",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.documento.status),1)])),_:1})):(0,a.createCommentVNode)("",!0),i.documento.codigoDocumento?((0,a.openBlock)(),(0,a.createBlock)(m,{key:1,cor:"tertiary",escuro:"",icone:"playlist_add_check",class:"q-mx-xs "},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" #"+(0,a.toDisplayString)(i.documento.codigoDocumento),1)])),_:1})):(0,a.createCommentVNode)("",!0),i.documento.codigoDocumento?((0,a.openBlock)(),(0,a.createBlock)(s,{key:2,class:"q-ml-xs",color:"primary",icon:"print",flat:"",dense:"",round:""})):(0,a.createCommentVNode)("",!0)])),_:1}),(0,a.createVNode)(p,{class:"bg-white q-pa-md  q-mt-md no-shadow"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)("form",R,[(0,a.createVNode)("div",j,[(0,a.createVNode)(u,{modelValue:i.campos.empresa.nome,"onUpdate:modelValue":o[2]||(o[2]=e=>i.campos.empresa.nome=e),class:"col-10",disable:"",rotulo:"Empresa",tipo:"texto"},null,8,["modelValue"])])],512)])),_:1}),(0,a.createVNode)("div",W,[(0,a.createVNode)("div",X,[(0,a.createVNode)(p,{class:"no-shadow bg-white full-width fit q-pa-md"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{class:"q-pa-none q-ma-none q-mb-md",color:"none",style:{"min-height":"auto"},"text-color":"black"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)("p",G,[(0,a.createVNode)(h,{class:"q-mr-md",name:"shopping_cart",size:"24px",style:{color:"#737373"}}),J]),(0,a.createVNode)(d,{class:"q-pa-none q-ma-none",style:{height:"0 !important","min-height":"auto"}}),"Digitação"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,color:"positive",dense:"",flat:"",icon:"add",round:"",size:"md",onClick:o[3]||(o[3]=e=>r.abrirModal("Origem"))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,null,{default:(0,a.withCtx)((()=>[K])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0)])),_:1}),(0,a.createVNode)(g,{class:"col-12 no-border q-mx-none q-pa-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(v,{class:"q-pa-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{caption:""},{default:(0,a.withCtx)((()=>[Y])),_:1}),(0,a.createVNode)(C,{class:"q-my-xs"}),((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(i.documentoItens,((e,o)=>((0,a.openBlock)(),(0,a.createBlock)("div",{key:o},[-1===e.operacaoFator?((0,a.openBlock)(),(0,a.createBlock)(f,{key:0,caption:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)("div",ee,[(0,a.createVNode)("div",oe,(0,a.toDisplayString)(e.codigoItem||"-"),1),(0,a.createVNode)("div",te,(0,a.toDisplayString)(e.descricaoItem||"-"),1),(0,a.createVNode)("div",ae,[(0,a.createVNode)(u,{modelValue:e.quantidade,"onUpdate:modelValue":o=>e.quantidade=o,somenteLeitura:"Finalizado"===i.documento.status,decimals:"4",tipo:"decimal",onBlur:o=>r.recalcularTotal(e)},null,8,["modelValue","onUpdate:modelValue","somenteLeitura","onBlur"])]),(0,a.createVNode)("div",le,[(0,a.createVNode)(u,{modelValue:e.valorItem,"onUpdate:modelValue":o=>e.valorItem=o,decimals:"4",disable:"",tipo:"decimal"},null,8,["modelValue","onUpdate:modelValue"])]),(0,a.createVNode)("div",ie,[(0,a.createVNode)(u,{modelValue:e.subTotal,"onUpdate:modelValue":o=>e.subTotal=o,somenteLeitura:"Finalizado"===i.documento.status,decimals:"4",tipo:"decimal",onBlur:o=>r.recalcularQuantidade(e)},null,8,["modelValue","onUpdate:modelValue","somenteLeitura","onBlur"])]),"Digitação"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)("div",re,[(0,a.createVNode)(s,{dense:"",flat:"",icon:"delete",round:"",size:"md",onClick:o=>r.excluirItem(e.id)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,null,{default:(0,a.withCtx)((()=>[se])),_:1})])),_:2},1032,["onClick"])])):(0,a.createCommentVNode)("",!0)])])),_:2},1024)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(C,{class:"q-my-xs"}),(0,a.createVNode)(f,{caption:""})])))),128))])),_:1})])),_:1}),(0,a.createVNode)(f,{caption:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)("div",de,[ce,ne,me,ue,(0,a.createVNode)("div",pe,(0,a.toDisplayString)(e.$filters.numero(i.totalOrigem,2)),1),he])])),_:1}),(0,a.createVNode)(v,{class:"text-center"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,{class:"q-mx-auto",color:"positive",icon:"add",label:"Adicionar item",outline:"",size:"xs",onClick:o[4]||(o[4]=e=>r.abrirModal("Origem"))})])),_:1})])),_:1})])),_:1})]),(0,a.createVNode)("div",Ve,[(0,a.createVNode)(p,{class:"no-shadow bg-white full-width fit q-pa-md"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{class:"q-pa-none q-ma-none q-mb-md",color:"none",style:{"min-height":"auto"},"text-color":"black"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)("p",fe,[(0,a.createVNode)(h,{class:"q-mr-md",name:"shopping_cart",size:"24px",style:{color:"#737373"}}),Ce]),(0,a.createVNode)(d,{class:"q-pa-none q-ma-none",style:{height:"0 !important","min-height":"auto"}}),"Digitação"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,color:"positive",dense:"",flat:"",icon:"add",round:"",size:"md",onClick:o[5]||(o[5]=e=>r.abrirModal("Destino"))},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,null,{default:(0,a.withCtx)((()=>[ve])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0)])),_:1}),(0,a.createVNode)(g,{class:"col-12 no-border q-mx-none q-pa-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(v,{class:"q-pa-none"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{caption:""},{default:(0,a.withCtx)((()=>[ge])),_:1}),(0,a.createVNode)(C,{class:"q-my-xs"}),((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(i.documentoItens,((e,o)=>((0,a.openBlock)(),(0,a.createBlock)("div",{key:o},[1===e.operacaoFator?((0,a.openBlock)(),(0,a.createBlock)(f,{key:0,caption:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)("div",Ne,[(0,a.createVNode)("div",xe,(0,a.toDisplayString)(e.codigoItem||"-"),1),(0,a.createVNode)("div",we,(0,a.toDisplayString)(e.descricaoItem||"-"),1),(0,a.createVNode)("div",be,[(0,a.createVNode)(u,{modelValue:e.quantidade,"onUpdate:modelValue":o=>e.quantidade=o,somenteLeitura:"Finalizado"===i.documento.status,decimals:"4",tipo:"decimal",onBlur:o=>r.recalcularTotal(e)},null,8,["modelValue","onUpdate:modelValue","somenteLeitura","onBlur"])]),(0,a.createVNode)("div",qe,[(0,a.createVNode)(u,{modelValue:e.valorItem,"onUpdate:modelValue":o=>e.valorItem=o,somenteLeitura:"Finalizado"===i.documento.status,class:"col",decimals:"4",tipo:"decimal"},null,8,["modelValue","onUpdate:modelValue","somenteLeitura"]),(0,a.createVNode)(u,{modelValue:e.valorCustoMedio,"onUpdate:modelValue":o=>e.valorCustoMedio=o,class:"col",decimals:"4",disable:"",tipo:"decimal"},null,8,["modelValue","onUpdate:modelValue"])]),(0,a.createVNode)("div",ye,[(0,a.createVNode)(u,{modelValue:e.subTotal,"onUpdate:modelValue":o=>e.subTotal=o,somenteLeitura:"Finalizado"===i.documento.status,decimals:"4",tipo:"decimal",onBlur:o=>r.recalcularQuantidade(e)},null,8,["modelValue","onUpdate:modelValue","somenteLeitura","onBlur"])]),"Digitação"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)("div",ke,[(0,a.createVNode)(s,{dense:"",flat:"",icon:"delete",round:"",size:"md",onClick:o=>r.excluirItem(e.id)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,null,{default:(0,a.withCtx)((()=>[_e])),_:1})])),_:2},1032,["onClick"])])):(0,a.createCommentVNode)("",!0)])])),_:2},1024)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(C,{class:"q-my-xs"}),(0,a.createVNode)(f,{caption:""})])))),128))])),_:1})])),_:1}),(0,a.createVNode)(f,{caption:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)("div",Ie,[De,ze,Be,Te,(0,a.createVNode)("div",Ee,(0,a.toDisplayString)(e.$filters.numero(i.totalDestino,2)),1),Ze])])),_:1}),(0,a.createVNode)(v,{class:"text-center"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,{class:"q-mx-auto",color:"positive",icon:"add",label:"Adicionar item",outline:"",size:"xs",onClick:o[6]||(o[6]=e=>r.abrirModal("Destino"))})])),_:1})])),_:1})])),_:1})])]),(0,a.createVNode)(N,{modelValue:i.adicionar.modal.value,"onUpdate:modelValue":o[7]||(o[7]=e=>i.adicionar.modal.value=e),filtro:{ativo:!0,idEmpresa:i.campos.empresa.idContato},ref:"promptItem",habilitarQuantidade:!0,onSelecionarItens:r.selecionarItens},null,8,["modelValue","filtro","onSelecionarItens"]),(0,a.createVNode)(x,{modelValue:i.modalContatoEmpresa.visivel,"onUpdate:modelValue":o[8]||(o[8]=e=>i.modalContatoEmpresa.visivel=e),filtro:{ativo:!0,empresas:!0},placeholder:"Seleciona a empresa",onSelecionar:r.selecionarEmpresa},null,8,["modelValue","onSelecionar"]),(0,a.createVNode)(w,{ref:"modalComposicao",onAdicionarComposicao:r.adicionarComposicao},null,8,["onAdicionarComposicao"])])),_:1}),(0,a.createVNode)(q,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{class:"footer",style:{background:"#eeeeee !important"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{class:"text-right"},{default:(0,a.withCtx)((()=>[(0,a.withDirectives)((0,a.createVNode)(s,{class:"q-mx-md",color:"negative",flat:"",label:"Cancelar",onClick:o[9]||(o[9]=o=>e.$emit("atualizar"))},null,512),[[_]]),"Finalizado"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,color:"primary",label:"Reabrir",onClick:r.reabrir},null,8,["onClick"])):(0,a.createCommentVNode)("",!0),"Digitação"===i.documento.status?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,color:"primary",label:"Finalizar",onClick:r.finalizar},null,8,["onClick"])):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","onShow","onHide"])};const eo=Oe;A()(Oe,"components",{QDialog:E.Z,QLayout:Z.Z,QHeader:Q.Z,QToolbar:F.Z,QBtn:S.Z,QToolbarTitle:M.Z,QPageContainer:Re.Z,QCard:je.Z,QItemLabel:We.Z,QIcon:Xe.Z,QTooltip:Ge.Z,QList:Je.Z,QItem:Ke.Z,QSeparator:Ye.Z,QFooter:U.Z}),A()(Oe,"directives",{ClosePopup:$.Z});var oo=t(88603);const to={components:{Badge:I.Z,ItensManipulacao:eo,ModalExcluir:P},data:()=>({paginacao:{atual:1,minimo:1,maximo:1,total:1,limite:25},filtros:{tab:"digitacao",empresa:{selecionada:"",opcoes:[]},periodo:{emissao:{ini:"",fim:""},finalizado:{ini:"",fim:""}}},documentos:[],tabs:[{rotulo:"Digitação",value:"digitacao"},{rotulo:"Finalizados",value:"finalizado"},{rotulo:"Todos",value:"Todos"}],confirm:!1,currentId:null,documentoItens:null,showsectionm:!1,buscaCampo:"",checkboxModel:[],carregando:!1,contatosEmpresa:[],dados:{},erroEmpresas:!1,erroPeriodo:!1,modalManipulacao:!1}),watch:{showFilters:function(e){!0===e?this.showList=!1:!0!==this.section&&!0!==this.kanban&&!0!==this.gantt||(this.showList=!0)}},methods:{trocarTab(e){this.paginacao.atual=1,this.filtros.tab=e,this.atualizar()},async atualizar(){console.log(this.filtros.tab);try{this.$q.loading.show();const e=this.paginacao.limite,o=this.paginacao.atual,t="descricao";let a="";"digitacao"===this.filtros.tab?a="Digitação":"finalizado"===this.filtros.tab&&(a="Finalizado");let l=this.filtros.empresa.selecionada.value||"";this.filtros.idEmpresa=l;let i={};if(this.buscaCampo);else{let l=this.$utils.eliminarVazios(this.filtros);l.status=a,i=await this.filtrarCampos(l,e,o,t)}this.documentos=i.data,console.log(i),this.paginacao.total=i.total,this.paginacao.maximo=i.totalPages}catch(e){this.$q.notifyError("Erro iniciar",e)}finally{this.$q.loading.hide()}},filtrarCampos:async(e,o,t,a)=>(console.log({filtros:e}),Pe.db.itemManipulacao.leRefatorado({filtros:e,limit:o,page:t,sort:a})),async showDetails(e){let o=await Pe.db.itemManipulacao.leItens({idDocumento:e.id});e.documentoItens=o,e.showPreviewDetail=!e.showPreviewDetail},async editarManipulacao(e){this.$refs.itensManipulacao.visibilidade.modal=!0,await this.$refs.itensManipulacao.atualizar(e)},async adicionarManipulacaoItens(){this.$refs.itensManipulacao.visibilidade.modal=!0,await this.$refs.itensManipulacao.atualizar()},async excluirDocumento(){await Pe.db.itemManipulacao.remove(this.currentId),this.atualizar()},async filtrar(e=1){this.buscaCampo="";const o=(e-1)*this.pageSize;this.documentos.status="digitacao";let t=await Pe.db.itemManipulacao.le({periodoEmissao:{ini:this.filtro.periodo.emissao.ini,fim:this.filtro.periodo.emissao.fim},periodoFinalizado:{ini:this.filtro.periodo.finalizado.ini,fim:this.filtro.periodo.finalizado.fim},status:this.page.ativa,idEmpresa:this.filtro.empresas.selected,offset:o,limit:this.pageSize});this.documentos=t[0].map((e=>({...e,showPreviewDetail:!1,documentoItens:[]}))),this.documentos=(0,oo.orderBy)(this.documentos,["dataHoraFinalizado","dataHoraEmissao"],["desc","desc"]);let a=t[1];this.page.digitacao.max=Math.ceil(a/this.pageSize),this.page.finalizado.max=Math.ceil(a/this.pageSize)},getPage(e){this.page.ativa=e,this.filtrar()},excluir(e){this.currentId=e,this.$refs.modalExcluir.modal.visivel=!0},async buscar(){setTimeout((async()=>{let e=(await Pe.db.item.ler({filtros:{termoBusca:this.buscaCampo}})).data,o=[],t=[];for(let t of e)o=await Pe.db.itemManipulacao.leItens({idItem:t.id});for(let e of o){console.log("doc");let o=await Pe.db.itemManipulacao.le({id:e.idDocumento});t.push(o)}this.documentos=t.map((e=>({...e,showPreviewDetail:!1,documentoItens:[]})))}),1500)},abrirFiltro(){!0===this.section||!0===this.kanban||!0===this.gantt?this.left=!0:this.left=!1,this.showFilters=!this.showFilters},async empresaOpcoesCarregar(){console.log("carregar empresas"),this.filtros.empresa.opcoes=(await Pe.db.empresa.le()).map((e=>({rotulo:e.nome,valor:e.id})))},carregaComponent(e){this.showFilters=!1,"list"===e&&(this.left=!1,this.section=!1,this.showList=!1,this.list=!0,this.kanban=!1,this.gantt=!1,this.ganttL=!1,this.kanbanL=!1)}},created(){this.atualizar()}};var ao=t(24515),lo=t(27763),io=t(86952),ro=t(16078),so=t(38837),co=t(60880),no=t(54707),mo=t(6427),uo=t(95277),po=t(40320);to.render=function(e,o,t,_,I,D){const z=(0,a.resolveComponent)("q-btn-group"),B=(0,a.resolveComponent)("q-input"),T=(0,a.resolveComponent)("q-toolbar-title"),E=(0,a.resolveComponent)("q-tooltip"),Z=(0,a.resolveComponent)("q-btn"),Q=(0,a.resolveComponent)("q-toolbar"),F=(0,a.resolveComponent)("q-tab"),M=(0,a.resolveComponent)("q-tabs"),S=(0,a.resolveComponent)("q-separator"),U=(0,a.resolveComponent)("badge"),$=(0,a.resolveComponent)("q-item-section"),L=(0,a.resolveComponent)("q-item-label"),A=(0,a.resolveComponent)("q-icon"),P=(0,a.resolveComponent)("q-item-labe"),H=(0,a.resolveComponent)("q-item"),O=(0,a.resolveComponent)("q-list"),R=(0,a.resolveComponent)("q-menu"),j=(0,a.resolveComponent)("q-page"),W=(0,a.resolveComponent)("q-pagination"),X=(0,a.resolveComponent)("q-footer"),G=(0,a.resolveComponent)("campo"),J=(0,a.resolveComponent)("q-select"),K=(0,a.resolveComponent)("q-drawer"),Y=(0,a.resolveComponent)("ItensManipulacao"),ee=(0,a.resolveComponent)("ModalExcluir"),oe=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createBlock)("div",l,[(0,a.createVNode)(j,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(Q,{class:"bg-primary text-white "},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(z,{class:"no-shadow"},{default:(0,a.withCtx)((()=>[i])),_:1}),(0,a.createVNode)(T,{class:"q-py-sm"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(B,{ref:"buscaCampo",modelValue:I.buscaCampo,"onUpdate:modelValue":[o[1]||(o[1]=e=>I.buscaCampo=e),D.buscar],debounce:500,color:"none",dark:"",filled:"",placeholder:"Buscar",style:{"max-width":"990px",margin:"0 auto"}},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.createVNode)(Z,{class:"hideonmobile",dense:"",flat:"",icon:"add",round:"",onClick:D.adicionarManipulacaoItens},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(E,null,{default:(0,a.withCtx)((()=>[r])),_:1})])),_:1},8,["onClick"]),(0,a.createVNode)(Z,{class:"no-shadow q-px-xs",dense:"",flat:"",icon:"mdi-filter",round:"",onClick:D.abrirFiltro},null,8,["onClick"])])),_:1}),(0,a.createVNode)(M,{modelValue:I.filtros.tab,"onUpdate:modelValue":o[2]||(o[2]=e=>I.filtros.tab=e),align:"left",class:"text-primary",dense:""},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(I.tabs,(e=>((0,a.openBlock)(),(0,a.createBlock)(F,{key:e.value,label:e.rotulo,name:e.value,onClick:o=>D.trocarTab(e.value)},null,8,["label","name","onClick"])))),128))])),_:1},8,["modelValue"]),(0,a.createVNode)(S),((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(I.documentos,(o=>((0,a.openBlock)(),(0,a.createBlock)(O,{key:o.id,class:"q-py-none qListaItems",style:{border:"none !important"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(H,{class:"items-center d-flex"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)($,{avatar:"",center:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)("div",s,[(0,a.createVNode)(U,{class:"q-mr-sm",cor:"positive",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" #"+(0,a.toDisplayString)(o.codigoDocumento),1)])),_:2},1024)])])),_:2},1024),(0,a.createVNode)($,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(L,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.descricaoEmpresa),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)($,{caption:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(P,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(A,{class:"text-tertiary",name:"event"}),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$filters.data(o.dataHoraEmissao)),1)])),_:2},1024),(0,a.createVNode)(E,null,{default:(0,a.withCtx)((()=>[d])),_:1})])),_:2},1024),(0,a.createVNode)($,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,{class:"q-mr-sm",cor:"warning",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.status),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)($,{avatar:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(U,{class:"q-mr-sm",cor:"primary",escuro:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.operacao),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)($,{side:"",top:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)("div",c,[(0,a.createVNode)(Z,{icon:o.showPreviewDetail?"keyboard_arrow_up":"keyboard_arrow_down",class:"buttons",color:"tertiary",dense:"",flat:"",round:"",size:"md",onClick:e=>D.showDetails(o)},null,8,["icon","onClick"]),(0,a.createVNode)(Z,{class:"buttons",color:"tertiary",dense:"",flat:"",icon:"edit",round:"",size:"md",onClick:e=>D.editarManipulacao(o.id)},null,8,["onClick"]),(0,a.createVNode)(Z,{class:"buttons",color:"tertiary",dense:"",flat:"",icon:"delete",round:"",size:"md",onClick:e=>D.excluir(o.id)},null,8,["onClick"]),(0,a.createVNode)(Z,{class:"morevert",dense:"",flat:"",icon:"more_vert",round:"",size:"md"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(R,null,{default:(0,a.withCtx)((()=>[(0,a.withDirectives)((0,a.createVNode)(O,{class:"q-py-none",link:"","no-border":"",separator:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(H,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)($,{onClick:e=>D.editarManipulacao(o.id)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(A,{name:"edit",size:"sm"}),(0,a.createVNode)(L,{caption:""},{default:(0,a.withCtx)((()=>[n])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1536),[[oe]])])),_:2},1024)])),_:2},1024)])])),_:2},1024)])),_:2},1024),o.showPreviewDetail?((0,a.openBlock)(),(0,a.createBlock)(H,{key:0,class:" q-pa-md"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)($,null,{default:(0,a.withCtx)((()=>[m,((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(o.documentoItens,(e=>((0,a.openBlock)(),(0,a.createBlock)("div",{key:e.id},[-1===e.operacaoFator?((0,a.openBlock)(),(0,a.createBlock)($,{key:0,stamp:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.quantidade)+" "+(0,a.toDisplayString)(e.unidade)+" - "+(0,a.toDisplayString)(e.descricaoItem),1)])),_:2},1024)):(0,a.createCommentVNode)("",!0)])))),128))])),_:2},1024),(0,a.createVNode)(L,null,{default:(0,a.withCtx)((()=>[u,((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(o.documentoItens,(e=>((0,a.openBlock)(),(0,a.createBlock)("div",{key:e.id},[1===e.operacaoFator?((0,a.openBlock)(),(0,a.createBlock)($,{key:0,stamp:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.quantidade)+" "+(0,a.toDisplayString)(e.unidade)+" - "+(0,a.toDisplayString)(e.descricaoItem),1)])),_:2},1024)):(0,a.createCommentVNode)("",!0)])))),128))])),_:2},1024)])),_:2},1024)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(S)])),_:2},1024)))),128)),(0,a.createVNode)("div",p,[(0,a.createVNode)(Z,{class:"fixed hideondesktop",color:"primary",icon:"add",round:"",size:"lg",style:{right:"18px",bottom:"18px"},onClick:D.adicionarManipulacaoItens},null,8,["onClick"])])])),_:1}),(0,a.createVNode)(X,{class:"bg-light no-shadow q-pa-none text-right  col-12 col-lg-9 footerpaginacao bg-white",reveal:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)("div",h,[(0,a.createVNode)(W,{modelValue:I.paginacao.atual,"onUpdate:modelValue":[o[3]||(o[3]=e=>I.paginacao.atual=e),D.atualizar],input:"true",min:I.paginacao.minimo,max:I.paginacao.maximo},null,8,["modelValue","min","max","onUpdate:modelValue"])])])),_:1}),(0,a.createVNode)(K,{id:"mydrawer",modelValue:e.showFilters,"onUpdate:modelValue":o[12]||(o[12]=o=>e.showFilters=o),side:e.left?"left":"right","content-class":"mydrawerFL",style:e.showFilters?{opacity:1}:{opacity:0}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(Q,{color:"white","text-color":"tertiary"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(A,{color:"tertiary",name:"mdi-filter"}),(0,a.createVNode)(T,{class:"text-subtitle1"},{default:(0,a.withCtx)((()=>[V])),_:1}),(0,a.createVNode)(Z,{dense:"",flat:"",icon:"close",round:"",onClick:o[4]||(o[4]=o=>e.showFilters=!e.showFilters)})])),_:1}),(0,a.createVNode)("div",f,[(0,a.createVNode)("div",{class:"col-12 q-px-sm",onClick:o[6]||(o[6]=(...e)=>D.empresaOpcoesCarregar&&D.empresaOpcoesCarregar(...e))},[(0,a.createVNode)(G,{modelValue:I.filtros.empresa.selecionada,"onUpdate:modelValue":o[5]||(o[5]=e=>I.filtros.empresa.selecionada=e),opcoes:I.filtros.empresa.opcoes,rotulo:"Por Empresa",tipo:"seletor"},null,8,["modelValue","opcoes"])]),(0,a.createVNode)("div",C,[v,(0,a.createVNode)("div",g,[(0,a.createVNode)(G,{modelValue:I.filtros.periodo.emissao.ini,"onUpdate:modelValue":o[7]||(o[7]=e=>I.filtros.periodo.emissao.ini=e),after:[{icon:"mdi-close-circle",handler(){I.filtros.periodo.emissao.ini=""}}],class:"no-shadow full-width",rotulo:"De",tipo:"data"},null,8,["modelValue","after"])]),(0,a.createVNode)("div",N,[(0,a.createVNode)(G,{modelValue:I.filtros.periodo.emissao.fim,"onUpdate:modelValue":o[8]||(o[8]=e=>I.filtros.periodo.emissao.fim=e),after:[{icon:"mdi-close-circle",handler(){I.filtros.periodo.emissao.fim=""}}],class:"no-shadow full-width",rotulo:"até",tipo:"data"},null,8,["modelValue","after"])])]),(0,a.createVNode)("div",x,[w,(0,a.createVNode)("div",b,[(0,a.createVNode)(G,{modelValue:I.filtros.periodo.finalizado.ini,"onUpdate:modelValue":o[9]||(o[9]=e=>I.filtros.periodo.finalizado.ini=e),after:[{icon:"mdi-close-circle",handler(){e.filtro.periodo.finalizado.ini=""}}],class:"no-shadow full-width",rotulo:"De",tipo:"data"},null,8,["modelValue","after"])]),(0,a.createVNode)("div",q,[(0,a.createVNode)(G,{modelValue:I.filtros.periodo.finalizado.fim,"onUpdate:modelValue":o[10]||(o[10]=e=>I.filtros.periodo.finalizado.fim=e),after:[{icon:"mdi-close-circle",handler(){e.filtro.periodo.finalizado.fim=""}}],class:"no-shadow full-width",rotulo:"até",tipo:"data"},null,8,["modelValue","after"])])]),(0,a.createVNode)("div",y,[(0,a.createVNode)(J,{modelValue:I.paginacao.limite,"onUpdate:modelValue":o[11]||(o[11]=e=>I.paginacao.limite=e),options:[10,25,50,100],placeholder:"Quantidade por página"},null,8,["modelValue"])]),(0,a.createVNode)("div",k,[(0,a.createVNode)(Z,{class:"col-12 ",color:"primary",label:"Aplicar",onClick:D.atualizar},null,8,["onClick"])])])])),_:1},8,["modelValue","side","style"]),(0,a.createVNode)(Y,{ref:"itensManipulacao",onAtualizar:D.atualizar},null,8,["onAtualizar"]),(0,a.createVNode)(ee,{ref:"modalExcluir",onExcluir:D.excluirDocumento},null,8,["onExcluir"])])};const ho=to;A()(to,"components",{QPage:ao.Z,QToolbar:F.Z,QBtnGroup:lo.Z,QToolbarTitle:M.Z,QInput:io.Z,QBtn:S.Z,QTooltip:Ge.Z,QTabs:ro.Z,QTab:so.Z,QSeparator:Ye.Z,QList:Je.Z,QItem:Ke.Z,QItemSection:co.Z,QItemLabel:We.Z,QIcon:Xe.Z,QMenu:no.Z,QFooter:U.Z,QPagination:mo.Z,QDrawer:uo.Z,QSelect:po.Z}),A()(to,"directives",{ClosePopup:$.Z})}}]);